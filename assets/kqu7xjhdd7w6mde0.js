import{h9 as b,fG as v,aH as _,ce as C,nX as F,V as T,nY as q}from"./hml6mmd5fyx85si7.js";import{bs as w,bt as A,bu as x}from"./rseqzngxzbdt1oxg.js";import{r as i,u as P}from"./lu2xqwqmjc95q6j6.js";const c=5*60*1e3,Q=30*1e3;function M(l,y,m,f,h){const s=i.useContext(b)?.serverSharedThreadId,r=w(m),p=i.useMemo(()=>({asset_pointer:r,content_type:v.ArbitraryAssetPointer}),[r]),o=A(),{isUnauthenticated:E}=_(),n=C(y),t=x.makeQueryOptions({asset:p,sharedThreadId:s,postId:o,gizmoId:void 0,isUnauthenticated:E,conversationId:s?void 0:n}),a=F(),I=!!(l&&(n||s||o)&&r&&t.enabled),u=t.queryFn;if(typeof u=="symbol")throw Error("Unexpected symbol query fn...");return P({queryKey:t.queryKey,queryFn:async g=>{try{const e=await u(g);return f?.(e.url),{status:"success",download_url:e.url}}catch(e){T.addError(e);let d=a("default_download_link_error",{fileName:r});throw e instanceof q&&e.code!=null&&(d=a(e.code)),h?.(d),e}},enabled:I,staleTime:c,gcTime:Q,refetchInterval:c,refetchOnWindowFocus:!0})}export{M as u};
//# sourceMappingURL=kqu7xjhdd7w6mde0.js.map
