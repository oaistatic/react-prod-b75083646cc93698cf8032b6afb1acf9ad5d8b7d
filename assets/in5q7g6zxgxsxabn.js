import{R as j,e as v,u as I,r as a,d as P,j as e,M as p,m as w}from"./lu2xqwqmjc95q6j6.js";import{b5 as A,bg as B,V as L,C as F,bz as T,dH as U,B as k,d as O,R as q}from"./hml6mmd5fyx85si7.js";import{u as H}from"./i4sx5w9qnb2pqgar.js";import{b4 as G,aK as K,b5 as S,aL as W,q as X}from"./rseqzngxzbdt1oxg.js";import{S as z}from"./hd0ljielxah53i92.js";import{u as V}from"./fibktxptqydbr54o.js";import"./m68celnbq0esehhj.js";const Q="https://help.openai.com/en/articles/11481834",J={USD:4,EUR:4,GBP:4,INR:340},re=({onClose:n})=>{const[g,b]=j.useState(2500),[r,o]=j.useState(!1),{prepareCheckoutSession:d,navigateToCheckout:x}=H(),c=A(),{initialBillingDetails:C}=V(c,!0),m=c?.mustGetSubscriptionBillingCurrency("CreditPurchaseModal")??"USD",D=J[m],t=B(),i=v(),{data:l}=I({queryKey:["creditPurchaseRateCard"],queryFn:()=>q.safeGet("/subscriptions/credit-purchase-rate-card"),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),E=a.useCallback(async()=>{if(!r){o(!0);try{const s=c?.id;if(!s)throw new Error("No account_id found");const N=await d({credit_purchase_data:{quantity:g,unit:"credit",account_id:s},billing_details:C});await x(N)}catch(s){L.addError(s),t.warning(i.formatMessage(u.paymentErrorWarning),{hasCloseButton:!0})}finally{o(!1)}}},[C,i,r,x,g,d,t,c]),y=G(g,300),R=s=>!l||!l[s].price?"N/A":Math.round(y/parseFloat(l[s].price)).toLocaleString();return e.jsxs(F,{isOpen:!0,onClose:n,type:"success",size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(T.Header,{title:e.jsx(p,{...u.title})}),e.jsxs("div",{className:"flex flex-col px-6",children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(p,{...u.description,values:{link:s=>e.jsx(U,{href:Q,target:"_blank",children:s})}})}),e.jsx("div",{className:"mt-6",children:e.jsx(Y,{minCredits:500,maxCredits:1e5,increment:250,centsPerCredit:D,currency:m,numCredits:g,setNumCredits:b})}),l&&e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-token-bg-tertiary text-token-text-secondary mt-4 flex w-full gap-2 rounded-lg p-3 text-sm",children:[e.jsx(z,{}),e.jsx(p,{...u.amountToAddDescription,values:{deepResearchCount:R("deep_research_completion"),gpt5proChatCount:R("chat_completion_5_pro"),imagegenCount:R("chat_tool_imagegen")}})]})]}),e.jsx(T.Actions,{className:"sm:p-2 md:p-6",secondaryButton:e.jsx(k,{disabled:r,onClick:n,color:"secondary",children:e.jsx(p,{...u.cancel})}),primaryButton:e.jsx(k,{loading:r,onClick:()=>E(),color:"primary",children:e.jsx(p,{...u.next})})})]})};function Y({numCredits:n,minCredits:h,maxCredits:f,increment:M,centsPerCredit:_,currency:g,setNumCredits:b}){const r=a.useRef(null);a.useEffect(()=>{r.current?.focus()},[r]);const o=a.useRef(null),d=a.useRef(0),x=a.useCallback(t=>{b(i=>K(i+t,h,f))},[f,h,b]),c=a.useCallback(t=>{const y=300-t*50;return y>25?y:25},[]),C=a.useCallback(t=>{x(t),d.current=0;const i=()=>{d.current+=1,x(t);const l=c(d.current);o.current=setTimeout(i,l)};o.current=setTimeout(i,c(d.current))},[x,c]),m=a.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),D=n*_/100;return e.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[e.jsx("label",{className:"mb-1 flex text-base font-medium",htmlFor:"Credits",children:e.jsx(p,{...u.amountToAdd})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("span",{className:"text-token-text-secondary pointer-events-none absolute end-3 top-1/2 -translate-y-1/2 text-sm",children:e.jsx(p,{...u.numCredits,values:{numCredits:n}})}),e.jsx("input",{ref:r,name:"Credits",value:D.toLocaleString("en-US",{style:"currency",currency:g,maximumFractionDigits:2}),disabled:!0,autoFocus:!0,tabIndex:0,className:"bg-token-bg-primary text-token-text-primary m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{disabled:n<=h,onMouseDown:()=>C(-M),onMouseUp:m,onMouseLeave:m,children:e.jsx(W,{className:O("icon",n<=h&&"text-token-text-tertiary")})}),e.jsx(S,{disabled:n>=f,onMouseDown:()=>C(M),onMouseUp:m,onMouseLeave:m,children:e.jsx(X,{className:"icon"})})]})]})]})}const u=P({title:{id:"components.business.CreditPurchaseModal.title",defaultMessage:"Buy more credits for your team"},description:{id:"components.business.CreditPurchaseModal.description",defaultMessage:"Give your team continued access to advanced features after hitting plan limits. Credits valid for 12 months. <link>View rate card</link>."},amountToAdd:{id:"components.business.CreditPurchaseModal.amountToAdd",defaultMessage:"Amount to add"},amountToAddDescription:{id:"components.business.CreditPurchaseModal.amountToAddDescription",defaultMessage:"Equal to {deepResearchCount} deep research tasks, {gpt5proChatCount} GPT-5 pro messages, or {imagegenCount} imagegen messages."},numCredits:{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}"},paymentErrorWarning:{id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},cancel:{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"},next:{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"}});export{re as CreditPurchaseModal,Y as CreditSelectorButtons};
//# sourceMappingURL=in5q7g6zxgxsxabn.js.map
