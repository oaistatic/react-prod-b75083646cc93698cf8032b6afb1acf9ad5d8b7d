import{r as _,e as q,j as s,M as I,v as ve,c as k,a as je,L as ye}from"./lu2xqwqmjc95q6j6.js";import{ay as Ie,cd as be,pB as Ce,bg as ae,ok as Se,oj as _e,ga as W,ol as Fe,lM as Ne,cX as z,P as se,an as Te,j1 as K,al as we,pC as J,pD as V,k8 as Ee,am as Me,bz as Y,C as le,pE as Pe,eG as De,a as B,q as ce,cE as de,B as ze,c4 as Q,hv as Re,d as X,aS as ke,aT as Ae,l as Oe,cB as Le,bw as oe,G as Ue,aN as Ge,c as Be,eU as He,iH as $e}from"./hml6mmd5fyx85si7.js";import{gO as ue,hA as We,gp as Xe,hB as qe,cF as re,hC as Qe,gT as v,gx as Ze,gq as Ke,hD as ee,cL as Ye,hE as Je,hF as Ve,hG as et,hH as tt,hI as st,hd as nt,hJ as ot,hK as rt,hL as me,ae as it,ad as at,c_ as lt,cZ as ct,hM as dt,hN as ut,hO as mt,hP as xt,hQ as pt,hR as gt,hf as ht,gR as ft,hS as vt}from"./rseqzngxzbdt1oxg.js";import{g as jt,D as te}from"./cqyjjngibokvfw83.js";import{u as yt}from"./ogr5nmy9hq7gfgq0.js";import{P as It}from"./iq82wz84d1fxj03i.js";import"./elolu96rnfzqcgif.js";import"./kcqshnk26ykm1u4n.js";import"./fibktxptqydbr54o.js";import"./6a3e5rtr9pyzi31y.js";import"./ik8y7nlve9mzjttb.js";import"./isxemcalu9537a8n.js";import"./ejklrllfl9wcn2za.js";const xe=Ie.div`text-sm text-red-500`,bt=5,Ct=20,St=40,_t=c=>{switch(c){case z.FREE:return bt;case z.GO:case z.PLUS:case z.EDUCATION:case z.QUORUM:case z.DEPRECATED_ENTERPRISE:case z.DEPRECATED_EDU:return Ct;case z.PRO:case z.TEAM:case z.BUSINESS:return St}};function pe({onClose:c,gizmo:e}){const t=q(),[o,l]=_.useState(e?.gizmo?.instructions||""),r=ue(),n=ae(),d=[];o?.length>ee&&d.push(t.formatMessage(v.instructionsTooLong,{length:ee}));const a=i=>{l(i.target.value)},u=()=>{c()},m=async()=>{try{await r.mutateAsync({update:{instructions:o??""},id:e.gizmo.id}),c()}catch(i){const g=De(i);n.danger(g??"Error",{duration:2,toastId:"custom_instructions_modal_save_error"})}},x=s.jsx(Y.Button,{title:t.formatMessage(v.save),color:"primary",onClick:m,loading:r.isPending,disabled:d.length>0}),h=s.jsx(Y.Button,{title:t.formatMessage(v.cancel),color:"secondary",onClick:u,disabled:r.isPending}),{canEdit:p}=W(e);return s.jsx(le,{testId:"modal-project-custom-instructions",className:"min-h-[50dvh] max-w-[820px]",isOpen:!0,showCloseButton:!r.isPending,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",title:s.jsx("div",{className:"h-8",children:t.formatMessage(v.editCustomInstructionsTitle)}),onClose:()=>{r.isPending||c()},children:s.jsxs("div",{className:"flex h-full flex-col px-4 pt-0 pb-4",children:[s.jsx("div",{className:"text-sm font-medium",children:t.formatMessage(p?v.editCustomInstructionsSubtitle:v.readOnlyCustomInstructionsTitle)}),s.jsx("div",{className:"text-token-text-secondary text-sm",children:t.formatMessage(p?v.editCustomInstructionsDescription:v.readOnlyCustomInstructionsDescription)}),s.jsx("textarea",{autoFocus:!0,placeholder:t.formatMessage(v.projectInstructionsPlaceholder),className:"focus:ring-token-text-primary border-heavy mt-4 mb-1 min-h-24 w-full grow resize-none overflow-x-clip overflow-y-auto rounded-lg border bg-transparent px-3 py-2 focus:ring-2",name:"instructions",onChange:a,value:o,disabled:r.isPending||!p}),d.map(i=>s.jsx(xe,{className:"mt-1",children:i},i)),p&&s.jsx(Y.Actions,{primaryButton:x,secondaryButton:h})]})})}function Ft({gizmoId:c,gizmoName:e,canEdit:t,gizmoEditorData:o,openFileDialog:l,pendingFiles:r,setVersion:n,pendingFileUpsertMutationsRef:d,currentModelConfig:a}){const u=o?.files??[],m=Array.from(r.current.values()).filter(i=>u.every(g=>g.file_id!==i.fileId)),x=m.filter(i=>a!=null&&J(a,i.file.type,i.file.name)===V.CodeInterpreter),h=u.filter(i=>a!=null&&i.type!=null&&J(a,i.type,i.name)===V.CodeInterpreter),p=[...x.map(i=>i.tempId),...h.map(i=>i.file_id)];return s.jsx(Ve,{gizmoId:c,gizmoName:e,canEdit:t,pendingFiles:m,pendingFileUpsertMutationsRef:d,files:u,interpreterOnlyFileIds:p,onAddFiles:l,removePendingFile:i=>{r.current.delete(i),n(g=>g+1)}})}const Nt=_.forwardRef(function({gizmo:e,accountPlanType:t,showInstructions:o=!0},l){const r=_t(t),n=q(),[d,a]=_.useState(!1),u=ue(),m=We(e),x=Xe(m),{data:h}=be(),p=h?.models.get(Ce)??(h&&qe(h.models.values(),O=>O.tags.includes(Pe.GPT_4o))),i=ae(),[g,j]=_.useState(0),f=_.useRef(new Map),y=_.useRef([]),b=Se(p,void 0),F=O=>{O.some(({errors:L})=>L.length!==1||L[0]?.code!==re.TooManyFiles)?i.danger(v.unknownError,{duration:2,toastId:"snorlax_handle_file_rejected"}):i.danger(n.formatMessage(v.dragTooManyFilesError,{maxFileLimit:r}),{duration:2,toastId:"snorlax_handle_file_rejected",loggingTitle:"drag_too_many_files_error"})},N=async O=>{se.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const L=m.id;O.length>0&&await Promise.all(O.map(U=>{const Z=Te(U);f.current.set(Z,{tempId:Z,gizmoId:L,file:U,status:K.Uploading,progress:1,fileId:null,cdnUrl:null}),we(Z,U,n,i,{kind:Me.Gizmo,gizmoId:L},{onFileUploaded:async(P,A,H,G)=>{const R=f.current.get(P);R?.fileId&&R?.fileId&&(y.current.push({id:e.gizmo.id,mutationId:ve(),update:$=>{if(!R.fileId)return $;const fe=[...$.files??[],{file_id:R.fileId,name:R.file.name,size:R.file.size,type:G?.mimeType??Ee(R.file),last_modified:R.file.lastModified,file_size_tokens:G?.fileTokenSize}];return{...$,files:fe}},onSuccess:()=>{f.current.delete(P),j($=>$+1)}}),Je(e.gizmo.id)({gizmoId:e.gizmo.id,upsertProjectMutation:u,pendingFileUpsertMutationsRef:y}))},onFileCreated:(P,A,H)=>{f.current.set(P,{tempId:P,gizmoId:L,file:U,status:K.Uploading,progress:1,...f.current.get(P),fileId:A,cdnUrl:H}),j(G=>G+1)},onFileUploadProgress:(P,A)=>{const H=f.current.get(P);H?.status===K.Uploading&&f.current.set(P,{...H,progress:A>95?95:A}),j(G=>G+1)},onError:P=>{f.current.delete(P),j(A=>A+1)}},{usesRetrievalIndex:p!=null&&J(p,U.type,U.name)===V.Retrieval})}))},C=_e(b),S=jt(C),w=f.current.size+m.files.length,{canEdit:M}=W(e),{open:E,getInputProps:D,getRootProps:T,isDragAccept:ge,isDragReject:he}=yt({noClick:!0,noKeyboard:!0,noDragEventsBubbling:!0,onDropAccepted:N,onDropRejected:F,multiple:!0,maxSize:Fe,maxFiles:r-w,validator:()=>w>=r?{code:re.TooManyFiles,message:"Too many files"}:null,...C});return _.useImperativeHandle(l,()=>({openFileDialog:E})),s.jsxs("div",{...T({className:"h-full px-4"}),children:[s.jsx("input",{...D()}),o&&s.jsxs(Qe,{children:[s.jsx("button",{className:"w-full",onClick:()=>a(!0),children:s.jsx("div",{className:"border-token-border-default w-full rounded-lg border text-start text-sm",children:m?.instructions?.length?s.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:m.instructions}):s.jsxs("div",{className:"text-token-text-secondary flex h-full w-full items-center px-4 py-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx(I,{...v.addCustomInstructions})}),s.jsx(Ze,{className:"icon-sm"})]})})}),x.includes(Ke.GizmoInstructionsTooLong)?s.jsx(xe,{className:"mt-1",children:s.jsx(I,{...v.instructionsTooLong,values:{length:ee}})}):null]}),d&&s.jsx(pe,{gizmo:e,onClose:()=>{a(!1)}}),s.jsx(Ft,{gizmoId:e.gizmo.id,gizmoName:e.gizmo.display.name,canEdit:M,gizmoEditorData:m,openFileDialog:E,pendingFiles:f,pendingFileUpsertMutationsRef:y,setVersion:j,currentModelConfig:p}),ge&&s.jsxs(te,{children:[s.jsx(Ye,{}),s.jsx("h3",{children:s.jsx(I,{...v.dragInstructions})}),s.jsx("h4",{className:"w-2/3 text-center",children:S.length>0?S.join(", "):s.jsx(I,{...v.dragAllAccepted})})]}),he&&s.jsxs(te,{children:[s.jsx(Ne,{className:"icon-2xl"}),s.jsx("h3",{children:s.jsx(I,{...v.dragTooManyFiles})}),s.jsx("h4",{className:"w-2/3 text-center",children:s.jsx(I,{...v.dragTooManyFilesDescription,values:{maxFileLimit:r}})})]})]})});function Tt({gizmo:c,onClose:e}){const t=_.useRef(null),o=_.useCallback(()=>{t.current?.openFileDialog()},[t]),l=B(),r=ce(l),{data:n}=de(c.gizmo.id),d=n??c,{canEdit:a}=W(d);return s.jsx(s.Fragment,{children:s.jsx(le,{testId:"modal-project-files",className:"min-h-72 max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",headerAccessory:a&&s.jsx(ze,{color:"secondary",onClick:o,children:s.jsx(I,{...v.addFilesButtonLabel})}),title:s.jsx(I,{...v.projectFilesModalTitle}),onClose:()=>{e()},children:s.jsx("div",{className:"grid min-h-[50dvh] grow overflow-y-auto pt-0",children:r&&s.jsx(Nt,{ref:t,gizmo:d,showInstructions:!1,accountPlanType:r.planType})})})})}function wt({gizmo:c}){return s.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Et,{gizmo:c,className:"rounded-[20px_0px_0px_20px] [border-width:1px_0.5px_1px_1px]"}),s.jsx(Pt,{gizmo:c,className:"rounded-[0px_20px_20px_0px] [border-width:1px_1px_1px_0.5px]"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ie,{}),s.jsx(ie,{})]})})}const ne=({className:c,header:e,context:t,contextClassName:o="",icon:l,onClick:r,disabled:n=!1})=>s.jsx("button",{onClick:r,disabled:n,className:X("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",c),children:s.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[s.jsxs("div",{className:"w-full grow text-start",children:[s.jsx("div",{className:"text-sm font-medium",children:e}),s.jsx("div",{className:X("text-token-text-secondary text-xs",o),children:t})]}),l]})}),ie=()=>s.jsx(ne,{disabled:!0,header:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})});function Et({className:c,gizmo:e}){const{files:t}=e,o=!t.length,l=B(),r=()=>Q(l,Tt,{gizmo:e});let n,d,a;const{canEdit:u}=W(e);if(o)n=s.jsx(I,{...u?v.addFilesButtonLabel:v.viewFilesButtonLabel}),d=s.jsx(I,{...u?v.filesControlDescription:v.noFilesReadOnlyDescription}),a=null;else{const x=t.slice(0,3);n=s.jsx(I,{...v.projectFilesModalTitle}),d=s.jsx(I,{...v.filesCount,values:{count:t.length}}),a=s.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only",children:x.toReversed().map((h,p)=>s.jsx(Mt,{file:h,index:p,gizmoId:e.gizmo.id},h.id))})}return s.jsx(ne,{className:c,onClick:r,header:n,context:d,icon:a,disabled:o&&!u})}function Mt({file:c,index:e,gizmoId:t}){const o=c.name,r=Re(o)&&c.file_id!=null&&s.jsx(et,{fileName:o,fileId:c.file_id,gizmoId:t,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return s.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:{transform:`translateX(${e*-20}px)`},children:r||s.jsx(tt,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:c.name,contextConnectorInfo:void 0})})}function Pt({gizmo:c,className:e}){const{instructions:t}=c.gizmo,o=!t.length,l=B(),r=()=>Q(l,pe,{gizmo:c});let n,d,a;const{canEdit:u}=W(c);return o?(n=s.jsx(I,{...u?v.customInstructionsTitle:v.customInstructionsReadOnlyTitle}),d=s.jsx(I,{...u?v.customInstructionsDescription:v.customInstructionsReadOnlyDescription})):(n=s.jsx(I,{...v.editCustomInstructionsTitle}),a="overflow-hidden text-ellipsis whitespace-nowrap",d=t),s.jsx(ne,{className:e,onClick:r,header:n,context:d,contextClassName:a,disabled:o&&!u})}const Dt=()=>s.jsx("div",{className:"ms-1 mt-3 h-10",children:s.jsx("div",{className:"bg-token-tertiary my-[15px] h-[10px] w-48 rounded-full"})});function zt(c){"use forget";const e=k.c(13),{gizmo:t}=c,o=q(),l=B();let r;e[0]!==l||e[1]!==t?(r=()=>t?xt(l,t):null,e[0]=l,e[1]=t,e[2]=r):r=e[2];const n=oe(r);let d;e[3]!==l||e[4]!==t?(d=()=>t?pt(l,t):null,e[3]=l,e[4]=t,e[5]=d):d=e[5];const a=oe(d),u=(t?.gizmo?.sharing?.subjects?.length??0)>0;let m;return e[6]!==l||e[7]!==a||e[8]!==n||e[9]!==t||e[10]!==o||e[11]!==u?(m=s.jsx("div",{className:"mb-8 inline-flex w-full justify-center gap-2",children:t?s.jsx("div",{className:"text-page-header mt-0.5 inline-block px-4",children:s.jsx("h1",{className:"contents",children:s.jsxs("a",{href:"#edit-title",role:"button","aria-label":o.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:t.gizmo.display.name}),className:"text-page-header group hover:text-token-text-secondary ms-2 flex items-center gap-1.5 text-balance",onClick:x=>{x.preventDefault(),Q(l,me,{submitButtonTitle:o.formatMessage(v.projectSettingsSubmitButton),gizmo:t})},children:[s.jsx(dt,{size:"lg",color:n,emoji:a,isSharedProject:u,strict:!0}),t?.gizmo.display.name]})})}):s.jsx(Dt,{})}),e[6]=l,e[7]=a,e[8]=n,e[9]=t,e[10]=o,e[11]=u,e[12]=m):m=e[12],m}function Rt(c){"use forget";const e=k.c(2),{children:t}=c;let o;return e[0]!==t?(o=s.jsx("div",{className:"group relative flex flex-col gap-1 p-3",children:s.jsx("div",{className:"flex items-center gap-4",children:t})}),e[0]=t,e[1]=o):o=e[1],o}const kt=c=>{"use forget";const e=k.c(37),{conversation:t,gizmo:o}=c,l=Ge(t.id,Gt)??t.title,[r,n]=_.useState(!1);let d,a;e[0]!==t.id?(d=()=>$e(ht,{editTitleInMainScreen:D=>{const{serverThreadId:T}=D;T===t.id&&n(!0)}}),a=[t.id],e[0]=t.id,e[1]=d,e[2]=a):(d=e[1],a=e[2]),_.useEffect(d,a);const u=B(),m=(o?.gizmo?.sharing?.subjects?.length??0)>0;let x;e[3]!==u?(x=Be(u,"773249106"),e[3]=u,e[4]=x):x=e[4];const h=x,{snippet:p}=t;let i,g,j,f;if(e[5]!==t||e[6]!==u||e[7]!==o){const D=ce(u)?.normalizedAccountUserId;i="owner"in t?t.owner:null,j=i?.user_id,g=i?.name,f=He(t.id,o,!0,j,D),e[5]=t,e[6]=u,e[7]=o,e[8]=i,e[9]=g,e[10]=j,e[11]=f}else i=e[8],g=e[9],j=e[10],f=e[11];const y=f;let b;e[12]!==m||e[13]!==h||e[14]!==i||e[15]!==g||e[16]!==j?(b=m&&h&&s.jsx(ft,{monogram:i&&g&&j?{value:g,id:j}:null}),e[12]=m,e[13]=h,e[14]=i,e[15]=g,e[16]=j,e[17]=b):b=e[17];let F;e[18]!==t||e[19]!==l||e[20]!==r?(F=r?s.jsx(gt,{conversationId:t.id,historyConversationResponse:t,onClose:()=>{n(!1)}}):s.jsx("div",{className:"text-sm font-medium",children:l}),e[18]=t,e[19]=l,e[20]=r,e[21]=F):F=e[21];let N;e[22]!==p?(N=p&&s.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:p}),e[22]=p,e[23]=N):N=e[23];let C;e[24]!==F||e[25]!==N?(C=s.jsxs("div",{className:"grow overflow-hidden group-hover:me-5",children:[F,N]}),e[24]=F,e[25]=N,e[26]=C):C=e[26];let S;e[27]!==t||e[28]!==r?(S=!r&&s.jsx(At,{conversation:t}),e[27]=t,e[28]=r,e[29]=S):S=e[29];let w;e[30]!==b||e[31]!==C||e[32]!==S?(w=s.jsxs(Rt,{children:[b,C,S]}),e[30]=b,e[31]=C,e[32]=S,e[33]=w):w=e[33];const M=w;if(r)return M;let E;return e[34]!==M||e[35]!==y?(E=s.jsx(ye,{to:y,draggable:!1,children:M}),e[34]=M,e[35]=y,e[36]=E):E=e[36],E},At=c=>{"use forget";const e=k.c(19),{conversation:t}=c,[o,l]=_.useState(!1),r=q();let n;e[0]!==t.update_time||e[1]!==r?(n=t.update_time&&Intl.DateTimeFormat(r.locale,{month:"short",day:"numeric"}).format(new Date(t.update_time)),e[0]=t.update_time,e[1]=r,e[2]=n):n=e[2];const d=n;let a;e[3]!==d||e[4]!==o?(a=!!d&&s.jsx("span",{className:X("whitespace-nowrap transition-opacity duration-100 ease-out",o?"opacity-0":"opacity-100 group-hover:opacity-0"),children:d}),e[3]=d,e[4]=o,e[5]=a):a=e[5];const u=o&&"pointer-events-auto translate-y-0 scale-100 opacity-100";let m;e[6]!==u?(m=X("absolute end-0 top-0 bottom-0 flex items-center gap-1.5 pe-2","transition-all duration-100 ease-out","pointer-events-none translate-y-0 scale-95 opacity-0","group-hover:pointer-events-auto group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100",u),e[6]=u,e[7]=m):m=e[7];let x;e[8]!==t.id?(x=g=>{l(g),g&&se.logEvent("Conversation History Item Open Menu",{conversationId:t.id})},e[8]=t.id,e[9]=x):x=e[9];let h;e[10]!==t||e[11]!==x?(h=s.jsx(vt,{conversation:t,onOpenChange:x,inMainScreen:!0,isActiveConversation:!1}),e[10]=t,e[11]=x,e[12]=h):h=e[12];let p;e[13]!==m||e[14]!==h?(p=s.jsx("div",{className:m,onClick:Bt,children:h}),e[13]=m,e[14]=h,e[15]=p):p=e[15];let i;return e[16]!==a||e[17]!==p?(i=s.jsxs("div",{className:"group text-token-text-tertiary relative flex items-center justify-between text-sm",children:[a,p]}),e[16]=a,e[17]=p,e[18]=i):i=e[18],i};function Ot(c){"use forget";const e=k.c(19),{gizmo:t}=c;ut(t.gizmo.id);const{items:o,hasNextPage:l,fetchNextPage:r,isLoading:n,isFetching:d,isFetchingNextPage:a}=mt(t.gizmo.id),u=_.useRef(null);let m;e[0]!==l||e[1]!==d||e[2]!==n||e[3]!==r?(m=y=>{n||y==null||(u.current?.disconnect(),u.current=new IntersectionObserver(b=>{b[0].isIntersecting&&l&&!d&&r()}),u.current.observe(y))},e[0]=l,e[1]=d,e[2]=n,e[3]=r,e[4]=m):m=e[4];const x=m;let h,p;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=()=>()=>{u.current?.disconnect()},p=[],e[5]=h,e[6]=p):(h=e[5],p=e[6]),_.useEffect(h,p);const i=o.length;let g;e[7]!==i||e[8]!==t||e[9]!==l||e[10]!==x||e[11]!==n||e[12]!==o?(g=(i||n)&&s.jsx(Lt,{gizmo:t,items:o??[],hasNextPage:l,infiniteScrollTriggerElementRef:x}),e[7]=i,e[8]=t,e[9]=l,e[10]=x,e[11]=n,e[12]=o,e[13]=g):g=e[13];let j;e[14]!==a?(j=a&&s.jsx("div",{className:"m-4 mb-5 flex justify-center",children:s.jsx(Ue,{})}),e[14]=a,e[15]=j):j=e[15];let f;return e[16]!==g||e[17]!==j?(f=s.jsxs("div",{className:"mt-8 mb-14 contain-inline-size",children:[g,j]}),e[16]=g,e[17]=j,e[18]=f):f=e[18],f}function Lt(c){"use forget";const e=k.c(12),{gizmo:t,items:o,hasNextPage:l,infiniteScrollTriggerElementRef:r}=c;let n;if(e[0]!==t||e[1]!==l||e[2]!==r||e[3]!==o){let a;e[5]!==t||e[6]!==l||e[7]!==r||e[8]!==o.length?(a=(u,m)=>{const x=l&&m===o.length-3?r:void 0;return s.jsx("li",{ref:x,className:"border-token-border-light border-t first:border-t-0 last:border-b-0",children:s.jsx("div",{className:"hover:bg-token-interactive-bg-tertiary-hover",children:s.jsx(kt,{conversation:u,gizmo:t})})},u.id)},e[5]=t,e[6]=l,e[7]=r,e[8]=o.length,e[9]=a):a=e[9],n=o.map(a),e[0]=t,e[1]=l,e[2]=r,e[3]=o,e[4]=n}else n=e[4];let d;return e[10]!==n?(d=s.jsx("ol",{children:n}),e[10]=n,e[11]=d):d=e[11],d}function Ut(c,e){"use forget";const t=k.c(14),o=st(),l=B(),r=je(),n=nt(),d=ot.useStore(),a=o?.kind==="conversation"&&o.gizmoId!==e;let u;t[0]!==r||t[1]!==d||t[2]!==n?(u=async function(g){const{conversation:j,newGizmoId:f,previousGizmoId:y}=g;d.expandProject(f),await n({newGizmoId:f,conversation:j,previousGizmoId:y}),r(`/g/${f}/project`)},t[0]=r,t[1]=d,t[2]=n,t[3]=u):u=t[3];const m=u;let x;t[4]!==m||t[5]!==a||t[6]!==l||t[7]!==o||t[8]!==e||t[9]!==c?(x=()=>{if(!a)return;const{conversation:i,gizmoId:g}=o;if(e)return m({conversation:i,newGizmoId:e,previousGizmoId:g});Q(l,j=>{const{onClose:f}=j;return s.jsx(me,{onClose:f,onSuccess:y=>{if(!y)return;const b=m({conversation:i,newGizmoId:y,previousGizmoId:g});return se.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:c}),b}})})},t[4]=m,t[5]=a,t[6]=l,t[7]=o,t[8]=e,t[9]=c,t[10]=x):x=t[10];const h=x;let p;return t[11]!==a||t[12]!==h?(p={canDropConversation:a,onDropConversation:h},t[11]=a,t[12]=h,t[13]=p):p=t[13],p}function ns(c){"use forget";const e=k.c(37),{clientThreadId:t,gizmoId:o,currentModelId:l,onRequestCompletion:r}=c,{data:n}=de(o),d=_.useContext(ke),a=Ae(d),u=Oe(Le),{onDropConversation:m,canDropConversation:x}=Ut(void 0,o),[h,p]=_.useState(!1);let i;e[0]!==x?(i=T=>{T.preventDefault(),x&&p(!0)},e[0]=x,e[1]=i):i=e[1];let g;e[2]!==x||e[3]!==m?(g=T=>{T.preventDefault(),x&&(p(!1),m())},e[2]=x,e[3]=m,e[4]=g):g=e[4];let j,f;e[5]!==x?(j=T=>{T.preventDefault(),x&&p(!0)},f=T=>{T.preventDefault(),x&&p(!1)},e[5]=x,e[6]=j,e[7]=f):(j=e[6],f=e[7]);const y=a?"last-standard":"none",b=u?"none":"standard";let F;e[8]!==n?(F=s.jsx(zt,{gizmo:n}),e[8]=n,e[9]=F):F=e[9];let N;e[10]!==t||e[11]!==l||e[12]!==n||e[13]!==r?(N=n?s.jsx(It,{clientThreadId:t,isNewThread:!0,currentModelId:l,layoutMode:"center",onContinueGenerating:T=>r(at(T)),onRequestCompletion:async T=>r(await it(T)),hideHeader:!0}):s.jsx("div",{className:"bg-token-tertiary h-24 w-full rounded-3xl"}),e[10]=t,e[11]=l,e[12]=n,e[13]=r,e[14]=N):N=e[14];let C,S;e[15]!==n?(S=s.jsx(wt,{gizmo:n}),C=n&&s.jsx(Ot,{gizmo:n}),e[15]=n,e[16]=C,e[17]=S):(C=e[16],S=e[17]);let w;e[18]!==n?.gizmo||e[19]!==h?(w=h&&s.jsxs(te,{children:[s.jsx(rt,{className:"h-12 w-12",style:{color:"#3C46FF"}}),s.jsx("h3",{className:"text-center",children:s.jsx(I,{...v.addConversationToNamedSnorlax,values:{projectName:n?.gizmo.display.name??"project"}})}),s.jsx("h4",{className:"text-center",children:s.jsx(I,{...v.moveConversation})})]}),e[18]=n?.gizmo,e[19]=h,e[20]=w):w=e[20];let M;e[21]!==C||e[22]!==w||e[23]!==F||e[24]!==N||e[25]!==S?(M=s.jsxs(lt,{className:"[width:min(90cqw,var(--thread-content-max-width))]",children:[F,N,S,C,w]}),e[21]=C,e[22]=w,e[23]=F,e[24]=N,e[25]=S,e[26]=M):M=e[26];let E;e[27]!==M||e[28]!==y||e[29]!==b?(E=s.jsx(ct,{verticalMargin:"none",verticalPadding:y,horizontalPadding:b,children:M}),e[27]=M,e[28]=y,e[29]=b,e[30]=E):E=e[30];let D;return e[31]!==i||e[32]!==E||e[33]!==g||e[34]!==j||e[35]!==f?(D=s.jsx("div",{onDragOver:i,onDrop:g,onDragEnter:j,onDragLeave:f,className:"flex max-h-full min-h-full flex-col pt-(--header-height)",children:E}),e[31]=i,e[32]=E,e[33]=g,e[34]=j,e[35]=f,e[36]=D):D=e[36],D}function Gt(c){return c?.title}function Bt(c){return c.preventDefault()}export{ns as SnorlaxSplashScreen,Ut as useProjectsDragDrop};
//# sourceMappingURL=on8091w14zfmyea2.js.map
