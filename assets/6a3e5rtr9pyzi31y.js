import{cT as z,aZ as ye,pp as _e,pF as Ue}from"./hml6mmd5fyx85si7.js";import{hT as O,hU as b,hV as q,hW as U,hX as y,hY as _,hZ as x,h_ as m,h$ as $,gm as ze,i0 as ae,i1 as Te,i2 as qe,i3 as xe,i4 as ge}from"./rseqzngxzbdt1oxg.js";import"./lu2xqwqmjc95q6j6.js";class J{static interfaceName="web.bridge.AgentHandler";static interfaceVersion=0}(e=>{let s;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size).add(O.forString(f.agentid))}n.measure=u;function d(f,V){f.setString(0,V.agentid)}n.encode=d;function o(f,V){return{agentid:b(f.getString(0))}}n.decode=o})(s=e.AgentHandler_TryOpenAgentViewer_Params||(e.AgentHandler_TryOpenAgentViewer_Params={}));let R;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size)}n.measure=u;function d(f,V){let F=0;V.response&&(F|=1),f.setU8(0,F)}n.encode=d;function o(f,V){return{response:(f.getU8(0)&1)!=0}}n.decode=o})(R=e.AgentHandler_TryOpenAgentViewer_ResponseParams||(e.AgentHandler_TryOpenAgentViewer_ResponseParams={}));let N;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size)}n.measure=u;function d(f,V){}n.encode=d;function o(f,V){return{}}n.decode=o})(N=e.AgentHandler_GetClientID_Params||(e.AgentHandler_GetClientID_Params={}));let t;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size).add(O.forString(f.clientid))}n.measure=u;function d(f,V){f.setString(0,V.clientid)}n.encode=d;function o(f,V){return{clientid:b(f.getString(0))}}n.decode=o})(t=e.AgentHandler_GetClientID_ResponseParams||(e.AgentHandler_GetClientID_ResponseParams={}));let c;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size).add(O.forString(f.agentid))}n.measure=u;function d(f,V){f.setString(0,V.agentid)}n.encode=d;function o(f,V){return{agentid:b(f.getString(0))}}n.decode=o})(c=e.AgentHandler_UserSentMessageInAgentConversation_Params||(e.AgentHandler_UserSentMessageInAgentConversation_Params={}));class I{constructor(u){this._endpoint=new q(u.endpointState,!0),this._version=0}static create(){const[u,d]=U.createChannel(e);return[new I(u),d]}static createToBrowser(){const[u,d]=this.create();return Mojo.bindInterface(e.interfaceName,d.pipe.rawHandle),u}async tryOpenAgentViewer(u){const d={agentid:u};return(await this._endpoint.sendAndAwaitResponse(y.encode(0,_.None,s,d))).decode(R).response}async getClientID(){const u={};return(await this._endpoint.sendAndAwaitResponse(y.encode(1,_.None,N,u))).decode(t).clientid}userSentMessageInAgentConversation(u){const d={agentid:u};this._endpoint.send(y.encode(2,_.None,c,d))}_endpoint;_version}e.Proxy=I;class r extends x{constructor(){super(e)}onDisconnect;bind(u,d){this.addReceiver(d,async(o,f)=>{switch(o.header.ordinal){case 0:{const V=o.decode(s),F=u.tryOpenAgentViewer(V.agentid),w=f.createResponder(R,0,o.header.requestID),a=await F;w({response:a});break}case 1:{o.decode(N);const V=u.getClientID(),F=f.createResponder(t,1,o.header.requestID),w=await V;F({clientid:w});break}case 2:{const V=o.decode(c);u.userSentMessageInAgentConversation(V.agentid);break}default:o.header.expectsResponse&&f.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[d,o]=U.createChannel(e);return this.bind(u,o),d}}e.Dispatcher=r})(J||(J={}));var X;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.accessToken)).add(O.forString(t.idToken))}e.measure=s;function R(t,c){t.setString(0,c.accessToken),t.setString(8,c.idToken),t.setF64(16,c.expiresTimestampMsSince1970)}e.encode=R;function N(t,c){return{accessToken:b(t.getString(0)),idToken:b(t.getString(8)),expiresTimestampMsSince1970:b(t.getF64(16))}}e.decode=N})(X||(X={}));var ee;(e=>{function s(N){if(N==="justLoggedInAccessToken")return 0;if(N==="reloadPageIfLoggedOut")return 1;if(N==="fullTokenToSessionConversion")return 2;throw new m}e.encode=s;function R(N){switch(N){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}e.decode=R})(ee||(ee={}));class te{static interfaceName="web.bridge.AuthHandler";static interfaceVersion=0}(e=>{let s;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function I(u){return O.bytes(c.CURRENT_VERSION.size)}c.measure=I;function r(u,d){}c.encode=r;function n(u,d){return{}}c.decode=n})(s=e.AuthHandler_HandleMissingSessionAuth_Params||(e.AuthHandler_HandleMissingSessionAuth_Params={}));let R;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function I(u){return O.bytes(c.CURRENT_VERSION.size)}c.measure=I;function r(u,d){}c.encode=r;function n(u,d){return{}}c.decode=n})(R=e.AuthHandler_RecordAvailableSessionAuth_Params||(e.AuthHandler_RecordAvailableSessionAuth_Params={}));class N{constructor(I){this._endpoint=new q(I.endpointState,!0),this._version=0}static create(){const[I,r]=U.createChannel(e);return[new N(I),r]}static createToBrowser(){const[I,r]=this.create();return Mojo.bindInterface(e.interfaceName,r.pipe.rawHandle),I}handleMissingSessionAuth(){const I={};this._endpoint.send(y.encode(0,_.None,s,I))}recordAvailableSessionAuth(){const I={};this._endpoint.send(y.encode(1,_.None,R,I))}_endpoint;_version}e.Proxy=N;class t extends x{constructor(){super(e)}onDisconnect;bind(I,r){this.addReceiver(r,async(n,u)=>{switch(n.header.ordinal){case 0:{n.decode(s),I.handleMissingSessionAuth();break}case 1:{n.decode(R),I.recordAvailableSessionAuth();break}default:n.header.expectsResponse&&u.sendUnimplementedResponse(n.header.requestID,n.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(I)})}createRemote(I){const[r,n]=U.createChannel(e);return this.bind(I,n),r}}e.Dispatcher=t})(te||(te={}));class P{static interfaceName="web.bridge.AuthStateController";static interfaceVersion=0}(e=>{let s;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function c(n){return O.bytes(t.CURRENT_VERSION.size).add(O.forObject(X,n.authToken))}t.measure=c;function I(n,u){n.setObjectIndirect(X,0,u.authToken),n.setEnumValue(ee,8,u.behavior)}t.encode=I;function r(n,u){return{authToken:b(n.getObjectIndirect(X,0)),behavior:b(n.getEnumValue(ee,8))}}t.decode=r})(s=e.AuthStateController_RefreshSessionContext_Params||(e.AuthStateController_RefreshSessionContext_Params={}));class R{constructor(c){this._endpoint=new q(c.endpointState,!0),this._version=0}static create(){const[c,I]=U.createChannel(e);return[new R(c),I]}static createToBrowser(){const[c,I]=this.create();return Mojo.bindInterface(e.interfaceName,I.pipe.rawHandle),c}refreshSessionContext(c,I){const r={authToken:c,behavior:I};this._endpoint.send(y.encode(0,_.None,s,r))}_endpoint;_version}e.Proxy=R;class N extends x{constructor(){super(e)}onDisconnect;bind(c,I){this.addReceiver(I,async(r,n)=>{switch(r.header.ordinal){case 0:{const u=r.decode(s);c.refreshSessionContext(u.authToken,u.behavior);break}default:r.header.expectsResponse&&n.sendUnimplementedResponse(r.header.requestID,r.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[I,r]=U.createChannel(e);return this.bind(c,r),I}}e.Dispatcher=N})(P||(P={}));var Y;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.conduitToken))}e.measure=s;function R(t,c){t.setEnumValue(ce,0,c.prepareState),t.setF64(8,c.lastPrepareTimestampMsSince1970),t.setString(16,c.conduitToken)}e.encode=R;function N(t,c){return{prepareState:b(t.getEnumValue(ce,0)),lastPrepareTimestampMsSince1970:b(t.getF64(8)),conduitToken:b(t.getString(16))}}e.decode=N})(Y||(Y={}));var K;(e=>{e.VERSION_INFO=[{version:0,size:16}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size)}e.measure=s;function R(t,c){t.setEnumValue(se,0,c.selectedTab)}e.encode=R;function N(t,c){return{selectedTab:b(t.getEnumValue(se,0))}}e.decode=N})(K||(K={}));var Q;(e=>{e.VERSION_INFO=[{version:0,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.id)).add(O.forString(t.name)).add(O.forString(t.mimeType))}e.measure=s;function R(t,c){let I=0;t.setString(0,c.id),t.setI64(8,c.size),t.setString(16,c.name),t.setString(24,c.mimeType),c.width!==null&&c.width!==void 0&&(I|=1,t.setI32(36,c.width)),c.height!==null&&c.height!==void 0&&(I|=2,t.setI32(40,c.height)),c.fileTokenSize!==null&&c.fileTokenSize!==void 0&&(I|=4,t.setI32(44,c.fileTokenSize)),t.setU8(32,I)}e.encode=R;function N(t,c){const I=t.getU8(32),r=(I&1)!=0,n=(I&2)!=0,u=(I&4)!=0;return{id:b(t.getString(0)),size:b(t.getI64(8)),name:b(t.getString(16)),mimeType:b(t.getString(24)),...r?{width:b(t.getI32(36))}:{},...n?{height:b(t.getI32(40))}:{},...u?{fileTokenSize:b(t.getI32(44))}:{}}}e.decode=N})(Q||(Q={}));var v;(e=>{e.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.id)).add(O.forString(t.url)).add(O.forString(t.title)).add(O.forString(t.base64favicon??null)).add(O.forString(t.selection??null))}e.measure=s;function R(t,c){let I=0;t.setString(0,c.id),t.setString(8,c.url),t.setString(16,c.title),t.setString(24,c.base64favicon??null),t.setString(32,c.selection??null),c.blocked!==null&&c.blocked!==void 0&&(I|=1,c.blocked&&(I|=2)),t.setU8(40,I)}e.encode=R;function N(t,c){const I=t.getString(24),r=c>=1?t.getString(32):null,n=c>=2?t.getU8(40):0,u=(n&1)!=0;return{id:b(t.getString(0)),url:b(t.getString(8)),title:b(t.getString(16)),...I!==null?{base64favicon:I}:{},...r!==null?{selection:r}:{},...u?{blocked:(n&2)!=0}:{}}}e.decode=N})(v||(v={}));var ne;(e=>{function s(N){if(N==="mainPage")return 0;if(N==="sidebar")return 1;throw new m}e.encode=s;function R(N){switch(N){case 0:return"mainPage";case 1:return"sidebar";default:throw new m}}e.decode=R})(ne||(ne={}));var ce;(e=>{function s(N){if(N==="none")return 0;if(N==="sent")return 1;if(N==="success")return 2;if(N==="failure")return 3;throw new m}e.encode=s;function R(N){switch(N){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}e.decode=R})(ce||(ce={}));var se;(e=>{function s(N){if(N==="answer")return 0;if(N==="web")return 1;if(N==="images")return 2;if(N==="videos")return 3;throw new m}e.encode=s;function R(N){switch(N){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}e.decode=R})(se||(se={}));var ie;(e=>{function s(N){if(N==="default_")return 0;if(N==="blue")return 1;if(N==="green")return 2;if(N==="yellow")return 3;if(N==="purple")return 4;if(N==="pink")return 5;if(N==="orange")return 6;if(N==="black")return 7;throw new m}e.encode=s;function R(N){switch(N){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}e.decode=R})(ie||(ie={}));var re;(e=>{function s(N){if(N==="none")return 0;if(N==="startTakeoverFromAgent")return 1;if(N==="endTakeoverFromAgent")return 2;if(N==="stopAgent")return 3;throw new m}e.encode=s;function R(N){switch(N){case 0:return"none";case 1:return"startTakeoverFromAgent";case 2:return"endTakeoverFromAgent";case 3:return"stopAgent";default:return"none"}}e.decode=R})(re||(re={}));class C{static interfaceName="web.bridge.ConversationController";static interfaceVersion=2}(e=>{let s;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size)}i.measure=S;function p(E,h){E.setEnumValue(ne,0,h.windowStyle)}i.encode=p;function g(E,h){return{windowStyle:b(E.getEnumValue(ne,0))}}i.decode=g})(s=e.ConversationController_SetWindowStyle_Params||(e.ConversationController_SetWindowStyle_Params={}));let R;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forString(E.modelSlug))}i.measure=S;function p(E,h){E.setString(0,h.modelSlug)}i.encode=p;function g(E,h){return{modelSlug:b(E.getString(0))}}i.decode=g})(R=e.ConversationController_SetModel_Params||(e.ConversationController_SetModel_Params={}));let N;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size)}i.measure=S;function p(E,h){}i.encode=p;function g(E,h){return{}}i.decode=g})(N=e.ConversationController_NewConversation_Params||(e.ConversationController_NewConversation_Params={}));let t;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forString(E.remoteConversationId))}i.measure=S;function p(E,h){E.setString(0,h.remoteConversationId)}i.encode=p;function g(E,h){return{remoteConversationId:b(E.getString(0))}}i.decode=g})(t=e.ConversationController_LoadConversation_Params||(e.ConversationController_LoadConversation_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:32}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forString(E.prompt)).add(O.forStringArray(E.systemHints)).add(O.forString(E.modelSlug))}i.measure=S;function p(E,h){E.setString(0,h.prompt),E.setStringArray(8,h.systemHints),E.setString(16,h.modelSlug)}i.encode=p;function g(E,h){return{prompt:b(E.getString(0)),systemHints:b($(E.getStringArray(8))),modelSlug:b(E.getString(16))}}i.decode=g})(c=e.ConversationController_RequestCompletion_Params||(e.ConversationController_RequestCompletion_Params={}));let I;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forString(E.userMessage??null)).add(O.forString(E.targetedReply??null))}i.measure=S;function p(E,h){E.setString(0,h.userMessage??null),E.setString(8,h.targetedReply??null)}i.encode=p;function g(E,h){const j=E.getString(0),Z=E.getString(8);return{...j!==null?{userMessage:j}:{},...Z!==null?{targetedReply:Z}:{}}}i.decode=g})(I=e.ConversationController_PopulatePrompt_Params||(e.ConversationController_PopulatePrompt_Params={}));let r;(i=>{i.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forString(E.url)).add(O.forString(E.title)).add(O.forString(E.base64favicon??null)).add(O.forString(E.selection??null))}i.measure=S;function p(E,h){let j=0;E.setString(0,h.url),E.setString(8,h.title),E.setString(16,h.base64favicon??null),E.setString(24,h.selection??null),h.blocked!==null&&h.blocked!==void 0&&(j|=1,h.blocked&&(j|=2)),E.setU8(32,j)}i.encode=p;function g(E,h){const j=E.getString(16),Z=h>=1?E.getString(24):null,pe=h>=2?E.getU8(32):0,we=(pe&1)!=0;return{url:b(E.getString(0)),title:b(E.getString(8)),...j!==null?{base64favicon:j}:{},...Z!==null?{selection:Z}:{},...we?{blocked:(pe&2)!=0}:{}}}i.decode=g})(r=e.ConversationController_UpdateContext_Params||(e.ConversationController_UpdateContext_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forObject(Y,E.details))}i.measure=S;function p(E,h){E.setObjectIndirect(Y,0,h.details)}i.encode=p;function g(E,h){return{details:b(E.getObjectIndirect(Y,0))}}i.decode=g})(n=e.ConversationController_PrepareConversation_Params||(e.ConversationController_PrepareConversation_Params={}));let u;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forObject(K,E.options))}i.measure=S;function p(E,h){E.setObjectIndirect(K,0,h.options)}i.encode=p;function g(E,h){return{options:b(E.getObjectIndirect(K,0))}}i.decode=g})(u=e.ConversationController_SetSuperWidgetOptions_Params||(e.ConversationController_SetSuperWidgetOptions_Params={}));let d;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forObjectArray(Q,E.attachments))}i.measure=S;function p(E,h){E.setObjectArray(Q,0,h.attachments)}i.encode=p;function g(E,h){return{attachments:b($(E.getObjectArray(Q,0)))}}i.decode=g})(d=e.ConversationController_SetAttachments_Params||(e.ConversationController_SetAttachments_Params={}));let o;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forString(E.to))}i.measure=S;function p(E,h){E.setString(0,h.to)}i.encode=p;function g(E,h){return{to:b(E.getString(0))}}i.decode=g})(o=e.ConversationController_Navigate_Params||(e.ConversationController_Navigate_Params={}));let f;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forObject(M,E.whisperContent))}i.measure=S;function p(E,h){E.setObjectIndirect(M,0,h.whisperContent)}i.encode=p;function g(E,h){return{whisperContent:b(E.getObjectIndirect(M,0))}}i.decode=g})(f=e.ConversationController_SetWhisperContent_Params||(e.ConversationController_SetWhisperContent_Params={}));let V;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forObjectArray(v,E.tabs))}i.measure=S;function p(E,h){E.setObjectArray(v,0,h.tabs)}i.encode=p;function g(E,h){return{tabs:b($(E.getObjectArray(v,0)))}}i.decode=g})(V=e.ConversationController_SetTabContext_Params||(e.ConversationController_SetTabContext_Params={}));let F;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forString(E.origin))}i.measure=S;function p(E,h){E.setString(0,h.origin)}i.encode=p;function g(E,h){return{origin:b(E.getString(0))}}i.decode=g})(F=e.ConversationController_SetPromptOrigin_Params||(e.ConversationController_SetPromptOrigin_Params={}));let w;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size)}i.measure=S;function p(E,h){}i.encode=p;function g(E,h){return{}}i.decode=g})(w=e.ConversationController_CloseNavigationSidebar_Params||(e.ConversationController_CloseNavigationSidebar_Params={}));let a;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size)}i.measure=S;function p(E,h){E.setEnumValue(ie,0,h.theme)}i.encode=p;function g(E,h){return{theme:b(E.getEnumValue(ie,0))}}i.decode=g})(a=e.ConversationController_SetChatTheme_Params||(e.ConversationController_SetChatTheme_Params={}));let B;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size)}i.measure=S;function p(E,h){}i.encode=p;function g(E,h){return{}}i.decode=g})(B=e.ConversationController_ShowSearch_Params||(e.ConversationController_ShowSearch_Params={}));let Ie;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size).add(O.forString(E.query)).add(O.forString(E.navlinksEvent))}i.measure=S;function p(E,h){E.setString(0,h.query),E.setString(8,h.navlinksEvent)}i.encode=p;function g(E,h){return{query:b(E.getString(0)),navlinksEvent:b(E.getString(8))}}i.decode=g})(Ie=e.ConversationController_PopulateNavlinks_Params||(e.ConversationController_PopulateNavlinks_Params={}));let Oe;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function S(E){return O.bytes(i.CURRENT_VERSION.size)}i.measure=S;function p(E,h){E.setEnumValue(re,0,h.request)}i.encode=p;function g(E,h){return{request:b(E.getEnumValue(re,0))}}i.decode=g})(Oe=e.ConversationController_HandleAgentRequest_Params||(e.ConversationController_HandleAgentRequest_Params={}));class Ee{constructor(S){this._endpoint=new q(S.endpointState,!0),this._version=2}static create(){const[S,p]=U.createChannel(e);return[new Ee(S),p]}static createToBrowser(){const[S,p]=this.create();return Mojo.bindInterface(e.interfaceName,p.pipe.rawHandle),S}setWindowStyle(S){const p={windowStyle:S};this._endpoint.send(y.encode(0,_.None,s,p))}setModel(S){const p={modelSlug:S};this._endpoint.send(y.encode(1,_.None,R,p))}newConversation(){const S={};this._endpoint.send(y.encode(2,_.None,N,S))}loadConversation(S){const p={remoteConversationId:S};this._endpoint.send(y.encode(3,_.None,t,p))}requestCompletion(S,p,g){const E={prompt:S,systemHints:p,modelSlug:g};this._endpoint.send(y.encode(4,_.None,c,E))}populatePrompt(S,p){const g={userMessage:S,targetedReply:p};this._endpoint.send(y.encode(5,_.None,I,g))}updateContext(S,p,g,E,h){const j={url:S,title:p,base64favicon:g,selection:E,blocked:h};this._endpoint.send(y.encode(6,_.None,r,j))}prepareConversation(S){const p={details:S};this._endpoint.send(y.encode(7,_.None,n,p))}setSuperWidgetOptions(S){const p={options:S};this._endpoint.send(y.encode(8,_.None,u,p))}setAttachments(S){const p={attachments:S};this._endpoint.send(y.encode(9,_.None,d,p))}navigate(S){const p={to:S};this._endpoint.send(y.encode(10,_.None,o,p))}setWhisperContent(S){const p={whisperContent:S};this._endpoint.send(y.encode(11,_.None,f,p))}setTabContext(S){const p={tabs:S};this._endpoint.send(y.encode(12,_.None,V,p))}setPromptOrigin(S){const p={origin:S};this._endpoint.send(y.encode(13,_.None,F,p))}closeNavigationSidebar(){const S={};this._endpoint.send(y.encode(14,_.None,w,S))}setChatTheme(S){const p={theme:S};this._endpoint.send(y.encode(15,_.None,a,p))}showSearch(){const S={};this._endpoint.send(y.encode(16,_.None,B,S))}populateNavlinks(S,p){const g={query:S,navlinksEvent:p};this._endpoint.send(y.encode(17,_.None,Ie,g))}handleAgentRequest(S){const p={request:S};this._endpoint.send(y.encode(18,_.None,Oe,p))}_endpoint;_version}e.Proxy=Ee;class Fe extends x{constructor(){super(e)}onDisconnect;bind(S,p){this.addReceiver(p,async(g,E)=>{switch(g.header.ordinal){case 0:{const h=g.decode(s);S.setWindowStyle(h.windowStyle);break}case 1:{const h=g.decode(R);S.setModel(h.modelSlug);break}case 2:{g.decode(N),S.newConversation();break}case 3:{const h=g.decode(t);S.loadConversation(h.remoteConversationId);break}case 4:{const h=g.decode(c);S.requestCompletion(h.prompt,h.systemHints,h.modelSlug);break}case 5:{const h=g.decode(I);S.populatePrompt(h.userMessage,h.targetedReply);break}case 6:{const h=g.decode(r);S.updateContext(h.url,h.title,h.base64favicon,h.selection,h.blocked);break}case 7:{const h=g.decode(n);S.prepareConversation(h.details);break}case 8:{const h=g.decode(u);S.setSuperWidgetOptions(h.options);break}case 9:{const h=g.decode(d);S.setAttachments(h.attachments);break}case 10:{const h=g.decode(o);S.navigate(h.to);break}case 11:{const h=g.decode(f);S.setWhisperContent(h.whisperContent);break}case 12:{const h=g.decode(V);S.setTabContext(h.tabs);break}case 13:{const h=g.decode(F);S.setPromptOrigin(h.origin);break}case 14:{g.decode(w),S.closeNavigationSidebar();break}case 15:{const h=g.decode(a);S.setChatTheme(h.theme);break}case 16:{g.decode(B),S.showSearch();break}case 17:{const h=g.decode(Ie);S.populateNavlinks(h.query,h.navlinksEvent);break}case 18:{const h=g.decode(Oe);S.handleAgentRequest(h.request);break}default:g.header.expectsResponse&&E.sendUnimplementedResponse(g.header.requestID,g.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(S)})}createRemote(S){const[p,g]=U.createChannel(e);return this.bind(S,g),p}}e.Dispatcher=Fe})(C||(C={}));class be{static interfaceName="web.bridge.GenericInterface";static interfaceVersion=0}(e=>{let s;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function I(u){return O.bytes(c.CURRENT_VERSION.size).add(O.forString(u.request))}c.measure=I;function r(u,d){u.setString(0,d.request)}c.encode=r;function n(u,d){return{request:b(u.getString(0))}}c.decode=n})(s=e.GenericInterface_AcceptMessage_Params||(e.GenericInterface_AcceptMessage_Params={}));let R;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function I(u){return O.bytes(c.CURRENT_VERSION.size).add(O.forString(u.response??null))}c.measure=I;function r(u,d){u.setString(0,d.response??null)}c.encode=r;function n(u,d){const o=u.getString(0);return{...o!==null?{response:o}:{}}}c.decode=n})(R=e.GenericInterface_AcceptMessage_ResponseParams||(e.GenericInterface_AcceptMessage_ResponseParams={}));class N{constructor(I){this._endpoint=new q(I.endpointState,!0),this._version=0}static create(){const[I,r]=U.createChannel(e);return[new N(I),r]}static createToBrowser(){const[I,r]=this.create();return Mojo.bindInterface(e.interfaceName,r.pipe.rawHandle),I}async acceptMessage(I){const r={request:I};return(await this._endpoint.sendAndAwaitResponse(y.encode(0,_.None,s,r))).decode(R).response}_endpoint;_version}e.Proxy=N;class t extends x{constructor(){super(e)}onDisconnect;bind(I,r){this.addReceiver(r,async(n,u)=>{switch(n.header.ordinal){case 0:{const d=n.decode(s),o=I.acceptMessage(d.request),f=u.createResponder(R,0,n.header.requestID),V=await o;f({response:V});break}default:n.header.expectsResponse&&u.sendUnimplementedResponse(n.header.requestID,n.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(I)})}createRemote(I){const[r,n]=U.createChannel(e);return this.bind(I,n),r}}e.Dispatcher=t})(be||(be={}));class fe{static interfaceName="web.bridge.LinkHandler";static interfaceVersion=0}(e=>{let s;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function c(n){return O.bytes(t.CURRENT_VERSION.size).add(O.forString(n.url)).add(O.forString(n.target))}t.measure=c;function I(n,u){n.setString(0,u.url),n.setString(8,u.target)}t.encode=I;function r(n,u){return{url:b(n.getString(0)),target:b(n.getString(8))}}t.decode=r})(s=e.LinkHandler_HandleLink_Params||(e.LinkHandler_HandleLink_Params={}));class R{constructor(c){this._endpoint=new q(c.endpointState,!0),this._version=0}static create(){const[c,I]=U.createChannel(e);return[new R(c),I]}static createToBrowser(){const[c,I]=this.create();return Mojo.bindInterface(e.interfaceName,I.pipe.rawHandle),c}handleLink(c,I){const r={url:c,target:I};this._endpoint.send(y.encode(0,_.None,s,r))}_endpoint;_version}e.Proxy=R;class N extends x{constructor(){super(e)}onDisconnect;bind(c,I){this.addReceiver(I,async(r,n)=>{switch(r.header.ordinal){case 0:{const u=r.decode(s);c.handleLink(u.url,u.target);break}default:r.header.expectsResponse&&n.sendUnimplementedResponse(r.header.requestID,r.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[I,r]=U.createChannel(e);return this.bind(c,r),I}}e.Dispatcher=N})(fe||(fe={}));var A;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.author)).add(O.forString(t.message))}e.measure=s;function R(t,c){t.setString(0,c.author),t.setString(8,c.message)}e.encode=R;function N(t,c){return{author:b(t.getString(0)),message:b(t.getString(8))}}e.decode=N})(A||(A={}));class de{static interfaceName="web.bridge.LocalToolHandler";static interfaceVersion=0}(e=>{let s;(r=>{r.VERSION_INFO=[{version:0,size:24}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function n(o){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(o.toolname)).add(O.forString(o.args))}r.measure=n;function u(o,f){o.setString(0,f.toolname),o.setString(8,f.args)}r.encode=u;function d(o,f){return{toolname:b(o.getString(0)),args:b(o.getString(8))}}r.decode=d})(s=e.LocalToolHandler_CallLocalTool_Params||(e.LocalToolHandler_CallLocalTool_Params={}));let R;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function n(o){return O.bytes(r.CURRENT_VERSION.size).add(O.forObjectArray(A,o.response))}r.measure=n;function u(o,f){o.setObjectArray(A,0,f.response)}r.encode=u;function d(o,f){return{response:b($(o.getObjectArray(A,0)))}}r.decode=d})(R=e.LocalToolHandler_CallLocalTool_ResponseParams||(e.LocalToolHandler_CallLocalTool_ResponseParams={}));let N;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function n(o){return O.bytes(r.CURRENT_VERSION.size)}r.measure=n;function u(o,f){}r.encode=u;function d(o,f){return{}}r.decode=d})(N=e.LocalToolHandler_GetToolNames_Params||(e.LocalToolHandler_GetToolNames_Params={}));let t;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function n(o){return O.bytes(r.CURRENT_VERSION.size).add(O.forStringArray(o.toolnames))}r.measure=n;function u(o,f){o.setStringArray(0,f.toolnames)}r.encode=u;function d(o,f){return{toolnames:b($(o.getStringArray(0)))}}r.decode=d})(t=e.LocalToolHandler_GetToolNames_ResponseParams||(e.LocalToolHandler_GetToolNames_ResponseParams={}));class c{constructor(n){this._endpoint=new q(n.endpointState,!0),this._version=0}static create(){const[n,u]=U.createChannel(e);return[new c(n),u]}static createToBrowser(){const[n,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),n}async callLocalTool(n,u){const d={toolname:n,args:u};return(await this._endpoint.sendAndAwaitResponse(y.encode(0,_.None,s,d))).decode(R).response}async getToolNames(){const n={};return(await this._endpoint.sendAndAwaitResponse(y.encode(1,_.None,N,n))).decode(t).toolnames}_endpoint;_version}e.Proxy=c;class I extends x{constructor(){super(e)}onDisconnect;bind(n,u){this.addReceiver(u,async(d,o)=>{switch(d.header.ordinal){case 0:{const f=d.decode(s),V=n.callLocalTool(f.toolname,f.args),F=o.createResponder(R,0,d.header.requestID),w=await V;F({response:w});break}case 1:{d.decode(N);const f=n.getToolNames(),V=o.createResponder(t,1,d.header.requestID),F=await f;V({toolnames:F});break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(n)})}createRemote(n){const[u,d]=U.createChannel(e);return this.bind(n,d),u}}e.Dispatcher=I})(de||(de={}));var k;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.clientId)).add(O.forString(t.serverId??null))}e.measure=s;function R(t,c){t.setString(0,c.clientId),t.setString(8,c.serverId??null)}e.encode=R;function N(t,c){const I=t.getString(8);return{clientId:b(t.getString(0)),...I!==null?{serverId:I}:{}}}e.decode=N})(k||(k={}));var D;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.title??null))}e.measure=s;function R(t,c){let I=0;t.setString(0,c.title??null),c.updateTimestampMsSince1970!==null&&c.updateTimestampMsSince1970!==void 0&&(I|=1,t.setF64(16,c.updateTimestampMsSince1970)),c.status!==null&&c.status!==void 0&&(I|=2,t.setEnumValue(ue,12,c.status)),t.setU8(8,I)}e.encode=R;function N(t,c){const I=t.getString(0),r=t.getU8(8),n=(r&1)!=0,u=(r&2)!=0;return{...I!==null?{title:I}:{},...n?{updateTimestampMsSince1970:b(t.getF64(16))}:{},...u?{status:b(t.getEnumValue(ue,12))}:{}}}e.decode=N})(D||(D={}));var ue;(e=>{function s(N){if(N==="none")return 0;if(N==="inProgress")return 1;if(N==="done")return 2;throw new m}e.encode=s;function R(N){switch(N){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}e.decode=R})(ue||(ue={}));class he{static interfaceName="web.bridge.NavigationSidebarController";static interfaceVersion=0}(e=>{let s;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function o(F){return O.bytes(d.CURRENT_VERSION.size)}d.measure=o;function f(F,w){let a=0;w.visible&&(a|=1),F.setU8(0,a)}d.encode=f;function V(F,w){return{visible:(F.getU8(0)&1)!=0}}d.decode=V})(s=e.NavigationSidebarController_SetSidebarVisibility_Params||(e.NavigationSidebarController_SetSidebarVisibility_Params={}));let R;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function o(F){return O.bytes(d.CURRENT_VERSION.size)}d.measure=o;function f(F,w){}d.encode=f;function V(F,w){return{}}d.decode=V})(R=e.NavigationSidebarController_ToggleSidebarVisibility_Params||(e.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let N;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function o(F){return O.bytes(d.CURRENT_VERSION.size)}d.measure=o;function f(F,w){}d.encode=f;function V(F,w){return{}}d.decode=V})(N=e.NavigationSidebarController_NewConversation_Params||(e.NavigationSidebarController_NewConversation_Params={}));let t;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function o(F){return O.bytes(d.CURRENT_VERSION.size).add(O.forObject(k,F.id)).add(O.forObject(D,F.data))}d.measure=o;function f(F,w){F.setObjectIndirect(k,0,w.id),F.setObjectIndirect(D,8,w.data)}d.encode=f;function V(F,w){return{id:b(F.getObjectIndirect(k,0)),data:b(F.getObjectIndirect(D,8))}}d.decode=V})(t=e.NavigationSidebarController_AddConversationHistoryItem_Params||(e.NavigationSidebarController_AddConversationHistoryItem_Params={}));let c;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function o(F){return O.bytes(d.CURRENT_VERSION.size).add(O.forObject(k,F.id)).add(O.forObject(D,F.data))}d.measure=o;function f(F,w){F.setObjectIndirect(k,0,w.id),F.setObjectIndirect(D,8,w.data)}d.encode=f;function V(F,w){return{id:b(F.getObjectIndirect(k,0)),data:b(F.getObjectIndirect(D,8))}}d.decode=V})(c=e.NavigationSidebarController_UpdateConversationHistoryItem_Params||(e.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));let I;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function o(F){return O.bytes(d.CURRENT_VERSION.size)}d.measure=o;function f(F,w){}d.encode=f;function V(F,w){return{}}d.decode=V})(I=e.NavigationSidebarController_GetSidebarVisibility_Params||(e.NavigationSidebarController_GetSidebarVisibility_Params={}));let r;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function o(F){return O.bytes(d.CURRENT_VERSION.size)}d.measure=o;function f(F,w){let a=0;w.visible&&(a|=1),F.setU8(0,a)}d.encode=f;function V(F,w){return{visible:(F.getU8(0)&1)!=0}}d.decode=V})(r=e.NavigationSidebarController_GetSidebarVisibility_ResponseParams||(e.NavigationSidebarController_GetSidebarVisibility_ResponseParams={}));class n{constructor(o){this._endpoint=new q(o.endpointState,!0),this._version=0}static create(){const[o,f]=U.createChannel(e);return[new n(o),f]}static createToBrowser(){const[o,f]=this.create();return Mojo.bindInterface(e.interfaceName,f.pipe.rawHandle),o}setSidebarVisibility(o){const f={visible:o};this._endpoint.send(y.encode(0,_.None,s,f))}toggleSidebarVisibility(){const o={};this._endpoint.send(y.encode(1,_.None,R,o))}newConversation(){const o={};this._endpoint.send(y.encode(2,_.None,N,o))}addConversationHistoryItem(o,f){const V={id:o,data:f};this._endpoint.send(y.encode(3,_.None,t,V))}updateConversationHistoryItem(o,f){const V={id:o,data:f};this._endpoint.send(y.encode(4,_.None,c,V))}async getSidebarVisibility(){const o={};return(await this._endpoint.sendAndAwaitResponse(y.encode(5,_.None,I,o))).decode(r).visible}_endpoint;_version}e.Proxy=n;class u extends x{constructor(){super(e)}onDisconnect;bind(o,f){this.addReceiver(f,async(V,F)=>{switch(V.header.ordinal){case 0:{const w=V.decode(s);o.setSidebarVisibility(w.visible);break}case 1:{V.decode(R),o.toggleSidebarVisibility();break}case 2:{V.decode(N),o.newConversation();break}case 3:{const w=V.decode(t);o.addConversationHistoryItem(w.id,w.data);break}case 4:{const w=V.decode(c);o.updateConversationHistoryItem(w.id,w.data);break}case 5:{V.decode(I);const w=o.getSidebarVisibility(),a=F.createResponder(r,5,V.header.requestID),B=await w;a({visible:B});break}default:V.header.expectsResponse&&F.sendUnimplementedResponse(V.header.requestID,V.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[f,V]=U.createChannel(e);return this.bind(o,V),f}}e.Dispatcher=u})(he||(he={}));var oe;(e=>{function s(N){if(N==="general")return 0;if(N==="personalization")return 1;if(N==="searchEngines")return 2;if(N==="dataControls")return 3;if(N==="modelTraining")return 4;if(N==="autofill")return 5;throw new m}e.encode=s;function R(N){switch(N){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";case 5:return"autofill";default:return"general"}}e.decode=R})(oe||(oe={}));class Se{static interfaceName="web.bridge.OpenSettingsController";static interfaceVersion=0}(e=>{let s;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function c(n){return O.bytes(t.CURRENT_VERSION.size)}t.measure=c;function I(n,u){let d=0;u.tab!==null&&u.tab!==void 0&&(d|=1,n.setEnumValue(oe,4,u.tab)),n.setU8(0,d)}t.encode=I;function r(n,u){return{...(n.getU8(0)&1)!=0?{tab:b(n.getEnumValue(oe,4))}:{}}}t.decode=r})(s=e.OpenSettingsController_OpenSettings_Params||(e.OpenSettingsController_OpenSettings_Params={}));class R{constructor(c){this._endpoint=new q(c.endpointState,!0),this._version=0}static create(){const[c,I]=U.createChannel(e);return[new R(c),I]}static createToBrowser(){const[c,I]=this.create();return Mojo.bindInterface(e.interfaceName,I.pipe.rawHandle),c}openSettings(c){const I={tab:c};this._endpoint.send(y.encode(0,_.None,s,I))}_endpoint;_version}e.Proxy=R;class N extends x{constructor(){super(e)}onDisconnect;bind(c,I){this.addReceiver(I,async(r,n)=>{switch(r.header.ordinal){case 0:{const u=r.decode(s);c.openSettings(u.tab);break}default:r.header.expectsResponse&&n.sendUnimplementedResponse(r.header.requestID,r.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[I,r]=U.createChannel(e);return this.bind(c,r),I}}e.Dispatcher=N})(Se||(Se={}));var Ne;(e=>{function s(N){if(N==="messageSent")return 0;throw new m}e.encode=s;function R(N){switch(N){case 0:return"messageSent";default:return"messageSent"}}e.decode=R})(Ne||(Ne={}));class Ve{static interfaceName="web.bridge.ProductEventHandler";static interfaceVersion=0}(e=>{let s;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function c(n){return O.bytes(t.CURRENT_VERSION.size)}t.measure=c;function I(n,u){n.setEnumValue(Ne,0,u.eventName)}t.encode=I;function r(n,u){return{eventName:b(n.getEnumValue(Ne,0))}}t.decode=r})(s=e.ProductEventHandler_TriggerProductEvent_Params||(e.ProductEventHandler_TriggerProductEvent_Params={}));class R{constructor(c){this._endpoint=new q(c.endpointState,!0),this._version=0}static create(){const[c,I]=U.createChannel(e);return[new R(c),I]}static createToBrowser(){const[c,I]=this.create();return Mojo.bindInterface(e.interfaceName,I.pipe.rawHandle),c}triggerProductEvent(c){const I={eventName:c};this._endpoint.send(y.encode(0,_.None,s,I))}_endpoint;_version}e.Proxy=R;class N extends x{constructor(){super(e)}onDisconnect;bind(c,I){this.addReceiver(I,async(r,n)=>{switch(r.header.ordinal){case 0:{const u=r.decode(s);c.triggerProductEvent(u.eventName);break}default:r.header.expectsResponse&&n.sendUnimplementedResponse(r.header.requestID,r.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[I,r]=U.createChannel(e);return this.bind(c,r),I}}e.Dispatcher=N})(Ve||(Ve={}));class l{static interfaceName="web.bridge.DesktopSidebarController";static interfaceVersion=0}(e=>{let s;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size)}n.measure=u;function d(f,V){}n.encode=d;function o(f,V){return{}}n.decode=o})(s=e.DesktopSidebarController_CloseSidebar_Params||(e.DesktopSidebarController_CloseSidebar_Params={}));let R;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size)}n.measure=u;function d(f,V){}n.encode=d;function o(f,V){return{}}n.decode=o})(R=e.DesktopSidebarController_CanHideHeader_Params||(e.DesktopSidebarController_CanHideHeader_Params={}));let N;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size)}n.measure=u;function d(f,V){let F=0;V.canHideHeader&&(F|=1),f.setU8(0,F)}n.encode=d;function o(f,V){return{canHideHeader:(f.getU8(0)&1)!=0}}n.decode=o})(N=e.DesktopSidebarController_CanHideHeader_ResponseParams||(e.DesktopSidebarController_CanHideHeader_ResponseParams={}));let t;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size)}n.measure=u;function d(f,V){}n.encode=d;function o(f,V){return{}}n.decode=o})(t=e.DesktopSidebarController_BecomeMainPage_Params||(e.DesktopSidebarController_BecomeMainPage_Params={}));let c;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function u(f){return O.bytes(n.CURRENT_VERSION.size)}n.measure=u;function d(f,V){}n.encode=d;function o(f,V){return{}}n.decode=o})(c=e.DesktopSidebarController_OpenInNewTab_Params||(e.DesktopSidebarController_OpenInNewTab_Params={}));class I{constructor(u){this._endpoint=new q(u.endpointState,!0),this._version=0}static create(){const[u,d]=U.createChannel(e);return[new I(u),d]}static createToBrowser(){const[u,d]=this.create();return Mojo.bindInterface(e.interfaceName,d.pipe.rawHandle),u}closeSidebar(){const u={};this._endpoint.send(y.encode(0,_.None,s,u))}async canHideHeader(){const u={};return(await this._endpoint.sendAndAwaitResponse(y.encode(1,_.None,R,u))).decode(N).canHideHeader}becomeMainPage(){const u={};this._endpoint.send(y.encode(2,_.None,t,u))}openInNewTab(){const u={};this._endpoint.send(y.encode(3,_.None,c,u))}_endpoint;_version}e.Proxy=I;class r extends x{constructor(){super(e)}onDisconnect;bind(u,d){this.addReceiver(d,async(o,f)=>{switch(o.header.ordinal){case 0:{o.decode(s),u.closeSidebar();break}case 1:{o.decode(R);const V=u.canHideHeader(),F=f.createResponder(N,1,o.header.requestID),w=await V;F({canHideHeader:w});break}case 2:{o.decode(t),u.becomeMainPage();break}case 3:{o.decode(c),u.openInNewTab();break}default:o.header.expectsResponse&&f.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[d,o]=U.createChannel(e);return this.bind(u,o),d}}e.Dispatcher=r})(l||(l={}));var L;(e=>{e.VERSION_INFO=[{version:0,size:8}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size)}e.measure=s;function R(t,c){}e.encode=R;function N(t,c){return{}}e.decode=N})(L||(L={}));var G;(e=>{e.VERSION_INFO=[{version:0,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.id)).add(O.forString(t.fileid)).add(O.forString(t.name)).add(O.forString(t.mimetype))}e.measure=s;function R(t,c){t.setString(0,c.id),t.setString(8,c.fileid),t.setString(16,c.name),t.setU32(24,c.size),t.setString(32,c.mimetype)}e.encode=R;function N(t,c){return{id:b(t.getString(0)),fileid:b(t.getString(8)),name:b(t.getString(16)),size:b(t.getU32(24)),mimetype:b(t.getString(32))}}e.decode=N})(G||(G={}));var W;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.assetPointer))}e.measure=s;function R(t,c){t.setString(0,c.assetPointer),t.setU32(8,c.sizeBytes),t.setU32(12,c.width),t.setU32(16,c.height)}e.encode=R;function N(t,c){return{assetPointer:b(t.getString(0)),sizeBytes:b(t.getU32(8)),width:b(t.getU32(12)),height:b(t.getU32(16))}}e.decode=N})(W||(W={}));var M;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.content??null)).add(O.forObjectArray(G,t.files??null)).add(O.forObjectArray(W,t.imageAssetPointers??null))}e.measure=s;function R(t,c){t.setString(0,c.content??null),t.setObjectArray(G,8,c.files??null),t.setObjectArray(W,16,c.imageAssetPointers??null)}e.encode=R;function N(t,c){const I=t.getString(0),r=$(t.getObjectArray(G,8)),n=$(t.getObjectArray(W,16));return{...I!==null?{content:I}:{},...r!==null?{files:r}:{},...n!==null?{imageAssetPointers:n}:{}}}e.decode=N})(M||(M={}));var H;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.base64image)).add(O.forString(t.mimetype)).add(O.forString(t.filename))}e.measure=s;function R(t,c){t.setString(0,c.base64image),t.setString(8,c.mimetype),t.setString(16,c.filename)}e.encode=R;function N(t,c){return{base64image:b(t.getString(0)),mimetype:b(t.getString(8)),filename:b(t.getString(16))}}e.decode=N})(H||(H={}));class Re{static interfaceName="web.bridge.WhisperContentProvider";static interfaceVersion=0}(e=>{let s;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function n(o){return O.bytes(r.CURRENT_VERSION.size).add(O.forObject(L,o.options??null))}r.measure=n;function u(o,f){o.setObjectIndirect(L,0,f.options??null)}r.encode=u;function d(o,f){const V=o.getObjectIndirect(L,0);return{...V!==null?{options:V}:{}}}r.decode=d})(s=e.WhisperContentProvider_GetWhisperContent_Params||(e.WhisperContentProvider_GetWhisperContent_Params={}));let R;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function n(o){return O.bytes(r.CURRENT_VERSION.size).add(O.forObject(M,o.content??null))}r.measure=n;function u(o,f){o.setObjectIndirect(M,0,f.content??null)}r.encode=u;function d(o,f){const V=o.getObjectIndirect(M,0);return{...V!==null?{content:V}:{}}}r.decode=d})(R=e.WhisperContentProvider_GetWhisperContent_ResponseParams||(e.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let N;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function n(o){return O.bytes(r.CURRENT_VERSION.size)}r.measure=n;function u(o,f){}r.encode=u;function d(o,f){return{}}r.decode=d})(N=e.WhisperContentProvider_GetTabScreenshot_Params||(e.WhisperContentProvider_GetTabScreenshot_Params={}));let t;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function n(o){return O.bytes(r.CURRENT_VERSION.size).add(O.forObject(H,o.screenshot??null))}r.measure=n;function u(o,f){o.setObjectIndirect(H,0,f.screenshot??null)}r.encode=u;function d(o,f){const V=o.getObjectIndirect(H,0);return{...V!==null?{screenshot:V}:{}}}r.decode=d})(t=e.WhisperContentProvider_GetTabScreenshot_ResponseParams||(e.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class c{constructor(n){this._endpoint=new q(n.endpointState,!0),this._version=0}static create(){const[n,u]=U.createChannel(e);return[new c(n),u]}static createToBrowser(){const[n,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),n}async getWhisperContent(n){const u={options:n};return(await this._endpoint.sendAndAwaitResponse(y.encode(0,_.None,s,u))).decode(R).content}async getTabScreenshot(){const n={};return(await this._endpoint.sendAndAwaitResponse(y.encode(1,_.None,N,n))).decode(t).screenshot}_endpoint;_version}e.Proxy=c;class I extends x{constructor(){super(e)}onDisconnect;bind(n,u){this.addReceiver(u,async(d,o)=>{switch(d.header.ordinal){case 0:{const f=d.decode(s),V=n.getWhisperContent(f.options),F=o.createResponder(R,0,d.header.requestID),w=await V;F({content:w});break}case 1:{d.decode(N);const f=n.getTabScreenshot(),V=o.createResponder(t,1,d.header.requestID),F=await f;V({screenshot:F});break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(n)})}createRemote(n){const[u,d]=U.createChannel(e);return this.bind(n,d),u}}e.Dispatcher=I})(Re||(Re={}));class je{dispatcher;constructor(s){this.dispatcher=new P.Dispatcher,this.dispatcher.bind(this,s)}refreshSessionContext(s,R){z.authSessionContext={authToken:s,behavior:R},z.wantsAuthSessionContext$.set(!0)}}function me(e){return e==="none"||e==="sent"||e==="success"||e==="failure"}class ke{prepareState;lastPrepareTimestamp;conduitToken;constructor(s,R,N){this.prepareState=me(s)?s:"none",this.lastPrepareTimestamp=R-performance.timeOrigin,this.conduitToken=N}}class De{dispatcher;constructor(s){this.dispatcher=new C.Dispatcher,this.dispatcher.bind(this,s)}closeNavigationSidebar(){ye.setSidebarOpen(!1)}setChatTheme(s){throw new Error("Method not implemented.")}showSearch(){throw new Error("Method not implemented.")}setWindowStyle(s){z.windowStyle$.set(s)}setModel(s){z.wantsModelSlug$.set(s)}newConversation(){z.wantsNewConversation$.set(!0),z.selectedConversationId$.set(void 0)}loadConversation(s){z.wantsNewConversation$.set(!1),z.selectedConversationId$.set(s)}requestCompletion(s,R,N){z.requestCompletion={prompt:s,systemHints:R,modelSlug:N},z.wantsRequestCompletion$.set(!0)}populatePrompt(s,R){z.populatePrompt={userMessage:s??null,targetedReply:R??null},z.wantsPopulatePrompt$.set(!0)}updateContext(s,R,N,t,c){z.context$.set({id:s,url:s,title:R,base64favicon:N,selection:t,blocked:c}),c||z.sidebarUrlTrayForcedOpen$.set(!1)}prepareConversation(s){z.prepareConversationDetails=new ke(s.prepareState,s.lastPrepareTimestampMsSince1970,s.conduitToken??void 0)}setSuperWidgetOptions(s){ze.set(s.selectedTab)}setAttachments(s){z.attachments=s.map(R=>{const{id:N,name:t,size:c,mimeType:I,width:r,height:n,fileTokenSize:u}=R;return{...N&&{id:N},...t&&{name:t},...c&&{size:typeof c=="bigint"?Number(c):c},...I&&{mime_type:I},...r&&{width:r},...n&&{height:n},...u&&{file_token_size:u}}})}setWhisperContent(s){z.whisperContent=s}setTabContext(s){z.tabContext=s}setPromptOrigin(s){z.promptOrigin=s}navigate(s){_e(s)}populateNavlinks(s,R){const N=JSON.parse(R);ae.getState().updateFromEvent(s,N)}handleAgentRequest(s){z.agentRequest=s,z.wantsHandleAgentRequest$.set(!0)}}const Me=6e4;class $e{host;logger;lastMissingAuthTime=0;constructor(s,R){this.host=s,this.logger=R}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const s=Date.now();if(s-this.lastMissingAuthTime>Me){this.lastMissingAuthTime=s;const[R,N]=te.Proxy.create();this.bindReceiver(N),this.logger.notice("onMissingSessionAuth.invoked"),R.handleMissingSessionAuth()}}recordAvailableSessionAuth(){const[s,R]=te.Proxy.create();this.bindReceiver(R),this.logger.notice("recordAvailableSessionAuth.invoked"),s.recordAvailableSessionAuth()}tryOpenAgentViewer(s){const[R,N]=J.Proxy.create();return this.bindReceiver(N),R.tryOpenAgentViewer(s)}userSentMessageInAgentConversation(s){const[R,N]=J.Proxy.create();this.bindReceiver(N),R.userSentMessageInAgentConversation(s)}getClientID(){const[s,R]=J.Proxy.create();return this.bindReceiver(R),s.getClientID()}becomeMainPage(){const[s,R]=l.Proxy.create();this.bindReceiver(R),s.becomeMainPage()}openInNewTab(){const[s,R]=l.Proxy.create();this.bindReceiver(R),s.openInNewTab()}closeSideChat(){const[s,R]=l.Proxy.create();this.bindReceiver(R),s.closeSidebar()}async getWhisperContent(){const[s,R]=Re.Proxy.create();return this.bindReceiver(R),await s.getWhisperContent({})}async getTabScreenshot(){const[s,R]=Re.Proxy.create();return this.bindReceiver(R),await s.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}async callLocalTool(s,R){const[N,t]=de.Proxy.create();return this.bindReceiver(t),await N.callLocalTool(s,R)}bindReceiver(s){this.host.bindReceiver(s.interfaceType.interfaceName,s.pipe)}async getToolNames(){const[s,R]=de.Proxy.create();return this.bindReceiver(R),await s.getToolNames()}openSettings(s){const[R,N]=Se.Proxy.create();this.bindReceiver(N),R.openSettings(s)}}class Be{proxy;constructor(s){this.proxy=s}handleLink(s,R){this.proxy.handleLink(s,R)}}class Ze{proxy;constructor(s){this.proxy=s}triggerProductEvent(s){this.proxy.triggerProductEvent(s)}}class Je{dispatcher;host;logger;conversationControllers=[];authStateController=[];navigationSidebarController;constructor(){this.logger=Ue.createLogger("web-bridge-host","info","http"),this.dispatcher=new Te.Dispatcher;const s=qe.Proxy.createToBrowser();this.host=new $e(s,this.logger),s.setFrontend(this.dispatcher.createRemote(this));const[R,N]=he.Proxy.create();this.host.bindReceiver(N),this.navigationSidebarController=new xe(R)}get linkHandler(){const[s,R]=fe.Proxy.create();return this.host.bindReceiver(R),new Be(s)}get productEventHandler(){const[s,R]=Ve.Proxy.create();return this.host.bindReceiver(R),new Ze(s)}logConsoleMessage(s){this.logger.info(s)}sendMessage(s,R){return Promise.resolve(null)}bindReceiver(s,R){s===C.interfaceName?this.conversationControllers.push(new De(new ge(C,R))):s===P.interfaceName&&this.authStateController.push(new je(new ge(P,R)))}}let T;async function Qe(){T=new Je;const e=await T.host.getAccountID();T.logger.info(`Account ID: ${e}`)}function ve(){return T?.host}function Ae(){return T?.linkHandler}function le(){return T?.productEventHandler}async function Le(){return T?(T.logger.debug("Getting whisper content"),await T.host.getWhisperContent()):null}async function Ge(){return T?await T.host.getTabScreenshot():null}function We(){if(!T)return null;T.host.closeSideChat()}export{We as closeSideChat,ve as getHost,Ae as getLinkHandler,le as getProductEventHandler,Le as getSidebarWhisperContent,Ge as getTabScreenshot,Qe as initHostConnection};
//# sourceMappingURL=6a3e5rtr9pyzi31y.js.map
