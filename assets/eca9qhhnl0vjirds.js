const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/c80ngh1cyfi1ays9.js","assets/lu2xqwqmjc95q6j6.js","assets/hml6mmd5fyx85si7.js","assets/root-c0w5lvnh.css","assets/rseqzngxzbdt1oxg.js","assets/conversation-small-gcvo4yhm.css","assets/glpkb1wyk6id03qg.js","assets/ed5vp89c75l42w9w.js","assets/cum7p7o751ibvfco.js","assets/nm04jgpfyxi6pn12.js","assets/an8inla81yw2b3cc.js","assets/ey4gwj40q99caymo.js"])))=>i.map(i=>d[i]);
import{j as O,A as ta,m as ai,M as Mt,q as na,r as d,e as ps,g as tu,R as vt,T as Ro,u as ra}from"./lu2xqwqmjc95q6j6.js";import{K as oa,uP as nu,R as ru,O as ws,W as vs,aq as ys,V as fo,d as Ht,uQ as ou,rb as iu,gg as ia,bx as su,uR as lu,P as On,jQ as au,aB as Nn,dq as cu,hs as uu,uS as du,J as fu,G as sa,ce as hu,a as gu,q as mu,ea as pu,c6 as ho,ay as wu}from"./hml6mmd5fyx85si7.js";import{oo as bs,uS as vu,aK as an,uT as Js,b$ as yu,iO as bu,m_ as xu,b7 as Cu,H as ku,aj as la,al as Mo,a4 as Mr,uU as aa,sz as Su,ak as Ru,at as Mu,i8 as ca,uV as Eu,s7 as Tu,b_ as el,eb as Iu}from"./rseqzngxzbdt1oxg.js";import{S as ua}from"./glpkb1wyk6id03qg.js";import{f as Du,e as Pu,m as Co,g as go,h as _u,j as Au,k as da,r as wt,v as Lu,t as Hu,l as zu,n as Fu,A as fa,P as ha,B as ga,o as Ou,S as Nu,C as $u,a as Wu,L as Bu,p as ju,b as Vu,q as Xu,c as Uu,d as qu}from"./ed5vp89c75l42w9w.js";import{r as tr}from"./cum7p7o751ibvfco.js";import{r as Ku}from"./nm04jgpfyxi6pn12.js";import{u as Yu,b as Gu,c as Zu}from"./an8inla81yw2b3cc.js";const Qu=({isHovered:e=!1})=>O.jsx(ta,{children:e&&O.jsxs(ai.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.2},className:"border-token-border-default bg-token-main-surface-primary text-token-text-secondary absolute end-2 bottom-2 flex items-center justify-center rounded-md border px-3 py-2 text-xs",children:[O.jsx(bs,{className:"icon me-1.5"}),O.jsx(Mt,{id:"ILz2tL",defaultMessage:"Interactive charts of this type not yet supported"})]})}),Ju=({fileId:e})=>na({queryKey:["ada-visualization","chart",e],queryFn:async()=>{const t=await ws(e);if(t.status===vs.Success){const n=await fetch(t.download_url);if(n.status!==200)throw new Error("Failed to download chart json from interpreter");const r=await n.json();return{content:{chart_type:r.type,title:r.title,labels:r.labels,datasets:r.datasets,x_label:r.x_label,y_label:r.y_label},file_name:t.file_name??"",download_url:t.download_url}}else throw new Error("Failed to download chart json from interpreter")},staleTime:oa}),ed=({fileId:e,fileName:t})=>na({queryKey:["ada-visualization","table",e],queryFn:async()=>{if(t&&nu(t)){const n=await ru.safeGet("/ada/parse_xls/{file_id}",{parameters:{path:{file_id:e}}});return{content:n.sheets.map(r=>({name:r.name,columnNames:r.columns.map(o=>o.name),columnTypes:r.columns.map(()=>"string"),rows:nd(r.columns)})),download_url:n.download_url,file_name:t}}else{const n=await ws(e);if(n.status===vs.Success){const r=await fetch(n.download_url);return td(r,n.file_name??"",n.download_url)}else throw new Error("Failed to download from interpreter")}},staleTime:oa,throwOnError:!1});async function td(e,t,n){const r=await e.text(),{parse:o}=await ys(async()=>{const{parse:s}=await import("./oeujip5i1ptrxie5.js");return{parse:s}},[]),i=o(r);return{content:{columnNames:i.shift(),columnTypes:i[0].map(()=>"string"),rows:i},file_name:t,download_url:n}}function nd(e){const t=e[0].values.length,n=[];for(let r=0;r<t;r++){const o=e.map(i=>i.values[r]);n.push(o)}return n}const ma=e=>d.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M16.0299 3.0293C16.2896 2.76996 16.7107 2.76988 16.9703 3.0293C17.23 3.28899 17.23 3.711 16.9703 3.9707L13.2731 7.66797H16.9996L17.1344 7.68164C17.4372 7.74375 17.6645 8.01192 17.6647 8.33301C17.6647 8.65421 17.4372 8.92219 17.1344 8.98438L16.9996 8.99805H11.6666C11.2994 8.99801 11.0016 8.70026 11.0016 8.33301V3C11.0016 2.63275 11.2994 2.33499 11.6666 2.33496C12.0339 2.33496 12.3317 2.63273 12.3317 3V6.72754L16.0299 3.0293ZM8.99475 17C8.99475 17.3673 8.69698 17.665 8.32971 17.665C7.96258 17.6649 7.66467 17.3672 7.66467 17V13.2725L3.96741 16.9707C3.70771 17.2304 3.2857 17.2304 3.026 16.9707C2.7663 16.711 2.7663 16.289 3.026 16.0293L6.72424 12.332H2.9967C2.62955 12.332 2.33185 12.0341 2.33167 11.667C2.33167 11.2997 2.62943 11.002 2.9967 11.002H8.32971C8.69698 11.002 8.99475 11.2997 8.99475 11.667V17Z"})),rd=e=>d.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M16.6069 10.1567L16.7446 10.2787C17.3605 10.927 16.9184 12.0626 15.9653 12.0629H13.0688L14.0366 13.9994L14.1127 14.1733C14.4237 14.993 14.1137 15.9234 13.3735 16.393L13.2075 16.4867L12.1645 17.0082C11.3063 17.4373 10.274 17.1383 9.77095 16.3451L9.6772 16.1791L8.64009 14.1049L6.79927 15.9467C6.13071 16.615 4.98775 16.1411 4.98775 15.1957V13.3285L6.31783 12.6215V14.5473L7.96333 12.9018L8.06392 12.8129C8.54738 12.4361 9.25678 12.5514 9.59615 13.0619L9.66353 13.1772L10.8667 15.5844L10.9233 15.6742C11.0737 15.8659 11.3434 15.9319 11.5698 15.8188L12.6127 15.2973L12.7026 15.2406C12.8667 15.1118 12.9391 14.8954 12.8852 14.6938L12.8471 14.5942L11.684 12.269C11.3316 11.5636 11.8448 10.7333 12.6333 10.7328H15.1665L12.9858 9.07853L14.2797 8.39103L16.6069 10.1567Z"}),d.createElement("path",{d:"M14.9751 5.21232C15.2717 5.12502 15.5987 5.25572 15.7495 5.53946C15.9215 5.86373 15.7983 6.26566 15.4741 6.4379L2.79439 13.1742L2.67037 13.225C2.37365 13.3125 2.04679 13.1826 1.89595 12.8988C1.72365 12.5745 1.847 12.1717 2.17134 11.9994L14.8501 5.26407L14.9751 5.21232Z"}),d.createElement("path",{d:"M4.98775 4.27677C4.98792 3.07241 6.36594 2.38822 7.32564 3.11564L11.0668 5.95353L9.7729 6.64103L6.52193 4.17521C6.43807 4.11214 6.31799 4.17174 6.31783 4.27677V8.47696L4.98775 9.18399V4.27677Z"})),od=e=>d.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 2C2.89543 2 2 2.89543 2 4V12C2 13.1046 2.89543 14 4 14H12C13.1046 14 14 13.1046 14 12V4C14 2.89543 13.1046 2 12 2H4ZM6.53486 4.93219C6.31331 4.6368 5.89425 4.57694 5.59886 4.79848C5.30346 5.02002 5.2436 5.43909 5.46514 5.73448L7.16429 8L5.46514 10.2655C5.2436 10.5609 5.30346 10.98 5.59886 11.2015C5.89425 11.4231 6.31331 11.3632 6.53486 11.0678L8 9.11429L9.46514 11.0678C9.68669 11.3632 10.1057 11.4231 10.4011 11.2015C10.6965 10.98 10.7564 10.5609 10.5349 10.2655L8.83571 8L10.5349 5.73448C10.7564 5.43909 10.6965 5.02002 10.4011 4.79848C10.1057 4.57694 9.68669 4.6368 9.46514 4.93219L8 6.88571L6.53486 4.93219Z"})),id=e=>d.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 2C2.89543 2 2 2.89543 2 4V12C2 13.1046 2.89543 14 4 14H12C13.1046 14 14 13.1046 14 12V4C14 2.89543 13.1046 2 12 2H4ZM6.53486 4.93219C6.31331 4.6368 5.89425 4.57694 5.59886 4.79848C5.30346 5.02002 5.2436 5.43909 5.46514 5.73448L7.33143 8.22286V10.6667C7.33143 11.0359 7.63075 11.3352 8 11.3352C8.36925 11.3352 8.66857 11.0359 8.66857 10.6667V8.22286L10.5349 5.73448C10.7564 5.43909 10.6965 5.02002 10.4011 4.79848C10.1057 4.57694 9.68669 4.6368 9.46514 4.93219L8 6.88571L6.53486 4.93219Z"})),pa=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>n.map(o=>{const{data:i,label:s,colors:l}=o;return{label:s,data:i,backgroundColor:l,borderColor:l,borderRadius:4}}),[n]);return O.jsx(Du,{ref:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{crosshair:!1,legend:{display:!1},title:{display:!1,text:e.title},tooltip:{enabled:!0,animation:{duration:0},mode:"point",position:"nearest",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:6,left:16,right:16},yAlign:"bottom",callbacks:{title:function(o){return o[0].formattedValue},label:()=>""}}},scales:{x:{title:{display:!1},grid:{display:!1}},y:{title:{display:!1},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}}},data:{labels:e.labels,datasets:r}})});pa.displayName="BarChart";const wa=e=>{if(typeof e=="string"){const t=parseFloat(e);return isNaN(t)?e:t.toFixed(2)}else if(typeof e=="number")return e.toFixed(2);return e},va=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=n.length;return n.map(i=>{const{data:s,label:l,colors:a}=i,c=s.length;return{label:l,data:s,backgroundColor:a,borderColor:a,pointRadius:0,pointHoverRadius:5,pointHitRadius:10,tension:.2,borderWidth:sd(o,c),pointBackgroundColor:["rgba(255, 255, 255, 1)"],pointBorderWidth:3,pointHoverBorderWidth:3}})},[n]);return O.jsx(Pu,{ref:t,options:{maintainAspectRatio:!1,scales:{x:{title:{display:!1,text:e.x_label},grid:{display:!1},ticks:{callback:wa}},y:{title:{display:!1,text:e.y_label},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}},plugins:{legend:{display:!1},crosshair:!1,title:{display:!1,text:e.title},tooltip:{enabled:!0,mode:"point",animation:{duration:0},position:"nearest",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:function(o){return o[0].label},label:function(o){const{dataset:{label:i},parsed:{y:s}}=o;return`${i?`${i}: `:""}${s.toFixed(2)}`}}}}},data:{labels:e.labels,datasets:r}})}),sd=(e,t)=>t>15?1:e>10?e>50?.5:1:3;va.displayName="LineChart";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var tl=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),mo={toTextLines:function(e){var t=[],n;for(e=[].concat(e);e.length;)n=e.pop(),typeof n=="string"?t.unshift.apply(t,n.split(`
`)):Array.isArray(n)?e.push.apply(e,n):go(e)||t.unshift(""+n);return t},textSize:function(e,t,n){var r=[].concat(t),o=r.length,i=e.font,s=0,l;for(e.font=n.string,l=0;l<o;++l)s=Math.max(e.measureText(r[l]).width,s);return e.font=i,{height:o*n.lineHeight,width:s}},bound:function(e,t,n){return Math.max(e,Math.min(t,n))},arrayDiff:function(e,t){var n=e.slice(),r=[],o,i,s,l;for(o=0,s=t.length;o<s;++o)l=t[o],i=n.indexOf(l),i===-1?r.push([l,1]):n.splice(i,1);for(o=0,s=n.length;o<s;++o)r.push([n[o],-1]);return r},rasterize:function(e){return Math.round(e*tl)/tl}};function Ui(e,t){var n=t.x,r=t.y;if(n===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var o=e.x-n,i=e.y-r,s=Math.sqrt(o*o+i*i);return{x:s?o/s:0,y:s?i/s:-1}}function ld(e,t,n,r,o){switch(o){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:o*=Math.PI/180,n=Math.cos(o),r=Math.sin(o);break}return{x:e,y:t,vx:n,vy:r}}var ad=0,ya=1,ba=2,xa=4,Ca=8;function Ko(e,t,n){var r=ad;return e<n.left?r|=ya:e>n.right&&(r|=ba),t<n.top?r|=Ca:t>n.bottom&&(r|=xa),r}function cd(e,t){for(var n=e.x0,r=e.y0,o=e.x1,i=e.y1,s=Ko(n,r,t),l=Ko(o,i,t),a,c,u;!(!(s|l)||s&l);)a=s||l,a&Ca?(c=n+(o-n)*(t.top-r)/(i-r),u=t.top):a&xa?(c=n+(o-n)*(t.bottom-r)/(i-r),u=t.bottom):a&ba?(u=r+(i-r)*(t.right-n)/(o-n),c=t.right):a&ya&&(u=r+(i-r)*(t.left-n)/(o-n),c=t.left),a===s?(n=c,r=u,s=Ko(n,r,t)):(o=c,i=u,l=Ko(o,i,t));return{x0:n,x1:o,y0:r,y1:i}}function Yo(e,t){var n=t.anchor,r=e,o,i;return t.clamp&&(r=cd(r,t.area)),n==="start"?(o=r.x0,i=r.y0):n==="end"?(o=r.x1,i=r.y1):(o=(r.x0+r.x1)/2,i=(r.y0+r.y1)/2),ld(o,i,e.vx,e.vy,t.align)}var Go={arc:function(e,t){var n=(e.startAngle+e.endAngle)/2,r=Math.cos(n),o=Math.sin(n),i=e.innerRadius,s=e.outerRadius;return Yo({x0:e.x+r*i,y0:e.y+o*i,x1:e.x+r*s,y1:e.y+o*s,vx:r,vy:o},t)},point:function(e,t){var n=Ui(e,t.origin),r=n.x*e.options.radius,o=n.y*e.options.radius;return Yo({x0:e.x-r,y0:e.y-o,x1:e.x+r,y1:e.y+o,vx:n.x,vy:n.y},t)},bar:function(e,t){var n=Ui(e,t.origin),r=e.x,o=e.y,i=0,s=0;return e.horizontal?(r=Math.min(e.x,e.base),i=Math.abs(e.base-e.x)):(o=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),Yo({x0:r,y0:o+s,x1:r+i,y1:o,vx:n.x,vy:n.y},t)},fallback:function(e,t){var n=Ui(e,t.origin);return Yo({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:n.x,vy:n.y},t)}},Rn=mo.rasterize;function ud(e){var t=e.borderWidth||0,n=e.padding,r=e.size.height,o=e.size.width,i=-o/2,s=-r/2;return{frame:{x:i-n.left-t,y:s-n.top-t,w:o+n.width+t*2,h:r+n.height+t*2},text:{x:i,y:s,w:o,h:r}}}function dd(e,t){var n=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function fd(e){return e instanceof fa?Go.arc:e instanceof ha?Go.point:e instanceof ga?Go.bar:Go.fallback}function hd(e,t,n,r,o,i){var s=Math.PI/2;if(i){var l=Math.min(i,o/2,r/2),a=t+l,c=n+l,u=t+r-l,h=n+o-l;e.moveTo(t,c),a<u&&c<h?(e.arc(a,c,l,-Math.PI,-s),e.arc(u,c,l,-s,0),e.arc(u,h,l,0,s),e.arc(a,h,l,s,Math.PI)):a<u?(e.moveTo(a,n),e.arc(u,c,l,-s,s),e.arc(a,c,l,s,Math.PI+s)):c<h?(e.arc(a,c,l,-Math.PI,0),e.arc(a,h,l,0,Math.PI)):e.arc(a,c,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,o)}function gd(e,t,n){var r=n.backgroundColor,o=n.borderColor,i=n.borderWidth;!r&&(!o||!i)||(e.beginPath(),hd(e,Rn(t.x)+i/2,Rn(t.y)+i/2,Rn(t.w)-i,Rn(t.h)-i,n.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),o&&i&&(e.strokeStyle=o,e.lineWidth=i,e.lineJoin="miter",e.stroke()))}function md(e,t,n){var r=n.lineHeight,o=e.w,i=e.x,s=e.y+r/2;return t==="center"?i+=o/2:(t==="end"||t==="right")&&(i+=o),{h:r,w:o,x:i,y:s}}function pd(e,t,n){var r=e.shadowBlur,o=n.stroked,i=Rn(n.x),s=Rn(n.y),l=Rn(n.w);o&&e.strokeText(t,i,s,l),n.filled&&(r&&o&&(e.shadowBlur=0),e.fillText(t,i,s,l),r&&o&&(e.shadowBlur=r))}function wd(e,t,n,r){var o=r.textAlign,i=r.color,s=!!i,l=r.font,a=t.length,c=r.textStrokeColor,u=r.textStrokeWidth,h=c&&u,g;if(!(!a||!s&&!h))for(n=md(n,o,l),e.font=l.string,e.textAlign=o,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,s&&(e.fillStyle=i),h&&(e.lineJoin="round",e.lineWidth=u,e.strokeStyle=c),g=0,a=t.length;g<a;++g)pd(e,t[g],{stroked:h,filled:s,w:n.w,x:n.x,y:n.y+n.h*g})}var ka=function(e,t,n,r){var o=this;o._config=e,o._index=r,o._model=null,o._rects=null,o._ctx=t,o._el=n};Co(ka.prototype,{_modelize:function(e,t,n,r){var o=this,i=o._index,s=Hu(wt([n.font,{}],r,i)),l=wt([n.color,zu.color],r,i);return{align:wt([n.align,"center"],r,i),anchor:wt([n.anchor,"center"],r,i),area:r.chart.chartArea,backgroundColor:wt([n.backgroundColor,null],r,i),borderColor:wt([n.borderColor,null],r,i),borderRadius:wt([n.borderRadius,0],r,i),borderWidth:wt([n.borderWidth,0],r,i),clamp:wt([n.clamp,!1],r,i),clip:wt([n.clip,!1],r,i),color:l,display:e,font:s,lines:t,offset:wt([n.offset,4],r,i),opacity:wt([n.opacity,1],r,i),origin:dd(o._el,r),padding:Fu(wt([n.padding,4],r,i)),positioner:fd(o._el),rotation:wt([n.rotation,0],r,i)*(Math.PI/180),size:mo.textSize(o._ctx,t,s),textAlign:wt([n.textAlign,"start"],r,i),textShadowBlur:wt([n.textShadowBlur,0],r,i),textShadowColor:wt([n.textShadowColor,l],r,i),textStrokeColor:wt([n.textStrokeColor,l],r,i),textStrokeWidth:wt([n.textStrokeWidth,0],r,i)}},update:function(e){var t=this,n=null,r=null,o=t._index,i=t._config,s,l,a,c=wt([i.display,!0],e,o);c&&(s=e.dataset.data[o],l=Lu(da(i.formatter,[s,e]),s),a=go(l)?[]:mo.toTextLines(l),a.length&&(n=t._modelize(c,a,i,e),r=ud(n))),t._model=n,t._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n=this,r=e.ctx,o=n._model,i=n._rects,s;this.visible()&&(r.save(),o.clip&&(s=o.area,r.beginPath(),r.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),r.clip()),r.globalAlpha=mo.bound(0,o.opacity,1),r.translate(Rn(t.x),Rn(t.y)),r.rotate(o.rotation),gd(r,i.frame,o),wd(r,o.lines,i.text,o),r.restore())}});var vd=Number.MIN_SAFE_INTEGER||-9007199254740991,yd=Number.MAX_SAFE_INTEGER||9007199254740991;function Qr(e,t,n){var r=Math.cos(n),o=Math.sin(n),i=t.x,s=t.y;return{x:i+r*(e.x-i)-o*(e.y-s),y:s+o*(e.x-i)+r*(e.y-s)}}function nl(e,t){var n=yd,r=vd,o=t.origin,i,s,l,a,c;for(i=0;i<e.length;++i)s=e[i],l=s.x-o.x,a=s.y-o.y,c=t.vx*l+t.vy*a,n=Math.min(n,c),r=Math.max(r,c);return{min:n,max:r}}function Zo(e,t){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return{vx:(t.x-e.x)/o,vy:(t.y-e.y)/o,origin:e,ln:o}}var Sa=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Co(Sa.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,n=1,r=t._rect;return e=Qr(e,t.center(),-t._rotation),!(e.x<r.x-n||e.y<r.y-n||e.x>r.x+r.w+n*2||e.y>r.y+r.h+n*2)},intersects:function(e){var t=this._points(),n=e._points(),r=[Zo(t[0],t[1]),Zo(t[0],t[3])],o,i,s;for(this._rotation!==e._rotation&&r.push(Zo(n[0],n[1]),Zo(n[0],n[3])),o=0;o<r.length;++o)if(i=nl(t,r[o]),s=nl(n,r[o]),i.max<s.min||s.max<i.min)return!1;return!0},_points:function(){var e=this,t=e._rect,n=e._rotation,r=e.center();return[Qr({x:t.x,y:t.y},r,n),Qr({x:t.x+t.w,y:t.y},r,n),Qr({x:t.x+t.w,y:t.y+t.h},r,n),Qr({x:t.x,y:t.y+t.h},r,n)]}});function Ra(e,t,n){var r=t.positioner(e,t),o=r.vx,i=r.vy;if(!o&&!i)return{x:r.x,y:r.y};var s=n.w,l=n.h,a=t.rotation,c=Math.abs(s/2*Math.cos(a))+Math.abs(l/2*Math.sin(a)),u=Math.abs(s/2*Math.sin(a))+Math.abs(l/2*Math.cos(a)),h=1/Math.max(Math.abs(o),Math.abs(i));return c*=o*h,u*=i*h,c+=t.offset*o,u+=t.offset*i,{x:r.x+c,y:r.y+u}}function bd(e,t){var n,r,o,i;for(n=e.length-1;n>=0;--n)for(o=e[n].$layout,r=n-1;r>=0&&o._visible;--r)i=e[r].$layout,i._visible&&o._box.intersects(i._box)&&t(o,i);return e}function xd(e){var t,n,r,o,i,s,l;for(t=0,n=e.length;t<n;++t)r=e[t],o=r.$layout,o._visible&&(l=new Proxy(r._el,{get:(a,c)=>a.getProps([c],!0)[c]}),i=r.geometry(),s=Ra(l,r.model(),i),o._box.update(s,i,r.rotation()));return bd(e,function(a,c){var u=a._hidable,h=c._hidable;u&&h||h?c._visible=!1:u&&(a._visible=!1)})}var po={prepare:function(e){var t=[],n,r,o,i,s;for(n=0,o=e.length;n<o;++n)for(r=0,i=e[n].length;r<i;++r)s=e[n][r],t.push(s),s.$layout={_box:new Sa,_hidable:!1,_visible:!0,_set:n,_idx:s._index};return t.sort(function(l,a){var c=l.$layout,u=a.$layout;return c._idx===u._idx?u._set-c._set:u._idx-c._idx}),this.update(t),t},update:function(e){var t=!1,n,r,o,i,s;for(n=0,r=e.length;n<r;++n)o=e[n],i=o.model(),s=o.$layout,s._hidable=i&&i.display==="auto",s._visible=o.visible(),t|=s._hidable;t&&xd(e)},lookup:function(e,t){var n,r;for(n=e.length-1;n>=0;--n)if(r=e[n].$layout,r&&r._visible&&r._box.contains(t))return e[n];return null},draw:function(e,t){var n,r,o,i,s,l;for(n=0,r=t.length;n<r;++n)o=t[n],i=o.$layout,i._visible&&(s=o.geometry(),l=Ra(o._el,o.model(),s),i._box.update(l,s,o.rotation()),o.draw(e,l))}},Cd=function(e){if(go(e))return null;var t=e,n,r,o;if(_u(e))if(!go(e.label))t=e.label;else if(!go(e.r))t=e.r;else for(t="",n=Object.keys(e),o=0,r=n.length;o<r;++o)t+=(o!==0?", ":"")+n[o]+": "+e[n[o]];return""+t},kd={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Cd,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Ot="$datalabels",Ma="$default";function Sd(e,t){var n=e.datalabels,r={},o=[],i,s;return n===!1?null:(n===!0&&(n={}),t=Co({},[t,n]),i=t.labels||{},s=Object.keys(i),delete t.labels,s.length?s.forEach(function(l){i[l]&&o.push(Co({},[t,i[l],{_key:l}]))}):o.push(t),r=o.reduce(function(l,a){return Au(a.listeners||{},function(c,u){l[u]=l[u]||{},l[u][a._key||Ma]=c}),delete a.listeners,l},{}),{labels:o,listeners:r})}function ss(e,t,n,r){if(t){var o=n.$context,i=n.$groups,s;t[i._set]&&(s=t[i._set][i._key],s&&da(s,[o,r])===!0&&(e[Ot]._dirty=!0,n.update(o)))}}function Rd(e,t,n,r,o){var i,s;!n&&!r||(n?r?n!==r&&(s=i=!0):s=!0:i=!0,s&&ss(e,t.leave,n,o),i&&ss(e,t.enter,r,o))}function Md(e,t){var n=e[Ot],r=n._listeners,o,i;if(!(!r.enter&&!r.leave)){if(t.type==="mousemove")i=po.lookup(n._labels,t);else if(t.type!=="mouseout")return;o=n._hovered,n._hovered=i,Rd(e,r,o,i,t)}}function Ed(e,t){var n=e[Ot],r=n._listeners.click,o=r&&po.lookup(n._labels,t);o&&ss(e,r,o,t)}var Td={id:"datalabels",defaults:kd,beforeInit:function(e){e[Ot]={_actives:[]}},beforeUpdate:function(e){var t=e[Ot];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var r=t.index,o=e[Ot],i=o._datasets[r]=[],s=e.isDatasetVisible(r),l=e.data.datasets[r],a=Sd(l,n),c=t.meta.data||[],u=e.ctx,h,g,p,f,x,E,M,b;for(u.save(),h=0,p=c.length;h<p;++h)if(M=c[h],M[Ot]=[],s&&M&&e.getDataVisibility(h)&&!M.skip)for(g=0,f=a.labels.length;g<f;++g)x=a.labels[g],E=x._key,b=new ka(x,u,M,h),b.$groups={_set:r,_key:E||Ma},b.$context={active:!1,chart:e,dataIndex:h,dataset:l,datasetIndex:r},b.update(b.$context),M[Ot].push(b),i.push(b);u.restore(),Co(o._listeners,a.listeners,{merger:function(D,R,v){R[D]=R[D]||{},R[D][t.index]=v[D],o._listened=!0}})},afterUpdate:function(e){e[Ot]._labels=po.prepare(e[Ot]._datasets)},afterDatasetsDraw:function(e){po.draw(e,e[Ot]._labels)},beforeEvent:function(e,t){if(e[Ot]._listened){var n=t.event;switch(n.type){case"mousemove":case"mouseout":Md(e,n);break;case"click":Ed(e,n);break}}},afterEvent:function(e){var t=e[Ot],n=t._actives,r=t._actives=e.getActiveElements(),o=mo.arrayDiff(n,r),i,s,l,a,c,u,h;for(i=0,s=o.length;i<s;++i)if(c=o[i],c[1])for(h=c[0].element[Ot]||[],l=0,a=h.length;l<a;++l)u=h[l],u.$context.active=c[1]===1,u.update(u.$context);(t._dirty||o.length)&&(po.update(t._labels),e.render()),delete t._dirty}};const Ea=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=getComputedStyle(document.documentElement);return n.map(i=>{const{data:s,colors:l,label:a}=i;return{label:a,data:s,backgroundColor:l,borderWidth:2,borderColor:[o.getPropertyValue("--main-surface-primary").trim()]}})},[n]);return O.jsx("div",{className:"h-full w-full py-2",children:O.jsx(Ou,{ref:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{crosshair:!1,legend:{display:!1},title:{display:!1},tooltip:{enabled:!0,animation:{duration:0},mode:"index",position:"average",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:o=>o[0].formattedValue,label:function(o){const i=e.labels[o.dataIndex],s=n[0],l=s.data[o.dataIndex],a=s.data.reduce((u,h)=>Number(u)+Number(h),0),c=parseFloat((l/Number(a)*100).toFixed(2));return`${i} · ${c}%`}}},datalabels:{color:"white",textAlign:"center",font:{weight:"bold",size:16},backgroundColor:function(o){const i=o.dataset.data[o.dataIndex],s=o.dataset.data.reduce((a,c)=>Number(a)+Number(c),0);return i/Number(s)*100>=15?"rgba(0, 0, 0, 0.1)":"transparent"},borderRadius:15,padding:{top:6,bottom:6,left:8,right:8},formatter:(o,i)=>{const s=i.dataset.data.reduce((a,c)=>Number(a)+Number(c),0);return o/Number(s)*100>=15?o.toFixed(2):""}}}},plugins:[Td],data:{labels:e.labels,datasets:r}})})});Ea.displayName="PieChart";const Ta=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=n.reduce((i,s)=>i+s.data.length,0);return n.map(i=>{const{data:s,label:l,colors:a}=i;return{label:l,data:s,backgroundColor:a,borderColor:a,pointRadius:o>50?o>200?2:4:8,pointHoverRadius:o>50?4:8}})},[n]);return O.jsx(Nu,{ref:t,options:{maintainAspectRatio:!1,scales:{x:{title:{display:!1},grid:{display:!1},ticks:{callback:wa}},y:{title:{display:!1},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}},elements:{point:{radius:0}},plugins:{legend:{display:!1},title:{display:!1,text:e.title},crosshair:!1,tooltip:{enabled:!0,mode:"point",position:"nearest",animation:{duration:0},backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:function(){return""},label:function(o){return`${o.dataset.label?`${o.dataset.label}: `:""} X=${o.parsed.x.toFixed(2)}, Y=${o.parsed.y.toFixed(2)} 
`}}}}},data:{labels:e.labels,datasets:r}})});Ta.displayName="ScatterChart";$u.register(fa,Wu,Bu,ga,ju,Vu,Xu,Uu,ha,qu);const Ia=16,rl={bar:pa,pie:Ea,line:va,scatter:Ta};function ol({item:e,formattedName:t}){return O.jsxs("div",{className:"inline-flex items-center gap-1",children:[O.jsx("div",{className:"h-3 w-3 rounded-xs",style:{backgroundColor:e.color}}),t]})}function Id({items:e,hideAxisLabels:t=!1,xLabel:n="",yLabel:r=""}){const o=ps();function i(s,l){const a=l.indexOf(s);return a<l.length-2?`${s.name}, `:a===l.length-2?`${s.name}${l.length>2?", ":" "} ${o.formatMessage({id:"Gt7UQw",defaultMessage:"and"})}`:s.name}return O.jsxs("div",{className:"text-token-text-primary flex w-full flex-wrap items-center gap-1 px-4 text-xs",children:[!t&&O.jsx(Mt,{id:"Wn04Wd",defaultMessage:"{yLabel} by {xLabel}",values:{xLabel:O.jsxs("div",{className:"inline-flex items-center gap-0.5",children:[O.jsx(od,{className:"icon-sm text-token-text-secondary"}),n]}),yLabel:O.jsxs("div",{className:"inline-flex items-center gap-0.5",children:[O.jsx(id,{className:"icon-sm text-token-text-secondary"}),r]})}}),e.length>1&&e.length<Ia&&(t?O.jsx(Mt,{id:"WKJKdH",defaultMessage:"For {legendItems}",values:{legendItems:e.map((s,l)=>O.jsx(ol,{item:s,formattedName:i(s,e)},l))}}):O.jsx(Mt,{id:"Isulib",defaultMessage:"for {legendItems}",values:{legendItems:e.map((s,l)=>O.jsx(ol,{item:s,formattedName:i(s,e)},l))}}))]})}const Da=d.forwardRef(({chart:e},t)=>{const n=d.useRef(null);d.useImperativeHandle(t,()=>({getBase64Image:()=>{if(!n.current){fo.addError("Chart instance is not yet available.");return}return n.current.toBase64Image()}}));const r=d.useCallback(()=>{if(e.chart_type==="pie"){const i=e.datasets[0].colors;if(i&&Array.isArray(i))return e.labels.map((s,l)=>({name:s,color:i[l]??""}))}else return e.datasets.map(i=>({name:i.label,color:Array.isArray(i.colors)?i.colors[0]:i.colors}));return[]},[e]);if(!(e.chart_type in rl))return O.jsx(Mt,{id:"Chart.invalidChartType",defaultMessage:"Invalid chart type"});const o=rl[e.chart_type];return O.jsxs("div",{className:"flex h-full w-full flex-col items-center",children:[O.jsx("div",{className:"w-full flex-initial",style:{flexBasis:"28px"},children:O.jsx(Id,{xLabel:e.x_label,yLabel:e.y_label,items:r(),hideAxisLabels:e.chart_type==="pie"})}),O.jsx("div",{className:Ht("flex w-full grow items-center justify-center px-4 pb-3"),style:{minHeight:"0"},children:O.jsx(o,{chart:e,ref:n})})]})});Da.displayName="Chart";function Pa(e="This should not happen"){throw new Error(e)}function Ut(e,t="Assertion failed"){if(!e)return Pa(t)}function ko(e,t){return Pa(t??"Hell froze over")}function Dd(e,t){try{return e()}catch{return t}}const il=Object.prototype.hasOwnProperty;function Lr(e,t){let n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Lr(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(il.call(e,n)&&++r&&!il.call(t,n)||!(n in t)||!Lr(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}var qi,sl;function Pd(){if(sl)return qi;sl=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return qi=n,qi}var Ki,ll;function _d(){if(ll)return Ki;ll=1;var e=Pd(),t=ou();function n(r,o){return r!=null&&t(r,o,e)}return Ki=n,Ki}var Ad=_d();const Ld=tu(Ad),ci=null,xs=void 0;var oe;(function(e){e.Uri="uri",e.Text="text",e.Image="image",e.RowID="row-id",e.Number="number",e.Bubble="bubble",e.Boolean="boolean",e.Loading="loading",e.Markdown="markdown",e.Drilldown="drilldown",e.Protected="protected",e.Custom="custom"})(oe||(oe={}));var al;(function(e){e.HeaderRowID="headerRowID",e.HeaderCode="headerCode",e.HeaderNumber="headerNumber",e.HeaderString="headerString",e.HeaderBoolean="headerBoolean",e.HeaderAudioUri="headerAudioUri",e.HeaderVideoUri="headerVideoUri",e.HeaderEmoji="headerEmoji",e.HeaderImage="headerImage",e.HeaderUri="headerUri",e.HeaderPhone="headerPhone",e.HeaderMarkdown="headerMarkdown",e.HeaderDate="headerDate",e.HeaderTime="headerTime",e.HeaderEmail="headerEmail",e.HeaderReference="headerReference",e.HeaderIfThenElse="headerIfThenElse",e.HeaderSingleValue="headerSingleValue",e.HeaderLookup="headerLookup",e.HeaderTextTemplate="headerTextTemplate",e.HeaderMath="headerMath",e.HeaderRollup="headerRollup",e.HeaderJoinStrings="headerJoinStrings",e.HeaderSplitString="headerSplitString",e.HeaderGeoDistance="headerGeoDistance",e.HeaderArray="headerArray",e.RowOwnerOverlay="rowOwnerOverlay",e.ProtectedColumnOverlay="protectedColumnOverlay"})(al||(al={}));var ui;(function(e){e.Triangle="triangle",e.Dots="dots"})(ui||(ui={}));const vi="___gdg_header_cell_",_a=vi+"checked",Aa=vi+"unchecked",Hd=vi+"indeterminate";function Qo(e){return"width"in e&&typeof e.width=="number"}async function cl(e){return typeof e=="object"?e:await e()}function Ir(e){return!(e.kind===oe.Loading||e.kind===oe.Bubble||e.kind===oe.RowID||e.kind===oe.Protected||e.kind===oe.Drilldown)}function Pr(e){return e.kind===Qt.Marker||e.kind===Qt.NewRow}function uo(e){if(!Ir(e)||e.kind===oe.Image)return!1;if(e.kind===oe.Text||e.kind===oe.Number||e.kind===oe.Markdown||e.kind===oe.Uri||e.kind===oe.Custom||e.kind===oe.Boolean)return e.readonly!==!0;ko(e,"A cell was passed with an invalid kind")}function zd(e){return Ld(e,"editor")}function ls(e){return!(e.readonly??!1)}var Qt;(function(e){e.NewRow="new-row",e.Marker="marker"})(Qt||(Qt={}));function Fd(e){if(e.length===0)return[];const t=[...e],n=[];t.sort(function(r,o){return r[0]-o[0]}),n.push([...t[0]]);for(const r of t.slice(1)){const o=n[n.length-1];o[1]<r[0]?n.push([...r]):o[1]<r[1]&&(o[1]=r[1])}return n}let ul;class He{items;constructor(t){this.items=t}static empty=()=>ul??(ul=new He([]));static fromSingleSelection=t=>He.empty().add(t);offset(t){if(t===0)return this;const n=this.items.map(r=>[r[0]+t,r[1]+t]);return new He(n)}add(t){const n=typeof t=="number"?[t,t+1]:t,r=Fd([...this.items,n]);return new He(r)}remove(t){const n=[...this.items],r=typeof t=="number"?t:t[0],o=typeof t=="number"?t+1:t[1];for(const[i,s]of n.entries()){const[l,a]=s;if(l<=o&&r<=a){const c=[];l<r&&c.push([l,r]),o<a&&c.push([o,a]),n.splice(i,1,...c)}}return new He(n)}first(){if(this.items.length!==0)return this.items[0][0]}last(){if(this.items.length!==0)return this.items.slice(-1)[0][1]-1}hasIndex(t){for(let n=0;n<this.items.length;n++){const[r,o]=this.items[n];if(t>=r&&t<o)return!0}return!1}hasAll(t){for(let n=t[0];n<t[1];n++)if(!this.hasIndex(n))return!1;return!0}some(t){for(const n of this)if(t(n))return!0;return!1}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(let n=0;n<this.items.length;n++){const r=t.items[n],o=this.items[n];if(r[0]!==o[0]||r[1]!==o[1])return!1}return!0}toArray(){const t=[];for(const[n,r]of this.items)for(let o=n;o<r;o++)t.push(o);return t}get length(){let t=0;for(const[n,r]of this.items)t+=r-n;return t}*[Symbol.iterator](){for(const[t,n]of this.items)for(let r=t;r<n;r++)yield r}}var Od=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Yi=vu(function(e){return Od.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Nd=function(){const t=Array.prototype.slice.call(arguments).filter(Boolean),n={},r=[];t.forEach(i=>{(i?i.split(" "):[]).forEach(l=>{if(l.startsWith("atm_")){const[,a]=l.split("_");n[a]=l}else r.push(l)})});const o=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.push(n[i]);return o.push(...r),o.join(" ")},dl=Nd,$d=e=>e.toUpperCase()===e,Wd=e=>t=>e.indexOf(t)===-1,La=(e,t)=>{const n={};return Object.keys(e).filter(Wd(t)).forEach(r=>{n[r]=e[r]}),n};function Bd(e,t,n){const r=La(t,n);if(!e){const o=typeof Yi=="function"?{default:Yi}:Yi;Object.keys(r).forEach(i=>{o.default(i)||delete r[i]})}return r}var jd=(e,t)=>{};function Vd(e){let t="";return n=>{const r=(i,s)=>{const{as:l=e,class:a=t}=i,c=n.propsAsIs===void 0?!(typeof l=="string"&&l.indexOf("-")===-1&&!$d(l[0])):n.propsAsIs,u=Bd(c,i,["as","class"]);u.ref=s,u.className=n.atomic?dl(n.class,u.className||a):dl(u.className||a,n.class);const{vars:h}=n;if(h){const g={};for(const x in h){const E=h[x],M=E[0],b=E[1]||"",D=typeof M=="function"?M(i):M;jd(D,n.name),g[`--${x}`]=`${D}${b}`}const p=u.style||{},f=Object.keys(p);f.length>0&&f.forEach(x=>{g[x]=p[x]}),u.style=g}return e.__linaria&&e!==l?(u.as=l,vt.createElement(e,u)):vt.createElement(l,u)},o=vt.forwardRef?vt.forwardRef(r):i=>{const s=La(i,["innerRef"]);return r(s,i.innerRef)};return o.displayName=n.name,o.__linaria={className:n.class||t,extends:e},o}}var Kt=Vd;const Xd=Kt("div")({name:"ImageOverlayEditorStyle",class:"gdg-i2iowwq",propsAsIs:!1});var Gi={},Jr={},Jo={},ei={},fl;function Ud(){return fl||(fl=1,function(e){(function(t,n){n(e,Ro(),iu())})(ei,function(t,n,r){Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=f;var o=s(n),i=s(r);function s(b){return b&&b.__esModule?b:{default:b}}var l=Object.assign||function(b){for(var D=1;D<arguments.length;D++){var R=arguments[D];for(var v in R)Object.prototype.hasOwnProperty.call(R,v)&&(b[v]=R[v])}return b};function a(b,D){var R={};for(var v in b)D.indexOf(v)>=0||Object.prototype.hasOwnProperty.call(b,v)&&(R[v]=b[v]);return R}function c(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}var u=function(){function b(D,R){for(var v=0;v<R.length;v++){var P=R[v];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(D,P.key,P)}}return function(D,R,v){return R&&b(D.prototype,R),v&&b(D,v),D}}();function h(b,D){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:b}function g(b,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);b.prototype=Object.create(D&&D.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(b,D):b.__proto__=D)}var p=!1;function f(b){p=b}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){f(!0)}}))}catch{}function x(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return p?b:b.capture}function E(b){if("touches"in b){var D=b.touches[0],R=D.pageX,v=D.pageY;return{x:R,y:v}}var P=b.screenX,H=b.screenY;return{x:P,y:H}}var M=function(b){g(D,b);function D(){var R;c(this,D);for(var v=arguments.length,P=Array(v),H=0;H<v;H++)P[H]=arguments[H];var I=h(this,(R=D.__proto__||Object.getPrototypeOf(D)).call.apply(R,[this].concat(P)));return I._handleSwipeStart=I._handleSwipeStart.bind(I),I._handleSwipeMove=I._handleSwipeMove.bind(I),I._handleSwipeEnd=I._handleSwipeEnd.bind(I),I._onMouseDown=I._onMouseDown.bind(I),I._onMouseMove=I._onMouseMove.bind(I),I._onMouseUp=I._onMouseUp.bind(I),I._setSwiperRef=I._setSwiperRef.bind(I),I}return u(D,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,x({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,x({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(v){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(v))}},{key:"_onMouseMove",value:function(v){this.mouseDown&&this._handleSwipeMove(v)}},{key:"_onMouseUp",value:function(v){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(v)}},{key:"_handleSwipeStart",value:function(v){var P=E(v),H=P.x,I=P.y;this.moveStart={x:H,y:I},this.props.onSwipeStart(v)}},{key:"_handleSwipeMove",value:function(v){if(this.moveStart){var P=E(v),H=P.x,I=P.y,C=H-this.moveStart.x,F=I-this.moveStart.y;this.moving=!0;var S=this.props.onSwipeMove({x:C,y:F},v);S&&v.cancelable&&v.preventDefault(),this.movePosition={deltaX:C,deltaY:F}}}},{key:"_handleSwipeEnd",value:function(v){this.props.onSwipeEnd(v);var P=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-P?this.props.onSwipeLeft(1,v):this.movePosition.deltaX>P&&this.props.onSwipeRight(1,v),this.movePosition.deltaY<-P?this.props.onSwipeUp(1,v):this.movePosition.deltaY>P&&this.props.onSwipeDown(1,v)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(v){this.swiper=v,this.props.innerRef(v)}},{key:"render",value:function(){var v=this.props;v.tagName;var P=v.className,H=v.style,I=v.children;v.allowMouseEvents,v.onSwipeUp,v.onSwipeDown,v.onSwipeLeft,v.onSwipeRight,v.onSwipeStart,v.onSwipeMove,v.onSwipeEnd,v.innerRef,v.tolerance;var C=a(v,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return o.default.createElement(this.props.tagName,l({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:P,style:H},C),I)}}]),D}(n.Component);M.displayName="ReactSwipe",M.propTypes={tagName:i.default.string,className:i.default.string,style:i.default.object,children:i.default.node,allowMouseEvents:i.default.bool,onSwipeUp:i.default.func,onSwipeDown:i.default.func,onSwipeLeft:i.default.func,onSwipeRight:i.default.func,onSwipeStart:i.default.func,onSwipeMove:i.default.func,onSwipeEnd:i.default.func,innerRef:i.default.func,tolerance:i.default.number.isRequired},M.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=M})}(ei)),ei}var hl;function Ha(){return hl||(hl=1,function(e){(function(t,n){n(e,Ud())})(Jo,function(t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n);function o(i){return i&&i.__esModule?i:{default:i}}t.default=r.default})}(Jo)),Jo}var eo={},gl;function za(){if(gl)return eo;gl=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.default=void 0;var e=t(Ku());function t(o){return o&&o.__esModule?o:{default:o}}function n(o,i,s){return i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}var r={ROOT:function(i){return(0,e.default)(n({"carousel-root":!0},i||"",!!i))},CAROUSEL:function(i){return(0,e.default)({carousel:!0,"carousel-slider":i})},WRAPPER:function(i,s){return(0,e.default)({"thumbs-wrapper":!i,"slider-wrapper":i,"axis-horizontal":s==="horizontal","axis-vertical":s!=="horizontal"})},SLIDER:function(i,s){return(0,e.default)({thumbs:!i,slider:i,animated:!s})},ITEM:function(i,s,l){return(0,e.default)({thumb:!i,slide:i,selected:s,previous:l})},ARROW_PREV:function(i){return(0,e.default)({"control-arrow control-prev":!0,"control-disabled":i})},ARROW_NEXT:function(i){return(0,e.default)({"control-arrow control-next":!0,"control-disabled":i})},DOT:function(i){return(0,e.default)({dot:!0,selected:i})}};return eo.default=r,eo}var to={},no={},ml;function qd(){if(ml)return no;ml=1,Object.defineProperty(no,"__esModule",{value:!0}),no.outerWidth=void 0;var e=function(n){var r=n.offsetWidth,o=getComputedStyle(n);return r+=parseInt(o.marginLeft)+parseInt(o.marginRight),r};return no.outerWidth=e,no}var ro={},pl;function Cs(){if(pl)return ro;pl=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.default=void 0;var e=function(n,r,o){var i=n===0?n:n+r,s=o==="horizontal"?[i,0,0]:[0,i,0],l="translate3d",a="("+s.join(",")+")";return l+a};return ro.default=e,ro}var oo={},wl;function Fa(){if(wl)return oo;wl=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.default=void 0;var e=function(){return window};return oo.default=e,oo}var vl;function Oa(){if(vl)return to;vl=1,Object.defineProperty(to,"__esModule",{value:!0}),to.default=void 0;var e=a(Ro()),t=s(za()),n=qd(),r=s(Cs()),o=s(Ha()),i=s(Fa());function s(I){return I&&I.__esModule?I:{default:I}}function l(){if(typeof WeakMap!="function")return null;var I=new WeakMap;return l=function(){return I},I}function a(I){if(I&&I.__esModule)return I;if(I===null||c(I)!=="object"&&typeof I!="function")return{default:I};var C=l();if(C&&C.has(I))return C.get(I);var F={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in I)if(Object.prototype.hasOwnProperty.call(I,w)){var k=S?Object.getOwnPropertyDescriptor(I,w):null;k&&(k.get||k.set)?Object.defineProperty(F,w,k):F[w]=I[w]}return F.default=I,C&&C.set(I,F),F}function c(I){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(F){return typeof F}:c=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},c(I)}function u(){return u=Object.assign||function(I){for(var C=1;C<arguments.length;C++){var F=arguments[C];for(var S in F)Object.prototype.hasOwnProperty.call(F,S)&&(I[S]=F[S])}return I},u.apply(this,arguments)}function h(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function g(I,C){for(var F=0;F<C.length;F++){var S=C[F];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,S.key,S)}}function p(I,C,F){return C&&g(I.prototype,C),I}function f(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),C&&x(I,C)}function x(I,C){return x=Object.setPrototypeOf||function(S,w){return S.__proto__=w,S},x(I,C)}function E(I){var C=D();return function(){var S=R(I),w;if(C){var k=R(this).constructor;w=Reflect.construct(S,arguments,k)}else w=S.apply(this,arguments);return M(this,w)}}function M(I,C){return C&&(c(C)==="object"||typeof C=="function")?C:b(I)}function b(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function R(I){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)},R(I)}function v(I,C,F){return C in I?Object.defineProperty(I,C,{value:F,enumerable:!0,configurable:!0,writable:!0}):I[C]=F,I}var P=function(C){return C.hasOwnProperty("key")},H=function(I){f(F,I);var C=E(F);function F(S){var w;return h(this,F),w=C.call(this,S),v(b(w),"itemsWrapperRef",void 0),v(b(w),"itemsListRef",void 0),v(b(w),"thumbsRef",void 0),v(b(w),"setItemsWrapperRef",function(k){w.itemsWrapperRef=k}),v(b(w),"setItemsListRef",function(k){w.itemsListRef=k}),v(b(w),"setThumbsRef",function(k,T){w.thumbsRef||(w.thumbsRef=[]),w.thumbsRef[T]=k}),v(b(w),"updateSizes",function(){if(!(!w.props.children||!w.itemsWrapperRef||!w.thumbsRef)){var k=e.Children.count(w.props.children),T=w.itemsWrapperRef.clientWidth,y=w.props.thumbWidth?w.props.thumbWidth:(0,n.outerWidth)(w.thumbsRef[0]),q=Math.floor(T/y),j=q<k,X=j?k-q:0;w.setState(function(ce,Z){return{itemSize:y,visibleItems:q,firstItem:j?w.getFirstItem(Z.selectedItem):0,lastPosition:X,showArrows:j}})}}),v(b(w),"handleClickItem",function(k,T,y){if(!P(y)||y.key==="Enter"){var q=w.props.onSelectItem;typeof q=="function"&&q(k,T)}}),v(b(w),"onSwipeStart",function(){w.setState({swiping:!0})}),v(b(w),"onSwipeEnd",function(){w.setState({swiping:!1})}),v(b(w),"onSwipeMove",function(k){var T=k.x;if(!w.state.itemSize||!w.itemsWrapperRef||!w.state.visibleItems)return!1;var y=0,q=e.Children.count(w.props.children),j=-(w.state.firstItem*100)/w.state.visibleItems,X=Math.max(q-w.state.visibleItems,0),ce=-X*100/w.state.visibleItems;j===y&&T>0&&(T=0),j===ce&&T<0&&(T=0);var Z=w.itemsWrapperRef.clientWidth,G=j+100/(Z/T);return w.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(ne){w.itemsListRef.style[ne]=(0,r.default)(G,"%",w.props.axis)}),!0}),v(b(w),"slideRight",function(k){w.moveTo(w.state.firstItem-(typeof k=="number"?k:1))}),v(b(w),"slideLeft",function(k){w.moveTo(w.state.firstItem+(typeof k=="number"?k:1))}),v(b(w),"moveTo",function(k){k=k<0?0:k,k=k>=w.state.lastPosition?w.state.lastPosition:k,w.setState({firstItem:k})}),w.state={selectedItem:S.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},w}return p(F,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(w){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==w.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,i.default)().addEventListener("resize",this.updateSizes),(0,i.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,i.default)().removeEventListener("resize",this.updateSizes),(0,i.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(w){var k=w;return w>=this.state.lastPosition&&(k=this.state.lastPosition),w<this.state.firstItem+this.state.visibleItems&&(k=this.state.firstItem),w<this.state.firstItem&&(k=w),k}},{key:"renderItems",value:function(){var w=this;return this.props.children.map(function(k,T){var y=t.default.ITEM(!1,T===w.state.selectedItem),q={key:T,ref:function(X){return w.setThumbsRef(X,T)},className:y,onClick:w.handleClickItem.bind(w,T,w.props.children[T]),onKeyDown:w.handleClickItem.bind(w,T,w.props.children[T]),"aria-label":"".concat(w.props.labels.item," ").concat(T+1),style:{width:w.props.thumbWidth}};return e.default.createElement("li",u({},q,{role:"button",tabIndex:0}),k)})}},{key:"render",value:function(){var w=this;if(!this.props.children)return null;var k=e.Children.count(this.props.children)>1,T=this.state.showArrows&&this.state.firstItem>0,y=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,q={},j=-this.state.firstItem*(this.state.itemSize||0),X=(0,r.default)(j,"px",this.props.axis),ce=this.props.transitionTime+"ms";return q={WebkitTransform:X,MozTransform:X,MsTransform:X,OTransform:X,transform:X,msTransform:X,WebkitTransitionDuration:ce,MozTransitionDuration:ce,MsTransitionDuration:ce,OTransitionDuration:ce,transitionDuration:ce,msTransitionDuration:ce},e.default.createElement("div",{className:t.default.CAROUSEL(!1)},e.default.createElement("div",{className:t.default.WRAPPER(!1),ref:this.setItemsWrapperRef},e.default.createElement("button",{type:"button",className:t.default.ARROW_PREV(!T),onClick:function(){return w.slideRight()},"aria-label":this.props.labels.leftArrow}),k?e.default.createElement(o.default,{tagName:"ul",className:t.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:q,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):e.default.createElement("ul",{className:t.default.SLIDER(!1,this.state.swiping),ref:function(G){return w.setItemsListRef(G)},style:q},this.renderItems()),e.default.createElement("button",{type:"button",className:t.default.ARROW_NEXT(!y),onClick:function(){return w.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),F}(e.Component);return to.default=H,v(H,"displayName","Thumbs"),v(H,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350}),to}var io={},yl;function Kd(){if(yl)return io;yl=1,Object.defineProperty(io,"__esModule",{value:!0}),io.default=void 0;var e=function(){return document};return io.default=e,io}var jt={},bl;function Na(){if(bl)return jt;bl=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.setPosition=jt.getPosition=jt.isKeyboardEvent=jt.defaultStatusFormatter=jt.noop=void 0;var e=Ro(),t=n(Cs());function n(a){return a&&a.__esModule?a:{default:a}}var r=function(){};jt.noop=r;var o=function(c,u){return"".concat(c," of ").concat(u)};jt.defaultStatusFormatter=o;var i=function(c){return c?c.hasOwnProperty("key"):!1};jt.isKeyboardEvent=i;var s=function(c,u){if(u.infiniteLoop&&++c,c===0)return 0;var h=e.Children.count(u.children);if(u.centerMode&&u.axis==="horizontal"){var g=-c*u.centerSlidePercentage,p=h-1;return c&&(c!==p||u.infiniteLoop)?g+=(100-u.centerSlidePercentage)/2:c===p&&(g+=100-u.centerSlidePercentage),g}return-c*100};jt.getPosition=s;var l=function(c,u){var h={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(g){h[g]=(0,t.default)(c,"%",u)}),h};return jt.setPosition=l,jt}var ln={},xl;function Yd(){if(xl)return ln;xl=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.fadeAnimationHandler=ln.slideStopSwipingHandler=ln.slideSwipeAnimationHandler=ln.slideAnimationHandler=void 0;var e=Ro(),t=r(Cs()),n=Na();function r(h){return h&&h.__esModule?h:{default:h}}function o(h,g){var p=Object.keys(h);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(h);g&&(f=f.filter(function(x){return Object.getOwnPropertyDescriptor(h,x).enumerable})),p.push.apply(p,f)}return p}function i(h){for(var g=1;g<arguments.length;g++){var p=arguments[g]!=null?arguments[g]:{};g%2?o(Object(p),!0).forEach(function(f){s(h,f,p[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(p)):o(Object(p)).forEach(function(f){Object.defineProperty(h,f,Object.getOwnPropertyDescriptor(p,f))})}return h}function s(h,g,p){return g in h?Object.defineProperty(h,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[g]=p,h}var l=function(g,p){var f={},x=p.selectedItem,E=x,M=e.Children.count(g.children)-1,b=g.infiniteLoop&&(x<0||x>M);if(b)return E<0?g.centerMode&&g.centerSlidePercentage&&g.axis==="horizontal"?f.itemListStyle=(0,n.setPosition)(-(M+2)*g.centerSlidePercentage-(100-g.centerSlidePercentage)/2,g.axis):f.itemListStyle=(0,n.setPosition)(-(M+2)*100,g.axis):E>M&&(f.itemListStyle=(0,n.setPosition)(0,g.axis)),f;var D=(0,n.getPosition)(x,g),R=(0,t.default)(D,"%",g.axis),v=g.transitionTime+"ms";return f.itemListStyle={WebkitTransform:R,msTransform:R,OTransform:R,transform:R},p.swiping||(f.itemListStyle=i(i({},f.itemListStyle),{},{WebkitTransitionDuration:v,MozTransitionDuration:v,OTransitionDuration:v,transitionDuration:v,msTransitionDuration:v})),f};ln.slideAnimationHandler=l;var a=function(g,p,f,x){var E={},M=p.axis==="horizontal",b=e.Children.count(p.children),D=0,R=(0,n.getPosition)(f.selectedItem,p),v=p.infiniteLoop?(0,n.getPosition)(b-1,p)-100:(0,n.getPosition)(b-1,p),P=M?g.x:g.y,H=P;R===D&&P>0&&(H=0),R===v&&P<0&&(H=0);var I=R+100/(f.itemSize/H),C=Math.abs(P)>p.swipeScrollTolerance;return p.infiniteLoop&&C&&(f.selectedItem===0&&I>-100?I-=b*100:f.selectedItem===b-1&&I<-b*100&&(I+=b*100)),(!p.preventMovementUntilSwipeScrollTolerance||C||f.swipeMovementStarted)&&(f.swipeMovementStarted||x({swipeMovementStarted:!0}),E.itemListStyle=(0,n.setPosition)(I,p.axis)),C&&!f.cancelClick&&x({cancelClick:!0}),E};ln.slideSwipeAnimationHandler=a;var c=function(g,p){var f=(0,n.getPosition)(p.selectedItem,g),x=(0,n.setPosition)(f,g.axis);return{itemListStyle:x}};ln.slideStopSwipingHandler=c;var u=function(g,p){var f=g.transitionTime+"ms",x="ease-in-out",E={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:x,msTransitionTimingFunction:x,MozTransitionTimingFunction:x,WebkitTransitionTimingFunction:x,OTransitionTimingFunction:x};return p.swiping||(E=i(i({},E),{},{WebkitTransitionDuration:f,MozTransitionDuration:f,OTransitionDuration:f,transitionDuration:f,msTransitionDuration:f})),{slideStyle:E,selectedStyle:i(i({},E),{},{opacity:1,position:"relative"}),prevStyle:i({},E)}};return ln.fadeAnimationHandler=u,ln}var Cl;function Gd(){if(Cl)return Jr;Cl=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.default=void 0;var e=u(Ro()),t=a(Ha()),n=a(za()),r=a(Oa()),o=a(Kd()),i=a(Fa()),s=Na(),l=Yd();function a(S){return S&&S.__esModule?S:{default:S}}function c(){if(typeof WeakMap!="function")return null;var S=new WeakMap;return c=function(){return S},S}function u(S){if(S&&S.__esModule)return S;if(S===null||h(S)!=="object"&&typeof S!="function")return{default:S};var w=c();if(w&&w.has(S))return w.get(S);var k={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in S)if(Object.prototype.hasOwnProperty.call(S,y)){var q=T?Object.getOwnPropertyDescriptor(S,y):null;q&&(q.get||q.set)?Object.defineProperty(k,y,q):k[y]=S[y]}return k.default=S,w&&w.set(S,k),k}function h(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h=function(k){return typeof k}:h=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},h(S)}function g(){return g=Object.assign||function(S){for(var w=1;w<arguments.length;w++){var k=arguments[w];for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(S[T]=k[T])}return S},g.apply(this,arguments)}function p(S,w){var k=Object.keys(S);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(S);w&&(T=T.filter(function(y){return Object.getOwnPropertyDescriptor(S,y).enumerable})),k.push.apply(k,T)}return k}function f(S){for(var w=1;w<arguments.length;w++){var k=arguments[w]!=null?arguments[w]:{};w%2?p(Object(k),!0).forEach(function(T){C(S,T,k[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(k)):p(Object(k)).forEach(function(T){Object.defineProperty(S,T,Object.getOwnPropertyDescriptor(k,T))})}return S}function x(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function E(S,w){for(var k=0;k<w.length;k++){var T=w[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(S,T.key,T)}}function M(S,w,k){return w&&E(S.prototype,w),S}function b(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),w&&D(S,w)}function D(S,w){return D=Object.setPrototypeOf||function(T,y){return T.__proto__=y,T},D(S,w)}function R(S){var w=H();return function(){var T=I(S),y;if(w){var q=I(this).constructor;y=Reflect.construct(T,arguments,q)}else y=T.apply(this,arguments);return v(this,y)}}function v(S,w){return w&&(h(w)==="object"||typeof w=="function")?w:P(S)}function P(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(S){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},I(S)}function C(S,w,k){return w in S?Object.defineProperty(S,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):S[w]=k,S}var F=function(S){b(k,S);var w=R(k);function k(T){var y;x(this,k),y=w.call(this,T),C(P(y),"thumbsRef",void 0),C(P(y),"carouselWrapperRef",void 0),C(P(y),"listRef",void 0),C(P(y),"itemsRef",void 0),C(P(y),"timer",void 0),C(P(y),"animationHandler",void 0),C(P(y),"setThumbsRef",function(j){y.thumbsRef=j}),C(P(y),"setCarouselWrapperRef",function(j){y.carouselWrapperRef=j}),C(P(y),"setListRef",function(j){y.listRef=j}),C(P(y),"setItemsRef",function(j,X){y.itemsRef||(y.itemsRef=[]),y.itemsRef[X]=j}),C(P(y),"autoPlay",function(){e.Children.count(y.props.children)<=1||(y.clearAutoPlay(),y.props.autoPlay&&(y.timer=setTimeout(function(){y.increment()},y.props.interval)))}),C(P(y),"clearAutoPlay",function(){y.timer&&clearTimeout(y.timer)}),C(P(y),"resetAutoPlay",function(){y.clearAutoPlay(),y.autoPlay()}),C(P(y),"stopOnHover",function(){y.setState({isMouseEntered:!0},y.clearAutoPlay)}),C(P(y),"startOnLeave",function(){y.setState({isMouseEntered:!1},y.autoPlay)}),C(P(y),"isFocusWithinTheCarousel",function(){return y.carouselWrapperRef?!!((0,o.default)().activeElement===y.carouselWrapperRef||y.carouselWrapperRef.contains((0,o.default)().activeElement)):!1}),C(P(y),"navigateWithKeyboard",function(j){if(y.isFocusWithinTheCarousel()){var X=y.props.axis,ce=X==="horizontal",Z={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},G=ce?Z.ArrowRight:Z.ArrowDown,ne=ce?Z.ArrowLeft:Z.ArrowUp;G===j.keyCode?y.increment():ne===j.keyCode&&y.decrement()}}),C(P(y),"updateSizes",function(){if(!(!y.state.initialized||!y.itemsRef||y.itemsRef.length===0)){var j=y.props.axis==="horizontal",X=y.itemsRef[0];if(X){var ce=j?X.clientWidth:X.clientHeight;y.setState({itemSize:ce}),y.thumbsRef&&y.thumbsRef.updateSizes()}}}),C(P(y),"setMountState",function(){y.setState({hasMount:!0}),y.updateSizes()}),C(P(y),"handleClickItem",function(j,X){if(e.Children.count(y.props.children)!==0){if(y.state.cancelClick){y.setState({cancelClick:!1});return}y.props.onClickItem(j,X),j!==y.state.selectedItem&&y.setState({selectedItem:j})}}),C(P(y),"handleOnChange",function(j,X){e.Children.count(y.props.children)<=1||y.props.onChange(j,X)}),C(P(y),"handleClickThumb",function(j,X){y.props.onClickThumb(j,X),y.moveTo(j)}),C(P(y),"onSwipeStart",function(j){y.setState({swiping:!0}),y.props.onSwipeStart(j)}),C(P(y),"onSwipeEnd",function(j){y.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),y.props.onSwipeEnd(j),y.clearAutoPlay(),y.state.autoPlay&&y.autoPlay()}),C(P(y),"onSwipeMove",function(j,X){y.props.onSwipeMove(X);var ce=y.props.swipeAnimationHandler(j,y.props,y.state,y.setState.bind(P(y)));return y.setState(f({},ce)),!!Object.keys(ce).length}),C(P(y),"decrement",function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;y.moveTo(y.state.selectedItem-(typeof j=="number"?j:1))}),C(P(y),"increment",function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;y.moveTo(y.state.selectedItem+(typeof j=="number"?j:1))}),C(P(y),"moveTo",function(j){if(typeof j=="number"){var X=e.Children.count(y.props.children)-1;j<0&&(j=y.props.infiniteLoop?X:0),j>X&&(j=y.props.infiniteLoop?0:X),y.selectItem({selectedItem:j}),y.state.autoPlay&&y.state.isMouseEntered===!1&&y.resetAutoPlay()}}),C(P(y),"onClickNext",function(){y.increment(1)}),C(P(y),"onClickPrev",function(){y.decrement(1)}),C(P(y),"onSwipeForward",function(){y.increment(1),y.props.emulateTouch&&y.setState({cancelClick:!0})}),C(P(y),"onSwipeBackwards",function(){y.decrement(1),y.props.emulateTouch&&y.setState({cancelClick:!0})}),C(P(y),"changeItem",function(j){return function(X){(!(0,s.isKeyboardEvent)(X)||X.key==="Enter")&&y.moveTo(j)}}),C(P(y),"selectItem",function(j){y.setState(f({previousItem:y.state.selectedItem},j),function(){y.setState(y.animationHandler(y.props,y.state))}),y.handleOnChange(j.selectedItem,e.Children.toArray(y.props.children)[j.selectedItem])}),C(P(y),"getInitialImage",function(){var j=y.props.selectedItem,X=y.itemsRef&&y.itemsRef[j],ce=X&&X.getElementsByTagName("img")||[];return ce[0]}),C(P(y),"getVariableItemHeight",function(j){var X=y.itemsRef&&y.itemsRef[j];if(y.state.hasMount&&X&&X.children.length){var ce=X.children[0].getElementsByTagName("img")||[];if(ce.length>0){var Z=ce[0];if(!Z.complete){var G=function fe(){y.forceUpdate(),Z.removeEventListener("load",fe)};Z.addEventListener("load",G)}}var ne=ce[0]||X.children[0],te=ne.clientHeight;return te>0?te:null}return null});var q={initialized:!1,previousItem:T.selectedItem,selectedItem:T.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:T.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return y.animationHandler=typeof T.animationHandler=="function"&&T.animationHandler||T.animationHandler==="fade"&&l.fadeAnimationHandler||l.slideAnimationHandler,y.state=f(f({},q),y.animationHandler(T,q)),y}return M(k,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(y,q){!y.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!y.autoFocus&&this.props.autoFocus&&this.forceFocus(),q.swiping&&!this.state.swiping&&this.setState(f({},this.props.stopSwipingHandler(this.props,this.state))),(y.selectedItem!==this.props.selectedItem||y.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),y.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var y=this;this.bindEvents(),this.state.autoPlay&&e.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var q=y.getInitialImage();q&&!q.complete?q.addEventListener("load",y.setMountState):y.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var y=this.carouselWrapperRef;this.props.stopOnHover&&y&&(y.addEventListener("mouseenter",this.stopOnHover),y.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var y=this.carouselWrapperRef;this.props.stopOnHover&&y&&(y.removeEventListener("mouseenter",this.stopOnHover),y.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,i.default)().addEventListener("resize",this.updateSizes),(0,i.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,o.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,i.default)().removeEventListener("resize",this.updateSizes),(0,i.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var y=this.getInitialImage();y&&y.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,o.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var y;(y=this.carouselWrapperRef)===null||y===void 0||y.focus()}},{key:"renderItems",value:function(y){var q=this;return this.props.children?e.Children.map(this.props.children,function(j,X){var ce=X===q.state.selectedItem,Z=X===q.state.previousItem,G=ce&&q.state.selectedStyle||Z&&q.state.prevStyle||q.state.slideStyle||{};q.props.centerMode&&q.props.axis==="horizontal"&&(G=f(f({},G),{},{minWidth:q.props.centerSlidePercentage+"%"})),q.state.swiping&&q.state.swipeMovementStarted&&(G=f(f({},G),{},{pointerEvents:"none"}));var ne={ref:function(fe){return q.setItemsRef(fe,X)},key:"itemKey"+X+(y?"clone":""),className:n.default.ITEM(!0,X===q.state.selectedItem,X===q.state.previousItem),onClick:q.handleClickItem.bind(q,X,j),style:G};return e.default.createElement("li",ne,q.props.renderItem(j,{isSelected:X===q.state.selectedItem,isPrevious:X===q.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var y=this,q=this.props,j=q.showIndicators,X=q.labels,ce=q.renderIndicator,Z=q.children;return j?e.default.createElement("ul",{className:"control-dots"},e.Children.map(Z,function(G,ne){return ce&&ce(y.changeItem(ne),ne===y.state.selectedItem,ne,X.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?e.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,e.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||e.Children.count(this.props.children)===0?null:e.default.createElement(r.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var y=this;if(!this.props.children||e.Children.count(this.props.children)===0)return null;var q=this.props.swipeable&&e.Children.count(this.props.children)>1,j=this.props.axis==="horizontal",X=this.props.showArrows&&e.Children.count(this.props.children)>1,ce=X&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,Z=X&&(this.state.selectedItem<e.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,G=this.renderItems(!0),ne=G.shift(),te=G.pop(),fe={className:n.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},ie={};if(j){if(fe.onSwipeLeft=this.onSwipeForward,fe.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var Se=this.getVariableItemHeight(this.state.selectedItem);ie.height=Se||"auto"}}else fe.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,fe.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,fe.style=f(f({},fe.style),{},{height:this.state.itemSize}),ie.height=this.state.itemSize;return e.default.createElement("div",{"aria-label":this.props.ariaLabel,className:n.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},e.default.createElement("div",{className:n.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,ce,this.props.labels.leftArrow),e.default.createElement("div",{className:n.default.WRAPPER(!0,this.props.axis),style:ie},q?e.default.createElement(t.default,g({tagName:"ul",innerRef:this.setListRef},fe,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&te,this.renderItems(),this.props.infiniteLoop&&ne):e.default.createElement("ul",{className:n.default.SLIDER(!0,this.state.swiping),ref:function($e){return y.setListRef($e)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&te,this.renderItems(),this.props.infiniteLoop&&ne)),this.props.renderArrowNext(this.onClickNext,Z,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),k}(e.default.Component);return Jr.default=F,C(F,"displayName","Carousel"),C(F,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:s.noop,onClickThumb:s.noop,onChange:s.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(w,k,T){return e.default.createElement("button",{type:"button","aria-label":T,className:n.default.ARROW_PREV(!k),onClick:w})},renderArrowNext:function(w,k,T){return e.default.createElement("button",{type:"button","aria-label":T,className:n.default.ARROW_NEXT(!k),onClick:w})},renderIndicator:function(w,k,T,y){return e.default.createElement("li",{className:n.default.DOT(k),onClick:w,onKeyDown:w,value:T,key:T,role:"button",tabIndex:0,"aria-label":"".concat(y," ").concat(T+1)})},renderItem:function(w){return w},renderThumbs:function(w){var k=e.Children.map(w,function(T){var y=T;if(T.type!=="img"&&(y=e.Children.toArray(T.props.children).find(function(q){return q.type==="img"})),!!y)return y});return k.filter(function(T){return T}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):k},statusFormatter:s.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:l.slideSwipeAnimationHandler,stopSwipingHandler:l.slideStopSwipingHandler}),Jr}var kl={},Sl;function Zd(){return Sl||(Sl=1),kl}var Rl;function Qd(){return Rl||(Rl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Carousel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"CarouselProps",{enumerable:!0,get:function(){return n.CarouselProps}}),Object.defineProperty(e,"Thumbs",{enumerable:!0,get:function(){return r.default}});var t=o(Gd()),n=Zd(),r=o(Oa());function o(i){return i&&i.__esModule?i:{default:i}}}(Gi)),Gi}var Jd=Qd();function Et(e,t,n,r,o=!1){const i=d.useRef();i.current=t,d.useEffect(()=>{if(n===null||n.addEventListener===void 0)return;const s=n,l=a=>{i.current?.call(s,a)};return s.addEventListener(e,l,{passive:r,capture:o}),()=>{s.removeEventListener(e,l,{capture:o})}},[e,n,r,o])}function Er(e,t){return e===void 0?void 0:t}const ef=Math.PI;function Ml(e){return e*ef/180}const $a=(e,t,n)=>({x1:e-n/2,y1:t-n/2,x2:e+n/2,y2:t+n/2}),Wa=(e,t,n,r,o)=>{switch(e){case"left":return Math.floor(t)+r+o/2;case"center":return Math.floor(t+n/2);case"right":return Math.floor(t+n)-r-o/2}},Ba=(e,t,n)=>Math.min(e,t-n*2),ja=(e,t,n)=>n.x1<=e&&e<=n.x2&&n.y1<=t&&t<=n.y2,ks=e=>{const t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),d.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},tf=e=>{const t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function nf(e,t,n){const[r,o]=d.useState(e),i=d.useRef(!0);d.useEffect(()=>()=>{i.current=!1},[]);const s=d.useRef(ia(l=>{i.current&&o(l)},n));return d.useLayoutEffect(()=>{i.current&&s.current(()=>e())},t),r}const rf="֑-߿יִ-﷽ﹰ-ﻼ",of="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",sf=new RegExp("^[^"+of+"]*["+rf+"]");function Ss(e){return sf.test(e)?"rtl":"not-rtl"}let ti;function as(){if(typeof document>"u")return 0;if(ti!==void 0)return ti;const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.id="testScrollbar",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.append(e),document.body.append(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),t.remove(),ti=n-r,ti}const er=Symbol();function lf(e){const t=d.useRef([er,e]);t.current[1]!==e&&(t.current[0]=e),t.current[1]=e;const[n,r]=d.useState(e),[,o]=d.useState(),i=d.useCallback(l=>{const a=t.current[0];a!==er&&(l=typeof l=="function"?l(a):l,l===a)||(a!==er&&o({}),r(c=>typeof l=="function"?l(a===er?c:a):l),t.current[0]=er)},[]),s=d.useCallback(()=>{t.current[0]=er,o({})},[]);return[t.current[0]===er?n:t.current[0],i,s]}function Va(e){if(e.length===0)return"";let t=0,n=0;for(const r of e){if(n+=r.length,n>1e4)break;t++}return e.slice(0,t).join(", ")}function af(e){const t=d.useRef(e);return Lr(e,t.current)||(t.current=e),d.useMemo(()=>t.current,[t.current])}const cf=e=>{const{urls:t,canWrite:n,onEditClick:r,renderImage:o}=e,i=t.filter(l=>l!=="");if(i.length===0)return null;const s=i.length>1;return d.createElement(Xd,{"data-testid":"GDG-default-image-overlay-editor"},d.createElement(Jd.Carousel,{showArrows:s,showThumbs:!1,swipeable:s,emulateTouch:s,infiniteLoop:s},i.map(l=>{const a=o?.(l)??d.createElement("img",{draggable:!1,src:l});return d.createElement("div",{className:"gdg-centering-container",key:l},a)})),n&&r&&d.createElement("button",{className:"gdg-edit-icon",onClick:r},d.createElement(ks,null)))};function Rs(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let or=Rs();function Xa(e){or=e}const Ua=/[&<>"']/,uf=new RegExp(Ua.source,"g"),qa=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,df=new RegExp(qa.source,"g"),ff={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},El=e=>ff[e];function Vt(e,t){if(t){if(Ua.test(e))return e.replace(uf,El)}else if(qa.test(e))return e.replace(df,El);return e}const hf=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function gf(e){return e.replace(hf,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const mf=/(^|[^\[])\^/g;function et(e,t){let n=typeof e=="string"?e:e.source;t=t||"";const r={replace:(o,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(mf,"$1"),n=n.replace(o,s),r},getRegex:()=>new RegExp(n,t)};return r}function Tl(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const wo={exec:()=>null};function Il(e,t){const n=e.replace(/\|/g,(i,s,l)=>{let a=!1,c=s;for(;--c>=0&&l[c]==="\\";)a=!a;return a?"|":" |"}),r=n.split(/ \|/);let o=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(/\\\|/g,"|");return r}function ni(e,t,n){const r=e.length;if(r===0)return"";let o=0;for(;o<r&&e.charAt(r-o-1)===t;)o++;return e.slice(0,r-o)}function pf(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}function Dl(e,t,n,r){const o=t.href,i=t.title?Vt(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:o,title:i,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:o,title:i,text:Vt(s)}}function wf(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const r=n[1];return t.split(`
`).map(o=>{const i=o.match(/^\s+/);if(i===null)return o;const[s]=i;return s.length>=r.length?o.slice(r.length):o}).join(`
`)}class di{options;rules;lexer;constructor(t){this.options=t||or}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ni(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],o=wf(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(/#$/.test(r)){const o=ni(r,"#");(this.options.pedantic||!o||/ $/.test(o))&&(r=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const r=ni(n[0].replace(/^ *>[ \t]?/gm,""),`
`),o=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(r);return this.lexer.state.top=o,{type:"blockquote",raw:n[0],tokens:i,text:r}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim();const o=r.length>1,i={type:"list",raw:"",ordered:o,start:o?+r.slice(0,-1):"",loose:!1,items:[]};r=o?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=o?r:"[*+-]");const s=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",a="",c=!1;for(;t;){let u=!1;if(!(n=s.exec(t))||this.rules.block.hr.test(t))break;l=n[0],t=t.substring(l.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,M=>" ".repeat(3*M.length)),g=t.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,a=h.trimStart()):(p=n[2].search(/[^ ]/),p=p>4?1:p,a=h.slice(p),p+=n[1].length);let f=!1;if(!h&&/^ *$/.test(g)&&(l+=g+`
`,t=t.substring(g.length+1),u=!0),!u){const M=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),b=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),D=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),R=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;t;){const v=t.split(`
`,1)[0];if(g=v,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),D.test(g)||R.test(g)||M.test(g)||b.test(t))break;if(g.search(/[^ ]/)>=p||!g.trim())a+=`
`+g.slice(p);else{if(f||h.search(/[^ ]/)>=4||D.test(h)||R.test(h)||b.test(h))break;a+=`
`+g}!f&&!g.trim()&&(f=!0),l+=v+`
`,t=t.substring(v.length+1),h=g.slice(p)}}i.loose||(c?i.loose=!0:/\n *\n *$/.test(l)&&(c=!0));let x=null,E;this.options.gfm&&(x=/^\[[ xX]\] /.exec(a),x&&(E=x[0]!=="[ ] ",a=a.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:l,task:!!x,checked:E,loose:!1,text:a,tokens:[]}),i.raw+=l}i.items[i.items.length-1].raw=l.trimEnd(),i.items[i.items.length-1].text=a.trimEnd(),i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){const h=i.items[u].tokens.filter(p=>p.type==="space"),g=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));i.loose=g}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:o,title:i}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const r=Il(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),i=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===o.length){for(const l of o)/^ *-+: *$/.test(l)?s.align.push("right"):/^ *:-+: *$/.test(l)?s.align.push("center"):/^ *:-+ *$/.test(l)?s.align.push("left"):s.align.push(null);for(const l of r)s.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of i)s.rows.push(Il(l,s.header.length).map(a=>({text:a,tokens:this.lexer.inline(a)})));return s}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:Vt(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=ni(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=pf(n[2],"()");if(s>-1){const a=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let o=n[2],i="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);s&&(o=s[1],i=s[3])}else i=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(r)?o=o.slice(1):o=o.slice(1,-1)),Dl(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){const o=(r[2]||r[1]).replace(/\s+/g," "),i=n[o.toLowerCase()];if(!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Dl(r,i,r[0],this.lexer)}}emStrong(t,n,r=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(!o||o[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...o[0]].length-1;let l,a,c=s,u=0;const h=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*t.length+s);(o=h.exec(n))!=null;){if(l=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!l)continue;if(a=[...l].length,o[3]||o[4]){c+=a;continue}else if((o[5]||o[6])&&s%3&&!((s+a)%3)){u+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+u);const g=[...o[0]][0].length,p=t.slice(0,s+o.index+g+a);if(Math.min(s,a)%2){const x=p.slice(1,-1);return{type:"em",raw:p,text:x,tokens:this.lexer.inlineTokens(x)}}const f=p.slice(2,-2);return{type:"strong",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(/\n/g," ");const o=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return o&&i&&(r=r.substring(1,r.length-1)),r=Vt(r,!0),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let r,o;return n[2]==="@"?(r=Vt(n[1]),o="mailto:"+r):(r=Vt(n[1]),o=r),{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(t){let n;if(n=this.rules.inline.url.exec(t)){let r,o;if(n[2]==="@")r=Vt(n[0]),o="mailto:"+r;else{let i;do i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(i!==n[0]);r=Vt(n[0]),n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=Vt(n[0]),{type:"text",raw:n[0],text:r}}}}const vf=/^(?: *(?:\n|$))+/,yf=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,bf=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Eo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,xf=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ka=/(?:[*+-]|\d{1,9}[.)])/,Ya=et(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ka).getRegex(),Ms=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Cf=/^[^\n]+/,Es=/(?!\s*\])(?:\\.|[^\[\]\\])+/,kf=et(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Es).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Sf=et(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ka).getRegex(),yi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ts=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Rf=et("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Ts).replace("tag",yi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ga=et(Ms).replace("hr",Eo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yi).getRegex(),Mf=et(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ga).getRegex(),Is={blockquote:Mf,code:yf,def:kf,fences:bf,heading:xf,hr:Eo,html:Rf,lheading:Ya,list:Sf,newline:vf,paragraph:Ga,table:wo,text:Cf},Pl=et("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Eo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yi).getRegex(),Ef={...Is,table:Pl,paragraph:et(Ms).replace("hr",Eo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Pl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yi).getRegex()},Tf={...Is,html:et(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ts).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wo,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:et(Ms).replace("hr",Eo).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ya).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Za=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,If=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Qa=/^( {2,}|\\)\n(?!\s*$)/,Df=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,To="\\p{P}$+<=>`^|~",Pf=et(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,To).getRegex(),_f=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Af=et(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,To).getRegex(),Lf=et("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,To).getRegex(),Hf=et("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,To).getRegex(),zf=et(/\\([punct])/,"gu").replace(/punct/g,To).getRegex(),Ff=et(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Of=et(Ts).replace("(?:-->|$)","-->").getRegex(),Nf=et("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Of).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),fi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$f=et(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",fi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ja=et(/^!?\[(label)\]\[(ref)\]/).replace("label",fi).replace("ref",Es).getRegex(),ec=et(/^!?\[(ref)\](?:\[\])?/).replace("ref",Es).getRegex(),Wf=et("reflink|nolink(?!\\()","g").replace("reflink",Ja).replace("nolink",ec).getRegex(),Ds={_backpedal:wo,anyPunctuation:zf,autolink:Ff,blockSkip:_f,br:Qa,code:If,del:wo,emStrongLDelim:Af,emStrongRDelimAst:Lf,emStrongRDelimUnd:Hf,escape:Za,link:$f,nolink:ec,punctuation:Pf,reflink:Ja,reflinkSearch:Wf,tag:Nf,text:Df,url:wo},Bf={...Ds,link:et(/^!?\[(label)\]\((.*?)\)/).replace("label",fi).getRegex(),reflink:et(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",fi).getRegex()},cs={...Ds,escape:et(Za).replace("])","~|])").getRegex(),url:et(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},jf={...cs,br:et(Qa).replace("{2,}","*").getRegex(),text:et(cs.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ri={normal:Is,gfm:Ef,pedantic:Tf},so={normal:Ds,gfm:cs,breaks:jf,pedantic:Bf};class vn{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||or,this.options.tokenizer=this.options.tokenizer||new di,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:ri.normal,inline:so.normal};this.options.pedantic?(n.block=ri.pedantic,n.inline=so.pedantic):this.options.gfm&&(n.block=ri.gfm,this.options.breaks?n.inline=so.breaks:n.inline=so.gfm),this.tokenizer.rules=n}static get rules(){return{block:ri,inline:so}}static lex(t,n){return new vn(n).lex(t)}static lexInline(t,n){return new vn(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(l,a,c)=>a+"    ".repeat(c.length));let r,o,i,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const a=t.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},a),typeof c=="number"&&c>=0&&(l=Math.min(l,c))}),l<1/0&&l>=0&&(i=t.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){o=n[n.length-1],s&&o.type==="paragraph"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r),s=i.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(t){const l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r,o,i,s=t,l,a,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,l.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(a||(c=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(t,s,c)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),n.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let g;this.options.extensions.startInline.forEach(p=>{g=p.call({lexer:this},h),typeof g=="number"&&g>=0&&(u=Math.min(u,g))}),u<1/0&&u>=0&&(i=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(i)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),a=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class hi{options;constructor(t){this.options=t||or}code(t,n,r){const o=(n||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,o?'<pre><code class="language-'+Vt(o)+'">'+(r?t:Vt(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:Vt(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,r){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,r){const o=n?"ol":"ul",i=n&&r!==1?' start="'+r+'"':"";return"<"+o+i+`>
`+t+"</"+o+`>
`}listitem(t,n,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,r){const o=Tl(t);if(o===null)return r;t=o;let i='<a href="'+t+'"';return n&&(i+=' title="'+n+'"'),i+=">"+r+"</a>",i}image(t,n,r){const o=Tl(t);if(o===null)return r;t=o;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=">",i}text(t){return t}}class Ps{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,r){return""+r}image(t,n,r){return""+r}br(){return""}}class yn{options;renderer;textRenderer;constructor(t){this.options=t||or,this.options.renderer=this.options.renderer||new hi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ps}static parse(t,n){return new yn(n).parse(t)}static parseInline(t,n){return new yn(n).parseInline(t)}parse(t,n=!0){let r="";for(let o=0;o<t.length;o++){const i=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=i,l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){r+=l||"";continue}}switch(i.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const s=i;r+=this.renderer.heading(this.parseInline(s.tokens),s.depth,gf(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{const s=i;r+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{const s=i;let l="",a="";for(let u=0;u<s.header.length;u++)a+=this.renderer.tablecell(this.parseInline(s.header[u].tokens),{header:!0,align:s.align[u]});l+=this.renderer.tablerow(a);let c="";for(let u=0;u<s.rows.length;u++){const h=s.rows[u];a="";for(let g=0;g<h.length;g++)a+=this.renderer.tablecell(this.parseInline(h[g].tokens),{header:!1,align:s.align[g]});c+=this.renderer.tablerow(a)}r+=this.renderer.table(l,c);continue}case"blockquote":{const s=i,l=this.parse(s.tokens);r+=this.renderer.blockquote(l);continue}case"list":{const s=i,l=s.ordered,a=s.start,c=s.loose;let u="";for(let h=0;h<s.items.length;h++){const g=s.items[h],p=g.checked,f=g.task;let x="";if(g.task){const E=this.renderer.checkbox(!!p);c?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=E+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=E+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:E+" "}):x+=E+" "}x+=this.parse(g.tokens,c),u+=this.renderer.listitem(x,f,!!p)}r+=this.renderer.list(u,l,a);continue}case"html":{const s=i;r+=this.renderer.html(s.text,s.block);continue}case"paragraph":{const s=i;r+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=i,l=s.tokens?this.parseInline(s.tokens):s.text;for(;o+1<t.length&&t[o+1].type==="text";)s=t[++o],l+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);r+=n?this.renderer.paragraph(l):l;continue}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}parseInline(t,n){n=n||this.renderer;let r="";for(let o=0;o<t.length;o++){const i=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=this.options.extensions.renderers[i.type].call({parser:this},i);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=s||"";continue}}switch(i.type){case"escape":{const s=i;r+=n.text(s.text);break}case"html":{const s=i;r+=n.html(s.text);break}case"link":{const s=i;r+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{const s=i;r+=n.image(s.href,s.title,s.text);break}case"strong":{const s=i;r+=n.strong(this.parseInline(s.tokens,n));break}case"em":{const s=i;r+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{const s=i;r+=n.codespan(s.text);break}case"br":{r+=n.br();break}case"del":{const s=i;r+=n.del(this.parseInline(s.tokens,n));break}case"text":{const s=i;r+=n.text(s.text);break}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}}class si{options;constructor(t){this.options=t||or}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class Vf{defaults=Rs();options=this.setOptions;parse=this.#e(vn.lex,yn.parse);parseInline=this.#e(vn.lexInline,yn.parseInline);Parser=yn;Renderer=hi;TextRenderer=Ps;Lexer=vn;Tokenizer=di;Hooks=si;constructor(...t){this.use(...t)}walkTokens(t,n){let r=[];for(const o of t)switch(r=r.concat(n.call(this,o)),o.type){case"table":{const i=o;for(const s of i.header)r=r.concat(this.walkTokens(s.tokens,n));for(const s of i.rows)for(const l of s)r=r.concat(this.walkTokens(l.tokens,n));break}case"list":{const i=o;r=r.concat(this.walkTokens(i.items,n));break}default:{const i=o;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{r=r.concat(this.walkTokens(i[s],n))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,n)))}}return r}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const o={...r};if(o.async=this.defaults.async||o.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=n.renderers[i.name];s?n.renderers[i.name]=function(...l){let a=i.renderer.apply(this,l);return a===!1&&(a=s.apply(this,l)),a}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=n[i.level];s?s.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),o.extensions=n),r.renderer){const i=this.defaults.renderer||new hi(this.defaults);for(const s in r.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;const l=s,a=r.renderer[l],c=i[l];i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h||""}}o.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new di(this.defaults);for(const s in r.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const l=s,a=r.tokenizer[l],c=i[l];i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}o.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new si;for(const s in r.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;const l=s,a=r.hooks[l],c=i[l];si.passThroughHooks.has(s)?i[l]=u=>{if(this.defaults.async)return Promise.resolve(a.call(i,u)).then(g=>c.call(i,g));const h=a.call(i,u);return c.call(i,h)}:i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}o.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,s=r.walkTokens;o.walkTokens=function(l){let a=[];return a.push(s.call(this,l)),i&&(a=a.concat(i.call(this,l))),a}}this.defaults={...this.defaults,...o}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return vn.lex(t,n??this.defaults)}parser(t,n){return yn.parse(t,n??this.defaults)}#e(t,n){return(r,o)=>{const i={...o},s={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const l=this.#t(!!s.silent,!!s.async);if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(a=>t(a,s)).then(a=>s.hooks?s.hooks.processAllTokens(a):a).then(a=>s.walkTokens?Promise.all(this.walkTokens(a,s.walkTokens)).then(()=>a):a).then(a=>n(a,s)).then(a=>s.hooks?s.hooks.postprocess(a):a).catch(l);try{s.hooks&&(r=s.hooks.preprocess(r));let a=t(r,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let c=n(a,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(a){return l(a)}}}#t(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const o="<p>An error occurred:</p><pre>"+Vt(r.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(r);throw r}}}const rr=new Vf;function Ye(e,t){return rr.parse(e,t)}Ye.options=Ye.setOptions=function(e){return rr.setOptions(e),Ye.defaults=rr.defaults,Xa(Ye.defaults),Ye};Ye.getDefaults=Rs;Ye.defaults=or;Ye.use=function(...e){return rr.use(...e),Ye.defaults=rr.defaults,Xa(Ye.defaults),Ye};Ye.walkTokens=function(e,t){return rr.walkTokens(e,t)};Ye.parseInline=rr.parseInline;Ye.Parser=yn;Ye.parser=yn.parse;Ye.Renderer=hi;Ye.TextRenderer=Ps;Ye.Lexer=vn;Ye.lexer=vn.lex;Ye.Tokenizer=di;Ye.Hooks=si;Ye.parse=Ye;Ye.options;Ye.setOptions;Ye.use;Ye.walkTokens;Ye.parseInline;yn.parse;vn.lex;const Xf=Kt("div")({name:"MarkdownContainer",class:"gdg-mnuv029",propsAsIs:!1});class Uf extends vt.PureComponent{targetElement=null;renderMarkdownIntoDiv(){const{targetElement:t,props:n}=this;if(t===null)return;const{contents:r,createNode:o}=n,i=Ye(r),s=document.createRange();s.selectNodeContents(t),s.deleteContents();let l=o?.(i);if(l===void 0){const c=document.createElement("template");c.innerHTML=i,l=c.content}t.append(l);const a=t.getElementsByTagName("a");for(const c of a)c.target="_blank",c.rel="noreferrer noopener"}containerRefHook=t=>{this.targetElement=t,this.renderMarkdownIntoDiv()};render(){return this.renderMarkdownIntoDiv(),vt.createElement(Xf,{ref:this.containerRefHook})}}const qf=Kt("textarea")({name:"InputBox",class:"gdg-izpuzkl",propsAsIs:!1}),Kf=Kt("div")({name:"ShadowBox",class:"gdg-s69h75o",propsAsIs:!1}),Yf=Kt("div")({name:"GrowingEntryStyle",class:"gdg-g1y0xocz",propsAsIs:!1});let _l=0;const bi=e=>{const{placeholder:t,value:n,onKeyDown:r,highlight:o,altNewline:i,validatedSelection:s,...l}=e,{onChange:a,className:c}=l,u=d.useRef(null),h=n??"";Ut(a!==void 0,"GrowingEntry must be a controlled input area");const[g]=d.useState(()=>"input-box-"+(_l=(_l+1)%1e7));d.useEffect(()=>{const f=u.current;if(f===null||f.disabled)return;const x=h.toString().length;f.focus(),f.setSelectionRange(o?0:x,x)},[]),d.useLayoutEffect(()=>{if(s!==void 0){const f=typeof s=="number"?[s,null]:s;u.current?.setSelectionRange(f[0],f[1])}},[s]);const p=d.useCallback(f=>{f.key==="Enter"&&f.shiftKey&&i===!0||r?.(f)},[i,r]);return d.createElement(Yf,{className:"gdg-growing-entry"},d.createElement(Kf,{className:c},h+`
`),d.createElement(qf,{...l,className:(c??"")+" gdg-input",id:g,ref:u,onKeyDown:p,value:h,placeholder:t,dir:"auto"}))},Zi={};let Hn=null;function Gf(){const e=document.createElement("div");return e.style.opacity="0",e.style.pointerEvents="none",e.style.position="fixed",document.body.append(e),e}function us(e){const t=e.toLowerCase().trim();if(Zi[t]!==void 0)return Zi[t];Hn=Hn||Gf(),Hn.style.color="#000",Hn.style.color=t;const n=getComputedStyle(Hn).color;Hn.style.color="#fff",Hn.style.color=t;const r=getComputedStyle(Hn).color;if(r!==n)return[0,0,0,1];let o=r.replace(/[^\d.,]/g,"").split(",").map(Number.parseFloat);return o.length<4&&o.push(1),o=o.map(i=>Number.isNaN(i)?0:i),Zi[t]=o,o}function Hr(e,t){const[n,r,o]=us(e);return`rgba(${n}, ${r}, ${o}, ${t})`}function qt(e,t){if(t===void 0)return e;const[n,r,o,i]=us(e);if(i===1)return e;const[s,l,a,c]=us(t),u=i+c*(1-i),h=(i*n+c*s*(1-i))/u,g=(i*r+c*l*(1-i))/u,p=(i*o+c*a*(1-i))/u;return`rgba(${h}, ${g}, ${p}, ${u})`}var Dr=new Map,_r=new Map,ds=new Map;function Zf(){Dr.clear(),ds.clear(),_r.clear()}function Qf(e,t,n,r,o){var i,s,l;let a=0,c={};for(let h of e)a+=(i=n.get(h))!=null?i:o,c[h]=((s=c[h])!=null?s:0)+1;let u=t-a;for(let h of Object.keys(c)){let g=c[h],p=(l=n.get(h))!=null?l:o,f=p*g/a,x=u*f*r/g,E=p+x;n.set(h,E)}}function Jf(e,t){var n;let r=new Map,o=0;for(let c of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let u=e.measureText(c).width;r.set(c,u),o+=u}let i=o/r.size,s=3,l=(t/i+s)/(s+1),a=r.keys();for(let c of a)r.set(c,((n=r.get(c))!=null?n:i)*l);return r}function vo(e,t,n,r){var o,i;let s=_r.get(n);if(r&&s!==void 0&&s.count>2e4){let c=ds.get(n);if(c===void 0&&(c=Jf(e,s.size),ds.set(n,c)),s.count>5e5){let h=0;for(let g of t)h+=(o=c.get(g))!=null?o:s.size;return h*1.01}let u=e.measureText(t);return Qf(t,u.width,c,Math.max(.05,1-s.count/2e5),s.size),_r.set(n,{count:s.count+t.length,size:s.size}),u.width}let l=e.measureText(t),a=l.width/t.length;if(((i=s?.count)!=null?i:0)>2e4)return l.width;if(s===void 0)_r.set(n,{count:t.length,size:a});else{let c=a-s.size,u=t.length/(s.count+t.length),h=s.size+c*u;_r.set(n,{count:s.count+t.length,size:h})}return l.width}function eh(e,t,n,r,o,i,s,l){if(t.length<=1)return t.length;if(o<n)return-1;let a=Math.floor(n/o*i),c=vo(e,t.slice(0,Math.max(0,a)),r,s);if(c!==n)if(c<n){for(;c<n;)a++,c=vo(e,t.slice(0,Math.max(0,a)),r,s);a--}else for(;c>n;){let u=t.lastIndexOf(" ",a-1);u>0?a=u:a--,c=vo(e,t.slice(0,Math.max(0,a)),r,s)}if(t[a]!==" "){let u=0;u=t.lastIndexOf(" ",a),u>0&&(a=u)}return a}function th(e,t,n,r,o,i){let s=`${t}_${n}_${r}px`,l=Dr.get(s);if(l!==void 0)return l;if(r<=0)return[];let a=[],c=t.split(`
`),u=_r.get(n),h=u===void 0?t.length:r/u.size*1.5,g=o&&u!==void 0&&u.count>2e4;for(let p of c){let f=vo(e,p.slice(0,Math.max(0,h)),n,g),x=Math.min(p.length,h);if(f<=r)a.push(p);else{for(;f>r;){let E=eh(e,p,r,n,f,x,g),M=p.slice(0,Math.max(0,E));p=p.slice(M.length),a.push(M),f=vo(e,p.slice(0,Math.max(0,h)),n,g),x=Math.min(p.length,h)}f>0&&a.push(p)}}return a=a.map((p,f)=>f===0?p.trimEnd():p.trim()),Dr.set(s,a),Dr.size>500&&Dr.delete(Dr.keys().next().value),a}function nh(e,t){return vt.useMemo(()=>e.map((n,r)=>({...n,sourceIndex:r,sticky:r<t})),[e,t])}function rh(e,t){const[n,r]=t;if(e.columns.hasIndex(n)||e.rows.hasIndex(r))return!0;if(e.current!==void 0){if(yo(e.current.cell,t))return!0;const o=[e.current.range,...e.current.rangeStack];for(const i of o)if(n>=i.x&&n<i.x+i.width&&r>=i.y&&r<i.y+i.height)return!0}return!1}function So(e,t){return(e??"")===(t??"")}function oh(e,t,n){return n.current===void 0||e[1]!==n.current.cell[1]?!1:t.span===void 0?n.current.cell[0]===e[0]:n.current.cell[0]>=t.span[0]&&n.current.cell[0]<=t.span[1]}function tc(e,t){const[n,r]=e;return n>=t.x&&n<t.x+t.width&&r>=t.y&&r<t.y+t.height}function yo(e,t){return e?.[0]===t?.[0]&&e?.[1]===t?.[1]}function nc(e){return[e.x+e.width-1,e.y+e.height-1]}function Al(e,t,n){const r=n.x,o=n.x+n.width-1,i=n.y,s=n.y+n.height-1,[l,a]=e;if(a<i||a>s)return!1;if(t.span===void 0)return l>=r&&l<=o;const[c,u]=t.span;return c>=r&&c<=o||u>=r&&c<=o||c<r&&u>o}function ih(e,t,n){let r=0;if(n.current===void 0)return r;Al(e,t,n.current.range)&&r++;for(const o of n.current.rangeStack)Al(e,t,o)&&r++;return r}function rc(e,t){let n=e;if(t!==void 0){let r=[...e];const o=n[t.src];t.src>t.dest?(r.splice(t.src,1),r.splice(t.dest,0,o)):(r.splice(t.dest+1,0,o),r.splice(t.src,1)),r=r.map((i,s)=>({...i,sticky:e[s].sticky})),n=r}return n}function zr(e,t){let n=0;const r=rc(e,t);for(let o=0;o<r.length;o++){const i=r[o];if(i.sticky)n+=i.width;else break}return n}function Fr(e,t,n){if(typeof n=="number")return t*n;{let r=0;for(let o=e-t;o<e;o++)r+=n(o);return r}}function fs(e,t,n,r,o){const i=rc(e,r),s=[];for(const c of i)if(c.sticky)s.push(c);else break;if(s.length>0)for(const c of s)n-=c.width;let l=t,a=o??0;for(;a<=n&&l<i.length;)a+=i[l].width,l++;for(let c=t;c<l;c++){const u=i[c];u.sticky||s.push(u)}return s}function sh(e,t,n){let r=0;for(const o of t){const i=o.sticky?r:r+(n??0);if(e<=i+o.width)return o.sourceIndex;r+=o.width}return-1}function lh(e,t,n,r,o,i,s,l,a,c){const u=r+o;if(n&&e<=o)return-2;if(e<=u)return-1;let h=t;for(let f=0;f<c;f++){const x=i-1-f,E=typeof s=="number"?s:s(x);if(h-=E,e>=h)return x}const g=i-c,p=e-(a??0);if(typeof s=="number"){const f=Math.floor((p-u)/s)+l;return f>=g?void 0:f}else{let f=u;for(let x=l;x<g;x++){const E=s(x);if(p<=f+E)return x;f+=E}return}}let li=0,bo={};const ah=typeof window>"u";async function ch(){ah||document?.fonts?.ready===void 0||(await document.fonts.ready,li=0,bo={},Zf())}ch();function oc(e,t,n,r){return`${e}_${r??t?.font}_${n}`}function xi(e,t,n){const r=oc(e,t,"middle",n);let o=bo[r];return o===void 0&&(o=t.measureText(e),bo[r]=o,li++),li>1e4&&(bo={},li=0),o}function uh(e,t){const n=oc(e,void 0,"middle",t);return bo[n]}function Wn(e,t){return typeof t!="string"&&(t=t.baseFontFull),dh(e,t)}function Ll(e,t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ";e.save(),e.textBaseline=t;const r=e.measureText(n);return e.restore(),r}const Hl=[];function dh(e,t){for(const i of Hl)if(i.key===t)return i.val;const n=Ll(e,"alphabetic"),o=-(Ll(e,"middle").actualBoundingBoxDescent-n.actualBoundingBoxDescent)+n.actualBoundingBoxAscent/2;return Hl.push({key:t,val:o}),o}function fh(e,t,n,r,o,i){const{ctx:s,rect:l,theme:a}=e;let c=Number.MAX_SAFE_INTEGER;const u=500;if(t!==void 0&&(c=n-t,c<u)){const h=1-c/u;s.globalAlpha=h,s.fillStyle=a.bgSearchResult,s.fillRect(l.x+1,l.y+1,l.width-(o?2:1),l.height-(i?2:1)),s.globalAlpha=1,r!==void 0&&(r.fillStyle=a.bgSearchResult)}return c<u}function Io(e,t,n){const{ctx:r,theme:o}=e,i=t??{},s=n??o.textDark;return s!==i.fillStyle&&(r.fillStyle=s,i.fillStyle=s),i}function ic(e,t,n,r,o,i,s,l,a){a==="right"?e.fillText(t,n+o-(l.cellHorizontalPadding+.5),r+i/2+s):a==="center"?e.fillText(t,n+o/2,r+i/2+s):e.fillText(t,n+l.cellHorizontalPadding+.5,r+i/2+s)}function sc(e,t){const n=xi("ABCi09jgqpy",e,t);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}function hh(e,t){e.includes(`
`)&&(e=e.split(/\r?\n/,1)[0]);const n=t/4;return e.length>n&&(e=e.slice(0,n)),e}function gh(e,t,n,r,o,i,s,l,a,c){const u=l.baseFontFull,h=th(e,t,u,o-l.cellHorizontalPadding*2,c??!1),g=sc(e,u),p=l.lineHeight*g,f=g+p*(h.length-1),x=f+l.cellVerticalPadding>i;x&&(e.save(),e.rect(n,r,o,i),e.clip());const E=r+i/2-f/2;let M=Math.max(r+l.cellVerticalPadding,E);for(const b of h)if(ic(e,b,n,M,o,g,s,l,a),M+=p,M>r+i)break;x&&e.restore()}function Sn(e,t,n,r,o){const{ctx:i,rect:s,theme:l}=e,{x:a,y:c,width:u,height:h}=s;r=r??!1,r||(t=hh(t,u));const g=Wn(i,l),p=Ss(t)==="rtl";if(n===void 0&&p&&(n="right"),p&&(i.direction="rtl"),t.length>0){let f=!1;n==="right"?(i.textAlign="right",f=!0):n!==void 0&&n!=="left"&&(i.textAlign=n,f=!0),r?gh(i,t,a,c,u,h,g,l,n,o):ic(i,t,a,c,u,h,g,l,n),f&&(i.textAlign="start"),p&&(i.direction="inherit")}}function Mn(e,t,n,r,o,i){typeof i=="number"&&(i={tl:i,tr:i,br:i,bl:i}),i={tl:Math.max(0,Math.min(i.tl,o/2,r/2)),tr:Math.max(0,Math.min(i.tr,o/2,r/2)),bl:Math.max(0,Math.min(i.bl,o/2,r/2)),br:Math.max(0,Math.min(i.br,o/2,r/2))},e.moveTo(t+i.tl,n),e.arcTo(t+r,n,t+r,n+i.tr,i.tr),e.arcTo(t+r,n+o,t+r-i.br,n+o,i.br),e.arcTo(t,n+o,t,n+o-i.bl,i.bl),e.arcTo(t,n,t+i.tl,n,i.tl)}function mh(e,t,n){e.arc(t,n-1.25*3.5,1.25,0,2*Math.PI,!1),e.arc(t,n,1.25,0,2*Math.PI,!1),e.arc(t,n+1.25*3.5,1.25,0,2*Math.PI,!1)}function ph(e,t,n){const r=function(l,a){const c=a.x-l.x,u=a.y-l.y,h=Math.sqrt(c*c+u*u),g=c/h,p=u/h;return{x:c,y:a.y-l.y,len:h,nx:g,ny:p,ang:Math.atan2(p,g)}};let o;const i=t.length;let s=t[i-1];for(let l=0;l<i;l++){let a=t[l%i];const c=t[(l+1)%i],u=r(a,s),h=r(a,c),g=u.nx*h.ny-u.ny*h.nx,p=u.nx*h.nx-u.ny*-h.ny;let f=Math.asin(g<-1?-1:g>1?1:g),x=1,E=!1;p<0?f<0?f=Math.PI+f:(f=Math.PI-f,x=-1,E=!0):f>0&&(x=-1,E=!0),o=a.radius!==void 0?a.radius:n;const M=f/2;let b=Math.abs(Math.cos(M)*o/Math.sin(M)),D;b>Math.min(u.len/2,h.len/2)?(b=Math.min(u.len/2,h.len/2),D=Math.abs(b*Math.sin(M)/Math.cos(M))):D=o;let R=a.x+h.nx*b,v=a.y+h.ny*b;R+=-h.ny*D*x,v+=h.nx*D*x,e.arc(R,v,D,u.ang+Math.PI/2*x,h.ang-Math.PI/2*x,E),s=a,a=c}e.closePath()}function hs(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f){const x={x:0,y:i+c,width:0,height:0};if(e>=p.length||t>=u||t<-2||e<0)return x;const E=i-o;if(e>=h){const M=s>e?-1:1,b=zr(p);x.x+=b+a;for(let D=s;D!==e;D+=M)x.x+=p[M===1?D:D-1].width*M}else for(let M=0;M<e;M++)x.x+=p[M].width;if(x.width=p[e].width+1,t===-1)x.y=o,x.height=E;else if(t===-2){x.y=0,x.height=o;let M=e;const b=p[e].group,D=p[e].sticky;for(;M>0&&So(p[M-1].group,b)&&p[M-1].sticky===D;){const v=p[M-1];x.x-=v.width,x.width+=v.width,M--}let R=e;for(;R+1<p.length&&So(p[R+1].group,b)&&p[R+1].sticky===D;){const v=p[R+1];x.width+=v.width,R++}if(!D){const v=zr(p),P=x.x-v;P<0&&(x.x-=P,x.width+=P),x.x+x.width>n&&(x.width=n-x.x)}}else if(t>=u-g){let M=u-t;for(x.y=r;M>0;){const b=t+M-1;x.height=typeof f=="number"?f:f(b),x.y-=x.height,M--}x.height+=1}else{const M=l>t?-1:1;if(typeof f=="number"){const b=t-l;x.y+=b*f}else for(let b=l;b!==t;b+=M)x.y+=f(b)*M;x.height=(typeof f=="number"?f:f(t))+1}return x}const _s=1<<21;function cn(e,t){return(t+2)*_s+e}function lc(e){return e%_s}function As(e){return Math.floor(e/_s)-2}function Ls(e){const t=lc(e),n=As(e);return[t,n]}class ac{visibleWindow={x:0,y:0,width:0,height:0};freezeCols=0;freezeRows=[];isInWindow=t=>{const n=lc(t),r=As(t),o=this.visibleWindow,i=n>=o.x&&n<=o.x+o.width||n<this.freezeCols,s=r>=o.y&&r<=o.y+o.height||this.freezeRows.includes(r);return i&&s};setWindow(t,n,r){this.visibleWindow.x===t.x&&this.visibleWindow.y===t.y&&this.visibleWindow.width===t.width&&this.visibleWindow.height===t.height&&this.freezeCols===n&&Lr(this.freezeRows,r)||(this.visibleWindow=t,this.freezeCols=n,this.freezeRows=r,this.clearOutOfWindow())}}class wh extends ac{cache=new Map;setValue=(t,n)=>{this.cache.set(cn(t[0],t[1]),n)};getValue=t=>this.cache.get(cn(t[0],t[1]));clearOutOfWindow=()=>{for(const[t]of this.cache.entries())this.isInWindow(t)||this.cache.delete(t)}}class xo{cells;constructor(t=[]){this.cells=new Set(t.map(n=>cn(n[0],n[1])))}add(t){this.cells.add(cn(t[0],t[1]))}has(t){return t===void 0?!1:this.cells.has(cn(t[0],t[1]))}remove(t){this.cells.delete(cn(t[0],t[1]))}clear(){this.cells.clear()}get size(){return this.cells.size}hasHeader(){for(const t of this.cells)if(As(t)<0)return!0;return!1}hasItemInRectangle(t){for(let n=t.y;n<t.y+t.height;n++)for(let r=t.x;r<t.x+t.width;r++)if(this.cells.has(cn(r,n)))return!0;return!1}hasItemInRegion(t){for(const n of t)if(this.hasItemInRectangle(n))return!0;return!1}*values(){for(const t of this.cells)yield Ls(t)}}function vh(e){return{"--gdg-accent-color":e.accentColor,"--gdg-accent-fg":e.accentFg,"--gdg-accent-light":e.accentLight,"--gdg-text-dark":e.textDark,"--gdg-text-medium":e.textMedium,"--gdg-text-light":e.textLight,"--gdg-text-bubble":e.textBubble,"--gdg-bg-icon-header":e.bgIconHeader,"--gdg-fg-icon-header":e.fgIconHeader,"--gdg-text-header":e.textHeader,"--gdg-text-group-header":e.textGroupHeader??e.textHeader,"--gdg-text-header-selected":e.textHeaderSelected,"--gdg-bg-cell":e.bgCell,"--gdg-bg-cell-medium":e.bgCellMedium,"--gdg-bg-header":e.bgHeader,"--gdg-bg-header-has-focus":e.bgHeaderHasFocus,"--gdg-bg-header-hovered":e.bgHeaderHovered,"--gdg-bg-bubble":e.bgBubble,"--gdg-bg-bubble-selected":e.bgBubbleSelected,"--gdg-bg-search-result":e.bgSearchResult,"--gdg-border-color":e.borderColor,"--gdg-horizontal-border-color":e.horizontalBorderColor??e.borderColor,"--gdg-drilldown-border":e.drilldownBorder,"--gdg-link-color":e.linkColor,"--gdg-cell-horizontal-padding":`${e.cellHorizontalPadding}px`,"--gdg-cell-vertical-padding":`${e.cellVerticalPadding}px`,"--gdg-header-font-style":e.headerFontStyle,"--gdg-base-font-style":e.baseFontStyle,"--gdg-marker-font-style":e.markerFontStyle,"--gdg-font-family":e.fontFamily,"--gdg-editor-font-size":e.editorFontSize,...e.roundingRadius===void 0?{}:{"--gdg-rounding-radius":`${e.roundingRadius}px`}}}const cc={accentColor:"#4F5DFF",accentFg:"#FFFFFF",accentLight:"rgba(62, 116, 253, 0.1)",textDark:"#313139",textMedium:"#737383",textLight:"#B2B2C0",textBubble:"#313139",bgIconHeader:"#737383",fgIconHeader:"#FFFFFF",textHeader:"#313139",textGroupHeader:"#313139BB",textHeaderSelected:"#FFFFFF",bgCell:"#FFFFFF",bgCellMedium:"#FAFAFB",bgHeader:"#F7F7F8",bgHeaderHasFocus:"#E9E9EB",bgHeaderHovered:"#EFEFF1",bgBubble:"#EDEDF3",bgBubbleSelected:"#FFFFFF",bgSearchResult:"#fff9e3",borderColor:"rgba(115, 116, 131, 0.16)",drilldownBorder:"rgba(0, 0, 0, 0)",linkColor:"#4F5DFF",cellHorizontalPadding:8,cellVerticalPadding:3,headerIconSize:18,headerFontStyle:"600 13px",baseFontStyle:"13px",markerFontStyle:"9px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif",editorFontSize:"13px",lineHeight:1.4};function uc(){return cc}const yh=vt.createContext(cc);function $n(e,...t){const n={...e};for(const r of t)if(r!==void 0)for(const o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);return(n.headerFontFull===void 0||e.fontFamily!==n.fontFamily||e.headerFontStyle!==n.headerFontStyle)&&(n.headerFontFull=`${n.headerFontStyle} ${n.fontFamily}`),(n.baseFontFull===void 0||e.fontFamily!==n.fontFamily||e.baseFontStyle!==n.baseFontStyle)&&(n.baseFontFull=`${n.baseFontStyle} ${n.fontFamily}`),(n.markerFontFull===void 0||e.fontFamily!==n.fontFamily||e.markerFontStyle!==n.markerFontStyle)&&(n.markerFontFull=`${n.markerFontStyle} ${n.fontFamily}`),n}const gs=150;function bh(e,t,n,r){return r(t)?.measure?.(e,t,n)??gs}function dc(e,t,n,r,o,i,s,l,a){let c=0;const u=o===void 0?[]:o.map(g=>{const p=bh(e,g[r],t,a);return c=Math.max(c,p),p});if(u.length>5&&l){c=0;let g=0;for(const f of u)g+=f;const p=g/u.length;for(let f=0;f<u.length;f++)u[f]>=p*2?u[f]=0:c=Math.max(c,u[f])}c=Math.max(c,e.measureText(n.title).width+16+(n.icon===void 0?0:28));const h=Math.max(Math.ceil(i),Math.min(Math.floor(s),Math.ceil(c)));return{...n,width:h}}function xh(e,t,n,r,o,i,s,l,a){const c=d.useRef(t),u=d.useRef(n),h=d.useRef(s);c.current=t,u.current=n,h.current=s;const[g,p]=d.useMemo(()=>{if(typeof window>"u")return[null,null];const b=document.createElement("canvas");return b.style.display="none",b.style.opacity="0",b.style.position="fixed",[b,b.getContext("2d",{alpha:!1})]},[]);d.useLayoutEffect(()=>(g&&document.documentElement.append(g),()=>{g?.remove()}),[g]);const f=d.useRef({}),x=d.useRef(),[E,M]=d.useState();return d.useLayoutEffect(()=>{const b=u.current;if(b===void 0||e.every(Qo))return;let D=Math.max(1,10-Math.floor(e.length/1e4)),R=0;D<c.current&&D>1&&(D--,R=1);const v={x:0,y:0,width:e.length,height:Math.min(c.current,D)},P={x:0,y:c.current-1,width:e.length,height:1};(async()=>{const I=b(v,a.signal),C=R>0?b(P,a.signal):void 0;let F;typeof I=="object"?F=I:F=await cl(I),C!==void 0&&(typeof C=="object"?F=[...F,...C]:F=[...F,...await cl(C)]),x.current=e,M(F)})()},[a.signal,e]),d.useMemo(()=>{let D=e.every(Qo)?e:p===null?e.map(H=>Qo(H)?H:{...H,width:gs}):(p.font=h.current.baseFontFull,e.map((H,I)=>{if(Qo(H))return H;if(f.current[H.id]!==void 0)return{...H,width:f.current[H.id]};if(E===void 0||x.current!==e||H.id===void 0)return{...H,width:gs};const C=dc(p,s,H,I,E,o,i,!0,l);return f.current[H.id]=C.width,C})),R=0,v=0;const P=[];for(const[H,I]of D.entries())R+=I.width,I.grow!==void 0&&I.grow>0&&(v+=I.grow,P.push(H));if(R<r&&P.length>0){const H=[...D],I=r-R;let C=I;for(let F=0;F<P.length;F++){const S=P[F],w=(D[S].grow??0)/v,k=F===P.length-1?C:Math.min(C,Math.floor(I*w));H[S]={...D[S],growOffset:k,width:D[S].width+k},C-=k}D=H}return{sizedColumns:D,nonGrowWidth:R}},[r,e,p,E,s,o,i,l])}const rt='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',Ch=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}<rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${t}"/></svg>`},kh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}<rect x="2" y="2" width="16" height="16" rx="4" fill="${n}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${t}"/></svg>`},Sh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${t}"/>
  </svg>`},Rh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${t}"/>
</svg>`},Mh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
    <path
        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"
        fill="${n}"
    />
    <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"
        fill="${t}"
    />
</svg>`},fc=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${t}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${t}"/>
</svg>
  `},Eh=e=>{const t=e.bgColor;return`${rt}
    <path stroke="${t}" stroke-width="2" d="M12 3v14"/>
    <path stroke="${t}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>
    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${t}"/>
  </svg>
`},Th=fc,Ih=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${t}"/>
</svg>`},Dh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${t}"/>
    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${t}"/>
    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
  </svg>`},Ph=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${t}"/>
</svg>`},_h=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path fill="${t}" d="M3 3h14v14H3z"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${n}"/>
  </svg>`},Ah=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${t}"/>
  </svg>`},Lh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${t}"/>
</svg>`},Hh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${t}"/>
    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${t}"/>
  </svg>`},zh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${t}"/>
</svg>`},Fh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <rect x="2" y="8" width="10" height="8" rx="2" fill="${n}"/>
    <rect x="8" y="4" width="10" height="8" rx="2" fill="${n}"/>
    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${t}"/>
  </svg>`},Oh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path fill="${t}" d="M4 3h12v14H4z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${n}"/>
</svg>`},Nh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${t}"/>
  </svg>`},$h=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${t}"/>
  </svg>`},Wh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${t}"/>
</svg>`},Bh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${t}"/>
  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${t}"/>
</svg>`},jh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${t}"/>
  </svg>`},Vh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${t}"/>
</svg>`},Xh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${t}"/>
  </svg>`},Uh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${t}"/>
</svg>`},qh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${t}"/>
</svg>`},Kh=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>`},Yh=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>
`},Gh={headerRowID:Ch,headerNumber:Sh,headerCode:kh,headerString:Rh,headerBoolean:Mh,headerAudioUri:Th,headerVideoUri:Ih,headerEmoji:Dh,headerImage:Ph,headerUri:fc,headerPhone:_h,headerMarkdown:Ah,headerDate:Lh,headerTime:Hh,headerEmail:zh,headerReference:Fh,headerIfThenElse:Oh,headerSingleValue:Nh,headerLookup:$h,headerTextTemplate:Wh,headerMath:Bh,headerRollup:jh,headerJoinStrings:Vh,headerSplitString:Xh,headerGeoDistance:Uh,headerArray:qh,rowOwnerOverlay:Kh,protectedColumnOverlay:Yh,renameIcon:Eh};function Zh(e,t){return e==="normal"?[t.bgIconHeader,t.fgIconHeader]:e==="selected"?["white",t.accentColor]:[t.accentColor,t.bgHeader]}class Qh{onSettled;spriteMap=new Map;headerIcons;inFlight=0;constructor(t,n){this.onSettled=n,this.headerIcons=t??{}}drawSprite(t,n,r,o,i,s,l,a=1){const[c,u]=Zh(n,l),h=s*Math.ceil(window.devicePixelRatio),g=`${c}_${u}_${h}_${t}`;let p=this.spriteMap.get(g);if(p===void 0){const f=this.headerIcons[t];if(f===void 0)return;p=document.createElement("canvas");const x=p.getContext("2d");if(x===null)return;const E=new Image;E.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(f({fgColor:u,bgColor:c}))}`,this.spriteMap.set(g,p);const M=E.decode();if(M===void 0)return;this.inFlight++,M.then(()=>{x.drawImage(E,0,0,h,h)}).finally(()=>{this.inFlight--,this.inFlight===0&&this.onSettled()})}else a<1&&(r.globalAlpha=a),r.drawImage(p,0,0,h,h,o,i,s,s),a<1&&(r.globalAlpha=1)}}function Hs(e,t,n,r,o,i,s,l,a=-20,c=-20,u=32,h="center"){const g=Math.floor(o+s/2),p=t.roundingRadius??4,f=Ba(u,s,t.cellVerticalPadding),x=f/2,E=Wa(h,r,i,t.cellHorizontalPadding,f),M=$a(E,g,f),b=ja(r+a,o+c,M);switch(n){case!0:{e.beginPath(),Mn(e,E-f/2,g-f/2,f,f,p),e.fillStyle=l?t.accentColor:t.textMedium,e.fill(),e.beginPath(),e.moveTo(E-x+f/4.23,g-x+f/1.97),e.lineTo(E-x+f/2.42,g-x+f/1.44),e.lineTo(E-x+f/1.29,g-x+f/3.25),e.strokeStyle=t.bgCell,e.lineJoin="round",e.lineCap="round",e.lineWidth=1.9,e.stroke();break}case ci:case!1:{e.beginPath(),Mn(e,E-f/2+.5,g-f/2+.5,f-1,f-1,p),e.lineWidth=1,e.strokeStyle=b?t.textDark:t.textMedium,e.stroke();break}case xs:{e.beginPath(),Mn(e,E-f/2,g-f/2,f,f,p),e.fillStyle=b?t.textMedium:t.textLight,e.fill(),e.beginPath(),e.moveTo(E-f/3,g),e.lineTo(E+f/3,g),e.strokeStyle=t.bgCell,e.lineCap="round",e.lineWidth=1.9,e.stroke();break}default:ko()}}function Jh(e,t,n,r){if(r==="any")return hc(e,{x:t,y:n,width:1,height:1});if(r==="vertical"&&(t=e.x),r==="horizontal"&&(n=e.y),tc([t,n],e))return;const o=t-e.x,i=e.x+e.width-t,s=n-e.y+1,l=e.y+e.height-n,a=Math.min(r==="vertical"?Number.MAX_SAFE_INTEGER:o,r==="vertical"?Number.MAX_SAFE_INTEGER:i,r==="horizontal"?Number.MAX_SAFE_INTEGER:s,r==="horizontal"?Number.MAX_SAFE_INTEGER:l);return a===l?{x:e.x,y:e.y+e.height,width:e.width,height:n-e.y-e.height+1}:a===s?{x:e.x,y:n,width:e.width,height:e.y-n}:a===i?{x:e.x+e.width,y:e.y,width:t-e.x-e.width+1,height:e.height}:{x:t,y:e.y,width:e.x-t,height:e.height}}function hc(e,t){const n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),o=Math.max(e.x+e.width,t.x+t.width)-n,i=Math.max(e.y+e.height,t.y+t.height)-r;return{x:n,y:r,width:o,height:i}}function eg(e,t){return e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height}function tg(e,t,n,r){if(e.x>t||e.y>n||e.x<0&&e.y<0&&e.x+e.width>t&&e.y+e.height>n)return;if(e.x>=0&&e.y>=0&&e.x+e.width<=t&&e.y+e.height<=n)return e;const o=-4,i=-4,s=t+4,l=n+4,a=o-e.x,c=e.x+e.width-s,u=i-e.y,h=e.y+e.height-l,g=a>0?e.x+Math.floor(a/r)*r:e.x,p=c>0?e.x+e.width-Math.floor(c/r)*r:e.x+e.width,f=u>0?e.y+Math.floor(u/r)*r:e.y,x=h>0?e.y+e.height-Math.floor(h/r)*r:e.y+e.height;return{x:g,y:f,width:p-g,height:x-f}}function ng(e,t,n,r,o){const[i,s,l,a]=t,[c,u,h,g]=o,{x:p,y:f,width:x,height:E}=e,M=[];if(x<=0||E<=0)return M;const b=p+x,D=f+E,R=p<i,v=f<s,P=p+x>l,H=f+E>a,I=p>i&&p<l||b>i&&b<l||p<i&&b>l,C=f>s&&f<a||D>s&&D<a||f<s&&D>a;if(I&&C){const S=Math.max(p,i),w=Math.max(f,s),k=Math.min(b,l),T=Math.min(D,a);M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:c,y:u,width:h-c+1,height:g-u+1}})}if(R&&v){const S=p,w=f,k=Math.min(b,i),T=Math.min(D,s);M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:0,y:0,width:c+1,height:u+1}})}if(v&&I){const S=Math.max(p,i),w=f,k=Math.min(b,l),T=Math.min(D,s);M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:c,y:0,width:h-c+1,height:u+1}})}if(v&&P){const S=Math.max(p,l),w=f,k=b,T=Math.min(D,s);M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:h,y:0,width:n-h+1,height:u+1}})}if(R&&C){const S=p,w=Math.max(f,s),k=Math.min(b,i),T=Math.min(D,a);M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:0,y:u,width:c+1,height:g-u+1}})}if(P&&C){const S=Math.max(p,l),w=Math.max(f,s),k=b,T=Math.min(D,a);M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:h,y:u,width:n-h+1,height:g-u+1}})}if(R&&H){const S=p,w=Math.max(f,a),k=Math.min(b,i),T=D;M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:0,y:g,width:c+1,height:r-g+1}})}if(H&&I){const S=Math.max(p,i),w=Math.max(f,a),k=Math.min(b,l),T=D;M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:c,y:g,width:h-c+1,height:r-g+1}})}if(P&&H){const S=Math.max(p,l),w=Math.max(f,a),k=b,T=D;M.push({rect:{x:S,y:w,width:k-S,height:T-w},clip:{x:h,y:g,width:n-h+1,height:r-g+1}})}return M}const rg={kind:oe.Loading,allowOverlay:!1},lo=[0,0],ao={x:0,y:0,width:0,height:0},Qi=[void 0,()=>{}];let ms=!1;function og(){ms=!0}function gc(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f,x,E,M,b,D,R,v,P,H,I){let C,F;E!==void 0&&E[0][0]===n&&E[0][1]===r&&(C=E[1][0],F=E[1][1]);let S;lo[0]=n,lo[1]=r,ao.x=s,ao.y=l,ao.width=a,ao.height=c,Qi[0]=P.getValue(lo),Qi[1]=y=>P.setValue(lo,y),ms=!1;const w={ctx:e,theme:h,col:n,row:r,cell:t,rect:ao,highlighted:u,cellFillColor:g,hoverAmount:x,frameTime:b,hoverX:C,drawState:Qi,hoverY:F,imageLoader:p,spriteManager:f,hyperWrapping:M,overrideCursor:C!==void 0?I:void 0,requestAnimationFrame:og},k=fh(w,t.lastUpdated,b,R,o,i),T=H(t);if(T!==void 0){R?.renderer!==T&&(R?.deprep?.(w),R=void 0);const y=T.drawPrep?.(w,R);D!==void 0&&!Pr(w.cell)?D(w,()=>T.draw(w,t)):T.draw(w,t),S=y===void 0?void 0:{deprep:y?.deprep,fillStyle:y?.fillStyle,font:y?.font,renderer:T}}return(k||ms)&&v?.(lo),S}function ig(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f,x,E,M,b){const D=[];e.imageSmoothingEnabled=!1;const R=Math.min(o.cellYOffset,s),v=Math.max(o.cellYOffset,s);let P=0;if(typeof M=="number")P+=(v-R)*M;else for(let T=R;T<v;T++)P+=M(T);s>o.cellYOffset&&(P=-P),P+=a-o.translateY;const H=Math.min(o.cellXOffset,i),I=Math.max(o.cellXOffset,i);let C=0;for(let T=H;T<I;T++)C+=x[T].width;i>o.cellXOffset&&(C=-C),C+=l-o.translateX;let F=zr(E);if(F>0&&F++,C!==0&&P!==0)return{regions:[]};const S=c>0?Fr(g,c,M):0,w=u-F-Math.abs(C),k=h-p-S-Math.abs(P)-1;if(w>150&&k>150){const T={sx:0,sy:0,sw:u*f,sh:h*f,dx:0,dy:0,dw:u*f,dh:h*f};if(P>0?(T.sy=(p+1)*f,T.sh=k*f,T.dy=(P+p+1)*f,T.dh=k*f,D.push({x:0,y:p,width:u,height:P+1})):P<0&&(T.sy=(-P+p+1)*f,T.sh=k*f,T.dy=(p+1)*f,T.dh=k*f,D.push({x:0,y:h+P-S,width:u,height:-P+S})),C>0?(T.sx=F*f,T.sw=w*f,T.dx=(C+F)*f,T.dw=w*f,D.push({x:F-1,y:0,width:C+2,height:h})):C<0&&(T.sx=(F-C)*f,T.sw=w*f,T.dx=F*f,T.dw=w*f,D.push({x:u+C,y:0,width:-C,height:h})),e.setTransform(1,0,0,1,0,0),b){if(F>0&&C!==0&&P===0&&(r===void 0||n?.[1]!==!1)){const y=F*f,q=h*f;e.drawImage(t,0,0,y,q,0,0,y,q)}if(S>0&&C===0&&P!==0&&(r===void 0||n?.[0]!==!1)){const y=(h-S)*f,q=u*f,j=S*f;e.drawImage(t,0,y,q,j,0,y,q,j)}}e.drawImage(t,T.sx,T.sy,T.sw,T.sh,T.dx,T.dy,T.dw,T.dh),e.scale(f,f)}return e.imageSmoothingEnabled=!0,{regions:D}}function sg(e,t,n,r,o,i,s,l,a,c){const u=[];return t!==e.cellXOffset||n!==e.cellYOffset||r!==e.translateX||o!==e.translateY||Bn(a,n,r,o,l,(h,g,p,f)=>{if(h.sourceIndex===c){const x=Math.max(g,f)+1;return u.push({x,y:0,width:i-x,height:s}),!0}}),u}function zl(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f,x,E,M=!1){if(a!==void 0){e.beginPath(),e.save(),e.rect(0,0,i,s);for(const w of a)e.rect(w.x+1,w.y+1,w.width-1,w.height-1);e.clip("evenodd")}const b=E.horizontalBorderColor??E.borderColor,D=E.borderColor;let R=0,v=i,P=0,H=s;if(l!==void 0&&l.length>0){R=Number.MAX_SAFE_INTEGER,P=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER,H=Number.MIN_SAFE_INTEGER;for(const w of l)R=Math.min(R,w.x-1),v=Math.max(v,w.x+w.width+1),P=Math.min(P,w.y-1),H=Math.max(H,w.y+w.height+1)}const I=[];e.beginPath();let C=.5;for(let w=0;w<t.length;w++){const k=t[w];if(k.width===0)continue;C+=k.width;const T=k.sticky?C:C+r;T>=R&&T<=v&&p(w+1)&&I.push({x1:T,y1:Math.max(c,P),x2:T,y2:Math.min(s,H),color:D})}let F=s+.5;for(let w=x-f;w<x;w++){const k=h(w);F-=k,I.push({x1:R,y1:F,x2:v,y2:F,color:b})}if(M!==!0){let w=u+.5,k=n;const T=F;for(;w+o<T;){const y=w+o;if(y>=P&&y<=H-1){const q=g?.(k);I.push({x1:R,y1:y,x2:v,y2:y,color:q?.horizontalBorderColor??q?.borderColor??b})}w+=h(k),k++}}const S=su(I,w=>w.color);for(const w of Object.keys(S)){e.strokeStyle=w;for(const k of S[w])e.moveTo(k.x1,k.y1),e.lineTo(k.x2,k.y2);e.stroke(),e.beginPath()}a!==void 0&&e.restore()}function mc(e,t){const n=[];let r=e.x+e.width-26*t.length;const o=e.y+e.height/2-13,i=26,s=26;for(let l=0;l<t.length;l++)n.push({x:r,y:o,width:s,height:i}),r+=26;return n}function Ci(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function lg(e,t,n,r,o,i,s,l,a,c,u,h){const[p,f]=i?.[0]??[];let x=0;yc(t,n,r,o,(E,M,b,D,R,v)=>{if(h!==void 0&&!h.hasItemInRectangle({x:E[0],y:-2,width:E[1]-E[0]+1,height:1}))return;e.save(),e.beginPath(),e.rect(b,D,R,v),e.clip();const P=u(M),H=P?.overrideTheme===void 0?s:$n(s,P.overrideTheme),I=f===-2&&p!==void 0&&p>=E[0]&&p<=E[1],C=I?H.bgHeaderHovered:H.bgHeader;if(C!==s.bgHeader&&(e.fillStyle=C,e.fill()),e.fillStyle=H.textGroupHeader??H.textHeader,P!==void 0){let F=b;if(P.icon!==void 0&&(l.drawSprite(P.icon,"normal",e,F+8,(o-20)/2,20,H),F+=26),e.fillText(P.name,F+8,o/2+Wn(e,s.headerFontFull)),P.actions!==void 0&&I){const S=mc({x:b,y:D,width:R,height:v},P.actions);e.beginPath();const w=S[0].x-10,k=b+R-w;e.rect(w,0,k,o);const T=e.createLinearGradient(w,0,w+k,0),y=Hr(C,0);T.addColorStop(0,y),T.addColorStop(10/k,C),T.addColorStop(1,C),e.fillStyle=T,e.fill(),e.globalAlpha=.6;const[q,j]=i?.[1]??[-1,-1];for(let X=0;X<P.actions.length;X++){const ce=P.actions[X],Z=S[X],G=Ci(Z,q+b,j);G&&(e.globalAlpha=1),l.drawSprite(ce.icon,"normal",e,Z.x+Z.width/2-10,Z.y+Z.height/2-10,20,H),G&&(e.globalAlpha=.6)}e.globalAlpha=1}}b!==0&&c(E[0])&&(e.beginPath(),e.moveTo(b+.5,0),e.lineTo(b+.5,o),e.strokeStyle=s.borderColor,e.lineWidth=1,e.stroke()),e.restore(),x=b+R}),e.beginPath(),e.moveTo(x+.5,0),e.lineTo(x+.5,o),e.moveTo(0,o+.5),e.lineTo(n,o+.5),e.strokeStyle=s.borderColor,e.lineWidth=1,e.stroke()}const Tr=30;function pc(e,t,n,r,o){return o?{x:e,y:t,width:Tr,height:Math.min(Tr,r)}:{x:e+n-Tr,y:Math.max(t,t+r/2-Tr/2),width:Tr,height:Math.min(Tr,r)}}function Fl(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f){if(p){let R;i.title===_a&&(R=!0),i.title===Aa&&(R=!1),R!==!0&&(e.globalAlpha=c),Hs(e,l,R,t,n,r,o,!1,void 0,void 0,18),R!==!0&&(e.globalAlpha=1);return}const x=l.cellHorizontalPadding,E=s?l.textHeaderSelected:l.textHeader,M=i.hasMenu===!0&&(a||h&&s),b=g?-1:1;let D=g?t+r-x:t+x;if(i.icon!==void 0){let R=s?"selected":"normal";i.style==="highlight"&&(R=s?"selected":"special");const v=l.headerIconSize;u.drawSprite(i.icon,R,e,g?D-v:D,n+(o-v)/2,v,l),i.overlayIcon!==void 0&&u.drawSprite(i.overlayIcon,s?"selected":"special",e,g?D-v+9:D+9,n+((o-18)/2+6),18,l),D+=Math.ceil(v*1.3)*b}if(M&&i.hasMenu===!0&&r>35){const v=g?35:r-35,P=g?35*.7:r-35*.7,H=v/r,I=P/r,C=e.createLinearGradient(t,0,t+r,0),F=Hr(E,0);C.addColorStop(g?1:0,E),C.addColorStop(H,E),C.addColorStop(I,F),C.addColorStop(g?0:1,F),e.fillStyle=C}else e.fillStyle=E;if(g&&(e.textAlign="right"),e.fillText(i.title,D,n+o/2+Wn(e,l.headerFontFull)),g&&(e.textAlign="left"),M&&i.hasMenu===!0)if(i.menuIcon===void 0||i.menuIcon===ui.Triangle){e.beginPath();const R=f.x+f.width/2-5.5,v=f.y+f.height/2-3;ph(e,[{x:R,y:v},{x:R+11,y:v},{x:R+5.5,y:v+6}],1),e.fillStyle=E,e.fill()}else if(i.menuIcon===ui.Dots){e.beginPath();const R=f.x+f.width/2,v=f.y+f.height/2;mh(e,R,v),e.fillStyle=E,e.fill()}else{const R=f.x+(f.width-l.headerIconSize)/2,v=f.y+(f.height-l.headerIconSize)/2;u.drawSprite(i.menuIcon,"normal",e,R,v,l.headerIconSize,l)}}function wc(e,t,n,r,o,i,s,l,a,c,u,h,g,p){const f=i.title.startsWith(vi),x=Ss(i.title)==="rtl",E=pc(t,n,r,o,x);if(g!==void 0){let M=i;f&&(M={...i,title:""}),g({ctx:e,theme:l,rect:{x:t,y:n,width:r,height:o},column:M,columnIndex:M.sourceIndex,isSelected:s,hoverAmount:u,isHovered:a,hasSelectedCell:c,spriteManager:h,menuBounds:E},()=>Fl(e,t,n,r,o,i,s,l,a,u,h,p,x,f,E))}else Fl(e,t,n,r,o,i,s,l,a,u,h,p,x,f,E)}function ag(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f,x,E,M,b){const D=s+l;if(D<=0)return;e.fillStyle=h.bgHeader,e.fillRect(0,0,o,D);const[R,v]=r?.[0]??[],P=h.headerFontFull;e.font=P,Bn(t,0,i,0,D,(H,I,C,F)=>{if(E!==void 0&&!E.has([H.sourceIndex,-1]))return;const S=Math.max(0,F-I);e.save(),e.beginPath(),e.rect(I+S,l,H.width-S,s),e.clip();const w=x(H.group??"").overrideTheme,k=H.themeOverride===void 0&&w===void 0?h:$n(h,w,H.themeOverride);k.bgHeader!==h.bgHeader&&(e.fillStyle=k.bgHeader,e.fill()),k!==h&&(e.font=k.baseFontFull);const T=u.columns.hasIndex(H.sourceIndex),y=a!==void 0||c,q=!y&&v===-1&&R===H.sourceIndex,j=y?0:p.find(ne=>ne.item[0]===H.sourceIndex&&ne.item[1]===-1)?.hoverAmount??0,X=u?.current!==void 0&&u.current.cell[0]===H.sourceIndex,ce=T?k.accentColor:X?k.bgHeaderHasFocus:k.bgHeader,Z=n?l:0,G=H.sourceIndex===0?0:1;T?(e.fillStyle=ce,e.fillRect(I+G,Z,H.width-G,s)):(X||j>0)&&(e.beginPath(),e.rect(I+G,Z,H.width-G,s),X&&(e.fillStyle=k.bgHeaderHasFocus,e.fill()),j>0&&(e.globalAlpha=j,e.fillStyle=k.bgHeaderHovered,e.fill(),e.globalAlpha=1)),wc(e,I,Z,H.width,s,H,T,k,q,X,j,g,M,b),e.restore()}),n&&lg(e,t,o,i,l,r,h,g,p,f,x,E)}function gi(e,t,n,r,o,i,s,l){return e<=o+s&&o<=e+n&&t<=i+l&&i<=t+r}function cg(e,t,n,r,o,i,s,l,a){a===void 0||a.size===0||(e.beginPath(),yc(t,n,i,r,(c,u,h,g,p,f)=>{a.hasItemInRectangle({x:c[0],y:-2,width:c[1]-c[0]+1,height:1})&&e.rect(h,g,p,f)}),Bn(t,l,i,s,o,(c,u,h,g)=>{const p=Math.max(0,g-u),f=u+p+1,x=c.width-p-1;a.has([c.sourceIndex,-1])&&e.rect(f,r,x,o-r)}),e.clip())}function vc(e,t,n,r,o,i,s){const[l,a]=e;let c,u;const h=s.find(g=>!g.sticky)?.sourceIndex??0;if(a>h){const g=Math.max(l,h);let p=t,f=r;for(let x=i.sourceIndex-1;x>=g;x--)p-=s[x].width,f+=s[x].width;for(let x=i.sourceIndex+1;x<=a;x++)f+=s[x].width;u={x:p,y:n,width:f,height:o}}if(h>l){const g=Math.min(a,h-1);let p=t,f=r;for(let x=i.sourceIndex-1;x>=l;x--)p-=s[x].width,f+=s[x].width;for(let x=i.sourceIndex+1;x<=g;x++)f+=s[x].width;c={x:p,y:n,width:f,height:o}}return[c,u]}function Ol(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f,x,E,M,b,D,R,v,P,H,I,C,F,S,w,k,T,y,q,j,X){let ce=D?.size??Number.MAX_SAFE_INTEGER;const Z=performance.now();let G=k.baseFontFull;e.font=G;const ne={ctx:e},te=[0,0],fe=E>0?Fr(a,E,c):0;let ie,Se;return Bn(t,l,i,s,o,(de,$e,je,_e,Ae)=>{const Ve=Math.max(0,_e-$e),ve=$e+Ve,Oe=o+1,Ge=de.width-Ve,gt=r-o-1;if(b.length>0){let me=!1;for(let Le=0;Le<b.length;Le++){const Re=b[Le];if(gi(ve,Oe,Ge,gt,Re.x,Re.y,Re.width,Re.height)){me=!0;break}}if(!me)return}const he=()=>{e.save(),e.beginPath(),e.rect(ve,Oe,Ge,gt),e.clip()},se=R.columns.hasIndex(de.sourceIndex),De=h(de.group??"").overrideTheme,we=de.themeOverride===void 0&&De===void 0?k:$n(k,De,de.themeOverride),be=we.baseFontFull;be!==G&&(G=be,e.font=be),he();let We;return ki(Ae,je,r,a,c,E,M,(me,Le,Re,lt,Pe)=>{if(Le<0||(te[0]=de.sourceIndex,te[1]=Le,D!==void 0&&!D.has(te)))return;if(b.length>0){let Me=!1;for(let ct=0;ct<b.length;ct++){const Ke=b[ct];if(gi($e,me,de.width,Re,Ke.x,Ke.y,Ke.width,Ke.height)){Me=!0;break}}if(!Me)return}const tt=R.rows.hasIndex(Le),Ue=p.hasIndex(Le),Ce=Le<a?u(te):rg;let qe=$e,Ze=de.width,Tt=!1,zt=!1;if(Ce.span!==void 0){const[Me,ct]=Ce.span,Ke=`${Le},${Me},${ct},${de.sticky}`;if(Se===void 0&&(Se=new Set),Se.has(Ke)){ce--;return}else{const dt=vc(Ce.span,$e,me,de.width,Re,de,n),St=de.sticky?dt[0]:dt[1];if(!de.sticky&&dt[0]!==void 0&&(zt=!0),St!==void 0){qe=St.x,Ze=St.width,Se.add(Ke),e.restore(),We=void 0,e.save(),e.beginPath();const gn=Math.max(0,_e-St.x);e.rect(St.x+gn,me,St.width-gn,Re),ie===void 0&&(ie=[]),ie.push({x:St.x+gn,y:me,width:St.width-gn,height:Re}),e.clip(),Tt=!0}}}const Nt=g?.(Le),un=Pe&&de.trailingRowOptions?.themeOverride!==void 0?de.trailingRowOptions?.themeOverride:void 0,mt=Ce.themeOverride===void 0&&Nt===void 0&&un===void 0?we:$n(we,Nt,un,Ce.themeOverride);e.beginPath();const bn=oh(te,Ce,R);let yt=ih(te,Ce,R);const Yt=Ce.span!==void 0&&R.columns.some(Me=>Ce.span!==void 0&&Me>=Ce.span[0]&&Me<=Ce.span[1]);bn&&!f&&x?yt=0:bn&&(yt=Math.max(yt,1)),Yt&&yt++,bn||(tt&&yt++,se&&!Pe&&yt++);const Xe=Ce.kind===oe.Protected?mt.bgCellMedium:mt.bgCell;let Qe;if((lt||Xe!==k.bgCell)&&(Qe=qt(Xe,Qe)),yt>0||Ue){Ue&&(Qe=qt(mt.bgHeader,Qe));for(let Me=0;Me<yt;Me++)Qe=qt(mt.accentLight,Qe)}else if(v!==void 0){for(const Me of v)if(Me[0]===de.sourceIndex&&Me[1]===Le){Qe=qt(mt.bgSearchResult,Qe);break}}if(P!==void 0)for(let Me=0;Me<P.length;Me++){const ct=P[Me],Ke=ct.range;ct.style!=="solid-outline"&&Ke.x<=de.sourceIndex&&de.sourceIndex<Ke.x+Ke.width&&Ke.y<=Le&&Le<Ke.y+Ke.height&&(Qe=qt(ct.color,Qe))}let dn=!1;if(D!==void 0){const Me=me+1,Ke=(lt?Me+Re-1:Math.min(Me+Re-1,r-fe))-Me;(Ke!==Re-1||qe+1<=_e)&&(dn=!0,e.save(),e.beginPath(),e.rect(qe+1,Me,Ze-1,Ke),e.clip()),Qe=Qe===void 0?mt.bgCell:qt(Qe,mt.bgCell)}const fn=de.sourceIndex===n.length-1,hn=Le===a-1;Qe!==void 0&&(e.fillStyle=Qe,We!==void 0&&(We.fillStyle=Qe),D!==void 0?e.fillRect(qe+1,me+1,Ze-(fn?2:1),Re-(hn?2:1)):e.fillRect(qe,me,Ze,Re)),Ce.style==="faded"&&(e.globalAlpha=.6);let kt;for(let Me=0;Me<C.length;Me++){const ct=C[Me];if(ct.item[0]===de.sourceIndex&&ct.item[1]===Le){kt=ct;break}}if(Ze>X&&!zt){const Me=mt.baseFontFull;Me!==G&&(e.font=Me,G=Me),We=gc(e,Ce,de.sourceIndex,Le,fn,hn,qe,me,Ze,Re,yt>0,mt,Qe??mt.bgCell,H,I,kt?.hoverAmount??0,F,w,Z,S,We,T,y,q,j)}return dn&&e.restore(),Ce.style==="faded"&&(e.globalAlpha=1),ce--,Tt&&(e.restore(),We?.deprep?.(ne),We=void 0,he(),G=be,e.font=be),ce<=0}),e.restore(),ce<=0}),ie}function ug(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f,x,E,M,b){M!==void 0||t[t.length-1]!==n[t.length-1]||Bn(t,a,s,l,i,(D,R,v,P,H)=>{if(D!==t[t.length-1])return;R+=D.width;const I=Math.max(R,P);I>r||(e.save(),e.beginPath(),e.rect(I,i+1,1e4,o-i-1),e.clip(),ki(H,v,o,c,u,f,x,(C,F,S,w)=>{if(!w&&E.length>0&&!E.some(j=>gi(R,C,1e4,S,j.x,j.y,j.width,j.height)))return;const k=g.hasIndex(F),T=p.hasIndex(F);e.beginPath();const y=h?.(F),q=y===void 0?b:$n(b,y);q.bgCell!==b.bgCell&&(e.fillStyle=q.bgCell,e.fillRect(R,C,1e4,S)),T&&(e.fillStyle=q.bgHeader,e.fillRect(R,C,1e4,S)),k&&(e.fillStyle=q.accentLight,e.fillRect(R,C,1e4,S))}),e.restore())})}function dg(e,t,n,r,o,i,s,l,a){let c=!1;for(const p of t)if(!p.sticky){c=s(p.sourceIndex);break}const u=a.horizontalBorderColor??a.borderColor,h=a.borderColor,g=c?zr(t):0;if(g!==0&&(e.beginPath(),e.moveTo(g+.5,0),e.lineTo(g+.5,r),e.strokeStyle=qt(h,a.bgCell),e.stroke()),o>0){const p=Fr(i,o,l);e.beginPath(),e.moveTo(0,r-p+.5),e.lineTo(n,r-p+.5),e.strokeStyle=qt(u,a.bgCell),e.stroke()}}function Nl(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f,x){const E=f?.filter(H=>H.style!=="no-outline");if(E===void 0||E.length===0)return;const M=zr(l),b=Fr(p,g,h),D=[a,0,l.length,p-g],R=[M,0,t,n-b],v=E.map(H=>{const I=H.range,C=H.style??"dashed";return ng(I,D,t,n,R).map(F=>{const S=F.rect,w=hs(S.x,S.y,t,n,u,c+u,r,o,i,s,p,a,g,l,h),k=S.width===1&&S.height===1?w:hs(S.x+S.width-1,S.y+S.height-1,t,n,u,c+u,r,o,i,s,p,a,g,l,h);return S.x+S.width>=l.length&&(k.width-=1),S.y+S.height>=p&&(k.height-=1),{color:H.color,style:C,clip:F.clip,rect:tg({x:w.x,y:w.y,width:k.x+k.width-w.x,height:k.y+k.height-w.y},t,n,8)}})}),P=()=>{e.lineWidth=1;let H=!1;for(const I of v)for(const C of I)if(C?.rect!==void 0&&gi(0,0,t,n,C.rect.x,C.rect.y,C.rect.width,C.rect.height)){const F=H,S=!eg(C.clip,C.rect);S&&(e.save(),e.rect(C.clip.x,C.clip.y,C.clip.width,C.clip.height),e.clip()),C.style==="dashed"&&!H?(e.setLineDash([5,3]),H=!0):(C.style==="solid"||C.style==="solid-outline")&&H&&(e.setLineDash([]),H=!1),e.strokeStyle=C.style==="solid-outline"?qt(qt(C.color,x.borderColor),x.bgCell):Hr(C.color,1),e.strokeRect(C.rect.x+.5,C.rect.y+.5,C.rect.width-1,C.rect.height-1),S&&(e.restore(),H=F)}H&&e.setLineDash([])};return P(),P}function $l(e,t,n,r,o){e.beginPath(),e.moveTo(t,n),e.lineTo(t,r),e.lineWidth=2,e.strokeStyle=o,e.stroke(),e.globalAlpha=1}function Ji(e,t,n,r,o,i,s,l,a,c,u,h,g,p,f,x,E){if(u.current===void 0)return;const M=u.current.range,b=u.current.cell,D=[M.x+M.width-1,M.y+M.height-1];if(b[1]>=E&&D[1]>=E||!s.some(y=>y.sourceIndex===b[0]||y.sourceIndex===D[0]))return;const[v,P]=u.current.cell,H=g(u.current.cell),I=H.span??[v,v],C=P>=E-p,F=p>0&&!C?Fr(E,p,h)-1:0,S=D[1];let w,k;if(Bn(s,r,o,i,c,(y,q,j,X,ce)=>{if(y.sticky&&v>y.sourceIndex)return;const Z=y.sourceIndex<I[0],G=y.sourceIndex>I[1],ne=y.sourceIndex===D[0];if(!(!ne&&(Z||G)))return ki(ce,j,n,E,h,p,f,(te,fe,ie)=>{if(fe!==P&&fe!==S)return;let Se=q,de=y.width;const $e=y.sourceIndex===l.length-1,je=fe===E-1;if(H.span!==void 0){const Ve=vc(H.span,q,te,y.width,ie,y,l),ve=y.sticky?Ve[0]:Ve[1];ve!==void 0&&(Se=ve.x,de=ve.width)}const _e=fe===S&&ne&&x,Ae=fe===P&&!Z&&!G&&w===void 0;return _e&&(k=()=>{X>Se&&!y.sticky&&!Ae&&(e.beginPath(),e.rect(X,0,t-X,n),e.clip()),e.beginPath(),e.rect(Se+de-4,te+ie-4,4,4),e.fillStyle=y.themeOverride?.accentColor??a.accentColor,e.fill()}),Ae&&(w=()=>{X>Se&&!y.sticky&&(e.beginPath(),e.rect(X,0,t-X,n),e.clip()),e.beginPath(),e.rect(Se+.5,te+.5,de-($e?1:0),ie-(je?1:0)),e.strokeStyle=y.themeOverride?.accentColor??a.accentColor,e.lineWidth=1,e.stroke()}),w!==void 0&&(x?k!==void 0:!0)}),w!==void 0&&(x?k!==void 0:!0)}),w===void 0&&k===void 0)return;const T=()=>{e.save(),e.beginPath(),e.rect(0,c,t,n-c-F),e.clip(),w?.(),k?.(),e.restore()};return T(),T}function fg(e,t,n,r,o,i,s,l,a,c){let u=0;return Bn(e,i,r,o,n,(h,g,p,f,x)=>(ki(x,p,t,s,l,a,c,(E,M,b,D)=>{D||(u=Math.max(M,u))}),!0)),u}function hg(e,t){if(t===void 0||e.width!==t.width||e.height!==t.height||e.theme!==t.theme||e.headerHeight!==t.headerHeight||e.rowHeight!==t.rowHeight||e.rows!==t.rows||e.freezeColumns!==t.freezeColumns||e.getRowThemeOverride!==t.getRowThemeOverride||e.isFocused!==t.isFocused||e.isResizing!==t.isResizing||e.verticalBorder!==t.verticalBorder||e.getCellContent!==t.getCellContent||e.highlightRegions!==t.highlightRegions||e.selection!==t.selection||e.dragAndDropState!==t.dragAndDropState||e.prelightCells!==t.prelightCells||e.touchMode!==t.touchMode||e.maxScaleFactor!==t.maxScaleFactor)return!1;if(e.mappedColumns!==t.mappedColumns){if(e.mappedColumns.length>100||e.mappedColumns.length!==t.mappedColumns.length)return!1;let n;for(let r=0;r<e.mappedColumns.length;r++){const o=e.mappedColumns[r],i=t.mappedColumns[r];if(Lr(o,i))continue;if(n!==void 0||o.width===i.width)return!1;const{width:s,...l}=o,{width:a,...c}=i;if(!Lr(l,c))return!1;n=r}return n===void 0?!0:n}return!0}function Wl(e,t){const{canvas:n,headerCanvas:r,width:o,height:i,cellXOffset:s,cellYOffset:l,translateX:a,translateY:c,mappedColumns:u,enableGroups:h,freezeColumns:g,dragAndDropState:p,theme:f,drawFocus:x,headerHeight:E,groupHeaderHeight:M,disabledRows:b,rowHeight:D,verticalBorder:R,overrideCursor:v,isResizing:P,selection:H,fillHandle:I,freezeTrailingRows:C,rows:F,getCellContent:S,getGroupDetails:w,getRowThemeOverride:k,isFocused:T,drawHeaderCallback:y,prelightCells:q,drawCellCallback:j,highlightRegions:X,resizeCol:ce,imageLoader:Z,lastBlitData:G,hoverValues:ne,hyperWrapping:te,hoverInfo:fe,spriteManager:ie,maxScaleFactor:Se,hasAppendRow:de,touchMode:$e,enqueue:je,renderStateProvider:_e,getCellRenderer:Ae,renderStrategy:Ve,bufferA:ve,bufferB:Oe,damage:Ge,minimumCellWidth:gt}=e;if(o===0||i===0)return;const he=Ve==="double-buffer",se=Math.min(Se,Math.ceil(window.devicePixelRatio??1)),De=Ve!=="direct"&&hg(e,t);(n.width!==o*se||n.height!==i*se)&&(n.width=o*se,n.height=i*se,n.style.width=o+"px",n.style.height=i+"px");const we=r,be=h?M+E:E,We=be+1;(we.width!==o*se||we.height!==We*se)&&(we.width=o*se,we.height=We*se,we.style.width=o+"px",we.style.height=We+"px"),he&&(ve.width!==o*se||ve.height!==i*se)&&(ve.width=o*se,ve.height=i*se,G.current!==void 0&&(G.current.aBufferScroll=void 0)),he&&(Oe.width!==o*se||Oe.height!==i*se)&&(Oe.width=o*se,Oe.height=i*se,G.current!==void 0&&(G.current.bBufferScroll=void 0));const me=G.current;if(De===!0&&s===me?.cellXOffset&&l===me?.cellYOffset&&a===me?.translateX&&c===me?.translateY)return;let Le=null;he&&(Le=n.getContext("2d",{alpha:!1}));const Re=we.getContext("2d",{alpha:!1});let lt;he?Ge!==void 0?lt=me?.lastBuffer==="b"?Oe:ve:lt=me?.lastBuffer==="b"?ve:Oe:lt=n;const Pe=lt.getContext("2d",{alpha:!1}),tt=he?lt===ve?Oe:ve:n;if(Re===null||Pe===null)return;const Ue=typeof D=="number"?()=>D:D;Re.save(),Pe.save(),Re.beginPath(),Pe.beginPath(),Re.textBaseline="middle",Pe.textBaseline="middle",se!==1&&(Re.scale(se,se),Pe.scale(se,se));const Ce=fs(u,s,o,p,a);let qe=[];const Ze=x&&H.current?.cell[1]===l&&c===0;let Tt=!1;if(X!==void 0){for(const Xe of X)if(Xe.style!=="no-outline"&&Xe.range.y===l&&c===0){Tt=!0;break}}const zt=()=>{ag(Re,Ce,h,fe,o,a,E,M,p,P,H,f,ie,ne,R,w,Ge,y,$e),zl(Re,Ce,l,a,c,o,i,void 0,void 0,M,be,Ue,k,R,C,F,f,!0),Re.beginPath(),Re.moveTo(0,We-.5),Re.lineTo(o,We-.5),Re.strokeStyle=qt(f.headerBottomBorderColor??f.horizontalBorderColor??f.borderColor,f.bgHeader),Re.stroke(),Tt&&Nl(Re,o,i,s,l,a,c,u,g,E,M,D,C,F,X,f),Ze&&Ji(Re,o,i,l,a,c,Ce,u,f,be,H,Ue,S,C,de,I,F)};if(Ge!==void 0){const Xe=Ce[Ce.length-1].sourceIndex+1,Qe=Ge.hasItemInRegion([{x:s,y:-2,width:Xe,height:2},{x:s,y:l,width:Xe,height:300},{x:0,y:l,width:g,height:300},{x:s,y:F-C,width:Xe,height:C,when:C>0}]),dn=fn=>{Ol(fn,Ce,u,i,be,a,c,l,F,Ue,S,w,k,b,T,x,C,de,qe,Ge,H,q,X,Z,ie,ne,fe,j,te,f,je,_e,Ae,v,gt);const hn=H.current;I&&x&&hn!==void 0&&Ge.has(nc(hn.range))&&Ji(fn,o,i,l,a,c,Ce,u,f,be,H,Ue,S,C,de,I,F)};Qe&&(dn(Pe),Le!==null&&(Le.save(),Le.scale(se,se),Le.textBaseline="middle",dn(Le),Le.restore()),Ge.hasHeader()&&(cg(Re,Ce,o,M,be,a,c,l,Ge),zt())),Pe.restore(),Re.restore();return}if((De!==!0||s!==me?.cellXOffset||a!==me?.translateX||Ze!==me?.mustDrawFocusOnHeader||Tt!==me?.mustDrawHighlightRingsOnHeader)&&zt(),De===!0){Ut(tt!==void 0&&me!==void 0);const{regions:Xe}=ig(Pe,tt,tt===ve?me.aBufferScroll:me.bBufferScroll,tt===ve?me.bBufferScroll:me.aBufferScroll,me,s,l,a,c,C,o,i,F,be,se,u,Ce,D,he);qe=Xe}else De!==!1&&(Ut(me!==void 0),qe=sg(me,s,l,a,c,o,i,be,Ce,De));dg(Pe,Ce,o,i,C,F,R,Ue,f);const Nt=Nl(Pe,o,i,s,l,a,c,u,g,E,M,D,C,F,X,f),un=x?Ji(Pe,o,i,l,a,c,Ce,u,f,be,H,Ue,S,C,de,I,F):void 0;if(Pe.fillStyle=f.bgCell,qe.length>0){Pe.beginPath();for(const Xe of qe)Pe.rect(Xe.x,Xe.y,Xe.width,Xe.height);Pe.clip(),Pe.fill(),Pe.beginPath()}else Pe.fillRect(0,0,o,i);const mt=Ol(Pe,Ce,u,i,be,a,c,l,F,Ue,S,w,k,b,T,x,C,de,qe,Ge,H,q,X,Z,ie,ne,fe,j,te,f,je,_e,Ae,v,gt);ug(Pe,Ce,u,o,i,be,a,c,l,F,Ue,k,H.rows,b,C,de,qe,Ge,f),zl(Pe,Ce,l,a,c,o,i,qe,mt,M,be,Ue,k,R,C,F,f),Nt?.(),un?.(),P&&Bn(Ce,0,a,0,be,(Xe,Qe)=>Xe.sourceIndex===ce?($l(Re,Qe+Xe.width,0,be+1,qt(f.resizeIndicatorColor??f.accentLight,f.bgHeader)),$l(Pe,Qe+Xe.width,be,i,qt(f.resizeIndicatorColor??f.accentLight,f.bgCell)),!0):!1),Le!==null&&(Le.fillStyle=f.bgCell,Le.fillRect(0,0,o,i),Le.drawImage(Pe.canvas,0,0));const bn=fg(Ce,i,be,a,c,l,F,Ue,C,de);Z?.setWindow({x:s,y:l,width:Ce.length,height:bn-l},g,Array.from({length:C},(Xe,Qe)=>F-1-Qe));const yt=me!==void 0&&(s!==me.cellXOffset||a!==me.translateX),Yt=me!==void 0&&(l!==me.cellYOffset||c!==me.translateY);G.current={cellXOffset:s,cellYOffset:l,translateX:a,translateY:c,mustDrawFocusOnHeader:Ze,mustDrawHighlightRingsOnHeader:Tt,lastBuffer:he?lt===ve?"a":"b":void 0,aBufferScroll:lt===ve?[yt,Yt]:me?.aBufferScroll,bBufferScroll:lt===Oe?[yt,Yt]:me?.bBufferScroll},Pe.restore(),Re.restore()}function ki(e,t,n,r,o,i,s,l){let a=t,c=e;const u=r-i;for(;a<n&&c<u;){const h=o(c);if(l(a,c,h,!1,s&&c===r-1)===!0)break;a+=h,c++}a=n;for(let h=0;h<i;h++){c=r-1-h;const g=o(c);a-=g,l(a,c,g,!0,s&&c===r-1)}}function Bn(e,t,n,r,o,i){let s=0,l=0;const a=o+r;for(const c of e){const u=c.sticky?l:s+n;if(i(c,u,a,l,t)===!0)break;s+=c.width,l+=c.sticky?c.width:0}}function yc(e,t,n,r,o){let i=0,s=0;for(let l=0;l<e.length;l++){const a=e[l];let c=l+1,u=a.width;for(a.sticky&&(s+=u);c<e.length&&So(e[c].group,a.group)&&e[c].sticky===e[l].sticky;){const x=e[c];u+=x.width,c++,l++,x.sticky&&(s+=x.width)}const h=a.sticky?0:n,g=i+h,p=a.sticky?0:Math.max(0,s-g),f=Math.min(u-p,t-(g+p));o([a.sourceIndex,e[c-1].sourceIndex],a.group??"",g+p,0,f,r),i+=u}}const gg=80;function mg(e){const t=e-1;return t*t*t+1}class pg{callback;constructor(t){this.callback=t}currentHoveredItem=void 0;leavingItems=[];lastAnimationTime;addToLeavingItems=t=>{this.leavingItems.some(r=>yo(r.item,t.item))||this.leavingItems.push(t)};removeFromLeavingItems=t=>{const n=this.leavingItems.find(r=>yo(r.item,t));return this.leavingItems=this.leavingItems.filter(r=>r!==n),n?.hoverAmount??0};cleanUpLeavingElements=()=>{this.leavingItems=this.leavingItems.filter(t=>t.hoverAmount>0)};shouldStep=()=>{const t=this.leavingItems.length>0,n=this.currentHoveredItem!==void 0&&this.currentHoveredItem.hoverAmount<1;return t||n};getAnimatingItems=()=>this.currentHoveredItem!==void 0?[...this.leavingItems,this.currentHoveredItem]:this.leavingItems.map(t=>({...t,hoverAmount:mg(t.hoverAmount)}));step=t=>{if(this.lastAnimationTime===void 0)this.lastAnimationTime=t;else{const r=(t-this.lastAnimationTime)/gg;for(const i of this.leavingItems)i.hoverAmount=an(i.hoverAmount-r,0,1);this.currentHoveredItem!==void 0&&(this.currentHoveredItem.hoverAmount=an(this.currentHoveredItem.hoverAmount+r,0,1));const o=this.getAnimatingItems();this.callback(o),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=t,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0};setHovered=t=>{if(!yo(this.currentHoveredItem?.item,t)){if(this.currentHoveredItem!==void 0&&this.addToLeavingItems(this.currentHoveredItem),t!==void 0){const n=this.removeFromLeavingItems(t);this.currentHoveredItem={item:t,hoverAmount:n}}else this.currentHoveredItem=void 0;this.lastAnimationTime===void 0&&window.requestAnimationFrame(this.step)}}}class wg{fn;val;constructor(t){this.fn=t}get value(){return this.val??(this.val=this.fn())}}function zs(e){return new wg(e)}const vg=zs(()=>window.navigator.userAgent.includes("Firefox")),mi=zs(()=>window.navigator.userAgent.includes("Mac OS")&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")),pi=zs(()=>window.navigator.platform.toLowerCase().startsWith("mac"));function yg(e){const t=d.useRef([]),n=d.useRef(0),r=d.useRef(e);r.current=e;const o=d.useCallback(()=>{const i=()=>window.requestAnimationFrame(s),s=()=>{const l=t.current.map(Ls);t.current=[],r.current(new xo(l)),t.current.length>0?n.current++:n.current=0};window.requestAnimationFrame(n.current>600?i:s)},[]);return d.useCallback(i=>{t.current.length===0&&o();const s=cn(i[0],i[1]);t.current.includes(s)||t.current.push(s)},[o])}const Fn="header",Xt="group-header",wi="out-of-bounds";var Ar;(function(e){e[e.Start=-2]="Start",e[e.StartPadding=-1]="StartPadding",e[e.Center=0]="Center",e[e.EndPadding=1]="EndPadding",e[e.End=2]="End"})(Ar||(Ar={}));function bc(e,t){return e===t?!0:e?.kind==="out-of-bounds"?e?.kind===t?.kind&&e?.location[0]===t?.location[0]&&e?.location[1]===t?.location[1]&&e?.region[0]===t?.region[0]&&e?.region[1]===t?.region[1]:e?.kind===t?.kind&&e?.location[0]===t?.location[0]&&e?.location[1]===t?.location[1]}const Bl=6,bg=(e,t)=>e.kind===oe.Custom?e.copyData:t?.(e)?.getAccessibilityString(e)??"",xg=(e,t)=>{const{width:n,height:r,accessibilityHeight:o,columns:i,cellXOffset:s,cellYOffset:l,headerHeight:a,fillHandle:c=!1,groupHeaderHeight:u,rowHeight:h,rows:g,getCellContent:p,getRowThemeOverride:f,onHeaderMenuClick:x,enableGroups:E,isFilling:M,onCanvasFocused:b,onCanvasBlur:D,isFocused:R,selection:v,freezeColumns:P,onContextMenu:H,freezeTrailingRows:I,fixedShadowX:C=!0,fixedShadowY:F=!0,drawFocusRing:S=!0,onMouseDown:w,onMouseUp:k,onMouseMoveRaw:T,onMouseMove:y,onItemHovered:q,dragAndDropState:j,firstColAccessible:X,onKeyDown:ce,onKeyUp:Z,highlightRegions:G,canvasRef:ne,onDragStart:te,onDragEnd:fe,eventTargetRef:ie,isResizing:Se,resizeColumn:de,isDragging:$e,isDraggable:je=!1,allowResize:_e,disabledRows:Ae,hasAppendRow:Ve,getGroupDetails:ve,theme:Oe,prelightCells:Ge,headerIcons:gt,verticalBorder:he,drawCell:se,drawHeader:De,onCellFocused:we,onDragOverCell:be,onDrop:We,onDragLeave:me,imageWindowLoader:Le,smoothScrollX:Re=!1,smoothScrollY:lt=!1,experimental:Pe,getCellRenderer:tt}=e,Ue=e.translateX??0,Ce=e.translateY??0,qe=Math.max(P,Math.min(i.length-1,s)),Ze=d.useRef(null),Tt=Le,zt=d.useRef(),[Nt,un]=d.useState(!1),mt=d.useRef([]),bn=d.useRef(),[yt,Yt]=d.useState(),[Xe,Qe]=d.useState(),dn=d.useRef(null),[fn,hn]=d.useState(),[kt,Me]=d.useState(!1),ct=d.useRef(kt);ct.current=kt;const Ke=d.useMemo(()=>new Qh(gt,()=>{sr.current=void 0,en.current()}),[gt]),dt=E?u+a:a,St=d.useRef(-1),gn=(Pe?.enableFirefoxRescaling??!1)&&vg.value,Or=(Pe?.enableSafariRescaling??!1)&&mi.value;d.useLayoutEffect(()=>{window.devicePixelRatio===1||!gn&&!Or||(St.current!==-1&&un(!0),window.clearTimeout(St.current),St.current=window.setTimeout(()=>{un(!1),St.current=-1},200))},[l,qe,Ue,Ce,gn,Or]);const ft=nh(i,P),jn=C?zr(ft,j):0,ut=d.useCallback((L,Y,re)=>{const ae=L.getBoundingClientRect();if(Y>=ft.length||re>=g)return;const J=ae.width/n,le=hs(Y,re,n,r,u,dt,qe,l,Ue,Ce,g,P,I,ft,h);return J!==1&&(le.x*=J,le.y*=J,le.width*=J,le.height*=J),le.x+=ae.x,le.y+=ae.y,le},[n,r,u,dt,qe,l,Ue,Ce,g,P,I,ft,h]),bt=d.useCallback((L,Y,re,ae)=>{const J=L.getBoundingClientRect(),le=J.width/n,ye=(Y-J.left)/le,Q=(re-J.top)/le,ge=5,Be=fs(ft,qe,n,void 0,Ue);let at=0,ot=0;ae instanceof MouseEvent&&(at=ae.button,ot=ae.buttons);const nt=sh(ye,Be,Ue),ze=lh(Q,r,E,a,u,g,h,l,Ce,I),pe=ae?.shiftKey===!0,Pt=ae?.ctrlKey===!0,it=ae?.metaKey===!0,pt=ae!==void 0&&!(ae instanceof MouseEvent)||ae?.pointerType==="touch",pr=[ye<0?-1:n<ye?1:0,Q<dt?-1:r<Q?1:0];let nn;if(nt===-1||Q<0||ye<0||ze===void 0||ye>n||Q>r){const Ne=ye>n?1:ye<0?-1:0,rn=Q>r?1:Q<0?-1:0;let At=Ne*2,_n=rn*2;Ne===0&&(At=nt===-1?Ar.EndPadding:Ar.Center),rn===0&&(_n=ze===void 0?Ar.EndPadding:Ar.Center);let on=!1;if(nt===-1&&ze===-1){const mn=ut(L,ft.length-1,-1);Ut(mn!==void 0),on=Y<mn.x+mn.width+ge}const jr=ye>n&&ye<n+as()||Q>r&&Q<r+as();nn={kind:wi,location:[nt!==-1?nt:ye<0?0:ft.length-1,ze??g-1],region:[At,_n],shiftKey:pe,ctrlKey:Pt,metaKey:it,isEdge:on,isTouch:pt,button:at,buttons:ot,scrollEdge:pr,isMaybeScrollbar:jr}}else if(ze<=-1){let Ne=ut(L,nt,ze);Ut(Ne!==void 0);let rn=Ne!==void 0&&Ne.x+Ne.width-Y<=ge;const At=nt-1;Y-Ne.x<=ge&&At>=0?(rn=!0,Ne=ut(L,At,ze),Ut(Ne!==void 0),nn={kind:E&&ze===-2?Xt:Fn,location:[At,ze],bounds:Ne,group:ft[At].group??"",isEdge:rn,shiftKey:pe,ctrlKey:Pt,metaKey:it,isTouch:pt,localEventX:Y-Ne.x,localEventY:re-Ne.y,button:at,buttons:ot,scrollEdge:pr}):nn={kind:E&&ze===-2?Xt:Fn,group:ft[nt].group??"",location:[nt,ze],bounds:Ne,isEdge:rn,shiftKey:pe,ctrlKey:Pt,metaKey:it,isTouch:pt,localEventX:Y-Ne.x,localEventY:re-Ne.y,button:at,buttons:ot,scrollEdge:pr}}else{const Ne=ut(L,nt,ze);Ut(Ne!==void 0);const rn=Ne!==void 0&&Ne.x+Ne.width-Y<ge;let At=!1;if(c&&v.current!==void 0){const _n=nc(v.current.range),on=ut(L,_n[0],_n[1]);if(on!==void 0){const jr=on.x+on.width-2,mn=on.y+on.height-2;At=Math.abs(jr-Y)<Bl&&Math.abs(mn-re)<Bl}}nn={kind:"cell",location:[nt,ze],bounds:Ne,isEdge:rn,shiftKey:pe,ctrlKey:Pt,isFillHandle:At,metaKey:it,isTouch:pt,localEventX:Y-Ne.x,localEventY:re-Ne.y,button:at,buttons:ot,scrollEdge:pr}}return nn},[n,ft,qe,Ue,r,E,a,u,g,h,l,Ce,I,ut,c,v,dt]),[xn]=yt??[],Po=d.useRef(()=>{}),Jt=d.useRef(yt);Jt.current=yt;const[Vn,Xn]=d.useMemo(()=>{const L=document.createElement("canvas"),Y=document.createElement("canvas");return L.style.display="none",L.style.opacity="0",L.style.position="fixed",Y.style.display="none",Y.style.opacity="0",Y.style.position="fixed",[L,Y]},[]);d.useLayoutEffect(()=>(document.documentElement.append(Vn),document.documentElement.append(Xn),()=>{Vn.remove(),Xn.remove()}),[Vn,Xn]);const ir=d.useMemo(()=>new wh,[]),_o=gn&&Nt?1:Or&&Nt?2:5,Ao=Pe?.disableMinimumCellWidth===!0?1:10,sr=d.useRef(),lr=d.useCallback(()=>{const L=Ze.current,Y=dn.current;if(L===null||Y===null)return;let re=!1;const ae=ye=>{re=!0,hn(ye)},J=sr.current,le={canvas:L,bufferA:Vn,bufferB:Xn,headerCanvas:Y,width:n,height:r,cellXOffset:qe,cellYOffset:l,translateX:Math.round(Ue),translateY:Math.round(Ce),mappedColumns:ft,enableGroups:E,freezeColumns:P,dragAndDropState:j,theme:Oe,headerHeight:a,groupHeaderHeight:u,disabledRows:Ae??He.empty(),rowHeight:h,verticalBorder:he,isResizing:Se,resizeCol:de,isFocused:R,selection:v,fillHandle:c,drawCellCallback:se,hasAppendRow:Ve,overrideCursor:ae,maxScaleFactor:_o,freezeTrailingRows:I,rows:g,drawFocus:S,getCellContent:p,getGroupDetails:ve??(ye=>({name:ye})),getRowThemeOverride:f,drawHeaderCallback:De,prelightCells:Ge,highlightRegions:G,imageLoader:Tt,lastBlitData:bn,damage:zt.current,hoverValues:mt.current,hoverInfo:Jt.current,spriteManager:Ke,scrolling:Nt,hyperWrapping:Pe?.hyperWrapping??!1,touchMode:kt,enqueue:Po.current,renderStateProvider:ir,renderStrategy:Pe?.renderStrategy??(mi.value?"double-buffer":"single-buffer"),getCellRenderer:tt,minimumCellWidth:Ao};le.damage===void 0?(sr.current=le,Wl(le,J)):Wl(le,void 0),!re&&(le.damage===void 0||le.damage.has(Jt?.current?.[0]))&&hn(void 0)},[Vn,Xn,n,r,qe,l,Ue,Ce,ft,E,P,j,Oe,a,u,Ae,h,he,Se,Ve,de,R,v,c,I,g,S,_o,p,ve,f,se,De,Ge,G,Tt,Ke,Nt,Pe?.hyperWrapping,Pe?.renderStrategy,kt,ir,tt,Ao]),en=d.useRef(lr);d.useLayoutEffect(()=>{lr(),en.current=lr},[lr]),d.useLayoutEffect(()=>{(async()=>{document?.fonts?.ready!==void 0&&(await document.fonts.ready,sr.current=void 0,en.current())})()},[]);const En=d.useCallback(L=>{zt.current=L,en.current(),zt.current=void 0},[]),Si=yg(En);Po.current=Si;const Lo=d.useCallback(L=>{En(new xo(L.map(Y=>Y.cell)))},[En]);Tt.setCallback(En);const[Ri,Mi]=d.useState(!1),[Un,Tn]=xn??[],Ei=Un!==void 0&&Tn===-1,Ti=Un!==void 0&&Tn===-2;let Ho=!1,Nr=!1,ar=fn;if(ar===void 0&&Un!==void 0&&Tn!==void 0&&Tn>-1&&Tn<g){const L=p([Un,Tn],!0);Ho=L.kind===Qt.NewRow||L.kind===Qt.Marker&&L.markerKind!=="number",Nr=L.kind===oe.Boolean&&ls(L),ar=L.cursor}const zo=$e?"grabbing":(Xe??!1)||Se?"col-resize":Ri||M?"crosshair":ar!==void 0?ar:Ei||Ho||Nr||Ti?"pointer":"default",qn=d.useMemo(()=>({contain:"strict",display:"block",cursor:zo}),[zo]),Cn=d.useRef("default"),In=ie?.current;In!=null&&Cn.current!==qn.cursor&&(In.style.cursor=Cn.current=qn.cursor);const Dn=d.useCallback((L,Y,re,ae)=>{if(ve===void 0)return;const J=ve(L);if(J.actions!==void 0){const le=mc(Y,J.actions);for(const[ye,Q]of le.entries())if(Ci(Q,re+Y.x,ae+Q.y))return J.actions[ye]}},[ve]),Kn=d.useCallback((L,Y,re,ae)=>{const J=i[Y];if(!$e&&!Se&&J.hasMenu===!0&&!(Xe??!1)){const le=ut(L,Y,-1);Ut(le!==void 0);const ye=pc(le.x,le.y,le.width,le.height,Ss(J.title)==="rtl");if(re>ye.x&&re<ye.x+ye.width&&ae>ye.y&&ae<ye.y+ye.height)return le}},[i,ut,Xe,$e,Se]),cr=d.useRef(0),Yn=d.useRef(),It=d.useRef(!1),ur=d.useCallback(L=>{const Y=Ze.current,re=ie?.current;if(Y===null||L.target!==Y&&L.target!==re)return;It.current=!0;let ae,J;if(L instanceof MouseEvent?(ae=L.clientX,J=L.clientY):(ae=L.touches[0].clientX,J=L.touches[0].clientY),L.target===re&&re!==null){const ye=re.getBoundingClientRect();if(ae>ye.right||J>ye.bottom)return}const le=bt(Y,ae,J,L);Yn.current=le.location,le.isTouch&&(cr.current=Date.now()),ct.current!==le.isTouch&&Me(le.isTouch),!(le.kind===Fn&&Kn(Y,le.location[0],ae,J)!==void 0)&&(le.kind===Xt&&Dn(le.group,le.bounds,le.localEventX,le.localEventY)!==void 0||(w?.(le),!le.isTouch&&je!==!0&&je!==le.kind&&le.button<3&&le.button!==1&&L.preventDefault()))},[ie,je,bt,Dn,Kn,w]);Et("touchstart",ur,window,!1),Et("mousedown",ur,window,!1);const $r=d.useRef(0),Wr=d.useCallback(L=>{const Y=$r.current;$r.current=Date.now();const re=Ze.current;if(It.current=!1,k===void 0||re===null)return;const ae=ie?.current,J=L.target!==re&&L.target!==ae;let le,ye,Q=!0;if(L instanceof MouseEvent){if(le=L.clientX,ye=L.clientY,Q=L.button<3,L.pointerType==="touch")return}else le=L.changedTouches[0].clientX,ye=L.changedTouches[0].clientY;let ge=bt(re,le,ye,L);ge.isTouch&&cr.current!==0&&Date.now()-cr.current>500&&(ge={...ge,isLongTouch:!0}),Y!==0&&Date.now()-Y<(ge.isTouch?1e3:500)&&(ge={...ge,isDoubleClick:!0}),ct.current!==ge.isTouch&&Me(ge.isTouch),!J&&L.cancelable&&Q&&L.preventDefault();const[Be]=ge.location,at=Kn(re,Be,le,ye);if(ge.kind===Fn&&at!==void 0){(ge.button!==0||Yn.current?.[0]!==Be||Yn.current?.[1]!==-1)&&k(ge,!0);return}else if(ge.kind===Xt){const ot=Dn(ge.group,ge.bounds,ge.localEventX,ge.localEventY);if(ot!==void 0){ge.button===0&&ot.onClick(ge);return}}k(ge,J)},[k,ie,bt,Kn,Dn]);Et("mouseup",Wr,window,!1),Et("touchend",Wr,window,!1);const Ii=d.useCallback(L=>{const Y=Ze.current;if(Y===null)return;const re=ie?.current,ae=L.target!==Y&&L.target!==re;let J,le,ye=!0;L instanceof MouseEvent?(J=L.clientX,le=L.clientY,ye=L.button<3):(J=L.changedTouches[0].clientX,le=L.changedTouches[0].clientY);const Q=bt(Y,J,le,L);ct.current!==Q.isTouch&&Me(Q.isTouch),!ae&&L.cancelable&&ye&&L.preventDefault();const[ge]=Q.location,Be=Kn(Y,ge,J,le);if(Q.kind===Fn&&Be!==void 0)Q.button===0&&Yn.current?.[0]===ge&&Yn.current?.[1]===-1&&x?.(ge,Be);else if(Q.kind===Xt){const at=Dn(Q.group,Q.bounds,Q.localEventX,Q.localEventY);at!==void 0&&Q.button===0&&at.onClick(Q)}},[ie,bt,Kn,x,Dn]);Et("click",Ii,window,!1);const Di=d.useCallback(L=>{const Y=Ze.current,re=ie?.current;if(Y===null||L.target!==Y&&L.target!==re||H===void 0)return;const ae=bt(Y,L.clientX,L.clientY,L);H(ae,()=>{L.cancelable&&L.preventDefault()})},[ie,bt,H]);Et("contextmenu",Di,ie?.current??null,!1);const tn=d.useCallback(L=>{zt.current=new xo(L.map(Y=>Y.item)),mt.current=L,en.current(),zt.current=void 0},[]),kn=d.useMemo(()=>new pg(tn),[tn]),$t=d.useRef(kn);$t.current=kn,d.useLayoutEffect(()=>{const L=$t.current;if(xn===void 0||xn[1]<0){L.setHovered(xn);return}const Y=p(xn,!0),re=tt(Y);L.setHovered(re===void 0&&Y.kind===oe.Custom||re?.needsHover===!0?xn:void 0)},[p,tt,xn]);const $=d.useRef(),Rt=d.useCallback(L=>{const Y=Ze.current;if(Y===null)return;const re=ie?.current,ae=L.target!==Y&&L.target!==re,J=bt(Y,L.clientX,L.clientY,L);if(J.kind!=="out-of-bounds"&&ae&&!It.current&&!J.isTouch)return;const le=(Q,ge)=>{Yt(Be=>Be===Q||Be?.[0][0]===Q?.[0][0]&&Be?.[0][1]===Q?.[0][1]&&(Be?.[1][0]===Q?.[1][0]&&Be?.[1][1]===Q?.[1][1]||!ge)?Be:Q)};if(!bc(J,$.current))q?.(J),le(J.kind===wi?void 0:[J.location,[J.localEventX,J.localEventY]],!0),$.current=J;else if(J.kind==="cell"||J.kind===Fn||J.kind===Xt){let Q=!1,ge=!0;if(J.kind==="cell"){const at=p(J.location);ge=tt(at)?.needsHoverPosition??at.kind===oe.Custom,Q=ge}else J.kind===Xt&&(Q=!0);const Be=[J.location,[J.localEventX,J.localEventY]];le(Be,ge),Jt.current=Be,Q&&En(new xo([J.location]))}const ye=J.location[0]>=(X?0:1);Qe(J.kind===Fn&&J.isEdge&&ye&&_e===!0),Mi(J.kind==="cell"&&J.isFillHandle),T?.(L),y(J)},[ie,bt,X,_e,T,y,q,p,tt,En]);Et("mousemove",Rt,window,!0);const Wt=d.useCallback(L=>{const Y=Ze.current;if(Y===null)return;let re,ae;v.current!==void 0&&(re=ut(Y,v.current.cell[0],v.current.cell[1]),ae=v.current.cell),ce?.({bounds:re,stopPropagation:()=>L.stopPropagation(),preventDefault:()=>L.preventDefault(),cancel:()=>{},ctrlKey:L.ctrlKey,metaKey:L.metaKey,shiftKey:L.shiftKey,altKey:L.altKey,key:L.key,keyCode:L.keyCode,rawEvent:L,location:ae})},[ce,v,ut]),Pi=d.useCallback(L=>{const Y=Ze.current;if(Y===null)return;let re,ae;v.current!==void 0&&(re=ut(Y,v.current.cell[0],v.current.cell[1]),ae=v.current.cell),Z?.({bounds:re,stopPropagation:()=>L.stopPropagation(),preventDefault:()=>L.preventDefault(),cancel:()=>{},ctrlKey:L.ctrlKey,metaKey:L.metaKey,shiftKey:L.shiftKey,altKey:L.altKey,key:L.key,keyCode:L.keyCode,rawEvent:L,location:ae})},[Z,v,ut]),Fo=d.useCallback(L=>{Ze.current=L,ne!==void 0&&(ne.current=L)},[ne]),_i=d.useCallback(L=>{const Y=Ze.current;if(Y===null||je===!1||Se){L.preventDefault();return}let re,ae;const J=bt(Y,L.clientX,L.clientY);if(je!==!0&&J.kind!==je){L.preventDefault();return}const le=(ot,nt)=>{re=ot,ae=nt};let ye,Q,ge;const Be=(ot,nt,ze)=>{ye=ot,Q=nt,ge=ze};let at=!1;if(te?.({...J,setData:le,setDragImage:Be,preventDefault:()=>at=!0,defaultPrevented:()=>at}),!at&&re!==void 0&&ae!==void 0&&L.dataTransfer!==null)if(L.dataTransfer.setData(re,ae),L.dataTransfer.effectAllowed="copyLink",ye!==void 0&&Q!==void 0&&ge!==void 0)L.dataTransfer.setDragImage(ye,Q,ge);else{const[ot,nt]=J.location;if(nt!==void 0){const ze=document.createElement("canvas"),pe=ut(Y,ot,nt);Ut(pe!==void 0);const Pt=Math.ceil(window.devicePixelRatio??1);ze.width=pe.width*Pt,ze.height=pe.height*Pt;const it=ze.getContext("2d");it!==null&&(it.scale(Pt,Pt),it.textBaseline="middle",nt===-1?(it.font=Oe.headerFontFull,it.fillStyle=Oe.bgHeader,it.fillRect(0,0,ze.width,ze.height),wc(it,0,0,pe.width,pe.height,ft[ot],!1,Oe,!1,!1,0,Ke,De,!1)):(it.font=Oe.baseFontFull,it.fillStyle=Oe.bgCell,it.fillRect(0,0,ze.width,ze.height),gc(it,p([ot,nt]),0,nt,!1,!1,0,0,pe.width,pe.height,!1,Oe,Oe.bgCell,Tt,Ke,1,void 0,!1,0,void 0,void 0,void 0,ir,tt,()=>{}))),ze.style.left="-100%",ze.style.position="absolute",ze.style.width=`${pe.width}px`,ze.style.height=`${pe.height}px`,document.body.append(ze),L.dataTransfer.setDragImage(ze,pe.width/2,pe.height/2),window.setTimeout(()=>{ze.remove()},0)}}else L.preventDefault()},[je,Se,bt,te,ut,Oe,ft,Ke,De,p,Tt,ir,tt]);Et("dragstart",_i,ie?.current??null,!1,!1);const Br=d.useRef(),Ns=d.useCallback(L=>{const Y=Ze.current;if(We!==void 0&&L.preventDefault(),Y===null||be===void 0)return;const re=bt(Y,L.clientX,L.clientY),[ae,J]=re.location,le=ae-(X?0:1),[ye,Q]=Br.current??[];(ye!==le||Q!==J)&&(Br.current=[le,J],be([le,J],L.dataTransfer))},[X,bt,be,We]);Et("dragover",Ns,ie?.current??null,!1,!1);const V=d.useCallback(()=>{Br.current=void 0,fe?.()},[fe]);Et("dragend",V,ie?.current??null,!1,!1);const Gt=d.useCallback(L=>{const Y=Ze.current;if(Y===null||We===void 0)return;L.preventDefault();const re=bt(Y,L.clientX,L.clientY),[ae,J]=re.location,le=ae-(X?0:1);We([le,J],L.dataTransfer)},[X,bt,We]);Et("drop",Gt,ie?.current??null,!1,!1);const xt=d.useCallback(()=>{me?.()},[me]);Et("dragleave",xt,ie?.current??null,!1,!1);const Oo=d.useRef(v);Oo.current=v;const dr=d.useRef(null),Pn=d.useCallback(L=>{Ze.current===null||!Ze.current.contains(document.activeElement)||(L===null&&Oo.current.current!==void 0?ne?.current?.focus({preventScroll:!0}):L!==null&&L.focus({preventScroll:!0}),dr.current=L)},[ne]);d.useImperativeHandle(t,()=>({focus:()=>{const L=dr.current;L===null||!document.contains(L)?ne?.current?.focus({preventScroll:!0}):L.focus({preventScroll:!0})},getBounds:(L,Y)=>{if(!(ne===void 0||ne.current===null))return ut(ne.current,L??0,Y??-1)},damage:Lo}),[ne,Lo,ut]);const Dt=d.useRef(),fr=nf(()=>{if(n<50||Pe?.disableAccessibilityTree===!0)return null;let L=fs(ft,qe,n,j,Ue);const Y=X?0:-1;!X&&L[0]?.sourceIndex===0&&(L=L.slice(1));const[re,ae]=v.current?.cell??[],J=v.current?.range,le=L.map(Q=>Q.sourceIndex),ye=tr(l,Math.min(g,l+o));return re!==void 0&&ae!==void 0&&!(le.includes(re)&&ye.includes(ae))&&Pn(null),d.createElement("table",{key:"access-tree",role:"grid","aria-rowcount":g+1,"aria-multiselectable":"true","aria-colcount":ft.length+Y},d.createElement("thead",{role:"rowgroup"},d.createElement("tr",{role:"row","aria-rowindex":1},L.map(Q=>d.createElement("th",{role:"columnheader","aria-selected":v.columns.hasIndex(Q.sourceIndex),"aria-colindex":Q.sourceIndex+1+Y,tabIndex:-1,onFocus:ge=>{if(ge.target!==dr.current)return we?.([Q.sourceIndex,-1])},key:Q.sourceIndex},Q.title)))),d.createElement("tbody",{role:"rowgroup"},ye.map(Q=>d.createElement("tr",{role:"row","aria-selected":v.rows.hasIndex(Q),key:Q,"aria-rowindex":Q+2},L.map(ge=>{const Be=ge.sourceIndex,at=cn(Be,Q),ot=re===Be&&ae===Q,nt=J!==void 0&&Be>=J.x&&Be<J.x+J.width&&Q>=J.y&&Q<J.y+J.height,ze=`glide-cell-${Be}-${Q}`,pe=[Be,Q],Pt=p(pe,!0);return d.createElement("td",{key:at,role:"gridcell","aria-colindex":Be+1+Y,"aria-selected":nt,"aria-readonly":Pr(Pt)||!uo(Pt),id:ze,"data-testid":ze,onClick:()=>{const it=ne?.current;if(it!=null)return ce?.({bounds:ut(it,Be,Q),cancel:()=>{},preventDefault:()=>{},stopPropagation:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:pe})},onFocusCapture:it=>{if(!(it.target===dr.current||Dt.current?.[0]===Be&&Dt.current?.[1]===Q))return Dt.current=pe,we?.(pe)},ref:ot?Pn:void 0,tabIndex:-1},bg(Pt,tt))})))))},[n,ft,qe,j,Ue,g,l,o,v,Pn,p,ne,ce,ut,we],200),hr=P===0||!C?0:qe>P?1:an(-Ue/100,0,1),Ai=-l*32+Ce,gr=F?an(-Ai/100,0,1):0,Li=d.useMemo(()=>{if(!hr&&!gr)return null;const L={position:"absolute",top:0,left:jn,width:n-jn,height:r,opacity:hr,pointerEvents:"none",transition:Re?void 0:"opacity 0.2s",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)"},Y={position:"absolute",top:dt,left:0,width:n,height:r,opacity:gr,pointerEvents:"none",transition:lt?void 0:"opacity 0.2s",boxShadow:"inset 0 13px 10px -13px rgba(0, 0, 0, 0.2)"};return d.createElement(d.Fragment,null,hr>0&&d.createElement("div",{id:"shadow-x",style:L}),gr>0&&d.createElement("div",{id:"shadow-y",style:Y}))},[hr,gr,jn,n,Re,dt,r,lt]),mr=d.useMemo(()=>({position:"absolute",top:0,left:0}),[]);return d.createElement(d.Fragment,null,d.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:0,onKeyDown:Wt,onKeyUp:Pi,onFocus:b,onBlur:D,ref:Fo,style:qn},fr),d.createElement("canvas",{ref:dn,style:mr}),Li)},Cg=d.memo(d.forwardRef(xg));function co(e,t,n,r){return an(Math.round(t-(e.growOffset??0)),Math.ceil(n),Math.floor(r))}const kg=e=>{const[t,n]=d.useState(),[r,o]=d.useState(),[i,s]=d.useState(),[l,a]=d.useState(),[c,u]=d.useState(!1),[h,g]=d.useState(),[p,f]=d.useState(),[x,E]=d.useState(),[M,b]=d.useState(!1),[D,R]=d.useState(),{onHeaderMenuClick:v,getCellContent:P,onColumnMoved:H,onColumnResize:I,onColumnResizeStart:C,onColumnResizeEnd:F,gridRef:S,maxColumnWidth:w,minColumnWidth:k,onRowMoved:T,lockColumns:y,onColumnProposeMove:q,onMouseDown:j,onMouseUp:X,onItemHovered:ce,onDragStart:Z,canvasRef:G}=e,ne=(I??F??C)!==void 0,{columns:te,selection:fe}=e,ie=fe.columns,Se=d.useCallback(he=>{const[se,De]=he.location;i!==void 0&&l!==se&&se>=y?(u(!0),a(se)):p!==void 0&&De!==void 0?(b(!0),E(Math.max(0,De))):ce?.(he)},[i,p,l,ce,y]),de=H!==void 0,$e=d.useCallback(he=>{if(he.button===0){const[se,De]=he.location;if(he.kind==="out-of-bounds"&&he.isEdge&&ne){const we=S?.current?.getBounds(te.length-1,-1);we!==void 0&&(n(we.x),o(te.length-1))}else if(he.kind==="header"&&se>=y){const we=G?.current;if(he.isEdge&&ne&&we){n(he.bounds.x),o(se);const We=we.getBoundingClientRect().width/we.offsetWidth,me=he.bounds.width/We;C?.(te[se],me,se,me+(te[se].growOffset??0))}else he.kind==="header"&&de&&(g(he.bounds.x),s(se))}else he.kind==="cell"&&y>0&&se===0&&De!==void 0&&T!==void 0&&(R(he.bounds.y),f(De))}j?.(he)},[j,ne,y,T,S,te,de,C,G]),je=d.useCallback((he,se)=>{c||M||v?.(he,se)},[c,M,v]),_e=d.useRef(-1),Ae=d.useCallback(()=>{_e.current=-1,f(void 0),E(void 0),R(void 0),b(!1),s(void 0),a(void 0),g(void 0),u(!1),o(void 0),n(void 0)},[]),Ve=d.useCallback((he,se)=>{if(he.button===0){if(r!==void 0){if(ie?.hasIndex(r)===!0)for(const we of ie){if(we===r)continue;const be=te[we],We=co(be,_e.current,k,w);I?.(be,We,we,We+(be.growOffset??0))}const De=co(te[r],_e.current,k,w);if(F?.(te[r],De,r,De+(te[r].growOffset??0)),ie.hasIndex(r))for(const we of ie){if(we===r)continue;const be=te[we],We=co(be,_e.current,k,w);F?.(be,We,we,We+(be.growOffset??0))}}Ae(),i!==void 0&&l!==void 0&&H?.(i,l),p!==void 0&&x!==void 0&&T?.(p,x)}X?.(he,se)},[X,r,i,l,p,x,ie,F,te,k,w,I,H,T,Ae]),ve=d.useMemo(()=>{if(!(i===void 0||l===void 0)&&i!==l&&q?.(i,l)!==!1)return{src:i,dest:l}},[i,l,q]),Oe=d.useCallback(he=>{const se=G?.current;if(i!==void 0&&h!==void 0)Math.abs(he.clientX-h)>20&&u(!0);else if(p!==void 0&&D!==void 0)Math.abs(he.clientY-D)>20&&b(!0);else if(r!==void 0&&t!==void 0&&se){const we=se.getBoundingClientRect().width/se.offsetWidth,be=(he.clientX-t)/we,We=te[r],me=co(We,be,k,w);if(I?.(We,me,r,me+(We.growOffset??0)),_e.current=be,ie?.first()===r)for(const Le of ie){if(Le===r)continue;const Re=te[Le],lt=co(Re,_e.current,k,w);I?.(Re,lt,Le,lt+(Re.growOffset??0))}}},[i,h,p,D,r,t,te,k,w,I,ie,G]),Ge=d.useCallback((he,se)=>{if(p===void 0||x===void 0)return P(he,se);let[De,we]=he;return we===x?we=p:(we>x&&(we-=1),we>=p&&(we+=1)),P([De,we],se)},[p,x,P]),gt=d.useCallback(he=>{Z?.(he),he.defaultPrevented()||Ae()},[Ae,Z]);return d.createElement(Cg,{accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,enableGroups:e.enableGroups,eventTargetRef:e.eventTargetRef,experimental:e.experimental,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,headerIcons:e.headerIcons,height:e.height,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,resizeColumn:r,isDraggable:e.isDraggable,isFilling:e.isFilling,isFocused:e.isFocused,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDrop:e.onDrop,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,width:e.width,getCellContent:Ge,isResizing:r!==void 0,onHeaderMenuClick:je,isDragging:c,onItemHovered:Se,onDragStart:gt,onMouseDown:$e,allowResize:ne,onMouseUp:Ve,dragAndDropState:ve,onMouseMoveRaw:Oe,ref:S})};function Sg(e){const t=d.useRef(null),[n,r]=d.useState({width:e?.[0],height:e?.[1]});return d.useLayoutEffect(()=>{const o=s=>{for(const l of s){const{width:a,height:c}=l&&l.contentRect||{};r(u=>u.width===a&&u.height===c?u:{width:a,height:c})}},i=new window.ResizeObserver(o);return t.current&&i.observe(t.current,void 0),()=>{i.disconnect()}},[t.current]),{ref:t,...n}}const Rg=(e,t,n)=>{const r=d.useRef(null),o=d.useRef(null),i=d.useRef(null),s=d.useRef(0),l=d.useRef(t);l.current=t;const a=n.current;d.useEffect(()=>{const c=()=>{if(o.current===!1&&a!==null){const g=[a.scrollLeft,a.scrollTop];if(i.current?.[0]===g[0]&&i.current?.[1]===g[1])if(s.current>10){i.current=null,o.current=null;return}else s.current++;else s.current=0,l.current(g[0],g[1]),i.current=g;r.current=window.setTimeout(c,8.333333333333334)}},u=()=>{o.current=!0,i.current=null,r.current!==null&&(window.clearTimeout(r.current),r.current=null)},h=g=>{g.touches.length===0&&(o.current=!1,s.current=0,r.current=window.setTimeout(c,8.333333333333334))};if(e&&a!==null){const g=a;return g.addEventListener("touchstart",u),g.addEventListener("touchend",h),()=>{g.removeEventListener("touchstart",u),g.removeEventListener("touchend",h),r.current!==null&&window.clearTimeout(r.current)}}},[e,a])},Mg=()=>e=>e.isSafari?"scroll":"auto",Eg=Kt("div")({name:"ScrollRegionStyle",class:"gdg-s1dgczr6",propsAsIs:!1,vars:{"s1dgczr6-0":[Mg()]}});function Tg(e){const[t,n]=d.useState(!1),r=typeof window>"u"?null:window,o=d.useRef(0);return Et("touchstart",d.useCallback(()=>{window.clearTimeout(o.current),n(!0)},[]),r,!0,!1),Et("touchend",d.useCallback(i=>{i.touches.length===0&&(o.current=window.setTimeout(()=>n(!1),e))},[e]),r,!0,!1),t}const Ig=e=>{const{children:t,clientHeight:n,scrollHeight:r,scrollWidth:o,update:i,draggable:s,className:l,preventDiagonalScrolling:a=!1,paddingBottom:c=0,paddingRight:u=0,rightElement:h,rightElementProps:g,kineticScrollPerfHack:p=!1,scrollRef:f,initialSize:x}=e,E=[],M=g?.sticky??!1,b=g?.fill??!1,D=d.useRef(0),R=d.useRef(0),v=d.useRef(null),P=typeof window>"u"?1:window.devicePixelRatio,H=d.useRef({scrollLeft:0,scrollTop:0,lockDirection:void 0}),I=d.useRef(null),C=Tg(200),[F,S]=d.useState(!0),w=d.useRef(0);d.useLayoutEffect(()=>{if(!F||C||H.current.lockDirection===void 0)return;const te=v.current;if(te===null)return;const[fe,ie]=H.current.lockDirection;fe!==void 0?te.scrollLeft=fe:ie!==void 0&&(te.scrollTop=ie),H.current.lockDirection=void 0},[C,F]);const k=d.useCallback((te,fe)=>{const ie=v.current;if(ie===null)return;fe=fe??ie.scrollTop,te=te??ie.scrollLeft;const Se=H.current.scrollTop,de=H.current.scrollLeft,$e=te-de,je=fe-Se;C&&$e!==0&&je!==0&&(Math.abs($e)>3||Math.abs(je)>3)&&a&&H.current.lockDirection===void 0&&(H.current.lockDirection=Math.abs($e)<Math.abs(je)?[de,void 0]:[void 0,Se]);const _e=H.current.lockDirection;te=_e?.[0]??te,fe=_e?.[1]??fe,H.current.scrollLeft=te,H.current.scrollTop=fe;const Ae=ie.clientWidth,Ve=ie.clientHeight,ve=fe,Oe=R.current-ve,Ge=ie.scrollHeight-Ve;if(R.current=ve,Ge>0&&(Math.abs(Oe)>2e3||ve===0||ve===Ge)&&r>ie.scrollHeight+5){const gt=ve/Ge,he=(r-Ve)*gt;D.current=he-ve}_e!==void 0&&(window.clearTimeout(w.current),S(!1),w.current=window.setTimeout(()=>S(!0),200)),i({x:te,y:ve+D.current,width:Ae-u,height:Ve-c,paddingRight:I.current?.clientWidth??0})},[c,u,r,i,a,C]);Rg(p&&mi.value,k,v);const T=d.useRef(k);T.current=k;const y=d.useRef(),q=d.useRef(!1);d.useLayoutEffect(()=>{q.current?k():q.current=!0},[k,c,u]);const j=d.useCallback(te=>{v.current=te,f!==void 0&&(f.current=te)},[f]);let X=0,ce=0;for(E.push(d.createElement("div",{key:X++,style:{width:o,height:0}}));ce<r;){const te=Math.min(5e6,r-ce);E.push(d.createElement("div",{key:X++,style:{width:0,height:te}})),ce+=te}const{ref:Z,width:G,height:ne}=Sg(x);return typeof window<"u"&&(y.current?.height!==ne||y.current?.width!==G)&&(window.setTimeout(()=>T.current(),0),y.current={width:G,height:ne}),(G??0)===0||(ne??0)===0?d.createElement("div",{ref:Z}):d.createElement("div",{ref:Z},d.createElement(Eg,{isSafari:mi.value},d.createElement("div",{className:"dvn-underlay"},t),d.createElement("div",{ref:j,style:y.current,draggable:s,onDragStart:te=>{s||(te.stopPropagation(),te.preventDefault())},className:"dvn-scroller "+(l??""),onScroll:()=>k()},d.createElement("div",{className:"dvn-scroll-inner"+(h===void 0?" dvn-hidden":"")},d.createElement("div",{className:"dvn-stack"},E),h!==void 0&&d.createElement(d.Fragment,null,!b&&d.createElement("div",{className:"dvn-spacer"}),d.createElement("div",{ref:I,style:{height:ne,maxHeight:n-Math.ceil(P%1),position:"sticky",top:0,paddingLeft:1,marginBottom:-40,marginRight:u,flexGrow:b?1:void 0,right:M?u??0:void 0,pointerEvents:"auto"}},h))))))},Dg=e=>{const{columns:t,rows:n,rowHeight:r,headerHeight:o,groupHeaderHeight:i,enableGroups:s,freezeColumns:l,experimental:a,nonGrowWidth:c,clientSize:u,className:h,onVisibleRegionChanged:g,scrollRef:p,preventDiagonalScrolling:f,rightElement:x,rightElementProps:E,overscrollX:M,overscrollY:b,initialSize:D,smoothScrollX:R=!1,smoothScrollY:v=!1,isDraggable:P}=e,{paddingRight:H,paddingBottom:I}=a??{},[C,F]=u,S=d.useRef(),w=d.useRef(),k=d.useRef(),T=d.useRef(),y=c+Math.max(0,M??0);let q=s?o+i:o;if(typeof r=="number")q+=n*r;else for(let Z=0;Z<n;Z++)q+=r(Z);b!==void 0&&(q+=b);const j=d.useRef(),X=d.useCallback(()=>{if(j.current===void 0)return;const Z={...j.current};let G=0,ne=Z.x<0?-Z.x:0,te=0,fe=0;Z.x=Z.x<0?0:Z.x;let ie=0;for(let Ae=0;Ae<l;Ae++)ie+=t[Ae].width;for(const Ae of t){const Ve=G-ie;if(Z.x>=Ve+Ae.width)G+=Ae.width,fe++,te++;else if(Z.x>Ve)G+=Ae.width,R?ne+=Ve-Z.x:fe++,te++;else if(Z.x+Z.width>Ve)G+=Ae.width,te++;else break}let Se=0,de=0,$e=0;if(typeof r=="number")v?(de=Math.floor(Z.y/r),Se=de*r-Z.y):de=Math.ceil(Z.y/r),$e=Math.ceil(Z.height/r)+de,Se<0&&$e++;else{let Ae=0;for(let Ve=0;Ve<n;Ve++){const ve=r(Ve),Oe=Ae+(v?0:ve/2);if(Z.y>=Ae+ve)Ae+=ve,de++,$e++;else if(Z.y>Oe)Ae+=ve,v?Se+=Oe-Z.y:de++,$e++;else if(Z.y+Z.height>ve/2+Ae)Ae+=ve,$e++;else break}}const je={x:fe,y:de,width:te-fe,height:$e-de},_e=S.current;(_e===void 0||_e.y!==je.y||_e.x!==je.x||_e.height!==je.height||_e.width!==je.width||w.current!==ne||k.current!==Se||Z.width!==T.current?.[0]||Z.height!==T.current?.[1])&&(g?.({x:fe,y:de,width:te-fe,height:$e-de},Z.width,Z.height,Z.paddingRight??0,ne,Se),S.current=je,w.current=ne,k.current=Se,T.current=[Z.width,Z.height])},[t,r,n,g,l,R,v]),ce=d.useCallback(Z=>{j.current=Z,X()},[X]);return d.useEffect(()=>{X()},[X]),d.createElement(Ig,{scrollRef:p,className:h,kineticScrollPerfHack:a?.kineticScrollPerfHack,preventDiagonalScrolling:f,draggable:P===!0||typeof P=="string",scrollWidth:y+(H??0),scrollHeight:q+(I??0),clientHeight:F,rightElement:x,paddingBottom:I,paddingRight:H,rightElementProps:E,update:ce,initialSize:D},d.createElement(kg,{eventTargetRef:p,width:C,height:F,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,onColumnProposeMove:e.onColumnProposeMove,verticalBorder:e.verticalBorder,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY}))},Pg=Kt("div")({name:"SearchWrapper",class:"gdg-seveqep",propsAsIs:!1}),_g=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),Ag=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),Lg=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})),Hg=10,zg=e=>{const{canvasRef:t,cellYOffset:n,rows:r,columns:o,searchInputRef:i,searchValue:s,searchResults:l,onSearchValueChange:a,getCellsForSelection:c,onSearchResultsChanged:u,showSearch:h=!1,onSearchClose:g}=e,[p]=d.useState(()=>"search-box-"+Math.round(Math.random()*1e3)),[f,x]=d.useState(""),E=s??f,M=d.useCallback(G=>{x(G),a?.(G)},[a]),[b,D]=d.useState(),R=d.useRef(b);R.current=b,d.useEffect(()=>{l!==void 0&&(l.length>0?D(G=>({rowsSearched:r,results:l.length,selectedIndex:G?.selectedIndex??-1})):D(void 0))},[r,l]);const v=d.useRef(new AbortController),P=d.useRef(),[H,I]=d.useState([]),C=l??H,F=d.useCallback(()=>{P.current!==void 0&&(window.cancelAnimationFrame(P.current),P.current=void 0,v.current.abort())},[]),S=d.useRef(n);S.current=n;const w=d.useCallback(G=>{const ne=new RegExp(G.replace(/([$()*+.?[\\\]^{|}-])/g,"\\$1"),"i");let te=S.current,fe=Math.min(10,r),ie=0;D(void 0),I([]);const Se=[],de=async()=>{if(c===void 0)return;const $e=performance.now(),je=r-ie;let _e=c({x:0,y:te,width:o.length,height:Math.min(fe,je,r-te)},v.current.signal);typeof _e=="function"&&(_e=await _e());let Ae=!1;for(const[he,se]of _e.entries())for(const[De,we]of se.entries()){let be;switch(we.kind){case oe.Text:case oe.Number:be=we.displayData;break;case oe.Uri:case oe.Markdown:be=we.data;break;case oe.Boolean:be=typeof we.data=="boolean"?we.data.toString():void 0;break;case oe.Image:case oe.Bubble:be=we.data.join("🐳");break;case oe.Custom:be=we.copyData;break}be!==void 0&&ne.test(be)&&(Se.push([De,he+te]),Ae=!0)}const Ve=performance.now();Ae&&I([...Se]),ie+=_e.length,Ut(ie<=r);const ve=R.current?.selectedIndex??-1;D({results:Se.length,rowsSearched:ie,selectedIndex:ve}),u?.(Se,ve),te+fe>=r?te=0:te+=fe;const Oe=Ve-$e,Ge=Math.max(Oe,1),gt=Hg/Ge;fe=Math.ceil(fe*gt),ie<r&&Se.length<1e3&&(P.current=window.requestAnimationFrame(de))};F(),P.current=window.requestAnimationFrame(de)},[F,o.length,c,u,r]),k=d.useCallback(()=>{g?.(),D(void 0),I([]),u?.([],-1),F(),t?.current?.focus()},[F,t,g,u]),T=d.useCallback(G=>{M(G.target.value),l===void 0&&(G.target.value===""?(D(void 0),I([]),F()):w(G.target.value))},[w,F,M,l]);d.useEffect(()=>{h&&i.current!==null&&(M(""),i.current.focus({preventScroll:!0}))},[h,i,M]);const y=d.useCallback(G=>{if(G?.stopPropagation?.(),b===void 0)return;const ne=(b.selectedIndex+1)%b.results;D({...b,selectedIndex:ne}),u?.(C,ne)},[b,u,C]),q=d.useCallback(G=>{if(G?.stopPropagation?.(),b===void 0)return;let ne=(b.selectedIndex-1)%b.results;ne<0&&(ne+=b.results),D({...b,selectedIndex:ne}),u?.(C,ne)},[u,C,b]),j=d.useCallback(G=>{(G.ctrlKey||G.metaKey)&&G.nativeEvent.code==="KeyF"||G.key==="Escape"?(k(),G.stopPropagation(),G.preventDefault()):G.key==="Enter"&&(G.shiftKey?q():y())},[k,y,q]);d.useEffect(()=>()=>{F()},[F]);const[X,ce]=d.useState(!1);d.useEffect(()=>{if(h)ce(!0);else{const G=setTimeout(()=>ce(!1),150);return()=>clearTimeout(G)}},[h]);const Z=d.useMemo(()=>{if(!h&&!X)return null;let G;b!==void 0&&(G=b.results>=1e3?"over 1000":`${b.results} result${b.results!==1?"s":""}`,b.selectedIndex>=0&&(G=`${b.selectedIndex+1} of ${G}`));const ne=ie=>{ie.stopPropagation()},fe={width:`${Math.floor((b?.rowsSearched??0)/r*100)}%`};return d.createElement(Pg,{className:h?"":"out",onMouseDown:ne,onMouseMove:ne,onMouseUp:ne,onClick:ne},d.createElement("div",{className:"gdg-search-bar-inner"},d.createElement("input",{id:p,"aria-hidden":!h,"data-testid":"search-input",ref:i,onChange:T,value:E,tabIndex:h?void 0:-1,onKeyDownCapture:j}),d.createElement("button",{"aria-label":"Previous Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:q,disabled:(b?.results??0)===0},_g),d.createElement("button",{"aria-label":"Next Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:y,disabled:(b?.results??0)===0},Ag),g!==void 0&&d.createElement("button",{"aria-label":"Close Search","aria-hidden":!h,"data-testid":"search-close-button",tabIndex:h?void 0:-1,onClick:k},Lg)),b!==void 0?d.createElement(d.Fragment,null,d.createElement("div",{className:"gdg-search-status"},d.createElement("div",{"data-testid":"search-result-area"},G)),d.createElement("div",{className:"gdg-search-progress",style:fe})):d.createElement("div",{className:"gdg-search-status"},d.createElement("label",{htmlFor:p},"Type to search")))},[h,X,b,r,p,i,T,E,j,q,y,g,k]);return d.createElement(d.Fragment,null,d.createElement(Dg,{prelightCells:C,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,className:e.className,clientSize:e.clientSize,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,nonGrowWidth:e.nonGrowWidth,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,initialSize:e.initialSize,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onMouseMove:e.onMouseMove,onVisibleRegionChanged:e.onVisibleRegionChanged,overscrollX:e.overscrollX,overscrollY:e.overscrollY,preventDiagonalScrolling:e.preventDiagonalScrolling,rightElement:e.rightElement,rightElementProps:e.rightElementProps,rowHeight:e.rowHeight,rows:e.rows,scrollRef:e.scrollRef,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,onColumnProposeMove:e.onColumnProposeMove,drawFocusRing:e.drawFocusRing,drawCell:e.drawCell,drawHeader:e.drawHeader,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY}),Z)};class Fg extends d.PureComponent{wrapperRef=d.createRef();componentDidMount(){document.addEventListener("touchend",this.clickOutside,!0),document.addEventListener("mousedown",this.clickOutside,!0),document.addEventListener("contextmenu",this.clickOutside,!0)}componentWillUnmount(){document.removeEventListener("touchend",this.clickOutside,!0),document.removeEventListener("mousedown",this.clickOutside,!0),document.removeEventListener("contextmenu",this.clickOutside,!0)}clickOutside=t=>{if(!(this.props.isOutsideClick&&!this.props.isOutsideClick(t))&&this.wrapperRef.current!==null&&!this.wrapperRef.current.contains(t.target)){let n=t.target;for(;n!==null;){if(n.classList.contains("click-outside-ignore"))return;n=n.parentElement}this.props.onClickOutside()}};render(){const{onClickOutside:t,isOutsideClick:n,...r}=this.props;return d.createElement("div",{...r,ref:this.wrapperRef},this.props.children)}}const Og=()=>e=>Math.max(16,e.targetHeight-10),Ng=Kt("input")({name:"RenameInput",class:"gdg-r17m35ur",propsAsIs:!1,vars:{"r17m35ur-0":[Og(),"px"]}}),$g=e=>{const{bounds:t,group:n,onClose:r,canvasBounds:o,onFinish:i}=e,[s,l]=vt.useState(n);return vt.createElement(Fg,{style:{position:"absolute",left:t.x-o.left+1,top:t.y-o.top,width:t.width-2,height:t.height},className:"gdg-c1tqibwd",onClickOutside:r},vt.createElement(Ng,{targetHeight:t.height,"data-testid":"group-rename-input",value:s,onBlur:r,onFocus:a=>a.target.setSelectionRange(0,s.length),onChange:a=>l(a.target.value),onKeyDown:a=>{a.key==="Enter"?i(s):a.key==="Escape"&&r()},autoFocus:!0}))};function Wg(e,t){return e===void 0?!1:e.length>1&&e.startsWith("_")?Number.parseInt(e.slice(1))===t.keyCode:e.length===1&&e>="a"&&e<="z"?e.toUpperCase().codePointAt(0)===t.keyCode:e===t.key}function Te(e,t,n){const r=xc(e,t);return r&&(n.didMatch=!0),r}function xc(e,t){if(e.length===0)return!1;if(e.includes("|")){const a=e.split("|");for(const c of a)if(xc(c,t))return!0;return!1}let n=!1,r=!1,o=!1,i=!1;const s=e.split("+"),l=s.pop();if(!Wg(l,t))return!1;if(s[0]==="any")return!0;for(const a of s)switch(a){case"ctrl":n=!0;break;case"shift":r=!0;break;case"alt":o=!0;break;case"meta":i=!0;break;case"primary":pi.value?i=!0:n=!0;break}return t.altKey===o&&t.ctrlKey===n&&t.shiftKey===r&&t.metaKey===i}function Bg(e,t,n,r,o,i){const s=vt.useCallback((c,u,h,g)=>{(i==="cell"||i==="multi-cell")&&c!==void 0&&(c={...c,range:{x:c.cell[0],y:c.cell[1],width:1,height:1}});const p=n==="mixed"&&(h||g==="drag"),f=r==="mixed"&&p,x=o==="mixed"&&p;let E={current:c===void 0?void 0:{...c,rangeStack:g==="drag"?e.current?.rangeStack??[]:[]},columns:f?e.columns:He.empty(),rows:x?e.rows:He.empty()};h&&(i==="multi-rect"||i==="multi-cell")&&E.current!==void 0&&e.current!==void 0&&(E={...E,current:{...E.current,rangeStack:[...e.current.rangeStack,e.current.range]}}),t(E,u)},[r,e,n,i,o,t]),l=vt.useCallback((c,u,h)=>{c=c??e.rows,u!==void 0&&(c=c.add(u));let g;if(o==="exclusive"&&c.length>0)g={current:void 0,columns:He.empty(),rows:c};else{const p=h&&n==="mixed",f=h&&r==="mixed";g={current:p?e.current:void 0,columns:f?e.columns:He.empty(),rows:c}}t(g,!1)},[r,e,n,o,t]),a=vt.useCallback((c,u,h)=>{c=c??e.columns,u!==void 0&&(c=c.add(u));let g;if(r==="exclusive"&&c.length>0)g={current:void 0,rows:He.empty(),columns:c};else{const p=h&&n==="mixed",f=h&&o==="mixed";g={current:p?e.current:void 0,rows:f?e.rows:He.empty(),columns:c}}t(g,!1)},[r,e,n,o,t]);return[s,l,a]}function jg(e,t,n,r,o){const i=d.useCallback(c=>{if(e===!0){const u=[];for(let h=c.y;h<c.y+c.height;h++){const g=[];for(let p=c.x;p<c.x+c.width;p++)p<0||h>=o?g.push({kind:oe.Loading,allowOverlay:!1}):g.push(t([p,h]));u.push(g)}return u}return e?.(c,r.signal)??[]},[r.signal,t,e,o]),s=e!==void 0?i:void 0,l=d.useCallback(c=>{if(s===void 0)return[];const u={...c,x:c.x-n};if(u.x<0){u.x=0,u.width--;const h=s(u,r.signal);return typeof h=="function"?async()=>(await h()).map(g=>[{kind:oe.Loading,allowOverlay:!1},...g]):h.map(g=>[{kind:oe.Loading,allowOverlay:!1},...g])}return s(u,r.signal)},[r.signal,s,n]);return[e!==void 0?l:void 0,s]}function Vg(e){if(e.copyData!==void 0)return{formatted:e.copyData,rawValue:e.copyData,format:"string"};switch(e.kind){case oe.Boolean:return{formatted:e.data===!0?"TRUE":e.data===!1?"FALSE":e.data===xs?"INDETERMINATE":"",rawValue:e.data,format:"boolean"};case oe.Custom:return{formatted:e.copyData,rawValue:e.copyData,format:"string"};case oe.Image:case oe.Bubble:return{formatted:e.data,rawValue:e.data,format:"string-array"};case oe.Drilldown:return{formatted:e.data.map(t=>t.text),rawValue:e.data.map(t=>t.text),format:"string-array"};case oe.Text:return{formatted:e.displayData??e.data,rawValue:e.data,format:"string"};case oe.Uri:return{formatted:e.displayData??e.data,rawValue:e.data,format:"url"};case oe.Markdown:case oe.RowID:return{formatted:e.data,rawValue:e.data,format:"string"};case oe.Number:return{formatted:e.displayData,rawValue:e.data,format:"number"};case oe.Loading:return{formatted:"#LOADING",rawValue:"",format:"string"};case oe.Protected:return{formatted:"************",rawValue:"",format:"string"};default:ko()}}function Xg(e,t){return e.map((r,o)=>{const i=t[o];return r.map(s=>s.span!==void 0&&s.span[0]!==i?{formatted:"",rawValue:"",format:"string"}:Vg(s))})}function jl(e,t){return(t?/[\t\n",]/:/[\t\n"]/).test(e)&&(e=`"${e.replace(/"/g,'""')}"`),e}function Ug(e){const t=[];for(const n of e){const r=[];for(const o of n)o.format==="url"?r.push(o.rawValue?.toString()??""):o.format==="string-array"?r.push(o.formatted.map(i=>jl(i,!0)).join(",")):r.push(jl(o.formatted,!1));t.push(r.join("	"))}return t.join(`
`)}function es(e){return e.replace(/\t/g,"    ").replace(/ {2,}/g,t=>"<span> </span>".repeat(t.length))}function Vl(e){return'"'+e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"'}function qg(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function Kg(e){const t=[];t.push('<style type="text/css"><!--br {mso-data-placement:same-cell;}--></style>',"<table><tbody>");for(const n of e){t.push("<tr>");for(const r of n){const o=`gdg-format="${r.format}"`;r.format==="url"?t.push(`<td ${o}><a href="${r.rawValue}">${es(r.formatted)}</a></td>`):r.format==="string-array"?t.push(`<td ${o}><ol>${r.formatted.map((i,s)=>`<li gdg-raw-value=${Vl(r.rawValue[s])}>`+es(i)+"</li>").join("")}</ol></td>`):t.push(`<td gdg-raw-value=${Vl(r.rawValue?.toString()??"")} ${o}>${es(r.formatted)}</td>`)}t.push("</tr>")}return t.push("</tbody></table>"),t.join("")}function Yg(e,t){const n=Xg(e,t),r=Ug(n),o=Kg(n);return{textPlain:r,textHtml:o}}function Xl(e){const t=document.createElement("html");t.innerHTML=e.replace(/&nbsp;/g," ");const n=t.querySelector("table");if(n===null)return;const r=[n],o=[];let i;for(;r.length>0;){const s=r.pop();if(s===void 0)break;if(s instanceof HTMLTableElement||s.nodeName==="TBODY")r.push(...[...s.children].reverse());else if(s instanceof HTMLTableRowElement)i!==void 0&&o.push(i),i=[],r.push(...[...s.children].reverse());else if(s instanceof HTMLTableCellElement){const l=s.cloneNode(!0),c=l.children.length===1&&l.children[0].nodeName==="P"?l.children[0]:null,u=c?.children.length===1&&c.children[0].nodeName==="FONT",h=l.querySelectorAll("br");for(const f of h)f.replaceWith(`
`);const g=l.getAttribute("gdg-raw-value"),p=l.getAttribute("gdg-format")??"string";if(l.querySelector("a")!==null)i?.push({rawValue:l.querySelector("a")?.getAttribute("href")??"",formatted:l.textContent??"",format:p});else if(l.querySelector("ol")!==null){const f=l.querySelectorAll("li");i?.push({rawValue:[...f].map(x=>x.getAttribute("gdg-raw-value")??""),formatted:[...f].map(x=>x.textContent??""),format:"string-array"})}else if(g!==null)i?.push({rawValue:qg(g),formatted:l.textContent??"",format:p});else{let f=l.textContent??"";u&&(f=f.replace(/\n(?!\n)/g,"")),i?.push({rawValue:f??"",formatted:f??"",format:p})}}}return i!==void 0&&o.push(i),o}function Gg(e,t,n,r,o){const i=e;if(r==="allowPartial"||e.current===void 0||t===void 0)return e;let s=!1;do{if(e?.current===void 0)break;const l=e.current?.range,a=[];if(l.width>2){const h=t({x:l.x,y:l.y,width:1,height:l.height},o.signal);if(typeof h=="function")return i;a.push(...h);const g=t({x:l.x+l.width-1,y:l.y,width:1,height:l.height},o.signal);if(typeof g=="function")return i;a.push(...g)}else{const h=t({x:l.x,y:l.y,width:l.width,height:l.height},o.signal);if(typeof h=="function")return i;a.push(...h)}let c=l.x-n,u=l.x+l.width-1-n;for(const h of a)for(const g of h)g.span!==void 0&&(c=Math.min(g.span[0],c),u=Math.max(g.span[1],u));c===l.x-n&&u===l.x+l.width-1-n?s=!0:e={current:{cell:e.current.cell??[0,0],range:{x:c+n,y:l.y,width:u-c+1,height:l.height},rangeStack:e.current.rangeStack},columns:e.columns,rows:e.rows}}while(!s);return e}function Ul(e){return e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1).replace(/""/g,'"')),e}function Zg(e){let t;(function(l){l[l.None=0]="None",l[l.inString=1]="inString",l[l.inStringPostQuote=2]="inStringPostQuote"})(t||(t={}));const n=[];let r=[],o=0,i=t.None;e=e.replace(/\r\n/g,`
`);let s=0;for(const l of e){switch(i){case t.None:l==="	"||l===`
`?(r.push(e.slice(o,s)),o=s+1,l===`
`&&(n.push(r),r=[])):l==='"'&&(i=t.inString);break;case t.inString:l==='"'&&(i=t.inStringPostQuote);break;case t.inStringPostQuote:l==='"'?i=t.inString:((l==="	"||l===`
`)&&(r.push(Ul(e.slice(o,s))),o=s+1,l===`
`&&(n.push(r),r=[])),i=t.None);break}s++}return o<e.length&&r.push(Ul(e.slice(o,e.length))),n.push(r),n.map(l=>l.map(a=>({rawValue:a,formatted:a,format:"string"})))}function ql(e,t,n){const r=Yg(e,t),o=l=>{window.navigator.clipboard?.writeText(l)},i=(l,a)=>window.navigator.clipboard?.write===void 0?!1:(window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([l],{type:"text/plain"}),"text/html":new Blob([a],{type:"text/html"})})]),!0),s=(l,a)=>{try{if(n===void 0||n.clipboardData===null)throw new Error("No clipboard data");n?.clipboardData?.setData("text/plain",l),n?.clipboardData?.setData("text/html",a)}catch{i(l,a)||o(l)}};window.navigator.clipboard?.write!==void 0||n?.clipboardData!==void 0?s(r.textPlain,r.textHtml):o(r.textPlain),n?.preventDefault()}function Cc(e){return e!==!0}function Kl(e){return typeof e=="string"?e:`${e}px`}const Qg=()=>e=>e.innerWidth,Jg=()=>e=>e.innerHeight,em=Kt("div")({name:"Wrapper",class:"gdg-wmyidgi",propsAsIs:!1,vars:{"wmyidgi-0":[Qg()],"wmyidgi-1":[Jg()]}}),tm=e=>{const{inWidth:t,inHeight:n,children:r,...o}=e;return d.createElement(em,{innerHeight:Kl(n),innerWidth:Kl(t),...o},r)},nm=2,rm=1300;function om(e,t,n){const r=vt.useRef(0),[o,i]=e??[0,0];vt.useEffect(()=>{if(o===0&&i===0){r.current=0;return}let s=!1,l=0;const a=c=>{if(!s){if(l===0)l=c;else{const u=c-l;r.current=Math.min(1,r.current+u/rm);const h=r.current**1.618*u*nm;t.current?.scrollBy(o*h,i*h),l=c,n?.()}window.requestAnimationFrame(a)}};return window.requestAnimationFrame(a),()=>{s=!0}},[t,o,i,n])}function im({rowHeight:e,headerHeight:t,groupHeaderHeight:n,theme:r,overscrollX:o,overscrollY:i,scaleToRem:s,remSize:l}){const[a,c,u,h,g,p]=vt.useMemo(()=>{if(!s||l===16)return[e,t,n,r,o,i];const f=l/16,x=e,E=uc();return[typeof x=="number"?x*f:M=>Math.ceil(x(M)*f),Math.ceil(t*f),Math.ceil(n*f),{...r,headerIconSize:(r?.headerIconSize??E.headerIconSize)*f,cellHorizontalPadding:(r?.cellHorizontalPadding??E.cellHorizontalPadding)*f,cellVerticalPadding:(r?.cellVerticalPadding??E.cellVerticalPadding)*f},Math.ceil((o??0)*f),Math.ceil((i??0)*f)]},[n,t,o,i,l,e,s,r]);return{rowHeight:a,headerHeight:c,groupHeaderHeight:u,theme:h,overscrollX:g,overscrollY:p}}const zn={downFill:!1,rightFill:!1,clear:!0,closeOverlay:!0,acceptOverlayDown:!0,acceptOverlayUp:!0,acceptOverlayLeft:!0,acceptOverlayRight:!0,copy:!0,paste:!0,cut:!0,search:!1,delete:!0,activateCell:!0,scrollToSelectedCell:!0,goToFirstCell:!0,goToFirstColumn:!0,goToFirstRow:!0,goToLastCell:!0,goToLastColumn:!0,goToLastRow:!0,goToNextPage:!0,goToPreviousPage:!0,selectToFirstCell:!0,selectToFirstColumn:!0,selectToFirstRow:!0,selectToLastCell:!0,selectToLastColumn:!0,selectToLastRow:!0,selectAll:!0,selectRow:!0,selectColumn:!0,goUpCell:!0,goRightCell:!0,goDownCell:!0,goLeftCell:!0,goUpCellRetainSelection:!0,goRightCellRetainSelection:!0,goDownCellRetainSelection:!0,goLeftCellRetainSelection:!0,selectGrowUp:!0,selectGrowRight:!0,selectGrowDown:!0,selectGrowLeft:!0};function Ie(e,t){return e===!0?t:e===!1?"":e}function Yl(e){const t=pi.value;return{activateCell:Ie(e.activateCell," |Enter|shift+Enter"),clear:Ie(e.clear,"any+Escape"),closeOverlay:Ie(e.closeOverlay,"any+Escape"),acceptOverlayDown:Ie(e.acceptOverlayDown,"Enter"),acceptOverlayUp:Ie(e.acceptOverlayUp,"shift+Enter"),acceptOverlayLeft:Ie(e.acceptOverlayLeft,"shift+Tab"),acceptOverlayRight:Ie(e.acceptOverlayRight,"Tab"),copy:e.copy,cut:e.cut,delete:Ie(e.delete,t?"Backspace|Delete":"Delete"),downFill:Ie(e.downFill,"primary+_68"),scrollToSelectedCell:Ie(e.scrollToSelectedCell,"primary+Enter"),goDownCell:Ie(e.goDownCell,"ArrowDown"),goDownCellRetainSelection:Ie(e.goDownCellRetainSelection,"alt+ArrowDown"),goLeftCell:Ie(e.goLeftCell,"ArrowLeft|shift+Tab"),goLeftCellRetainSelection:Ie(e.goLeftCellRetainSelection,"alt+ArrowLeft"),goRightCell:Ie(e.goRightCell,"ArrowRight|Tab"),goRightCellRetainSelection:Ie(e.goRightCellRetainSelection,"alt+ArrowRight"),goUpCell:Ie(e.goUpCell,"ArrowUp"),goUpCellRetainSelection:Ie(e.goUpCellRetainSelection,"alt+ArrowUp"),goToFirstCell:Ie(e.goToFirstCell,"primary+Home"),goToFirstColumn:Ie(e.goToFirstColumn,"Home|primary+ArrowLeft"),goToFirstRow:Ie(e.goToFirstRow,"primary+ArrowUp"),goToLastCell:Ie(e.goToLastCell,"primary+End"),goToLastColumn:Ie(e.goToLastColumn,"End|primary+ArrowRight"),goToLastRow:Ie(e.goToLastRow,"primary+ArrowDown"),goToNextPage:Ie(e.goToNextPage,"PageDown"),goToPreviousPage:Ie(e.goToPreviousPage,"PageUp"),paste:e.paste,rightFill:Ie(e.rightFill,"primary+_82"),search:Ie(e.search,"primary+f"),selectAll:Ie(e.selectAll,"primary+a"),selectColumn:Ie(e.selectColumn,"ctrl+ "),selectGrowDown:Ie(e.selectGrowDown,"shift+ArrowDown"),selectGrowLeft:Ie(e.selectGrowLeft,"shift+ArrowLeft"),selectGrowRight:Ie(e.selectGrowRight,"shift+ArrowRight"),selectGrowUp:Ie(e.selectGrowUp,"shift+ArrowUp"),selectRow:Ie(e.selectRow,"shift+ "),selectToFirstCell:Ie(e.selectToFirstCell,"primary+shift+Home"),selectToFirstColumn:Ie(e.selectToFirstColumn,"primary+shift+ArrowLeft"),selectToFirstRow:Ie(e.selectToFirstRow,"primary+shift+ArrowUp"),selectToLastCell:Ie(e.selectToLastCell,"primary+shift+End"),selectToLastColumn:Ie(e.selectToLastColumn,"primary+shift+ArrowRight"),selectToLastRow:Ie(e.selectToLastRow,"primary+shift+ArrowDown")}}function sm(e){const t=af(e);return vt.useMemo(()=>{if(t===void 0)return Yl(zn);const n={...t,goToNextPage:t?.goToNextPage??t?.pageDown??zn.goToNextPage,goToPreviousPage:t?.goToPreviousPage??t?.pageUp??zn.goToPreviousPage,goToFirstCell:t?.goToFirstCell??t?.first??zn.goToFirstCell,goToLastCell:t?.goToLastCell??t?.last??zn.goToLastCell,selectToFirstCell:t?.selectToFirstCell??t?.first??zn.selectToFirstCell,selectToLastCell:t?.selectToLastCell??t?.last??zn.selectToLastCell};return Yl({...zn,...n})},[t])}const lm=d.lazy(async()=>await ys(()=>import("./c80ngh1cyfi1ays9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])));let am=0;function cm(e){return lu(Js(Js(e).filter(t=>t.span!==void 0).map(t=>tr((t.span?.[0]??0)+1,(t.span?.[1]??0)+1))))}function oi(e,t){return e===void 0||t===0||e.columns.length===0&&e.current===void 0?e:{current:e.current===void 0?void 0:{cell:[e.current.cell[0]+t,e.current.cell[1]],range:{...e.current.range,x:e.current.range.x+t},rangeStack:e.current.rangeStack.map(n=>({...n,x:n.x+t}))},rows:e.rows,columns:e.columns.offset(t)}}const ts={kind:oe.Loading,allowOverlay:!1},ii={columns:He.empty(),rows:He.empty(),current:void 0},um=(e,t)=>{const[n,r]=d.useState(ii),[o,i]=d.useState(),s=d.useRef(null),l=d.useRef(null),[a,c]=d.useState(),u=d.useRef(null),h=d.useRef(),g=typeof window>"u"?null:window,{rowMarkers:p="none",rowMarkerWidth:f,imageEditorOverride:x,getRowThemeOverride:E,markdownDivCreateNode:M,width:b,height:D,columns:R,rows:v,getCellContent:P,onCellClicked:H,onCellActivated:I,onFillPattern:C,onFinishedEditing:F,coercePasteValue:S,drawHeader:w,drawCell:k,onHeaderClicked:T,onColumnProposeMove:y,spanRangeBehavior:q="default",onGroupHeaderClicked:j,onCellContextMenu:X,className:ce,onHeaderContextMenu:Z,getCellsForSelection:G,onGroupHeaderContextMenu:ne,onGroupHeaderRenamed:te,onCellEdited:fe,onCellsEdited:ie,onSearchResultsChanged:Se,searchResults:de,onSearchValueChange:$e,searchValue:je,onKeyDown:_e,onKeyUp:Ae,keybindings:Ve,onRowAppended:ve,onColumnMoved:Oe,validateCell:Ge,highlightRegions:gt,rangeSelect:he="rect",columnSelect:se="multi",rowSelect:De="multi",rangeSelectionBlending:we="exclusive",columnSelectionBlending:be="exclusive",rowSelectionBlending:We="exclusive",onDelete:me,onDragStart:Le,onMouseMove:Re,onPaste:lt,copyHeaders:Pe=!1,freezeColumns:tt=0,cellActivationBehavior:Ue="second-click",rowSelectionMode:Ce="auto",rowMarkerStartIndex:qe=1,rowMarkerTheme:Ze,onHeaderMenuClick:Tt,getGroupDetails:zt,onSearchClose:Nt,onItemHovered:un,onSelectionCleared:mt,showSearch:bn,onVisibleRegionChanged:yt,gridSelection:Yt,onGridSelectionChange:Xe,minColumnWidth:Qe=50,maxColumnWidth:dn=500,maxColumnAutoWidth:fn,provideEditor:hn,trailingRowOptions:kt,freezeTrailingRows:Me=0,allowedFillDirections:ct="orthogonal",scrollOffsetX:Ke,scrollOffsetY:dt,verticalBorder:St,onDragOverCell:gn,onDrop:Or,onColumnResize:ft,onColumnResizeEnd:jn,onColumnResizeStart:ut,customRenderers:bt,fillHandle:xn,drawFocusRing:Po,experimental:Jt,fixedShadowX:Vn,fixedShadowY:Xn,headerIcons:ir,imageWindowLoader:_o,initialSize:Ao,isDraggable:sr,onDragLeave:lr,onRowMoved:en,overscrollX:En,overscrollY:Si,preventDiagonalScrolling:Lo,rightElement:Ri,rightElementProps:Mi,trapFocus:Un=!1,smoothScrollX:Tn,smoothScrollY:Ei,scaleToRem:Ti=!1,rowHeight:Ho=34,headerHeight:Nr=36,groupHeaderHeight:ar=Nr,theme:Os,isOutsideClick:zo,renderers:qn}=e,Cn=Math.max(Qe,20),In=Math.max(dn,Cn),Dn=Math.max(fn??In,Cn),cr=d.useMemo(()=>typeof window>"u"?{fontSize:"16px"}:window.getComputedStyle(document.documentElement),[]).fontSize,Yn=d.useMemo(()=>Number.parseFloat(cr),[cr]),{rowHeight:It,headerHeight:ur,groupHeaderHeight:$r,theme:Wr,overscrollX:Ii,overscrollY:Di}=im({groupHeaderHeight:ar,headerHeight:Nr,overscrollX:En,overscrollY:Si,remSize:Yn,rowHeight:Ho,scaleToRem:Ti,theme:Os}),tn=sm(Ve),kn=f??(v>1e4?48:v>1e3?44:v>100?36:32),$t=p!=="none",$=$t?1:0,Rt=ve!==void 0,Wt=kt?.sticky===!0,[Pi,Fo]=d.useState(!1),_i=bn??Pi,Br=d.useCallback(()=>{Nt!==void 0?Nt():Fo(!1)},[Nt]),V=d.useMemo(()=>Yt===void 0?void 0:oi(Yt,$),[Yt,$])??n,Gt=d.useRef(new AbortController);d.useEffect(()=>()=>{Gt?.current.abort()},[]);const[xt,Oo]=jg(G,P,$,Gt.current,v),dr=d.useCallback((m,A,_)=>{if(Ge===void 0)return!0;const W=[m[0]-$,m[1]];return Ge?.(W,A,_)},[$,Ge]),Pn=d.useRef(Yt),Dt=d.useCallback((m,A)=>{A&&(m=Gg(m,xt,$,q,Gt.current)),Xe!==void 0?(Pn.current=oi(m,-$),Xe(Pn.current)):r(m)},[Xe,xt,$,q]),fr=Er(ft,d.useCallback((m,A,_,W)=>{ft?.(R[_-$],A,_-$,W)},[ft,$,R])),hr=Er(jn,d.useCallback((m,A,_,W)=>{jn?.(R[_-$],A,_-$,W)},[jn,$,R])),Ai=Er(ut,d.useCallback((m,A,_,W)=>{ut?.(R[_-$],A,_-$,W)},[ut,$,R])),gr=Er(w,d.useCallback((m,A)=>w?.({...m,columnIndex:m.columnIndex-$},A)??!1,[w,$])),Li=Er(k,d.useCallback((m,A)=>k?.({...m,col:m.col-$},A)??!1,[k,$])),mr=d.useCallback(m=>{if(me!==void 0){const A=me(oi(m,-$));return typeof A=="boolean"?A:oi(A,$)}return!0},[me,$]),[L,Y,re]=Bg(V,Dt,we,be,We,he),ae=d.useMemo(()=>$n(uc(),Wr),[Wr]),[J,le]=d.useState([0,0,0]),ye=d.useMemo(()=>{if(qn===void 0)return{};const m={};for(const A of qn)m[A.kind]=A;return m},[qn]),Q=d.useCallback(m=>m.kind!==oe.Custom?ye[m.kind]:bt?.find(A=>A.isMatch(m)),[bt,ye]);let{sizedColumns:ge,nonGrowWidth:Be}=xh(R,v,Oo,J[0]-($===0?0:kn)-J[2],Cn,Dn,ae,Q,Gt.current);p!=="none"&&(Be+=kn);const at=d.useMemo(()=>ge.some(m=>m.group!==void 0),[ge]),ot=at?ur+$r:ur,nt=V.rows.length,ze=p==="none"?"":nt===0?Aa:nt===v?_a:Hd,pe=d.useMemo(()=>p==="none"?ge:[{title:ze,width:kn,icon:void 0,hasMenu:!1,style:"normal",themeOverride:Ze},...ge],[ge,kn,p,ze,Ze]),[Pt,it]=d.useMemo(()=>[dt!==void 0&&typeof It=="number"?Math.floor(dt/It):0,dt!==void 0&&typeof It=="number"?-(dt%It):0],[dt,It]),pt=d.useRef({height:1,width:1,x:0,y:0}),pr=d.useMemo(()=>({x:pt.current.x,y:Pt,width:pt.current.width??1,height:pt.current.height??1,ty:it}),[it,Pt]),nn=d.useRef(!1),[Ne,rn,At]=lf(pr);pt.current=Ne;const _n=(Ne.height??1)>1;d.useLayoutEffect(()=>{if(dt!==void 0&&u.current!==null&&_n){if(u.current.scrollTop===dt)return;u.current.scrollTop=dt,u.current.scrollTop!==dt&&At(),nn.current=!0}},[dt,_n,At]);const on=(Ne.width??1)>1;d.useLayoutEffect(()=>{if(Ke!==void 0&&u.current!==null&&on){if(u.current.scrollLeft===Ke)return;u.current.scrollLeft=Ke,u.current.scrollLeft!==Ke&&At(),nn.current=!0}},[Ke,on,At]);const jr=Ne.x+$,mn=Ne.y,Ft=d.useRef(null),Lt=d.useCallback(m=>{m===!0?Ft.current?.focus():window.requestAnimationFrame(()=>{Ft.current?.focus()})},[]),_t=Rt?v+1:v,Zt=d.useCallback(m=>{const A=$===0?m:m.map(W=>({...W,location:[W.location[0]-$,W.location[1]]})),_=ie?.(A);if(_!==!0)for(const W of A)fe?.(W.location,W.value);return _},[fe,ie,$]),[Gn,Hi]=d.useState(),No=V.current!==void 0&&V.current.range.width*V.current.range.height>1?V.current.range:void 0,Tc=d.useMemo(()=>{if((gt===void 0||gt.length===0)&&No===void 0&&Gn===void 0)return;const m=[];if(gt!==void 0)for(const A of gt){const _=pe.length-A.range.x-$;_>0&&m.push({color:A.color,range:{...A.range,x:A.range.x+$,width:Math.min(_,A.range.width)},style:A.style})}return Gn!==void 0&&m.push({color:Hr(ae.accentColor,0),range:Gn,style:"dashed"}),No!==void 0&&m.push({color:Hr(ae.accentColor,.5),range:No,style:"solid-outline"}),m.length>0?m:void 0},[Gn,No,gt,pe.length,ae.accentColor,$]),$s=d.useRef(pe);$s.current=pe;const Bt=d.useCallback(([m,A],_=!1)=>{const W=Rt&&A===_t-1;if(m===0&&$t)return W?ts:{kind:Qt.Marker,allowOverlay:!1,checked:V?.rows.hasIndex(A)===!0,markerKind:p==="clickable-number"?"number":p,row:qe+A,drawHandle:en!==void 0,cursor:p==="clickable-number"?"pointer":void 0};if(W){const z=m===$?kt?.hint??"":"",N=$s.current[m];if(N?.trailingRowOptions?.disabled===!0)return ts;{const K=N?.trailingRowOptions?.hint??z,ee=N?.trailingRowOptions?.addIcon??kt?.addIcon;return{kind:Qt.NewRow,hint:K,allowOverlay:!1,icon:ee}}}else{const U=m-$;if(_||Jt?.strict===!0){const N=pt.current,K=N.x>U||U>N.x+N.width||N.y>A||A>N.y+N.height||A>=Fi.current,ee=U===N.extras?.selected?.[0]&&A===N.extras?.selected[1];let ue=!1;if(N.extras?.freezeRegions!==void 0){for(const Ee of N.extras.freezeRegions)if(Ci(Ee,U,A)){ue=!0;break}}if(K&&!ee&&!ue)return ts}let z=P([U,A]);return $!==0&&z.span!==void 0&&(z={...z,span:[z.span[0]+$,z.span[1]+$]}),z}},[Rt,_t,$t,V?.rows,en,p,$,kt?.hint,kt?.addIcon,Jt?.strict,P,qe]),zi=d.useCallback(m=>{let A=zt?.(m)??{name:m};return te!==void 0&&m!==""&&(A={icon:A.icon,name:A.name,overrideTheme:A.overrideTheme,actions:[...A.actions??[],{title:"Rename",icon:"renameIcon",onClick:_=>Ni({group:A.name,bounds:_.bounds})}]}),A},[zt,te]),$o=d.useCallback(m=>{const[A,_]=m.cell,W=pe[A],B=W?.group!==void 0?zi(W.group)?.overrideTheme:void 0,U=W?.themeOverride,z=E?.(_);i({...m,theme:$n(ae,B,U,z,m.content.themeOverride)})},[E,pe,zi,ae]),wr=d.useCallback((m,A,_)=>{if(V.current===void 0)return;const[W,B]=V.current.cell,U=Bt([W,B]);if(U.kind!==oe.Boolean&&U.allowOverlay){let z=U;if(_!==void 0)switch(z.kind){case oe.Number:{const N=Dd(()=>_==="-"?-0:Number.parseFloat(_),0);z={...z,data:Number.isNaN(N)?0:N};break}case oe.Text:case oe.Markdown:case oe.Uri:z={...z,data:_};break}$o({target:m,content:z,initialValue:_,cell:[W,B],highlight:_===void 0,forceEditMode:_!==void 0})}else U.kind===oe.Boolean&&A&&U.readonly!==!0&&(Zt([{location:V.current.cell,value:{...U,data:Cc(U.data)}}]),Ft.current?.damage([{cell:V.current.cell}]))},[Bt,V,Zt,$o]),Ws=d.useCallback((m,A)=>{const _=Ft.current?.getBounds(m,A);if(_===void 0||u.current===null)return;const W=Bt([m,A]);W.allowOverlay&&$o({target:_,content:W,initialValue:void 0,highlight:!0,cell:[m,A],forceEditMode:!0})},[Bt,$o]),ht=d.useCallback((m,A,_="both",W=0,B=0,U=void 0)=>{if(u.current!==null){const z=Ft.current,N=l.current,K=typeof m!="number"?m.unit==="cell"?m.amount:void 0:m,ee=typeof A!="number"?A.unit==="cell"?A.amount:void 0:A,ue=typeof m!="number"&&m.unit==="px"?m.amount:void 0,Ee=typeof A!="number"&&A.unit==="px"?A.amount:void 0;if(z!==null&&N!==null){let ke={x:0,y:0,width:0,height:0},xe=0,Fe=0;if((K!==void 0||ee!==void 0)&&(ke=z.getBounds((K??0)+$,ee??0)??ke,ke.width===0||ke.height===0))return;const Je=N.getBoundingClientRect(),Ct=Je.width/N.offsetWidth;if(ue!==void 0&&(ke={...ke,x:ue-Je.left-u.current.scrollLeft,width:1}),Ee!==void 0&&(ke={...ke,y:Ee+Je.top-u.current.scrollTop,height:1}),ke!==void 0){const st={x:ke.x-W,y:ke.y-B,width:ke.width+2*W,height:ke.height+2*B};let kr=0;for(let Xi=0;Xi<tt;Xi++)kr+=ge[Xi].width;let Gr=0;const Zr=Me+(Wt?1:0);Zr>0&&(Gr=Fr(_t,Zr,It));let wn=kr*Ct+Je.left+$*kn*Ct,Sr=Je.right,Jn=Je.top+ot*Ct,Rr=Je.bottom-Gr*Ct;const Uo=ke.width+W*2;switch(U?.hAlign){case"start":Sr=wn+Uo;break;case"end":wn=Sr-Uo;break;case"center":wn=Math.floor((wn+Sr)/2)-Uo/2,Sr=wn+Uo;break}const qo=ke.height+B*2;switch(U?.vAlign){case"start":Rr=Jn+qo;break;case"end":Jn=Rr-qo;break;case"center":Jn=Math.floor((Jn+Rr)/2)-qo/2,Rr=Jn+qo;break}wn>st.x?xe=st.x-wn:Sr<st.x+st.width&&(xe=st.x+st.width-Sr),Jn>st.y?Fe=st.y-Jn:Rr<st.y+st.height&&(Fe=st.y+st.height-Rr),_==="vertical"||typeof m=="number"&&m<tt?xe=0:(_==="horizontal"||typeof A=="number"&&A>=_t-Zr)&&(Fe=0),(xe!==0||Fe!==0)&&(Ct!==1&&(xe/=Ct,Fe/=Ct),u.current.scrollTo(xe+u.current.scrollLeft,Fe+u.current.scrollTop))}}}},[$,Me,kn,ot,tt,ge,_t,Wt,It]),Bs=d.useRef(Ws),js=d.useRef(P),Fi=d.useRef(v);Bs.current=Ws,js.current=P,Fi.current=v;const vr=d.useCallback(async(m,A=!0)=>{if(pe[m]?.trailingRowOptions?.disabled===!0)return;const W=ve?.();let B,U=!0;W!==void 0&&(B=await W,B==="top"&&(U=!1),typeof B=="number"&&(U=!1));let z=0;const N=()=>{if(Fi.current<=v){z<500&&window.setTimeout(N,z),z=50+z*2;return}const K=typeof B=="number"?B:U?v:0;Xo.current(m-$,K),L({cell:[m,K],range:{x:m,y:K,width:1,height:1}},!1,!1,"edit");const ee=js.current([m-$,K]);ee.allowOverlay&&uo(ee)&&ee.readonly!==!0&&A&&window.setTimeout(()=>{Bs.current(m,K)},0)};N()},[pe,ve,$,v,L]),Wo=d.useCallback(m=>{const A=ge[m]?.trailingRowOptions?.targetColumn??kt?.targetColumn;if(typeof A=="number")return A+($t?1:0);if(typeof A=="object"){const _=R.indexOf(A);if(_>=0)return _+($t?1:0)}},[ge,R,$t,kt?.targetColumn]),An=d.useRef(),yr=d.useRef(),Vr=d.useCallback((m,A)=>{const[_,W]=A;return $n(ae,pe[_]?.themeOverride,E?.(W),m.themeOverride)},[E,pe,ae]),Xr=d.useCallback(m=>{const A=pi.value?m.metaKey:m.ctrlKey,_=A&&De==="multi",W=A&&se==="multi",[B,U]=m.location,z=V.columns,N=V.rows,[K,ee]=V.current?.cell??[];if(m.kind==="cell"){if(yr.current=void 0,Zn.current=[B,U],B===0&&$t){if(Rt===!0&&U===v||p==="number"||De==="none")return;const ue=Bt(m.location);if(ue.kind!==Qt.Marker)return;if(en!==void 0){const xe=Q(ue);Ut(xe?.kind===Qt.Marker);const Fe=xe?.onClick?.({...m,cell:ue,posX:m.localEventX,posY:m.localEventY,bounds:m.bounds,theme:Vr(ue,m.location),preventDefault:()=>{}});if(Fe===void 0||Fe.checked===ue.checked)return}i(void 0),Lt();const Ee=N.hasIndex(U),ke=An.current;if(De==="multi"&&(m.shiftKey||m.isLongTouch===!0)&&ke!==void 0&&N.hasIndex(ke)){const xe=[Math.min(ke,U),Math.max(ke,U)+1];_||Ce==="multi"?Y(void 0,xe,!0):Y(He.fromSingleSelection(xe),void 0,_)}else _||m.isTouch||Ce==="multi"?Ee?Y(N.remove(U),void 0,!0):(Y(void 0,U,!0),An.current=U):Ee&&N.length===1?Y(He.empty(),void 0,A):(Y(He.fromSingleSelection(U),void 0,A),An.current=U)}else if(B>=$&&Rt&&U===v){const ue=Wo(B);vr(ue??B)}else if(K!==B||ee!==U){const ue=Bt(m.location),Ee=Q(ue);if(Ee?.onSelect!==void 0){let Fe=!1;if(Ee.onSelect({...m,cell:ue,posX:m.localEventX,posY:m.localEventY,bounds:m.bounds,preventDefault:()=>Fe=!0,theme:Vr(ue,m.location)}),Fe)return}const ke=Wt&&U===v,xe=Wt&&V!==void 0&&V.current?.cell[1]===v;if((m.shiftKey||m.isLongTouch===!0)&&K!==void 0&&ee!==void 0&&V.current!==void 0&&!xe){if(ke)return;const Fe=Math.min(B,K),Je=Math.max(B,K),Ct=Math.min(U,ee),st=Math.max(U,ee);L({...V.current,range:{x:Fe,y:Ct,width:Je-Fe+1,height:st-Ct+1}},!0,A,"click"),An.current=void 0,Lt()}else L({cell:[B,U],range:{x:B,y:U,width:1,height:1}},!0,A,"click"),An.current=void 0,i(void 0),Lt()}}else if(m.kind==="header")if(Zn.current=[B,U],i(void 0),$t&&B===0)An.current=void 0,yr.current=void 0,De==="multi"&&(N.length!==v?Y(He.fromSingleSelection([0,v]),void 0,A):Y(He.empty(),void 0,A),Lt());else{const ue=yr.current;if(se==="multi"&&(m.shiftKey||m.isLongTouch===!0)&&ue!==void 0&&z.hasIndex(ue)){const Ee=[Math.min(ue,B),Math.max(ue,B)+1];W?re(void 0,Ee,A):re(He.fromSingleSelection(Ee),void 0,A)}else W?(z.hasIndex(B)?re(z.remove(B),void 0,A):re(void 0,B,A),yr.current=B):se!=="none"&&(re(He.fromSingleSelection(B),void 0,A),yr.current=B);An.current=void 0,Lt()}else m.kind===Xt?Zn.current=[B,U]:m.kind===wi&&!m.isMaybeScrollbar&&(Dt(ii,!1),i(void 0),Lt(),mt?.(),An.current=void 0,yr.current=void 0)},[vr,se,Lt,Q,Wo,Bt,V,$t,Wt,mt,en,$,p,De,Ce,v,L,Dt,re,Y,Rt,Vr]),Ur=d.useRef(!1),Zn=d.useRef(),Vs=d.useRef(Ne),pn=d.useRef(),Ic=d.useCallback(m=>{if(br.current=!1,Vs.current=pt.current,m.button!==0&&m.button!==1){pn.current=void 0;return}const A=performance.now();pn.current={button:m.button,time:A,location:m.location},m?.kind==="header"&&(Ur.current=!0);const _=m.kind==="cell"&&m.isFillHandle;!_&&m.kind!=="cell"&&m.isEdge||(c({previousSelection:V,fillHandle:_}),Zn.current=void 0,!m.isTouch&&m.button===0&&!_?Xr(m):!m.isTouch&&m.button===1&&(Zn.current=m.location))},[V,Xr]),[Oi,Ni]=d.useState(),Xs=d.useCallback(m=>{if(m.kind!==Xt||se!=="multi")return;const A=pi.value?m.metaKey:m.ctrlKey,[_]=m.location,W=V.columns;if(_<$)return;const B=pe[_];let U=_,z=_;for(let N=_-1;N>=$&&So(B.group,pe[N].group);N--)U--;for(let N=_+1;N<pe.length&&So(B.group,pe[N].group);N++)z++;if(Lt(),A)if(W.hasAll([U,z+1])){let N=W;for(let K=U;K<=z;K++)N=N.remove(K);re(N,void 0,A)}else re(void 0,[U,z+1],A);else re(He.fromSingleSelection([U,z+1]),void 0,A)},[se,Lt,V.columns,pe,$,re]),br=d.useRef(!1),Bo=d.useCallback(async m=>{if(xt!==void 0&&fr!==void 0){const A=pt.current.y,_=pt.current.height;let W=xt({x:m,y:A,width:1,height:Math.min(_,v-A)},Gt.current.signal);typeof W!="object"&&(W=await W());const B=ge[m-$],z=document.createElement("canvas").getContext("2d",{alpha:!1});if(z!==null){z.font=ae.baseFontFull;const N=dc(z,ae,B,0,W,Cn,In,!1,Q);fr?.(B,N.width,m,N.width)}}},[ge,xt,In,ae,Cn,fr,$,v,Q]),[Dc,$i]=d.useState(),xr=d.useCallback(async(m,A)=>{const _=m.current?.range;if(_===void 0||xt===void 0||A.current===void 0)return;const W=A.current.range;if(C!==void 0){let N=!1;if(C({fillDestination:{...W,x:W.x-$},patternSource:{..._,x:_.x-$},preventDefault:()=>N=!0}),N)return}let B=xt(_,Gt.current.signal);typeof B!="object"&&(B=await B());const U=B,z=[];for(let N=0;N<W.width;N++)for(let K=0;K<W.height;K++){const ee=[W.x+N,W.y+K];if(tc(ee,_))continue;const ue=U[K%_.height][N%_.width];Pr(ue)||!uo(ue)||z.push({location:ee,value:{...ue}})}Zt(z),Ft.current?.damage(z.map(N=>({cell:N.location})))},[xt,Zt,C,$]),Us=d.useCallback(()=>{if(V.current===void 0||V.current.range.width<=1)return;const m={...V,current:{...V.current,range:{...V.current.range,width:1}}};xr(m,V)},[xr,V]),qs=d.useCallback(()=>{if(V.current===void 0||V.current.range.height<=1)return;const m={...V,current:{...V.current,range:{...V.current.range,height:1}}};xr(m,V)},[xr,V]),Pc=d.useCallback((m,A)=>{const _=a;if(c(void 0),Hi(void 0),$i(void 0),Ur.current=!1,A)return;if(_?.fillHandle===!0&&V.current!==void 0&&_.previousSelection?.current!==void 0){if(Gn===void 0)return;const ue={...V,current:{...V.current,range:hc(_.previousSelection.current.range,Gn)}};xr(_.previousSelection,ue),Dt(ue,!0);return}const[W,B]=m.location,[U,z]=Zn.current??[],N=()=>{br.current=!0},K=ue=>{const Ee=ue.isTouch||U===W&&z===B;if(Ee&&H?.([W-$,B],{...ue,preventDefault:N}),ue.button===1)return!br.current;if(!br.current){const ke=Bt(m.location),xe=Q(ke);if(xe!==void 0&&xe.onClick!==void 0&&Ee){const Je=xe.onClick({...ue,cell:ke,posX:ue.localEventX,posY:ue.localEventY,bounds:ue.bounds,theme:Vr(ke,m.location),preventDefault:N});Je!==void 0&&!Pr(Je)&&Ir(Je)&&(Zt([{location:ue.location,value:Je}]),Ft.current?.damage([{cell:ue.location}]))}if(br.current||V.current===void 0)return!1;let Fe=!1;switch(Ue){case"double-click":case"second-click":{if(_?.previousSelection?.current?.cell===void 0)break;const[Je,Ct]=V.current.cell,[st,kr]=_.previousSelection.current.cell;Fe=W===Je&&W===st&&B===Ct&&B===kr&&(ue.isDoubleClick===!0||Ue==="second-click");break}case"single-click":{Fe=!0;break}}if(Fe)return I?.([W-$,B]),wr(ue.bounds,!1),!0}return!1},ee=m.location[0]-$;if(m.isTouch){const ue=pt.current,Ee=Vs.current;if(ue.x!==Ee.x||ue.y!==Ee.y)return;if(m.isLongTouch===!0){if(m.kind==="cell"&&yo(V.current?.cell,m.location)){X?.([ee,m.location[1]],{...m,preventDefault:N});return}else if(m.kind==="header"&&V.columns.hasIndex(W)){Z?.(ee,{...m,preventDefault:N});return}else if(m.kind===Xt){if(ee<0)return;ne?.(ee,{...m,preventDefault:N});return}}m.kind==="cell"?K(m)||Xr(m):m.kind===Xt?j?.(ee,{...m,preventDefault:N}):(m.kind===Fn&&T?.(ee,{...m,preventDefault:N}),Xr(m));return}if(m.kind==="header"){if(ee<0)return;m.isEdge?m.isDoubleClick===!0&&Bo(W):m.button===0&&W===U&&B===z&&T?.(ee,{...m,preventDefault:N})}if(m.kind===Xt){if(ee<0)return;m.button===0&&W===U&&B===z&&(j?.(ee,{...m,preventDefault:N}),br.current||Xs(m))}m.kind==="cell"&&(m.button===0||m.button===1)&&K(m),Zn.current=void 0},[a,V,$,Gn,xr,Dt,H,Bt,Q,Ue,Vr,Zt,I,wr,X,Z,ne,Xr,j,T,Bo,Xs]),_c=d.useCallback(m=>{const A={...m,location:[m.location[0]-$,m.location[1]]};Re?.(A),a!==void 0&&m.buttons===0&&(c(void 0),Hi(void 0),$i(void 0),Ur.current=!1),$i(_=>Ur.current?[m.scrollEdge[0],0]:m.scrollEdge[0]===_?.[0]&&m.scrollEdge[1]===_[1]?_:a===void 0||(pn.current?.location[0]??0)<$?void 0:m.scrollEdge)},[a,Re,$]),Ac=d.useCallback((m,A)=>{Tt?.(m-$,A)},[Tt,$]),Cr=V?.current?.cell,Lc=d.useCallback((m,A,_,W,B,U)=>{nn.current=!1;let z=Cr;z!==void 0&&(z=[z[0]-$,z[1]]);const N=tt===0?void 0:{x:0,y:m.y,width:tt,height:m.height},K=[];N!==void 0&&K.push(N),Me>0&&(K.push({x:m.x-$,y:v-Me,width:m.width,height:Me}),tt>0&&K.push({x:0,y:v-Me,width:tt,height:Me}));const ee={x:m.x-$,y:m.y,width:m.width,height:Rt&&m.y+m.height>=v?m.height-1:m.height,tx:B,ty:U,extras:{selected:z,freezeRegion:N,freezeRegions:K}};pt.current=ee,rn(ee),le([A,_,W]),yt?.(ee,ee.tx,ee.ty,ee.extras)},[Cr,$,Rt,v,tt,Me,rn,yt]),Hc=Er(Oe,d.useCallback((m,A)=>{Oe?.(m-$,A-$),se!=="none"&&re(He.fromSingleSelection(A),void 0,!0)},[se,Oe,$,re])),Wi=d.useRef(!1),zc=d.useCallback(m=>{if(m.location[0]===0&&$>0){m.preventDefault();return}Le?.({...m,location:[m.location[0]-$,m.location[1]]}),m.defaultPrevented()||(Wi.current=!0),c(void 0)},[Le,$]),Fc=d.useCallback(()=>{Wi.current=!1},[]),Bi=d.useRef(),ji=d.useCallback(m=>{if(!bc(m,Bi.current)&&(Bi.current=m,!(pn?.current?.button!==void 0&&pn.current.button>=1))){if(m.buttons!==0&&a!==void 0&&pn.current?.location[0]===0&&m.location[0]===0&&$===1&&De==="multi"&&a.previousSelection&&!a.previousSelection.rows.hasIndex(pn.current.location[1])&&V.rows.hasIndex(pn.current.location[1])){const A=Math.min(pn.current.location[1],m.location[1]),_=Math.max(pn.current.location[1],m.location[1])+1;Y(He.fromSingleSelection([A,_]),void 0,!1)}if(m.buttons!==0&&a!==void 0&&V.current!==void 0&&!Wi.current&&!Ur.current&&(he==="rect"||he==="multi-rect")){const[A,_]=V.current.cell;let[W,B]=m.location;if(B<0&&(B=pt.current.y),a.fillHandle===!0&&a.previousSelection?.current!==void 0){const U=a.previousSelection.current.range;B=Math.min(B,Wt?v-1:v);const z=Jh(U,W,B,ct);Hi(z)}else{if(Wt&&_===v)return;if(Wt&&B===v)if(m.kind===wi)B--;else return;W=Math.max(W,$);const N=W-A,K=B-_,ee={x:N>=0?A:W,y:K>=0?_:B,width:Math.abs(N)+1,height:Math.abs(K)+1};L({...V.current,range:ee},!0,!1,"drag")}}un?.({...m,location:[m.location[0]-$,m.location[1]]})}},[ct,a,$,De,V,he,un,Y,Wt,v,L]),Oc=d.useCallback(()=>{const m=Bi.current;if(m===void 0)return;const[A,_]=m.scrollEdge;let[W,B]=m.location;const U=pt.current;A===-1?W=U.extras?.freezeRegion?.x??U.x:A===1&&(W=U.x+U.width),_===-1?B=Math.max(0,U.y):_===1&&(B=Math.min(v-1,U.y+U.height)),W=an(W,0,pe.length-1),B=an(B,0,v-1),ji({...m,location:[W,B]})},[pe.length,ji,v]);om(Dc,u,Oc);const sn=d.useCallback(m=>{if(V.current===void 0)return;const[A,_]=m,[W,B]=V.current.cell,U=V.current.range;let z=U.x,N=U.x+U.width,K=U.y,ee=U.y+U.height;if(_!==0)switch(_){case 2:{ee=v,K=B,ht(0,ee,"vertical");break}case-2:{K=0,ee=B+1,ht(0,K,"vertical");break}case 1:{K<B?(K++,ht(0,K,"vertical")):(ee=Math.min(v,ee+1),ht(0,ee,"vertical"));break}case-1:{ee>B+1?(ee--,ht(0,ee,"vertical")):(K=Math.max(0,K-1),ht(0,K,"vertical"));break}default:ko()}if(A!==0)if(A===2)N=pe.length,z=W,ht(N-1-$,0,"horizontal");else if(A===-2)z=$,N=W+1,ht(z-$,0,"horizontal");else{let ue=[];if(xt!==void 0){const Ee=xt({x:z,y:K,width:N-z-$,height:ee-K},Gt.current.signal);typeof Ee=="object"&&(ue=cm(Ee))}if(A===1){let Ee=!1;if(z<W){if(ue.length>0){const ke=tr(z+1,W+1).find(xe=>!ue.includes(xe-$));ke!==void 0&&(z=ke,Ee=!0)}else z++,Ee=!0;Ee&&ht(z,0,"horizontal")}Ee||(N=Math.min(pe.length,N+1),ht(N-1-$,0,"horizontal"))}else if(A===-1){let Ee=!1;if(N>W+1){if(ue.length>0){const ke=tr(N-1,W,-1).find(xe=>!ue.includes(xe-$));ke!==void 0&&(N=ke,Ee=!0)}else N--,Ee=!0;Ee&&ht(N-$,0,"horizontal")}Ee||(z=Math.max($,z-1),ht(z-$,0,"horizontal"))}else ko()}L({cell:V.current.cell,range:{x:z,y:K,width:N-z,height:ee-K}},!0,!1,"keyboard-select")},[xt,V,pe.length,$,v,ht,L]),Ln=d.useCallback((m,A,_,W)=>{const B=_t-(_?0:1);if(m=an(m,$,ge.length-1+$),A=an(A,0,B),m===Cr?.[0]&&A===Cr?.[1])return!1;if(W&&V.current!==void 0){const U=[...V.current.rangeStack];(V.current.range.width>1||V.current.range.height>1)&&U.push(V.current.range),Dt({...V,current:{cell:[m,A],range:{x:m,y:A,width:1,height:1},rangeStack:U}},!0)}else L({cell:[m,A],range:{x:m,y:A,width:1,height:1}},!0,!1,"keyboard-nav");return h.current!==void 0&&h.current[0]===m&&h.current[1]===A&&(h.current=void 0),ht(m-$,A),!0},[_t,$,ge.length,Cr,V,ht,Dt,L]),Nc=d.useCallback((m,A)=>{o?.cell!==void 0&&m!==void 0&&Ir(m)&&(Zt([{location:o.cell,value:m}]),window.requestAnimationFrame(()=>{Ft.current?.damage([{cell:o.cell}])})),Lt(!0),i(void 0);const[_,W]=A;if(V.current!==void 0&&(_!==0||W!==0)){const B=V.current.cell[1]===_t-1&&m!==void 0;Ln(an(V.current.cell[0]+_,0,pe.length-1),an(V.current.cell[1]+W,0,_t-1),B,!1)}F?.(m,A)},[o?.cell,Lt,V,F,Zt,_t,Ln,pe.length]),$c=d.useMemo(()=>`gdg-overlay-${am++}`,[]),Qn=d.useCallback(m=>{Lt();const A=[];for(let _=m.x;_<m.x+m.width;_++)for(let W=m.y;W<m.y+m.height;W++){const B=P([_-$,W]);if(!B.allowOverlay&&B.kind!==oe.Boolean)continue;let U;if(B.kind===oe.Custom){const z=Q(B),N=z?.provideEditor?.(B);z?.onDelete!==void 0?U=z.onDelete(B):zd(N)&&(U=N?.deletedValue?.(B))}else(Ir(B)&&B.allowOverlay||B.kind===oe.Boolean)&&(U=Q(B)?.onDelete?.(B));U!==void 0&&!Pr(U)&&Ir(U)&&A.push({location:[_,W],value:U})}Zt(A),Ft.current?.damage(A.map(_=>({cell:_.location})))},[Lt,P,Q,Zt,$]),qr=o!==void 0,Ks=d.useCallback(m=>{const A=()=>{m.stopPropagation(),m.preventDefault()},_={didMatch:!1},{bounds:W}=m,B=V.columns,U=V.rows,z=tn;if(!qr&&Te(z.clear,m,_))Dt(ii,!1),mt?.();else if(!qr&&Te(z.selectAll,m,_))Dt({columns:He.empty(),rows:He.empty(),current:{cell:V.current?.cell??[$,0],range:{x:$,y:0,width:R.length,height:v},rangeStack:[]}},!1);else if(Te(z.search,m,_))s?.current?.focus({preventScroll:!0}),Fo(!0);else if(Te(z.delete,m,_)){const xe=mr?.(V)??!0;if(xe!==!1){const Fe=xe===!0?V:xe;if(Fe.current!==void 0){Qn(Fe.current.range);for(const Je of Fe.current.rangeStack)Qn(Je)}for(const Je of Fe.rows)Qn({x:$,y:Je,width:R.length,height:1});for(const Je of Fe.columns)Qn({x:Je,y:0,width:1,height:v})}}if(_.didMatch)return A(),!0;if(V.current===void 0)return!1;let[N,K]=V.current.cell,ee=!1,ue=!1;Te(z.scrollToSelectedCell,m,_)?Xo.current(N-$,K):se!=="none"&&Te(z.selectColumn,m,_)?B.hasIndex(N)?re(B.remove(N),void 0,!0):se==="single"?re(He.fromSingleSelection(N),void 0,!0):re(void 0,N,!0):De!=="none"&&Te(z.selectRow,m,_)?U.hasIndex(K)?Y(U.remove(K),void 0,!0):De==="single"?Y(He.fromSingleSelection(K),void 0,!0):Y(void 0,K,!0):!qr&&W!==void 0&&Te(z.activateCell,m,_)?K===v&&Rt?window.setTimeout(()=>{const xe=Wo(N);vr(xe??N)},0):(I?.([N-$,K]),wr(W,!0)):V.current.range.height>1&&Te(z.downFill,m,_)?qs():V.current.range.width>1&&Te(z.rightFill,m,_)?Us():Te(z.goToNextPage,m,_)?K+=Math.max(1,pt.current.height-4):Te(z.goToPreviousPage,m,_)?K-=Math.max(1,pt.current.height-4):Te(z.goToFirstCell,m,_)?(i(void 0),K=0,N=0):Te(z.goToLastCell,m,_)?(i(void 0),K=Number.MAX_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER):Te(z.selectToFirstCell,m,_)?(i(void 0),sn([-2,-2])):Te(z.selectToLastCell,m,_)?(i(void 0),sn([2,2])):qr?(Te(z.closeOverlay,m,_)&&i(void 0),Te(z.acceptOverlayDown,m,_)&&(i(void 0),K++),Te(z.acceptOverlayUp,m,_)&&(i(void 0),K--),Te(z.acceptOverlayLeft,m,_)&&(i(void 0),N--),Te(z.acceptOverlayRight,m,_)&&(i(void 0),N++)):(Te(z.goDownCell,m,_)?K+=1:Te(z.goUpCell,m,_)?K-=1:Te(z.goRightCell,m,_)?N+=1:Te(z.goLeftCell,m,_)?N-=1:Te(z.goDownCellRetainSelection,m,_)?(K+=1,ee=!0):Te(z.goUpCellRetainSelection,m,_)?(K-=1,ee=!0):Te(z.goRightCellRetainSelection,m,_)?(N+=1,ee=!0):Te(z.goLeftCellRetainSelection,m,_)?(N-=1,ee=!0):Te(z.goToLastRow,m,_)?K=v-1:Te(z.goToFirstRow,m,_)?K=Number.MIN_SAFE_INTEGER:Te(z.goToLastColumn,m,_)?N=Number.MAX_SAFE_INTEGER:Te(z.goToFirstColumn,m,_)?N=Number.MIN_SAFE_INTEGER:(he==="rect"||he==="multi-rect")&&(Te(z.selectGrowDown,m,_)?sn([0,1]):Te(z.selectGrowUp,m,_)?sn([0,-1]):Te(z.selectGrowRight,m,_)?sn([1,0]):Te(z.selectGrowLeft,m,_)?sn([-1,0]):Te(z.selectToLastRow,m,_)?sn([0,2]):Te(z.selectToFirstRow,m,_)?sn([0,-2]):Te(z.selectToLastColumn,m,_)?sn([2,0]):Te(z.selectToFirstColumn,m,_)&&sn([-2,0])),ue=_.didMatch);const Ee=Ln(N,K,!1,ee),ke=_.didMatch;return ke&&(Ee||!ue||Un)&&A(),ke},[qr,V,tn,se,De,he,$,v,Ln,Dt,mt,R.length,mr,Un,Qn,re,Y,Rt,Wo,vr,I,wr,qs,Us,sn]),Kr=d.useCallback(m=>{let A=!1;if(_e!==void 0&&_e({...m,cancel:()=>{A=!0}}),A||Ks(m)||V.current===void 0)return;const[_,W]=V.current.cell,B=pt.current;if(!m.metaKey&&!m.ctrlKey&&V.current!==void 0&&m.key.length===1&&/[ -~]/g.test(m.key)&&m.bounds!==void 0&&uo(P([_-$,Math.max(0,Math.min(W,v-1))]))){if((!Wt||W!==v)&&(B.y>W||W>B.y+B.height||B.x>_||_>B.x+B.width))return;wr(m.bounds,!0,m.key),m.stopPropagation(),m.preventDefault()}},[_e,Ks,V,P,$,v,Wt,wr]),Wc=d.useCallback((m,A)=>{const _=m.location[0]-$;if(m.kind==="header"&&Z?.(_,{...m,preventDefault:A}),m.kind===Xt){if(_<0)return;ne?.(_,{...m,preventDefault:A})}if(m.kind==="cell"){const[W,B]=m.location;X?.([_,B],{...m,preventDefault:A}),rh(V,m.location)||Ln(W,B,!1,!1)}},[V,X,ne,Z,$,Ln]),Vi=d.useCallback(async m=>{if(!tn.paste)return;function A(z,N,K,ee){const ue=typeof K=="object"?K?.join(`
`)??"":K?.toString()??"";if(!Pr(z)&&uo(z)&&z.readonly!==!0){const Ee=S?.(ue,z);if(Ee!==void 0&&Ir(Ee))return{location:N,value:Ee};const ke=Q(z);if(ke===void 0)return;if(ke.kind===oe.Custom){Ut(z.kind===oe.Custom);const xe=ke.onPaste?.(ue,z.data);return xe===void 0?void 0:{location:N,value:{...z,data:xe}}}else{const xe=ke.onPaste?.(ue,z,{formatted:ee,formattedString:typeof ee=="string"?ee:ee?.join(`
`),rawValue:K});return xe===void 0?void 0:(Ut(xe.kind===z.kind),{location:N,value:xe})}}}const _=V.columns,W=V.rows,B=u.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0;let U;if(V.current!==void 0?U=[V.current.range.x,V.current.range.y]:_.length===1?U=[_.first()??0,0]:W.length===1&&(U=[$,W.first()??0]),B&&U!==void 0){let z,N;const K="text/plain",ee="text/html";if(navigator.clipboard.read!==void 0){const xe=await navigator.clipboard.read();for(const Fe of xe){if(Fe.types.includes(ee)){const Ct=await(await Fe.getType(ee)).text(),st=Xl(Ct);if(st!==void 0){z=st;break}}Fe.types.includes(K)&&(N=await(await Fe.getType(K)).text())}}else if(navigator.clipboard.readText!==void 0)N=await navigator.clipboard.readText();else if(m!==void 0&&m?.clipboardData!==null){if(m.clipboardData.types.includes(ee)){const xe=m.clipboardData.getData(ee);z=Xl(xe)}z===void 0&&m.clipboardData.types.includes(K)&&(N=m.clipboardData.getData(K))}else return;const[ue,Ee]=U,ke=[];do{if(lt===void 0){const xe=Bt(U),Fe=N??z?.map(Ct=>Ct.map(st=>st.rawValue).join("	")).join("	")??"",Je=A(xe,U,Fe,void 0);Je!==void 0&&ke.push(Je);break}if(z===void 0){if(N===void 0)return;z=Zg(N)}if(lt===!1||typeof lt=="function"&&lt?.([U[0]-$,U[1]],z.map(xe=>xe.map(Fe=>Fe.rawValue?.toString()??"")))!==!0)return;for(const[xe,Fe]of z.entries()){if(xe+Ee>=v)break;for(const[Je,Ct]of Fe.entries()){const st=[Je+ue,xe+Ee],[kr,Gr]=st;if(kr>=pe.length||Gr>=_t)continue;const Zr=Bt(st),wn=A(Zr,st,Ct.rawValue,Ct.formatted);wn!==void 0&&ke.push(wn)}}}while(!1);Zt(ke),Ft.current?.damage(ke.map(xe=>({cell:xe.location})))}},[S,Q,Bt,V,tn.paste,pe.length,Zt,_t,lt,$,v]);Et("paste",Vi,g,!1,!0);const Yr=d.useCallback(async(m,A)=>{if(!tn.copy)return;const _=A===!0||u.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0,W=V.columns,B=V.rows,U=(z,N)=>{if(!Pe)ql(z,N,m);else{const K=N.map(ee=>({kind:oe.Text,data:R[ee].title,displayData:R[ee].title,allowOverlay:!1}));ql([K,...z],N,m)}};if(_&&xt!==void 0){if(V.current!==void 0){let z=xt(V.current.range,Gt.current.signal);typeof z!="object"&&(z=await z()),U(z,tr(V.current.range.x-$,V.current.range.x+V.current.range.width-$))}else if(B!==void 0&&B.length>0){const N=[...B].map(K=>{const ee=xt({x:$,y:K,width:R.length,height:1},Gt.current.signal);return typeof ee=="object"?ee[0]:ee().then(ue=>ue[0])});if(N.some(K=>K instanceof Promise)){const K=await Promise.all(N);U(K,tr(R.length))}else U(N,tr(R.length))}else if(W.length>0){const z=[],N=[];for(const K of W){let ee=xt({x:K,y:0,width:1,height:v},Gt.current.signal);typeof ee!="object"&&(ee=await ee()),z.push(ee),N.push(K-$)}if(z.length===1)U(z[0],N);else{const K=z.reduce((ee,ue)=>ee.map((Ee,ke)=>[...Ee,...ue[ke]]));U(K,N)}}}},[R,xt,V,tn.copy,$,v,Pe]);Et("copy",Yr,g,!1,!1);const Bc=d.useCallback(async m=>{if(!(!tn.cut||!(u.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0))&&(await Yr(m),V.current!==void 0)){let _={current:{cell:V.current.cell,range:V.current.range,rangeStack:[]},rows:He.empty(),columns:He.empty()};const W=mr?.(_);if(W===!1||(_=W===!0?_:W,_.current===void 0))return;Qn(_.current.range)}},[Qn,V,tn.cut,Yr,mr]);Et("cut",Bc,g,!1,!1);const jc=d.useCallback((m,A)=>{if(Se!==void 0){$!==0&&(m=m.map(B=>[B[0]-$,B[1]])),Se(m,A);return}if(m.length===0||A===-1)return;const[_,W]=m[A];h.current!==void 0&&h.current[0]===_&&h.current[1]===W||(h.current=[_,W],Ln(_,W,!1,!1))},[Se,$,Ln]),[jo,Vo]=Yt?.current?.cell??[],Xo=d.useRef(ht);Xo.current=ht,d.useLayoutEffect(()=>{!nn.current&&jo!==void 0&&Vo!==void 0&&(jo!==Pn.current?.current?.cell[0]||Vo!==Pn.current?.current?.cell[1])&&Xo.current(jo,Vo),nn.current=!1},[jo,Vo]);const Ys=V.current!==void 0&&(V.current.cell[0]>=pe.length||V.current.cell[1]>=_t);d.useLayoutEffect(()=>{Ys&&Dt(ii,!1)},[Ys,Dt]);const Vc=d.useMemo(()=>Rt===!0&&kt?.tint===!0?He.fromSingleSelection(_t-1):He.empty(),[_t,Rt,kt?.tint]),Xc=d.useCallback(m=>typeof St=="boolean"?St:St?.(m-$)??!0,[$,St]),Uc=d.useMemo(()=>{if(Oi===void 0||l.current===null)return null;const{bounds:m,group:A}=Oi,_=l.current.getBoundingClientRect();return d.createElement($g,{bounds:m,group:A,canvasBounds:_,onClose:()=>Ni(void 0),onFinish:W=>{Ni(void 0),te?.(A,W)}})},[te,Oi]),qc=Math.min(pe.length,tt+($t?1:0));d.useImperativeHandle(t,()=>({appendRow:(m,A)=>vr(m+$,A),updateCells:m=>($!==0&&(m=m.map(A=>({cell:[A.cell[0]+$,A.cell[1]]}))),Ft.current?.damage(m)),getBounds:(m,A)=>{if(!(l?.current===null||u?.current===null)){if(m===void 0&&A===void 0){const _=l.current.getBoundingClientRect(),W=_.width/u.current.clientWidth;return{x:_.x-u.current.scrollLeft*W,y:_.y-u.current.scrollTop*W,width:u.current.scrollWidth*W,height:u.current.scrollHeight*W}}return Ft.current?.getBounds((m??0)+$,A)}},focus:()=>Ft.current?.focus(),emit:async m=>{switch(m){case"delete":Kr({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!1,key:"Delete",keyCode:46,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-right":Kr({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"r",keyCode:82,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-down":Kr({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"d",keyCode:68,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"copy":await Yr(void 0,!0);break;case"paste":await Vi();break}},scrollTo:ht,remeasureColumns:m=>{for(const A of m)Bo(A+$)}}),[vr,Bo,Yr,Kr,Vi,$,ht]);const[Gs,Zs]=Cr??[],Kc=d.useCallback(m=>{const[A,_]=m;if(_===-1){se!=="none"&&(re(He.fromSingleSelection(A),void 0,!1),Lt());return}Gs===A&&Zs===_||(L({cell:m,range:{x:A,y:_,width:1,height:1}},!0,!1,"keyboard-nav"),ht(A,_))},[se,Lt,ht,Gs,Zs,L,re]),[Yc,Gc]=d.useState(!1),Qs=d.useRef(ia(m=>{Gc(m)},5)),Zc=d.useCallback(()=>{Qs.current(!0),V.current===void 0&&V.columns.length===0&&V.rows.length===0&&a===void 0&&L({cell:[$,mn],range:{x:$,y:mn,width:1,height:1}},!0,!1,"keyboard-select")},[mn,V,a,$,L]),Qc=d.useCallback(()=>{Qs.current(!1)},[]),[Jc,eu]=d.useMemo(()=>{let m;const A=Jt?.scrollbarWidthOverride??as(),_=v+(Rt?1:0);if(typeof It=="number")m=ot+_*It;else{let B=0;const U=Math.min(_,10);for(let z=0;z<U;z++)B+=It(z);B=Math.floor(B/U),m=ot+_*B}m+=A;const W=pe.reduce((B,U)=>U.width+B,0)+A;return[`${Math.min(1e5,W)}px`,`${Math.min(1e5,m)}px`]},[pe,Jt?.scrollbarWidthOverride,It,v,Rt,ot]);return d.createElement(yh.Provider,{value:ae},d.createElement(tm,{style:vh(ae),className:ce,inWidth:b??Jc,inHeight:D??eu},d.createElement(zg,{fillHandle:xn,drawFocusRing:Po,experimental:Jt,fixedShadowX:Vn,fixedShadowY:Xn,getRowThemeOverride:E,headerIcons:ir,imageWindowLoader:_o,initialSize:Ao,isDraggable:sr,onDragLeave:lr,onRowMoved:en,overscrollX:Ii,overscrollY:Di,preventDiagonalScrolling:Lo,rightElement:Ri,rightElementProps:Mi,smoothScrollX:Tn,smoothScrollY:Ei,className:ce,enableGroups:at,onCanvasFocused:Zc,onCanvasBlur:Qc,canvasRef:l,onContextMenu:Wc,theme:ae,cellXOffset:jr,cellYOffset:mn,accessibilityHeight:Ne.height,onDragEnd:Fc,columns:pe,nonGrowWidth:Be,drawHeader:gr,onColumnProposeMove:y,drawCell:Li,disabledRows:Vc,freezeColumns:qc,lockColumns:$,firstColAccessible:$===0,getCellContent:Bt,minColumnWidth:Cn,maxColumnWidth:In,searchInputRef:s,showSearch:_i,onSearchClose:Br,highlightRegions:Tc,getCellsForSelection:xt,getGroupDetails:zi,headerHeight:ur,isFocused:Yc,groupHeaderHeight:at?$r:0,freezeTrailingRows:Me+(Rt&&kt?.sticky===!0?1:0),hasAppendRow:Rt,onColumnResize:fr,onColumnResizeEnd:hr,onColumnResizeStart:Ai,onCellFocused:Kc,onColumnMoved:Hc,onDragStart:zc,onHeaderMenuClick:Ac,onItemHovered:ji,isFilling:a?.fillHandle===!0,onMouseMove:_c,onKeyDown:Kr,onKeyUp:Ae,onMouseDown:Ic,onMouseUp:Pc,onDragOverCell:gn,onDrop:Or,onSearchResultsChanged:jc,onVisibleRegionChanged:Lc,clientSize:J,rowHeight:It,searchResults:de,searchValue:je,onSearchValueChange:$e,rows:_t,scrollRef:u,selection:V,translateX:Ne.tx,translateY:Ne.ty,verticalBorder:Xc,gridRef:Ft,getCellRenderer:Q}),Uc,o!==void 0&&d.createElement(d.Suspense,{fallback:null},d.createElement(lm,{...o,validateCell:dr,id:$c,getCellRenderer:Q,className:Jt?.isSubGrid===!0?"click-outside-ignore":void 0,provideEditor:hn,imageEditorOverride:x,onFinishEditing:Nc,markdownDivCreateNode:M,isOutsideClick:zo}))))},dm=d.forwardRef(um),Gl=20,fm={getAccessibilityString:e=>e.data?.toString()??"false",kind:oe.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,measure:()=>50,draw:e=>hm(e,e.cell.data,ls(e.cell),e.cell.maxSize??Gl),onDelete:e=>({...e,data:!1}),onClick:e=>{const{cell:t,posX:n,posY:r,bounds:o,theme:i}=e,{width:s,height:l,x:a,y:c}=o,u=t.maxSize??Gl,h=Math.floor(o.y+l/2),g=Ba(u,l,i.cellVerticalPadding),p=Wa(t.contentAlign??"center",a,s,i.cellHorizontalPadding,g),f=$a(p,h,g),x=ja(a+n,c+r,f);if(ls(t)&&x)return{...t,data:Cc(t.data)}},onPaste:(e,t)=>{let n=ci;return e.toLowerCase()==="true"?n=!0:e.toLowerCase()==="false"?n=!1:e.toLowerCase()==="indeterminate"&&(n=xs),n===t.data?void 0:{...t,data:n}}};function hm(e,t,n,r){if(!n&&t===ci)return;const{ctx:o,hoverAmount:i,theme:s,rect:l,highlighted:a,hoverX:c,hoverY:u,cell:{contentAlign:h}}=e,{x:g,y:p,width:f,height:x}=l,E=.35;let M=n?1-E+E*i:.4;t===ci&&(M*=i),M!==0&&(o.globalAlpha=M,Hs(o,s,t,g,p,f,x,a,c,u,r,h),o.globalAlpha=1)}const gm=Kt("div")({name:"BubblesOverlayEditorStyle",class:"gdg-b1ygi5by",propsAsIs:!1}),mm=e=>{const{bubbles:t}=e;return d.createElement(gm,null,t.map((n,r)=>d.createElement("div",{key:r,className:"boe-bubble"},n)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))},pm={getAccessibilityString:e=>Va(e.data),kind:oe.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((r,o)=>e.measureText(o).width+r+20,0)+2*n.cellHorizontalPadding-4,draw:e=>vm(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return d.createElement(mm,{bubbles:t.data})},onPaste:()=>{}},wm=4;function vm(e,t){const{rect:n,theme:r,ctx:o,highlighted:i}=e,{x:s,y:l,width:a,height:c}=n,u=20,h=8,g=wm;let p=s+r.cellHorizontalPadding;const f=[];for(const x of t){if(p>s+a)break;const E=xi(x,o,r.baseFontFull).width;f.push({x:p,width:E}),p+=E+h*2+g}o.beginPath();for(const x of f)Mn(o,x.x,l+(c-u)/2,x.width+h*2,u,r.roundingRadius??u/2);o.fillStyle=i?r.bgBubbleSelected:r.bgBubble,o.fill();for(const[x,E]of f.entries())o.beginPath(),o.fillStyle=r.textBubble,o.fillText(t[x],E.x+h,l+c/2+Wn(o,r))}const ym=Kt("div")({name:"DrilldownOverlayEditorStyle",class:"gdg-d4zsq0x",propsAsIs:!1}),bm=e=>{const{drilldowns:t}=e;return d.createElement(ym,null,t.map((n,r)=>d.createElement("div",{key:r,className:"doe-bubble"},n.img!==void 0&&d.createElement("img",{src:n.img}),d.createElement("div",null,n.text))))},xm={getAccessibilityString:e=>Va(e.data.map(t=>t.text)),kind:oe.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((r,o)=>e.measureText(o.text).width+r+20+(o.img!==void 0?18:0),0)+2*n.cellHorizontalPadding-4,draw:e=>Sm(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return d.createElement(bm,{drilldowns:t.data})},onPaste:()=>{}},Cm=4,ns={};function km(e,t,n,r){const o=Math.ceil(window.devicePixelRatio),i=5,s=n-i*2,l=4,a=n*o,c=r+i,u=r*3,h=(u+i*2)*o,g=`${e},${t},${o},${n}`;if(ns[g]!==void 0)return{el:ns[g],height:a,width:h,middleWidth:l*o,sideWidth:c*o,padding:i*o,dpr:o};const p=document.createElement("canvas"),f=p.getContext("2d");return f===null?null:(p.width=h,p.height=a,f.scale(o,o),ns[g]=p,f.beginPath(),Mn(f,i,i,u,s,r),f.shadowColor="rgba(24, 25, 34, 0.4)",f.shadowBlur=1,f.fillStyle=e,f.fill(),f.shadowColor="rgba(24, 25, 34, 0.3)",f.shadowOffsetY=1,f.shadowBlur=5,f.fillStyle=e,f.fill(),f.shadowOffsetY=0,f.shadowBlur=0,f.shadowBlur=0,f.beginPath(),Mn(f,i+.5,i+.5,u,s,r),f.strokeStyle=t,f.lineWidth=1,f.stroke(),{el:p,height:a,width:h,sideWidth:c*o,middleWidth:r*o,padding:i*o,dpr:o})}function Sm(e,t){const{rect:n,theme:r,ctx:o,imageLoader:i,col:s,row:l}=e,{x:a,width:c}=n,u=r.baseFontFull,h=sc(o,u),g=Math.min(n.height,Math.max(16,Math.ceil(h*r.lineHeight)*2)),p=Math.floor(n.y+(n.height-g)/2),f=g-10,x=8,E=Cm;let M=a+r.cellHorizontalPadding;const b=r.roundingRadius??6,D=km(r.bgCell,r.drilldownBorder,g,b),R=[];for(const v of t){if(M>a+c)break;const H=xi(v.text,o,u).width;let I=0;v.img!==void 0&&i.loadOrGetImage(v.img,s,l)!==void 0&&(I=f-8+4);const C=H+I+x*2;R.push({x:M,width:C}),M+=C+E}if(D!==null){const{el:v,height:P,middleWidth:H,sideWidth:I,width:C,dpr:F,padding:S}=D,w=I/F,k=S/F;for(const T of R){const y=Math.floor(T.x),q=Math.floor(T.width),j=q-(w-k)*2;o.imageSmoothingEnabled=!1,o.drawImage(v,0,0,I,P,y-k,p,w,g),j>0&&o.drawImage(v,I,0,H,P,y+(w-k),p,j,g),o.drawImage(v,C-I,0,I,P,y+q-(w-k),p,w,g),o.imageSmoothingEnabled=!0}}o.beginPath();for(const[v,P]of R.entries()){const H=t[v];let I=P.x+x;if(H.img!==void 0){const C=i.loadOrGetImage(H.img,s,l);if(C!==void 0){const F=f-8;let S=0,w=0,k=C.width,T=C.height;k>T?(S+=(k-T)/2,k=T):T>k&&(w+=(T-k)/2,T=k),o.beginPath(),Mn(o,I,p+g/2-F/2,F,F,r.roundingRadius??3),o.save(),o.clip(),o.drawImage(C,S,w,k,T,I,p+g/2-F/2,F,F),o.restore(),I+=F+4}}o.beginPath(),o.fillStyle=r.textBubble,o.fillText(H.text,I,p+g/2+Wn(o,r))}}const Rm={getAccessibilityString:e=>e.data.join(", "),kind:oe.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,draw:e=>Mm(e,e.cell.displayData??e.cell.data,e.cell.rounding??e.theme.roundingRadius??4,e.cell.contentAlign),measure:(e,t)=>t.data.length*50,onDelete:e=>({...e,data:[]}),provideEditor:()=>e=>{const{value:t,onFinishedEditing:n,imageEditorOverride:r}=e,o=r??cf;return d.createElement(o,{urls:t.data,canWrite:t.readonly!==!1,onCancel:n,onChange:i=>{n({...t,data:[i]})}})},onPaste:(e,t)=>{e=e.trim();const r=e.split(",").map(o=>{try{return new URL(o),o}catch{return}}).filter(o=>o!==void 0);if(!(r.length===t.data.length&&r.every((o,i)=>o===t.data[i])))return{...t,data:r}}},rs=4;function Mm(e,t,n,r){const{rect:o,col:i,row:s,theme:l,ctx:a,imageLoader:c}=e,{x:u,y:h,height:g,width:p}=o,f=g-l.cellVerticalPadding*2,x=[];let E=0;for(let b=0;b<t.length;b++){const D=t[b];if(D.length===0)continue;const R=c.loadOrGetImage(D,i,s);if(R!==void 0){x[b]=R;const v=R.width*(f/R.height);E+=v+rs}}if(E===0)return;E-=rs;let M=u+l.cellHorizontalPadding;r==="right"?M=Math.floor(u+p-l.cellHorizontalPadding-E):r==="center"&&(M=Math.floor(u+p/2-E/2));for(const b of x){if(b===void 0)continue;const D=b.width*(f/b.height);n>0&&(a.beginPath(),Mn(a,M,h+l.cellVerticalPadding,D,f,n),a.save(),a.clip()),a.drawImage(b,M,h+l.cellVerticalPadding,D,f),n>0&&a.restore(),M+=D+rs}}function Em(e,t){let n=e*49632+t*325176;return n^=n<<13,n^=n>>17,n^=n<<5,n/4294967295*2}const Tm={getAccessibilityString:()=>"",kind:oe.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:()=>120,draw:e=>{const{cell:t,col:n,row:r,ctx:o,rect:i,theme:s}=e;if(t.skeletonWidth===void 0||t.skeletonWidth===0)return;let l=t.skeletonWidth;t.skeletonWidthVariability!==void 0&&t.skeletonWidthVariability>0&&(l+=Math.round(Em(n,r)*t.skeletonWidthVariability));const a=s.cellHorizontalPadding,c=t.skeletonHeight??Math.min(18,i.height-2*s.cellVerticalPadding);Mn(o,i.x+a,i.y+(i.height-c)/2,l,c,s.roundingRadius??3),o.fillStyle=Hr(s.textDark,.1),o.fill()},onPaste:()=>{}},Im=()=>e=>e.targetWidth,Zl=Kt("div")({name:"MarkdownOverlayEditorStyle",class:"gdg-m1pnx84e",propsAsIs:!1,vars:{"m1pnx84e-0":[Im(),"px"]}}),Dm=e=>{const{value:t,onChange:n,forceEditMode:r,createNode:o,targetRect:i,onFinish:s,validatedSelection:l}=e,a=t.data,c=t.readonly===!0,[u,h]=d.useState(a===""||r),g=d.useCallback(()=>{h(f=>!f)},[]),p=a?"gdg-ml-6":"";return u?d.createElement(Zl,{targetWidth:i.width-20},d.createElement(bi,{autoFocus:!0,highlight:!1,validatedSelection:l,value:a,onKeyDown:f=>{f.key==="Enter"&&f.stopPropagation()},onChange:n}),d.createElement("div",{className:`gdg-edit-icon gdg-checkmark-hover ${p}`,onClick:()=>s(t)},d.createElement(tf,null))):d.createElement(Zl,{targetWidth:i.width},d.createElement(Uf,{contents:a,createNode:o}),!c&&d.createElement(d.Fragment,null,d.createElement("div",{className:"spacer"}),d.createElement("div",{className:`gdg-edit-icon gdg-edit-hover ${p}`,onClick:g},d.createElement(ks,null))),d.createElement("textarea",{className:"gdg-md-edit-textarea gdg-input",autoFocus:!0}))},Pm={getAccessibilityString:e=>e.data?.toString()??"",kind:oe.Markdown,needsHover:!1,needsHoverPosition:!1,drawPrep:Io,measure:(e,t,n)=>{const r=t.data.split(`
`)[0];return e.measureText(r).width+2*n.cellHorizontalPadding},draw:e=>Sn(e,e.cell.data,e.cell.contentAlign),onDelete:e=>({...e,data:""}),provideEditor:()=>e=>{const{onChange:t,value:n,target:r,onFinishedEditing:o,markdownDivCreateNode:i,forceEditMode:s,validatedSelection:l}=e;return d.createElement(Dm,{onFinish:o,targetRect:r,value:n,validatedSelection:l,onChange:a=>t({...n,data:a.target.value}),forceEditMode:s,createNode:i})},onPaste:(e,t)=>e===t.data?void 0:{...t,data:e}},_m={getAccessibilityString:e=>e.row.toString(),kind:Qt.Marker,needsHover:!0,needsHoverPosition:!1,drawPrep:Am,measure:()=>44,draw:e=>Hm(e,e.cell.row,e.cell.checked,e.cell.markerKind,e.cell.drawHandle),onClick:e=>{const{bounds:t,cell:n,posX:r,posY:o}=e,{width:i,height:s}=t,l=n.drawHandle?7+(i-7)/2:i/2,a=s/2;if(Math.abs(r-l)<=10&&Math.abs(o-a)<=10)return{...n,checked:!n.checked}},onPaste:()=>{}};function Am(e,t){const{ctx:n,theme:r}=e,o=r.markerFontFull,i=t??{};return i?.font!==o&&(n.font=o,i.font=o),i.deprep=Lm,n.textAlign="center",i}function Lm(e){const{ctx:t}=e;t.textAlign="start"}function Hm(e,t,n,r,o){const{ctx:i,rect:s,hoverAmount:l,theme:a}=e,{x:c,y:u,width:h,height:g}=s,p=n?1:r==="checkbox-visible"?.6+.4*l:l;if(r!=="number"&&p>0){i.globalAlpha=p;const f=7*(n?l:1);if(Hs(i,a,n,o?c+f:c,u,o?h-f:h,g,!0,void 0,void 0,18),o){i.globalAlpha=l,i.beginPath();for(const x of[3,6])for(const E of[-5,-1,3])i.rect(c+x,u+g/2+E,2,2);i.fillStyle=a.textLight,i.fill(),i.beginPath()}i.globalAlpha=1}if(r==="number"||r==="both"&&!n){const f=t.toString(),x=a.markerFontFull,E=c+h/2;r==="both"&&l!==0&&(i.globalAlpha=1-l),i.fillStyle=a.textLight,i.font=x,i.fillText(f,E,u+g/2+Wn(i,x)),l!==0&&(i.globalAlpha=1)}}const zm={getAccessibilityString:()=>"",kind:Qt.NewRow,needsHover:!0,needsHoverPosition:!1,measure:()=>200,draw:e=>Fm(e,e.cell.hint,e.cell.icon),onPaste:()=>{}};function Fm(e,t,n){const{ctx:r,rect:o,hoverAmount:i,theme:s,spriteManager:l}=e,{x:a,y:c,width:u,height:h}=o;r.beginPath(),r.globalAlpha=i,r.rect(a+1,c+1,u,h-2),r.fillStyle=s.bgHeaderHovered,r.fill(),r.globalAlpha=1,r.beginPath();const g=t!=="";let p=0;if(n!==void 0){const x=h-8,E=a+8/2,M=c+8/2;l.drawSprite(n,"normal",r,E,M,x,s,g?1:i),p=x}else{p=24;const f=12,x=g?f:i*f,E=g?0:(1-i)*f*.5,M=s.cellHorizontalPadding+4;x>0&&(r.moveTo(a+M+E,c+h/2),r.lineTo(a+M+E+x,c+h/2),r.moveTo(a+M+E+x*.5,c+h/2-x*.5),r.lineTo(a+M+E+x*.5,c+h/2+x*.5),r.lineWidth=2,r.strokeStyle=s.bgIconHeader,r.lineCap="round",r.stroke())}r.fillStyle=s.textMedium,r.fillText(t,p+a+s.cellHorizontalPadding+.5,c+h/2+Wn(r,s)),r.beginPath()}const Om=d.lazy(async()=>await ys(()=>import("./ey4gwj40q99caymo.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),Nm={getAccessibilityString:e=>e.data?.toString()??"",kind:oe.Number,needsHover:!1,needsHoverPosition:!1,useLabel:!0,drawPrep:Io,draw:e=>Sn(e,e.cell.displayData,e.cell.contentAlign),measure:(e,t,n)=>e.measureText(t.displayData).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:void 0}),provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,value:r,validatedSelection:o}=e;return d.createElement(d.Suspense,{fallback:null},d.createElement(Om,{highlight:t,disabled:r.readonly===!0,value:r.data,fixedDecimals:r.fixedDecimals,allowNegative:r.allowNegative,thousandSeparator:r.thousandSeparator,decimalSeparator:r.decimalSeparator,validatedSelection:o,onChange:i=>n({...r,data:Number.isNaN(i.floatValue??0)?0:i.floatValue})}))},onPaste:(e,t,n)=>{const r=typeof n.rawValue=="number"?n.rawValue:Number.parseFloat(typeof n.rawValue=="string"?n.rawValue:e);if(!(Number.isNaN(r)||t.data===r))return{...t,data:r,displayData:n.formattedString??t.displayData}}},$m={getAccessibilityString:()=>"",measure:()=>108,kind:oe.Protected,needsHover:!1,needsHoverPosition:!1,draw:Wm,onPaste:()=>{}};function Wm(e){const{ctx:t,theme:n,rect:r}=e,{x:o,y:i,height:s}=r;t.beginPath();const l=2.5;let a=o+n.cellHorizontalPadding+l;const c=i+s/2,u=Math.cos(Ml(30))*l,h=Math.sin(Ml(30))*l;for(let g=0;g<12;g++)t.moveTo(a,c-l),t.lineTo(a,c+l),t.moveTo(a+u,c-h),t.lineTo(a-u,c+h),t.moveTo(a-u,c-h),t.lineTo(a+u,c+h),a+=8;t.lineWidth=1.1,t.lineCap="square",t.strokeStyle=n.textLight,t.stroke()}const Bm={getAccessibilityString:e=>e.data?.toString()??"",kind:oe.RowID,needsHover:!1,needsHoverPosition:!1,drawPrep:(e,t)=>Io(e,t,e.theme.textLight),draw:e=>Sn(e,e.cell.data,e.cell.contentAlign),measure:(e,t,n)=>e.measureText(t.data).width+n.cellHorizontalPadding*2,provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,value:r,validatedSelection:o}=e;return vt.createElement(bi,{highlight:t,autoFocus:r.readonly!==!0,disabled:r.readonly!==!1,value:r.data,validatedSelection:o,onChange:i=>n({...r,data:i.target.value})})},onPaste:()=>{}},jm={getAccessibilityString:e=>e.data?.toString()??"",kind:oe.Text,needsHover:!1,needsHoverPosition:!1,drawPrep:Io,useLabel:!0,draw:e=>(Sn(e,e.cell.displayData,e.cell.contentAlign,e.cell.allowWrapping,e.hyperWrapping),!0),measure:(e,t,n)=>{const r=t.displayData.split(`
`,t.allowWrapping===!0?void 0:1);return Math.max(...r.map(o=>e.measureText(o).width))+2*n.cellHorizontalPadding},onDelete:e=>({...e,data:""}),provideEditor:e=>({disablePadding:e.allowWrapping===!0,editor:t=>{const{isHighlighted:n,onChange:r,value:o,validatedSelection:i}=t;return d.createElement(bi,{style:e.allowWrapping===!0?{padding:"3px 8.5px"}:void 0,highlight:n,autoFocus:o.readonly!==!0,disabled:o.readonly===!0,altNewline:!0,value:o.data,validatedSelection:i,onChange:s=>r({...o,data:s.target.value})})}}),onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},Vm=Kt("div")({name:"UriOverlayEditorStyle",class:"gdg-u1rrojo",propsAsIs:!1}),Xm=e=>{const{uri:t,onChange:n,forceEditMode:r,readonly:o,validatedSelection:i,preview:s}=e,[l,a]=d.useState(t===""||r),c=d.useCallback(()=>{a(!0)},[]);return l?d.createElement(bi,{validatedSelection:i,highlight:!0,autoFocus:!0,value:t,onChange:n}):d.createElement(Vm,null,d.createElement("a",{className:"gdg-link-area",href:t,target:"_blank",rel:"noopener noreferrer"},s),!o&&d.createElement("div",{className:"gdg-edit-icon",onClick:c},d.createElement(ks,null)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))};function Ql(e,t,n,r){let o=n.cellHorizontalPadding;const i=t.height/2-e.actualBoundingBoxAscent/2,s=e.width,l=e.actualBoundingBoxAscent;return r==="right"?o=t.width-s-n.cellHorizontalPadding:r==="center"&&(o=t.width/2-s/2),{x:o,y:i,width:s,height:l}}const Um={getAccessibilityString:e=>e.data?.toString()??"",kind:oe.Uri,needsHover:!0,needsHoverPosition:!0,useLabel:!0,drawPrep:Io,draw:e=>{const{cell:t,theme:n,overrideCursor:r,hoverX:o,hoverY:i,rect:s,ctx:l}=e,a=t.displayData??t.data;if(r!==void 0&&t.hoverEffect===!0&&o!==void 0&&i!==void 0){const c=xi(a,l,n.baseFontFull),u=Ql(c,s,n,t.contentAlign),{x:h,y:g,width:p,height:f}=u;if(o>=h-4&&o<=h-4+p+8&&i>=g-4&&i<=g-4+f+8){const x=Wn(l,n.baseFontFull);r("pointer");const E=5,M=g-x;l.beginPath(),l.moveTo(s.x+h,Math.floor(s.y+M+f+E)+.5),l.lineTo(s.x+h+p,Math.floor(s.y+M+f+E)+.5),l.strokeStyle=n.textDark,l.stroke(),l.save(),l.fillStyle=e.cellFillColor,Sn({...e,rect:{...s,x:s.x-1}},a,t.contentAlign),Sn({...e,rect:{...s,x:s.x-2}},a,t.contentAlign),Sn({...e,rect:{...s,x:s.x+1}},a,t.contentAlign),Sn({...e,rect:{...s,x:s.x+2}},a,t.contentAlign),l.restore()}}Sn(e,a,t.contentAlign)},onClick:e=>{const{cell:t,bounds:n,posX:r,posY:o,theme:i}=e,s=t.displayData??t.data;if(t.hoverEffect!==!0||t.onClickUri===void 0)return;const l=uh(s,i.baseFontFull);if(l===void 0)return;const a=Ql(l,n,i,t.contentAlign);Ci({x:a.x-4,y:a.y-4,width:a.width+8,height:a.height+8},r,o)&&t.onClickUri(e)},measure:(e,t,n)=>e.measureText(t.displayData??t.data).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:""}),provideEditor:e=>t=>{const{onChange:n,value:r,forceEditMode:o,validatedSelection:i}=t;return d.createElement(Xm,{forceEditMode:o||e.hoverEffect===!0&&e.onClickUri!==void 0,uri:r.data,preview:r.displayData??r.data,validatedSelection:i,readonly:r.readonly===!0,onChange:s=>n({...r,data:s.target.value})})},onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},qm=[_m,zm,fm,pm,xm,Rm,Tm,Pm,Nm,$m,Bm,jm,Um],os=[];class Km extends ac{imageLoaded=()=>{};loadedLocations=[];cache={};setCallback(t){this.imageLoaded=t}sendLoaded=yu(()=>{this.imageLoaded(new xo(this.loadedLocations)),this.loadedLocations=[]},20);clearOutOfWindow=()=>{const t=Object.keys(this.cache);for(const n of t){const r=this.cache[n];let o=!1;for(let i=0;i<r.cells.length;i++){const s=r.cells[i];if(this.isInWindow(s)){o=!0;break}}o?r.cells=r.cells.filter(this.isInWindow):(r.cancel(),delete this.cache[n])}};loadImage(t,n,r,o){let i=!1;const s=os.pop()??new Image;let l=!1;const a={img:void 0,cells:[cn(n,r)],url:t,cancel:()=>{l||(l=!0,os.length<12?os.unshift(s):i||(s.src=""))}},c=new Promise(u=>s.addEventListener("load",()=>u(null)));requestAnimationFrame(async()=>{try{s.src=t,await c,await s.decode();const u=this.cache[o];if(u!==void 0&&!l){u.img=s;for(const h of u.cells)this.loadedLocations.push(Ls(h));i=!0,this.sendLoaded()}}catch{a.cancel()}}),this.cache[o]=a}loadOrGetImage(t,n,r){const o=t,i=this.cache[o];if(i!==void 0){const s=cn(n,r);return i.cells.includes(s)||i.cells.push(s),i.img}else this.loadImage(t,n,r,o)}}const Ym=(e,t)=>{const n=d.useMemo(()=>({...Gh,...e.headerIcons}),[e.headerIcons]),r=d.useMemo(()=>e.imageWindowLoader??new Km,[e.imageWindowLoader]);return d.createElement(dm,{...e,renderers:qm,headerIcons:n,ref:t,imageWindowLoader:r})},Gm=d.forwardRef(Ym);function Zm(e){switch(e){case"number":return oe.Number;case"imageUrl":return oe.Image;default:return oe.Text}}const Jl=40,ea=500;function Qm({table:e,height:t,width:n,isInFocusedView:r=!1,className:o=""}){const{targetedContent:i,setTargetedContent:s}=bu(),[l,a]=d.useState([]),c=getComputedStyle(document.documentElement),u=ps();d.useEffect(()=>{e.columnNames.length>0&&a(e.columnNames.map((M,b)=>({id:`id:${b}`,title:M,maxWidth:500})))},[e.columnNames]);const[h,g]=d.useState({columns:He.empty(),rows:He.empty()}),p=d.useCallback(function([b,D]){const R=e.rows[D];return{kind:Zm(e.columnTypes[b]),data:R[b],allowOverlay:!0,readonly:!0,displayData:String(R[b]),allowWrapping:!0,contentAlignment:"left"}},[e.columnTypes,e.rows]),f=d.useCallback(M=>{if(M.columns.length>0){const b=M.columns.items.flatMap(R=>e.columnNames.slice(R[0],R[1]));On.logEvent("ADA: Column Targeted");const D=b.length>1?u.formatMessage({id:"B+HlXu",defaultMessage:"{totalColumns} columns"},{totalColumns:b.length}):u.formatMessage({id:"KnFSJb",defaultMessage:'"{columnName}" column'},{columnName:b[0]});s({type:"object",label:D,isFocusedViewContent:r,createNewCompletionParams:R=>is(R,`The user has selected the columns:  ${b.map(v=>`"${v}"`).join(", ")} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,D)})}else if(M.rows.length>0){const b=M.rows.items.flatMap(R=>{const[v,P]=R,H=[];for(let I=v;I<P;I++)H.push(I);return H}),D=b.length>1?u.formatMessage({id:"vFstNk",defaultMessage:"{totalRows} rows"},{totalRows:b.length}):u.formatMessage({id:"43/z2q",defaultMessage:"#{rowIndex} row"},{rowIndex:b[0]+1});On.logEvent("ADA: Row Targeted"),s({type:"object",label:D,isFocusedViewContent:r,createNewCompletionParams:R=>is(R,`The user has selected rows at the following indices: ${b.map(v=>`"${v}"`).join(", ")} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,D)})}else if(M.current){const b=M.current.range.x,D=M.current.range.y,R=M.current.range.x+M.current.range.width,v=M.current.range.y+M.current.range.height,P=(R-b)*(v-D);let H="";P===1&&(H=e.rows[M.current.cell[1]][M.current.cell[0]]),On.logEvent("ADA: Range Targeted");const I=P>1?u.formatMessage({id:"Ia9GsC",defaultMessage:"{totalCells} cells"},{totalCells:P}):u.formatMessage({id:"MEl4hN",defaultMessage:'"{cellContent}" cell'},{cellContent:H});s({type:"object",isFocusedViewContent:r,label:I,createNewCompletionParams:C=>is(C,`The user has selected a range at the iloc: ${D}:${v}, ${b}:${R} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,I)})}M.columns.length===0&&M.rows.length===0&&M.current===void 0&&s(void 0),g(M)},[e.columnNames,s,r,e.rows,u,e.name,e.sheetName]);d.useEffect(()=>{i===void 0&&g({columns:He.empty(),rows:He.empty()})},[i]);const x=d.useCallback(M=>{const v=e.rows[M];if(!v)return 44;const P=v.reduce((w,k)=>{const T=w?.length||0,y=k?.length||0;return T>y?w:k})??"",C=(l[v.indexOf(P)]?.width||150)/8,F=Math.ceil(P.length/C);return 24+(F<4?F:4)*20},[e.rows,l]);d.useEffect(()=>{if(!document.getElementById("portal")){const M=document.createElement("div");M.id="portal",M.style.position="fixed",M.style.left="0",M.style.top="0",M.style.zIndex="9999",document.body.appendChild(M)}return()=>{const M=document.getElementById("portal");M&&document.body.removeChild(M)}},[]);const E=d.useCallback(()=>e.rows&&e.rows.length>999?10+10*String(e.rows.length).length:30,[e.rows]);return O.jsx(Gm,{getCellContent:p,columns:l,rows:e.rows.length,gridSelection:h,onGridSelectionChange:f,smoothScrollX:!0,smoothScrollY:!0,overscrollX:50,className:o,rowMarkers:"clickable-number",height:t,width:n,rowMarkerTheme:{bgCell:c.getPropertyValue("--main-surface-secondary").trim(),textLight:c.getPropertyValue("--text-primary").trim()},theme:{textDark:c.getPropertyValue("--text-primary").trim(),textMedium:c.getPropertyValue("--text-primary").trim(),textLight:c.getPropertyValue("--text-primary").trim(),textHeader:c.getPropertyValue("--text-primary").trim(),bgHeader:c.getPropertyValue("--main-surface-secondary").trim(),bgCell:c.getPropertyValue("--main-surface-primary").trim(),bgBubbleSelected:c.getPropertyValue("--main-surface-tertiary").trim(),bgHeaderHovered:c.getPropertyValue("--main-surface-tertiary").trim(),bgHeaderHasFocus:c.getPropertyValue("--main-surface-tertiary").trim(),accentColor:c.getPropertyValue("--selection").trim(),drilldownBorder:c.getPropertyValue("--selection").trim(),editorFontSize:"400 14px",baseFontStyle:"400 14px",markerFontStyle:"400 14px",headerFontStyle:"500 14px",cellHorizontalPadding:12,cellVerticalPadding:10},rowMarkerWidth:E(),rowHeight:x,verticalBorder:!0,minColumnWidth:Jl,maxColumnWidth:ea,onColumnResize:(M,b,D)=>{b>=Jl&&b<=ea&&a(R=>{const v=[...R];return v[D]={...M,width:b},v})}})}function is(e,t,n){const r=au(t);return{...e,promptMessage:xu(e.promptMessage,{metadata:{targeted_reply:t,targeted_reply_label:n}}),appendMessages:e.appendMessages==null?[r]:[...e.appendMessages,r]}}const nr=["#FFAF00","#F46920","#F53255","#F857C1","#29BDFD","#00CBBF","#01C159","#9DCA1C"];function kc({colorList:e,label:t,color:n,onColorUpdate:r}){return O.jsxs(Nn.Root,{children:[O.jsx(Nn.Trigger,{asChild:!0,children:O.jsxs("div",{className:"hover:bg-token-main-surface-secondary flex w-full items-center justify-between py-2 ps-4 pe-3.5",children:[O.jsx("span",{className:"max-w-28 truncate text-sm",children:t||O.jsx(Mt,{id:"UnyV2o",defaultMessage:"Dataset"})}),O.jsxs("div",{className:"flex gap-1",children:[O.jsx("div",{className:"h-4 w-4 rounded-xs",style:{backgroundColor:n}}),O.jsx(cu,{className:"icon-sm"})]})]})}),O.jsx(Nn.Portal,{children:O.jsx(Nn.Content,{className:"flex min-w-36 flex-col gap-4 p-4 align-middle",sideOffset:5,side:"right",children:O.jsx(Jm,{currentColor:n,colorList:e,onUpdate:r})})})]})}function Jm({colorList:e,currentColor:t,onUpdate:n}){const[r,o]=d.useState(t??""),i=ps(),s=l=>/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(l);return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"grid grid-cols-4 flex-wrap gap-2",children:e.map((l,a)=>O.jsx("button",{onClick:()=>{o(l),n(l)},className:Ht("flex h-6 w-6 items-center justify-center rounded-md"),style:{backgroundColor:l},children:t===l&&O.jsx(Cu,{className:"text-white"})},a))}),O.jsxs("div",{className:"border-token-border-default flex h-6 rounded-md border",children:[O.jsx("div",{className:"flex w-6 items-center justify-center bg-gray-200 px-2 py-1 text-sm text-gray-500",children:"#"}),O.jsx("input",{className:Ht("w-16 flex-1 rounded-e-md border-0 p-2 text-xs leading-6 uppercase outline-hidden"),placeholder:i.formatMessage({id:"3xKVHs",defaultMessage:"F1B023"}),value:r.slice(1),onChange:l=>{const a=`#${l.target.value}`;o(a),s(a)&&n(a)}})]})]})}function e0({chartData:e,setChartData:t}){let n=e.datasets[0].colors?[...e.datasets[0].colors]:[...nr];return O.jsx(O.Fragment,{children:e.labels.map((r,o)=>O.jsx(kc,{label:r,colorList:nr,color:n[o],onColorUpdate:i=>{Array.isArray(n)?n[o]=i:n=[i],e.datasets[0].colors=n,t?.({...e})}},o))})}function t0({chartData:e,setChartData:t}){return O.jsx(O.Fragment,{children:e.datasets.map((n,r)=>O.jsx(kc,{label:n.label,colorList:nr,color:n.colors?Array.isArray(n.colors)?n.colors[0]:n.colors:"",onColorUpdate:o=>{n.colors=[o],t?.({...e})}},r))})}function n0({chartData:e,setChartData:t}){return O.jsxs(Nn.Root,{children:[O.jsx(Nn.Trigger,{className:"h-5 px-0 hover:bg-transparent",asChild:!0,children:O.jsx("button",{children:O.jsx(ku,{className:Ht("icon text-token-text-tertiary hover:text-token-text-primary")})})}),O.jsx(Nn.Portal,{children:O.jsx(Nn.Content,{className:"flex max-w-xs min-w-48 flex-col px-0 py-1",sideOffset:7,children:e&&e.datasets.length<Ia&&O.jsxs(O.Fragment,{children:[O.jsx("span",{className:"text-token-text-quaternary py-2 ps-4 pe-3.5 text-xs font-semibold",children:O.jsx(Mt,{id:"yYiKvS",defaultMessage:"Colors"})}),O.jsx("div",{className:"flex max-h-36 flex-col overflow-auto",children:e.chart_type==="pie"?O.jsx(e0,{chartData:e,setChartData:t}):O.jsx(t0,{chartData:e,setChartData:t})})]})})})]})}const r0=(e,t,n)=>{const{colors:r}=t;let o;return r&&r.length>0?o=r:e==="pie"?o=t.data.map((i,s)=>nr[s%nr.length]):o=nr[n%nr.length],Array.isArray(o)?o:[o]},o0=e=>{const{file_name:t="",context_connector_info:n}=e,{source_url:r=null,context_connector:o,synthetic_extension:i}=n??{};let s=null;if(n&&o){const l=i??uu(t)??null;s=du(o,l)}return{sourceUrl:r,contextConnectorName:s}},Sc=async e=>{if(e.image_url==null){fo.addError("No image url provided for download");return}const t=fu(e.image_url),n=await ws(t);if(n.status===vs.Success){const o=await(await fetch(n.download_url)).blob();Fs(URL.createObjectURL(o),"output.png")}},Fs=(e,t="")=>{const n=document.createElement("a");n.href=e,t&&(n.download=t),n.click()},Rc=300,i0=350;function s0({visualization:e,clientThreadId:t,expanded:n=!1}){switch(e.type){case"chart":return e.fallback_image==null?(fo.addError("Chart visualizations require a fallback image message"),null):e.fallback_to_image?e.fallback_image==null?(fo.addError("No fallback image message provided for fallback chart"),null):O.jsx(h0,{visualization:e,expanded:n,clientThreadId:t}):O.jsx(f0,{visualization:e,clientThreadId:t,expanded:n});case"table":return O.jsx(a0,{visualization:e,expanded:n,clientThreadId:t});default:return fo.addError(`Unsupported visualization type ${e.type}`),null}}const l0=()=>!1;function a0({visualization:e,expanded:t,clientThreadId:n,customTable:r}){const o=l0(),i=la(),s=i&&!t,{isLoading:l,data:a,isError:c}=ra(ed({fileId:e.file_id,fileName:e.file_name??""})),[u,h]=d.useState(),g=d.useCallback(()=>{a&&Fs(a.download_url)},[a]),[p,f]=d.useState(0),[x,E]=d.useState(0),M=d.useRef(null);let b;a&&(Array.isArray(a.content)?b=a.content.find(R=>R.name===u)??a.content[0]:b=a.content);const D=()=>{M.current&&E(M.current.offsetWidth)};return d.useEffect(()=>(D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)),[]),d.useEffect(()=>{const R=()=>{const P=window.innerHeight-48;f(P)};return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),c?O.jsx(Mc,{fileName:e.title}):O.jsx(Do,{ref:M,focusObject:{type:Mo.ADAVisualization,visualization:e},title:O.jsxs(O.Fragment,{children:[e.title,!s&&Array.isArray(a?.content)&&O.jsxs(Mr.Root,{defaultValue:u,onValueChange:R=>{h(R)},children:[O.jsxs(Mr.Trigger,{className:"m-0 h-4 bg-transparent p-1 text-xs font-semibold",children:[u??a.content[0].name,O.jsx(Mr.Icon,{})]}),O.jsx(Mr.Portal,{children:O.jsx(Mr.Content,{children:a.content.map(R=>O.jsx(Mr.Item,{className:"text-xs font-semibold",value:R.name??"",children:R.name},R.name))})})]})]}),onDownload:g,expanded:t,clientThreadId:n,forceSmallBadge:o,children:l||b==null?O.jsx("div",{className:"flex w-full items-center justify-center",children:O.jsx(sa,{})}):O.jsx("div",{className:"border-token-border-default border-t",children:O.jsx(Qm,{table:{...b,name:e.title,sheetName:u},height:t?p:Rc,width:x,isInFocusedView:i})})})}function c0({showStatic:e,setShowStatic:t}){return O.jsx(ho,{side:"top",label:e?O.jsx(Mt,{id:"o0thnT",defaultMessage:"Switch to interactive chart"}):O.jsx(Mt,{id:"cigiQO",defaultMessage:"Switch to static chart"}),children:O.jsx("button",{className:"flex",onClick:()=>{t(!e)},children:e?O.jsx(rd,{className:"icon text-token-text-tertiary hover:text-token-text-primary"}):O.jsx(bs,{className:"icon text-token-text-tertiary hover:text-token-text-primary"})})})}function u0({type:e}){return O.jsx(d0,{children:e==="chart"?O.jsxs(O.Fragment,{children:[O.jsx(Mt,{id:"XBhWwK",defaultMessage:"Now interactive! (Beta)"})," ",O.jsx(bs,{className:"icon"})]}):O.jsx(Mt,{id:"N0TMRs",defaultMessage:"Now interactive!"})})}const d0=wu.div`flex shrink-0 cursor-pointer flex-nowrap items-center gap-1 rounded-lg bg-blue-400/[0.1] py-1 ps-2 pe-1.5 text-xs font-semibold text-blue-400`;function f0({visualization:e,clientThreadId:t,expanded:n}){const{isLoading:r,data:o,isError:i}=ra(Ju({fileId:e.file_id})),s=d.useRef(null),l=Gu(),[a,c]=d.useState(!l),u=d.useCallback(async()=>{if(a&&e.fallback_image)On.logEvent("ADA: Downloaded Static Chart"),await Sc(e.fallback_image);else if(s.current){const E=s.current.getBase64Image();E&&(On.logEvent("ADA: Downloaded Interactive Chart"),Fs(E,`${e.title}.png`))}},[e.fallback_image,a,s,e.title]),[h,g]=d.useState(void 0),p=hu(t),f=Su(()=>{On.logEvent("ADA: Toggled Interactive Chart",{conversationId:p})}),x=E=>{f(),c(E)};return d.useEffect(()=>{On.logEvent("ADA: Interactive Chart Shown")},[]),d.useEffect(()=>{if(o&&o.content!==h){const{chart_type:E,datasets:M,labels:b}=o.content,D=o.content;if(!M)return;D.datasets=M.map((R,v)=>{const P=r0(E,R,v);return{...R,colors:P}}),D.labels=Array.isArray(b)?b:[b],g(D)}},[h,o]),i?O.jsx(Mc,{fileName:e.title}):O.jsx(Do,{focusObject:{type:Mo.ADAVisualization,visualization:e},title:e.title,onDownload:u,additionalActions:[O.jsx(c0,{showStatic:a,setShowStatic:x},0),O.jsx(n0,{chartData:h,setChartData:g},1)],expanded:n,clientThreadId:t,children:r||h==null?O.jsx("div",{className:"flex w-full items-center justify-center",children:O.jsx(sa,{})}):a&&e.fallback_image?O.jsx(aa,{jupyterMessage:e.fallback_image}):O.jsx(Da,{ref:s,chart:h})})}function h0({visualization:e,expanded:t,clientThreadId:n}){const[r,o]=d.useState(!1),i=Yu(),s=d.useCallback(async()=>{e.fallback_image&&await Sc(e.fallback_image)},[e.fallback_image]);return e.fallback_image==null?null:O.jsx(Do,{focusObject:{type:Mo.ADAVisualization,visualization:e},title:e.title,onDownload:s,expanded:t,clientThreadId:n,children:O.jsx("div",{className:Ht("h-full w-full",t&&"cursor-pointer items-center justify-center"),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:O.jsxs("div",{className:Ht("relative flex h-full cursor-pointer items-center justify-center",!t&&"w-full"),children:[O.jsx(aa,{jupyterMessage:e.fallback_image}),i&&O.jsx(Qu,{isHovered:r})]})})})}const Do=vt.forwardRef(({focusObject:e,title:t="",onDownload:n=()=>{},additionalActions:r=[],expanded:o=!1,expandable:i=!0,children:s,footer:l,headerBackgroundColor:a="bg-token-main-surface-primary",forceSmallBadge:c=!1,wrapperStyles:u="flex items-center justify-center bg-token-main-surface-primary"},h)=>{const g=la(),p=Ru(),f=p&&p.type===Mo.ADAVisualization&&p.type===e.type&&p.visualization.file_id===e.visualization.file_id&&e.visualization.title===p.visualization.title,x=gu(),E=mu(x),M=e.visualization.type,[b,D]=Zu(M,E?.id??""),R=pu(),v=e.visualization.type,{sourceUrl:P,contextConnectorName:H}=o0(e.visualization);if(g&&!o||R||c)return O.jsx(g0,{focusObject:e,title:t,type:v,isFocused:f??!1,disabled:R||c});const I=O.jsxs(O.Fragment,{children:[r.map((C,F)=>O.jsx("div",{className:"flex p-0",children:C},F)),P&&H&&O.jsx(ho,{side:"top",label:O.jsx(Mt,{id:"KG958Q",defaultMessage:"Open in {contextConnectorName}",values:{contextConnectorName:H}}),children:O.jsx("a",{className:"flex items-center text-xs",href:P,target:"_blank",rel:"noreferrer",children:O.jsx(Iu,{className:Ht("icon text-token-text-tertiary hover:text-token-text-primary")})})}),n&&O.jsx(ho,{side:"top",label:O.jsx(Mt,{id:"X0SJIT",defaultMessage:"Download {type}",values:{type:v}}),children:O.jsx("button",{onClick:n,className:"flex items-center text-xs",children:O.jsx(Mu,{className:Ht("icon text-token-text-tertiary hover:text-token-text-primary")})})}),i&&O.jsx(ho,{side:"top",label:f?O.jsx(Mt,{id:"vilGuu",defaultMessage:"Collapse {type}",values:{type:v}}):O.jsx(Mt,{id:"7kLyF5",defaultMessage:"Expand {type}",values:{type:v}}),children:O.jsx("button",{onClick:()=>{Ec(f??!1,e)},className:"flex items-center text-xs",children:f?O.jsx(ma,{className:Ht("icon text-token-text-tertiary hover:text-token-text-primary")}):O.jsx(ua,{className:Ht("icon text-token-text-tertiary hover:text-token-text-primary")})})})]});return O.jsxs(ai.div,{className:Ht("border-token-border-default text-token-text-primary relative overflow-hidden",!o&&"rounded-2xl border"),ref:h,onMouseEnter:()=>{D(!0)},...ca,children:[O.jsxs("div",{className:Ht("flex items-center justify-between gap-2 px-4 py-3",a),children:[O.jsx("span",{className:"grow items-center truncate font-semibold capitalize",children:t}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(ta,{children:!b&&O.jsx(ai.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.2},className:"absolute end-3 top-3",children:O.jsx(u0,{type:v})})}),b&&I]})]}),O.jsx("div",{className:u,style:{height:o?"calc(100vh - 48px)":`${v==="table"?Rc:i0}px`},children:s}),O.jsx("div",{children:l})]})});Do.displayName="ADAVisualizationWrapper";function g0({focusObject:e,title:t="",type:n,isFocused:r,disabled:o=!1}){const[i,s]=d.useState(!1),l=n==="chart"?Eu:Tu,a=r||i||o;return O.jsx(ai.div,{className:Ht("relative w-52 overflow-hidden rounded-2xl border",r&&"border-blue-400/[.3]",a?"text-token-text-primary":"text-token-text-secondary",!o&&"cursor-pointer"),onMouseEnter:()=>{o||s(!0)},onMouseLeave:()=>{o||s(!1)},onClick:()=>{o||Ec(r,e)},...ca,children:O.jsxs("div",{className:"bg-token-main-surface-primary flex justify-between px-3 py-2",children:[O.jsxs("div",{className:"my-0 flex w-full items-center gap-2 overflow-hidden text-sm font-semibold capitalize",children:[O.jsx(l,{className:Ht("icon-lg shrink-0",a?"text-brand-green-800":"text-token-text-quaternary")}),O.jsx("span",{className:"grow truncate",children:t})]}),i&&O.jsx("div",{className:"flex items-center gap-2",children:O.jsx(ho,{side:"top",label:r?O.jsx(Mt,{id:"vilGuu",defaultMessage:"Collapse {type}",values:{type:n}}):O.jsx(Mt,{id:"7kLyF5",defaultMessage:"Expand {type}",values:{type:n}}),children:r?O.jsx(ma,{className:"icon text-token-text-secondary"}):O.jsx(ua,{className:Ht("icon text-token-text-secondary")})})})]})})}function Mc({fileName:e=""}){return O.jsx("div",{className:"w-full rounded-2xl border border-red-600 p-3",children:O.jsxs("div",{className:"my-0 flex items-center justify-between",children:[O.jsx("div",{className:"flex items-center gap-2",children:O.jsx("p",{className:"m-0 p-0 text-lg font-semibold capitalize",children:e})}),O.jsx("span",{className:"text-sm text-red-600",children:O.jsx(Mt,{id:"ADAVisualzationComponent.unableToLoadOutput",defaultMessage:"Unable to display visualization"})})]})})}const Ec=(e,t)=>{On.logEvent("ADA: Focus Mode Toggled"),e?el.close():el.setFocusedObject(t)};function m0({title:e,expanded:t,expandable:n=!0,children:r,actions:o,clientThreadId:i,onDownload:s,footer:l}){n=!1;const a={type:"table",file_id:"stub"};return O.jsx("div",{className:"mb-2",children:O.jsx(Do,{title:e,focusObject:{type:Mo.ADAVisualization,visualization:a},additionalActions:o,expanded:t,expandable:n,clientThreadId:i,onDownload:s,footer:l,headerBackgroundColor:"bg-gray-50",wrapperStyles:"flex overflow-y-scroll bg-token-main-surface-primary",children:r})})}const S0=Object.freeze(Object.defineProperty({__proto__:null,ADAGenericWrapper:m0,default:s0},Symbol.toStringTag,{value:"Module"}));export{S0 as A,Fg as C,yh as T,Pr as a,zd as b,Ir as i,vh as m,Kt as s};
//# sourceMappingURL=eca9qhhnl0vjirds.js.map
