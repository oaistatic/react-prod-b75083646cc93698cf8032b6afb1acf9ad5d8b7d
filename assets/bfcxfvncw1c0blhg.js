import{r as k,j as e}from"./lu2xqwqmjc95q6j6.js";import{lX as w,d as m,dq as Z,bg as v,e5 as V,lV as ss}from"./hml6mmd5fyx85si7.js";import{iT as es,t as ts}from"./rseqzngxzbdt1oxg.js";const L="ABORT",T="CALL",I="REJECT",_="RESOLVE";function x(s,t){const d=a=>{const r=a.data;if(Array.isArray(r)&&r[0]===T){a.stopImmediatePropagation();const[i]=a.ports;if(!i)throw new Error("RPCCallMessage must contains a port.");t?async function(){const o=new AbortController;try{i.onmessage=({data:n})=>Array.isArray(n)&&n[0]===L&&o.abort(),i.postMessage([_,await t.call({signal:o.signal},...r.slice(1))])}catch(n){i.postMessage([I,n])}finally{i.close()}}():(i.postMessage([I,new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.")]),i.close())}};s.addEventListener("message",d),s.start();const l=a=>(...r)=>new Promise((i,o)=>{const{port1:n,port2:c}=new MessageChannel;n.onmessage=p=>{const f=p.data;f[0]===_?i(f[1]):o(f[1]),n.close()},a?.signal?.addEventListener("abort",()=>{n.postMessage([L]),n.close(),o(new Error("Aborted."))}),s.postMessage([T,...r],[c,...a.transfer||[]])}),h=l({});return h.withOptions=l,h}const B="GENERATOR_GENERATE";function G(s,t){const d=a=>{const r=a.data;if(Array.isArray(r)&&r[0]===B){if(a.stopImmediatePropagation(),!t)throw new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.");const[i,o,...n]=r,c=t(...n);x(o.next,c.next.bind(c)),x(o.return,p=>c.return?.(p)||{done:!0}),x(o.throw,p=>c.throw?.(p)||Promise.reject(p)),x(o.asyncDispose,async()=>{const p=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),f=Symbol.dispose||Symbol.for("Symbol.dispose");p in c?await c[p]?.():f in c&&c[f]?.()})}};s.addEventListener("message",d),s.start();const l=a=>{let r;return(...i)=>{const{port1:o,port2:n}=new MessageChannel,{port1:c,port2:p}=new MessageChannel,{port1:f,port2:C}=new MessageChannel,{port1:D,port2:N}=new MessageChannel,y={signal:a.signal},E=()=>{o.close(),n.close(),c.close(),p.close(),f.close(),C.close(),D.close(),N.close()},q=x(o).withOptions(y),H=x(c).withOptions(y),K=x(f).withOptions(y),Q=x(D).withOptions(y);let A=!1;const S=async g=>{if(r?.(),A)return{done:!0};const R=await g();return R.done&&(A=!0,E()),R},Y=async g=>{r?.(),await g(),A=!0,E(),r=()=>{throw new Error("This generator has been disposed.")}},M={next:g=>S(()=>H(g)),return:g=>S(()=>K(g)),throw:g=>S(()=>Q(g)),[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")]:()=>Y(()=>q()),[Symbol.asyncIterator]:()=>M};return s.postMessage([B,{asyncDispose:n,next:p,return:C,throw:N},...i],[...a.transfer||[],n,p,C,N]),a.signal?.addEventListener("abort",()=>{r=()=>{throw new Error("This generator has been aborted.")},E()},{once:!0}),M}},h=l({});return h.withOptions=l,h}const ds=async(s,t,d=[])=>{const l=new Set(Object.keys(t).filter(o=>t[o]?.constructor?.name==="AsyncGeneratorFunction")),h={};for(const[o,n]of Object.entries(t)){const c=new MessageChannel;l.has(o)?G(c.port1,n):x(c.port1,n),h[o]=c.port2}const{ports:a,replyPort:r}=await new Promise(o=>{const n=c=>{c.data.type==="init"&&c.source&&c.source===s.contentWindow&&(window.removeEventListener("message",n),o(c.data))};window.addEventListener("message",n)});return r.postMessage(h,Object.values(h)),r.start(),Object.fromEntries(Object.entries(a).map(([o,n])=>[o,d.includes(o)?G(n):x(n)]))},ns="{{.sandboxHost}}",rs=`https://${ns}`,{origin:os}=new URL(rs),ps=[os,"https://cdn.jsdelivr.net","https://cdn.tailwindcss.com","https://esm.sh","https://unpkg.com","https://pypi.org","https://files.pythonhosted.org"],u=s=>Array.isArray(s)||w(s)||s instanceof Map||s instanceof Set,b=s=>s==null||typeof s=="string"||typeof s=="number"||typeof s=="boolean",$=s=>w(s)?Object.entries(s):Array.from(s.entries()),z=s=>`${typeof s}:${typeof s=="object"?JSON.stringify(s):s}`,hs=({isPreview:s=!1,value:t})=>{const[d,l]=k.useState(!1);return b(t)?e.jsx(j,{value:t,depth:0}):u(t)?e.jsxs("span",{className:m("relative z-0 max-w-full font-mono text-sm leading-6",d&&"w-full flex-auto"),children:[e.jsxs("span",{role:"button",className:"group/row flex flex-wrap items-center gap-x-1 italic",onClick:()=>l(!d),children:[!s&&e.jsx(F,{isExpanded:d}),e.jsx(X,{value:t,depth:0}),e.jsx(P,{value:t})]}),d&&!s&&e.jsx("div",{className:"ps-6",children:e.jsx(U,{value:t,depth:0})})]}):e.jsx("span",{className:"truncate",children:String(t)})},J=({value:s,depth:t=0})=>u(s)?e.jsx(U,{depth:t,value:s}):b(s)?e.jsx(j,{depth:t,value:s}):e.jsx("span",{className:"truncate",children:String(s)}),X=({value:s,depth:t=0})=>{const d=Array.isArray(s),l=$(s);return e.jsxs("div",{className:"inline-flex max-w-fit min-w-0 grow basis-0",children:[!w(s)&&e.jsx(O,{isShort:!0,isSecondary:!0,collection:s}),d?"[":"{",e.jsx("span",{className:"inline-flex max-w-fit min-w-0 shrink grow basis-0 overflow-hidden",children:l.map(([h,a],r)=>{let i=null;return u(a)?i=e.jsx(O,{collection:a}):b(a)?i=e.jsx(j,{truncate:!0,depth:t+1,value:a}):i=e.jsx(J,{depth:t+1,value:a}),e.jsxs(k.Fragment,{children:[(w(s)||s instanceof Map)&&e.jsx("span",{className:"text-token-text-secondary min-w-[2em] shrink truncate whitespace-pre",children:e.jsx(W,{value:s,propertyKey:h})}),i,r<l.length-1&&e.jsx("span",{className:"whitespace-pre",children:", "})]},z(h))})}),d?"]":"}"]})},U=({value:s,depth:t=0})=>{const[d,l]=k.useState(()=>new Set),h=$(s);return e.jsx("ol",{className:"flex flex-col ps-6 font-mono",children:h.map(([a,r])=>{const i=z(a),o=d.has(i),n=u(r),c=()=>{l(p=>{const f=new Set(p);return f.has(i)?f.delete(i):f.add(i),f})};return e.jsxs("li",{className:m("flex ps-1 whitespace-nowrap",n&&"flex-col",!n&&"group/row flex-wrap"),onClick:p=>p.stopPropagation(),children:[e.jsxs("span",{onClick:n?c:void 0,role:n?"button":void 0,className:m("group/row z-10 -ms-1 min-w-0 items-center gap-x-1",n?"flex":"inline-flex"),children:[n&&e.jsxs(e.Fragment,{children:[e.jsx(as,{}),e.jsx(F,{shiftLeft:!0,isExpanded:o})]}),e.jsx("span",{className:m("font-bold",(w(s)||Array.isArray(s))&&"text-red-900 dark:text-blue-400"),children:e.jsx(W,{value:s,propertyKey:a})}),n&&!o&&e.jsx(X,{value:r,depth:t+1}),n&&o&&e.jsx(O,{isSecondary:!0,collection:r}),n&&e.jsx(P,{value:r})]}),(!n||o)&&e.jsx(J,{value:r,depth:t+1}),(typeof r=="string"||typeof r=="number")&&e.jsx(P,{value:r})]},i)})})},j=({value:s,truncate:t=!1})=>typeof s=="string"?e.jsxs("span",{className:m("dark:text-blue-75 text-red-500",t&&"max-w-fit min-w-[2em] shrink-0 grow basis-0 overflow-hidden text-ellipsis whitespace-nowrap",!t&&"break-words break-all whitespace-normal"),children:["'",s,"'"]}):e.jsx("span",{className:m("whitespace-nowrap",s==null?"text-token-text-secondary":"dark:text-brand-purple-600 text-blue-500"),children:String(s)}),as=()=>e.jsx("span",{className:"absolute start-0 end-0 z-[-1] h-6 rounded-md group-hover/row:bg-gray-50 dark:group-hover/row:bg-gray-700"}),O=({collection:s,isSecondary:t=!1,isShort:d=!1})=>{let l=null;return Array.isArray(s)&&s.length>0?l=d?`(${s.length})`:`Array(${s.length})`:s instanceof Set?l=`Set(${s.size})`:s instanceof Map?l=`Map(${s.size})`:w(s)&&(l="{â€¦}"),l&&e.jsx("span",{className:m(t&&"text-token-text-secondary"),children:l})},W=({value:s,propertyKey:t})=>w(s)||Array.isArray(s)?`${V(t)}: `:s instanceof Map?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[b(t)?e.jsx(j,{value:t,depth:0}):e.jsx("span",{className:"text-token-text-secondary",children:JSON.stringify(t)}),e.jsx(ss,{className:"icon-sm text-token-text-secondary"})]}):null,F=({isExpanded:s,shiftLeft:t=!1})=>e.jsx("button",{className:m("flex h-5 shrink-0 items-center overflow-hidden",t&&"ms-[-16px]"),children:e.jsx(Z,{className:m("icon-sm text-token-text-secondary transition-transform",s&&"rotate-90")})}),P=({value:s})=>{const t=v(),d=()=>{ts(JSON.stringify(s),t)};return e.jsx("span",{className:m("text-token-text-secondary relative inline-block h-4 self-center opacity-0 transition-opacity","group-hover/row:opacity-100 group-hover/row:delay-500","hover:after:bg-token-main-surface-tertiary after:pointer-events-none after:absolute after:inset-[-4px] after:z-0 after:rounded-lg after:content-['']"),children:e.jsx(es,{iconClassName:"icon-sm z-10",iconOnly:!0,onCopy:d})})};export{ps as C,rs as L,hs as a,ds as i};
//# sourceMappingURL=bfcxfvncw1c0blhg.js.map
