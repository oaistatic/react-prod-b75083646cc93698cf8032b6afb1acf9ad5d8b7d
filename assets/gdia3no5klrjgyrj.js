import{r as u,j as e,M as g,e as A,d as T}from"./lu2xqwqmjc95q6j6.js";import{ob as L,oc as F,bg as O,l5 as E,B as R,i as U,U as b,j as X,ii as h,a as N,c as P,k as H,o as W,ib as f,oO as B,ij as J}from"./hml6mmd5fyx85si7.js";import{dI as K,dJ as z,a4 as r,dK as G,dL as Y,dM as $,dN as q,dO as Q,dP as Z}from"./rseqzngxzbdt1oxg.js";import{S as ee}from"./ifbdwgrs45s6gn7j.js";function se({voice:s,voiceSpeed:n}){const[l,a]=u.useState(!1),t=L(),i=s.voice,d=s.preview_url,c=u.useRef({playPromise:null}).current,o=F(x=>x.isPlaying&&x.sourceUrl===d);u.useEffect(()=>{t&&t.setSpeed(n)},[t,n]);const p=O(),V=u.useCallback(async()=>{if(!t)return;const x={voice:i,source:d};E.previews.click(x);try{a(!0),t.changeSource(d),c.playPromise=t.play(),a(!1)}catch(k){E.previews.error(k,x),p.danger({defaultMessage:"Something went wrong playing preview",description:"Error message when message playing the preview fails"},{toastId:"voice_preview_player_play_error"})}},[t,d,i,c,p]),m=u.useCallback(()=>{t&&(c.playPromise?c.playPromise.then(()=>{t.stop(),c.playPromise=null}):t.stop())},[t,c]),D=u.useCallback(()=>{o?m():l||V()},[m,V,l,o]);return u.useEffect(()=>()=>{o&&m()},[s,o,m]),e.jsx(R,{onClick:D,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:l,icon:o?ee:K,children:o?e.jsx(g,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(g,{id:"JwYDVp",defaultMessage:"Play"})})}const j=.5,v=2,I=.1,_=Math.round((v-j)/I),te=Array.from({length:_+1},(s,n)=>n),C=2,S=8,M=(S-C)/2,ne=s=>{const n=Number(s);return isNaN(n)?1:n};function ae(){const s=N();return P(s,"174366048")}function ie(){const s=N();return P(s,"3302173089")}function pe(){const s=ae(),n=U(),l=ie(),{isLoading:a,value:t,setValue:i}=y(b.VoiceSpeed),d=ne(t),c=z();if(!s)return null;const o=n?.length&&!n?.includes(X.VideoScreenSharing);return e.jsxs(e.Fragment,{children:[c&&e.jsx(h,{children:e.jsx(le,{})}),e.jsx(h,{children:e.jsx(oe,{voiceSpeed:d})}),l&&e.jsx(h,{children:e.jsx(re,{voiceSpeed:d,setVoiceSpeed:i,isLoading:a})}),o&&e.jsx(h,{children:e.jsx(ce,{})})]})}function y(s,n=!1){const{data:l,isLoading:a}=H(s)||{},t=W(n);return{isLoading:a,value:l,setValue:i=>{t.mutate({setting:s,value:i})}}}function oe({voiceSpeed:s}){const{isLoading:n,value:l,setValue:a}=y(b.VoiceName),t=G(),i=Y(),d=n?"":$(l,i),c=t.find(({voice:o})=>o===d);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[c?e.jsxs(e.Fragment,{children:[e.jsx(se,{voice:c,voiceSpeed:s}),e.jsx("div",{className:"h-4 border-s"})]}):null,e.jsxs(r.Root,{value:d,onValueChange:o=>a(o),disabled:n,children:[e.jsxs(r.Trigger,{children:[e.jsx(r.Value,{}),e.jsx(r.Icon,{})]}),e.jsx(r.Portal,{children:e.jsx(r.Content,{children:t.map(({voice:o,name:p})=>e.jsx(r.Item,{value:o,children:p},o))})})]})]})]})})})}function re({voiceSpeed:s,setVoiceSpeed:n,isLoading:l}){const[a,t]=u.useState(s);return u.useEffect(()=>t(s),[s]),e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),e.jsx("div",{className:"text-token-text-secondary tabular-nums",children:e.jsx(g,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:a.toFixed(1)}})})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(q,{className:"relative flex w-full items-center",min:j,max:v,step:I,value:[a],disabled:l,onValueChange:i=>t(i[0]),onValueCommit:i=>{const d=i[0],c=Math.min(v,Math.max(j,d));n(c.toString())},children:[e.jsxs(Q,{className:"relative h-[4px] grow rounded-full",children:[e.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:M,right:M}}),e.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:S/2,right:S/2},children:te.map(i=>e.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:C,left:`${i/_*100}%`,transform:"translateX(-50%)"}},i))})]}),e.jsx(Z,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:S}})]})})})]})}function le(){const{isLoading:s,value:n,setValue:l}=y(b.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),e.jsxs(r.Root,{value:s?"":n??f.Auto,onValueChange:a=>l(a),disabled:s,children:[e.jsxs(r.Trigger,{children:[e.jsx(r.Value,{}),e.jsx(r.Icon,{})]}),e.jsx(r.Portal,{children:e.jsxs(r.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(r.Item,{value:f.Auto,children:e.jsx(g,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(f).filter(([a,t])=>t!==f.Auto).map(([a,t])=>e.jsx(r.Item,{value:t,className:"capitalize",children:a},t))]})})]})]}),e.jsx(B,{children:e.jsx(g,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function ce(){const s=A();return e.jsx(J,{label:s.formatMessage(w.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:s.formatMessage(w.voiceAndScreenSharingDescription)})}const w=T({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}});export{pe as S,y as u};
//# sourceMappingURL=gdia3no5klrjgyrj.js.map
