import{j as s,r as p,M as y,d as de,L as ye,m as $e,a as me,l as Qe,c as J,e as te,v as we,am as Ve}from"./lu2xqwqmjc95q6j6.js";import{B as V,P as T,py as Ke,a as Y,c as ve,I as Re,d0 as Ye,d as L,b4 as Xe,ay as Pe,c6 as ue,qt as Je,pt as Ze,qu as es,qv as ss,fA as X,pS as he,cl as ee,eW as Ge,aB as ce,ek as ts,b$ as rs,eq as Z,qw as os,bY as as,q as je,b2 as is,G as Me,qx as ns,qy as ls,po as Te,c$ as cs,qz as ds,bd as Q,H as ms,L as us,b5 as Le,qA as gs,pu as fs,da as hs,g8 as ps,bX as xs,is as Ne,lC as ys,iU as vs,bb as Ee,lU as js,lV as bs,o3 as ks,pA as Ss}from"./hml6mmd5fyx85si7.js";import{q as Ae,mt as ws,gx as Ns,gw as be,gv as ke,aE as zs,j1 as Cs,iH as Se,h8 as Rs,w as Ps,N as _e,h3 as Gs,gE as Ms,hr as Ts,h1 as Ls,d7 as le,a4 as K}from"./rseqzngxzbdt1oxg.js";import{S as De}from"./kk5qbg5kgpw95cl6.js";import{b as Es,G as Oe,a as We,N as As}from"./gnhjnh2n0u3gy6qx.js";import{P as _s}from"./e0pswmo7irlt62pp.js";import{G as Ds}from"./aljgry7qt1vxg68x.js";import{G as Os,C as Ws}from"./i3dsk2v4ral4g6kx.js";function Is({href:t,children:e,onClickTrackingEventName:r,onClick:a}){function o(){r&&T.logEvent(r),a?.()}return t?s.jsx(V,{as:"link",to:t,onClick:o,size:"large",children:e}):s.jsx(V,{onClick:o,size:"large",children:e})}function Gt({gizmo:t}){const e=Ke(t),[r,a]=p.useState(!1),o=Y(),i=ve(o,"1855896025");return s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsx(pe,{redirectUrl:e}),s.jsxs("div",{className:"flex grow flex-col items-center justify-center p-2",children:[s.jsx(Es,{gizmo:t,isAnon:!0,children:s.jsxs("div",{className:"mt-7 flex flex-col items-center gap-4",children:[s.jsx(Is,{onClick:()=>Re(o,{callbackUrl:e}),children:s.jsx(y,{id:"gizmo.anonLandingPage.login",defaultMessage:"Sign up to chat"})}),s.jsxs("div",{className:"text-token-text-tertiary flex gap-2 text-sm whitespace-nowrap",children:[s.jsx("div",{children:s.jsx(y,{id:"gizmo.anonLandingPage.loginSubtext",defaultMessage:"Sign up or Log in to chat"})}),i&&s.jsxs(s.Fragment,{children:["|",s.jsx("div",{onClick:()=>a(!0),className:"cursor-pointer",children:s.jsx(y,{id:"gizmo.anonLandingPage.report",defaultMessage:"Report illegal content"})})]})]})]})}),r&&s.jsx(Ds,{onClose:()=>a(!1),gizmoId:t.gizmo.id})]})]})}function pe({redirectUrl:t,className:e}){const r=Y(),a=Ye(Fs.signUpCta);return s.jsxs("div",{className:L("flex items-center justify-between px-7 py-4",e),children:[s.jsx(Us,{}),s.jsx(V,{color:"primary",onClick:()=>Re(r,{callbackUrl:t}),children:s.jsx(y,{...a})})]})}function Us(){return s.jsx(ye,{to:"/",children:s.jsx(Xe,{className:"h-8 w-8"})})}const Fs=de({signUpCta:{id:"gizmo.anonLandingPage.signup",defaultMessage:"Sign up"}});function se({delay:t,animateTap:e=!0,children:r}){return s.jsx($e.div,{whileTap:{scale:e?.98:void 0},initial:{opacity:0,translateY:5},animate:{opacity:1,translateY:0,transition:{duration:.3,ease:"easeIn",delay:t??0}},children:r})}var Bs=(t=>(t.Enabled="enabled",t.ComingSoon="coming-soon",t))(Bs||{});function Hs({gizmoResource:t}){const e=t.gizmo.vanity_metrics?.num_conversations_str,r=t.gizmo.share_recipient??Z.Private,a=os(r);return s.jsxs("div",{children:[t.gizmo.share_recipient!==Z.Private&&e!=null?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Se,{className:"icon-sm"}),s.jsx("span",{children:s.jsx(y,{...Qs.conversationCountStrLabel,values:{numConvos:e}})})]}):void 0,s.jsxs("div",{className:"flex items-center gap-1",children:[r===Z.Link||r===Z.Marketplace?s.jsx(Rs,{className:"icon-sm shrink-0"}):r===Z.Workspace?s.jsx(Ps,{className:"icon-sm shrink-0"}):s.jsx(as,{className:"icon-sm shrink-0"}),s.jsx("span",{className:"line-clamp-1",children:a})]})]})}function Mt({gizmoResource:t,canRemoveRecent:e}){const r=Y(),a=me(),{canEdit:o}=Ze(t),{canDelete:i}=es(t),c=ss(t),l=!!t.gizmo.tags?.includes(X.FirstParty);return s.jsx(Ie,{href:c?he(t.gizmo.id):ee(r,t),icon:s.jsx(ke,{isFirstParty:l,src:t?.gizmo.display.profile_picture_url??void 0,className:"h-[42px] w-[42px] shrink-0"}),title:t.gizmo.display.name||ws,isDraft:c,description:t.gizmo.display.description??"",byline:o?s.jsx(Hs,{gizmoResource:t}):s.jsx(be,{gizmo:t}),buttons:s.jsxs(s.Fragment,{children:[o&&s.jsx(ue,{label:s.jsx(y,{id:"gizmo.gpt.grid.EditGPT",defaultMessage:"Edit GPT"}),className:"flex justify-center",side:"top",children:s.jsx("button",{className:"text-token-text-primary rounded-lg px-3 py-2 transition-transform duration-100 ease-in hover:bg-white active:scale-[0.9] dark:bg-transparent dark:hover:bg-gray-700",onClick:()=>{a(he(t.gizmo.id))},children:s.jsx(Ns,{className:"icon-sm"})})}),s.jsx($s,{gizmoResource:t,canDelete:i,canRemoveRecent:e})]})})}const qs=Pe.div`flex h-[42px] w-[42px] shrink-0 items-center justify-center rounded-full border border-dashed
${({$disabled:t})=>t?"":"border-token-border-default bg-token-main-surface-secondary"}`;function Tt({type:t}){const e=Je(),r=t==="coming-soon";return s.jsxs(ue,{disabled:!r,label:s.jsx(y,{id:"gizmo.gpt.grid.CreateGPTComingSoon",defaultMessage:"GPT creation will be available in the coming weeks"}),triggerAs:null,children:[s.jsx(Ie,{href:e,disabled:r,icon:s.jsx(qs,{$disabled:r,children:s.jsx(Ae,{className:L("icon-sm",r&&"opacity-30")})}),title:s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(y,{id:"gizmo.gpt.grid.CreateGPT",defaultMessage:"Create a GPT"})}),description:"Customize a version of ChatGPT for a specific purpose",byline:r?s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("div",{className:"flex items-center",children:s.jsx(y,{id:"gizmo.gpt.grid.ComingSoon",defaultMessage:"Coming soon"})})}):void 0}),s.jsx("div",{className:"h-px bg-gray-100 dark:bg-gray-700"})]})}function Ie({href:t,icon:e,title:r,isDraft:a=!1,description:o,byline:i,buttons:c,disabled:l,className:f}){const g=L("flex items-center px-2 py-4 rounded-xl",l?"":"hover:bg-token-main-surface-secondary",f),j=s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex grow items-center overflow-hidden md:w-3/5 md:grow-0",children:[e,s.jsxs("div",{className:L("grow overflow-hidden ps-4 pe-9 leading-tight",l?"opacity-50":"hover:cursor-pointer"),children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-semibold",children:r}),a&&s.jsx(ue,{label:s.jsx(y,{id:"gizmo.gpt.grid.Draft",defaultMessage:"Draft"}),className:"flex justify-center",side:"top",children:s.jsx("div",{className:"m-1.5 inline-block h-1.5 w-1.5 rounded-full bg-gray-200 dark:bg-gray-600"})})]}),s.jsx("div",{className:"line-clamp-2 overflow-hidden text-sm break-words text-ellipsis",children:o}),i!=null&&s.jsx("div",{className:"text-token-text-tertiary text-sm text-ellipsis md:hidden",children:i})]})]}),i!=null&&s.jsx("div",{className:"text-token-text-tertiary hidden flex-1 text-sm text-ellipsis md:block",children:i}),c!=null&&s.jsx("div",{onClick:v=>{v.preventDefault()},onPointerDownCapture:v=>{v.stopPropagation()},className:"flex h-9 shrink-0 justify-end gap-2 font-semibold md:w-[100px]",children:c})]});return l?s.jsx(se,{children:s.jsx("span",{className:g,children:j})}):s.jsx(se,{children:s.jsx(ye,{className:g,to:t,children:j})})}function $s({gizmoResource:t,canDelete:e,canRemoveRecent:r}){const[a,o]=p.useState(!1),[i,c]=p.useState(!1),l=Qe();return!e&&!r?null:s.jsxs(s.Fragment,{children:[s.jsxs(Ge,{side:"top",contentAlign:"end",sideOffset:8,open:i,onOpenChange:f=>c(f),triggerButton:s.jsx("button",{color:"secondary",className:"text-token-text-primary rounded-lg bg-transparent px-3 py-2 duration-100 ease-in hover:bg-white active:scale-[0.9] dark:bg-transparent dark:hover:bg-gray-700",onClick:()=>{c(f=>!f)},children:s.jsx(rs,{className:"icon"})}),children:[e&&s.jsx(ce.Item,{color:"danger",onClick:()=>{o(!0)},icon:zs,children:s.jsx(y,{id:"gizmo.gpt.grid.DeleteGPT",defaultMessage:"Delete GPT"})}),r&&s.jsx(ce.Item,{onClick:()=>{ts.removeFromRecent(l,t.gizmo.id)},children:s.jsx(y,{id:"gizmo.gpt.grid.RemoveFromRecent",defaultMessage:"Remove from Recent"})})]}),a&&s.jsx(Cs,{children:s.jsx(Os,{gizmoId:t.gizmo.id,onSuccess:()=>{o(!1)},onClose:()=>{o(!1)}})})]})}const Qs=de({conversationCountStrLabel:{id:"gizmo.gpt.grid.conversationCountStrLabel",defaultMessage:"{numConvos} Chats"}});function Ue({gizmo:t,children:e,onClick:r,onModalOpen:a,onModalClose:o,selectOnly:i,className:c}){const l=Y(),f=ve(l,"1825130190"),[g,j]=p.useState(!1);return i?s.jsx("a",{className:L("gizmo-link cursor-pointer",c),href:"#",onClick:v=>{v.preventDefault(),r?.(v)},children:e}):f?s.jsxs(s.Fragment,{children:[g&&s.jsx(Oe,{gizmoId:t.gizmo.id,creatorId:t.gizmo.author.user_id,onClose:()=>{j(!1),o?.()},children:s.jsx(We,{as:"link",to:ee(l,t)})}),s.jsx("a",{className:L("gizmo-link cursor-pointer",c),href:"#",onClick:v=>{v.preventDefault(),r?.(v),j(!0),a?.()},children:e})]}):s.jsx(ye,{to:ee(l,t),className:L("gizmo-link",c),target:"_blank",onClick:r,children:e})}function Vs(t){"use forget";const e=J.c(28),{placeholder:r,effectiveRole:a,onSelect:o,popoverClassName:i}=t,c=te(),[l,f]=p.useState("ALL"),[g,j]=p.useState(""),[v,x]=p.useState(""),[n,h]=p.useState(null),b=Y();let w;e[0]!==b?(w=je(b)?.isWorkspaceAccount(),e[0]=b,e[1]=w):w=e[1];const u=w,R=u!==void 0&&u;let S,z;e[2]!==g?(S=()=>{const M=setTimeout(()=>{x(g)},250);return()=>{clearTimeout(M)}},z=[g],e[2]=g,e[3]=S,e[4]=z):(S=e[3],z=e[4]),p.useEffect(S,z);const m=Y(),N=me();let C;e[5]!==o||e[6]!==N||e[7]!==m?(C=M=>{if(o){o(M);return}if(!ve(m,"1825130190")){const _=ee(m,M);N(_);return}h(M)},e[5]=o,e[6]=N,e[7]=m,e[8]=C):C=e[8];const F=C;let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(is,{className:"text-token-text-tertiary icon absolute start-5 top-1/2 z-30 -translate-y-1/2"}),e[9]=E):E=e[9];let A;e[10]!==c||e[11]!==r||e[12]!==i||e[13]!==g?(A=(M,O)=>s.jsxs(Ws,{label:r??c.formatMessage(U.discoverySearch),inputClassName:"bg-token-main-surface-primary! py-4 px-3 rounded-xl font-normal text-base! ps-12",popoverClassName:L("-top-3! border-token-border-default! rounded-xl",i??"bg-token-main-surface-primary!"),className:"border-token-border-default! rounded-xl! p-0! ring-0!",name:"search",inputValue:g,onInputChange:j,onTabChange:_=>f(_==="WORKSPACE"?"WORKSPACE":"ALL"),suggestions:M,RenderTab:Ys,children:[O,O==null&&s.jsx("div",{className:"w-full py-4",children:s.jsx(Xs,{})})]}),e[10]=c,e[11]=r,e[12]=i,e[13]=g,e[14]=A):A=e[14];let W;e[15]!==l||e[16]!==v||e[17]!==a||e[18]!==F||e[19]!==R||e[20]!==A?(W=s.jsx(Js,{activeTab:l,query:v,effectiveRole:a,setPopoverForceOpen:Ks,onSelect:F,showWorkspaceResults:R,renderCombobox:A}),e[15]=l,e[16]=v,e[17]=a,e[18]=F,e[19]=R,e[20]=A,e[21]=W):W=e[21];let P;e[22]!==n||e[23]!==m?(P=n&&s.jsx(Oe,{gizmoId:n.gizmo.id,creatorId:n.gizmo.author.user_id,onClose:()=>{h(null)},children:s.jsx(We,{as:"link",to:ee(m,n)})}),e[22]=n,e[23]=m,e[24]=P):P=e[24];let H;return e[25]!==W||e[26]!==P?(H=s.jsxs("div",{className:"relative z-0",children:[E,W,P]}),e[25]=W,e[26]=P,e[27]=H):H=e[27],H}function Ks(){}function Ys(t){"use forget";const e=J.c(4),{tab:r}=t,a=_e();if(r==="ALL"){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(y,{...U.discoveryAllResultsHeader}),e[0]=o):o=e[0],o}if(r==="WORKSPACE"){let o;return e[1]!==a?(o=s.jsx(y,{...U.discoveryWorkspaceResultsHeader,values:{workspaceName:a}}),e[1]=a,e[2]=o):o=e[2],o}if(r==="discoverySearchRecentlyUsed"){let o;return e[3]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(y,{...U.discoverySearchRecentlyUsed}),e[3]=o):o=e[3],o}return r}function Xs(){return s.jsx("div",{className:"flex items-center justify-center py-1",children:s.jsx(Me,{})})}function Js(t){"use forget";const e=J.c(20),{activeTab:r,query:a,effectiveRole:o,setPopoverForceOpen:i,showWorkspaceResults:c,onSelect:l,renderCombobox:f}=t;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],e[0]=g):g=e[0],p.useEffect(st,g);const{data:j,isLoading:v}=ns(a),{data:x,isLoading:n}=ls(a,c);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h={cutId:"recent",limit:3},e[1]=h):h=e[1];const{data:b,isLoading:w}=Te(h),u=j?.items,R=j?.cursor,S=x?.items,z=x?.cursor;let m;e[2]!==b?.pages?(m=b?.pages.flatMap(Zs)??[],e[2]=b?.pages,e[3]=m):m=e[3];let N;return e[4]!==r||e[5]!==o||e[6]!==w||e[7]!==v||e[8]!==n||e[9]!==l||e[10]!==a||e[11]!==f||e[12]!==i||e[13]!==c||e[14]!==u||e[15]!==R||e[16]!==S||e[17]!==z||e[18]!==m?(N=s.jsx(tt,{debouncedQuery:a,searchResults:u,isLoadingSearch:v,searchResultsCursor:R,showWorkspaceResults:c,workspaceSearchResults:S,workspaceSearchResultsCursor:z,isLoadingWorkspaceSearch:n,isLoadingRecent:w,recent:m,effectiveRole:o,setPopoverForceOpen:i,onSelect:l,activeTab:r,renderCombobox:f}),e[4]=r,e[5]=o,e[6]=w,e[7]=v,e[8]=n,e[9]=l,e[10]=a,e[11]=f,e[12]=i,e[13]=c,e[14]=u,e[15]=R,e[16]=S,e[17]=z,e[18]=m,e[19]=N):N=e[19],N}function Zs(t){return t.list.items.map(et)}function et(t){return t.resource}function st(){T.logEvent("Search Start")}function tt(t){"use forget";const e=J.c(25),{activeTab:r,debouncedQuery:a,searchResults:o,isLoadingSearch:i,searchResultsCursor:c,showWorkspaceResults:l,workspaceSearchResults:f,workspaceSearchResultsCursor:g,isLoadingWorkspaceSearch:j,recent:v,isLoadingRecent:x,effectiveRole:n,setPopoverForceOpen:h,onSelect:b,renderCombobox:w}=t;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=we(),e[0]=u):u=e[0];const R=p.useRef(u);let S;e[1]===Symbol.for("react.memo_cache_sentinel")?(S=[],e[1]=S):S=e[1],p.useEffect(rt,S);let z,m;e[2]!==a||e[3]!==i||e[4]!==o?(z=()=>{!i&&o&&(R.current=we(),o.length>0?Promise.all(o.map((F,E)=>{T.logEvent("Search Display Result",{search_id:R.current,gizmo_id:F.gizmo.id,position:E,query:a})})):T.logEvent("Search No Results",{query:a}))},m=[o,i,a],e[2]=a,e[3]=i,e[4]=o,e[5]=z,e[6]=m):(z=e[5],m=e[6]),p.useEffect(z,m);let N;e[7]!==v?(N=v??[],e[7]=v,e[8]=N):N=e[8];let C;return e[9]!==r||e[10]!==a||e[11]!==n||e[12]!==x||e[13]!==i||e[14]!==j||e[15]!==b||e[16]!==w||e[17]!==o||e[18]!==c||e[19]!==h||e[20]!==l||e[21]!==N||e[22]!==f||e[23]!==g?(C=s.jsx(ot,{query:a,activeTab:r,searchIdRef:R,searchResults:o,searchResultsCursor:c,isLoadingSearch:i,showWorkspaceResults:l,workspaceSearchResults:f,workspaceSearchResultsCursor:g,isLoadingWorkspaceSearch:j,isLoadingRecent:x,recentSearchResults:N,setPopoverForceOpen:h,effectiveRole:n,onSelect:b,renderCombobox:w}),e[9]=r,e[10]=a,e[11]=n,e[12]=x,e[13]=i,e[14]=j,e[15]=b,e[16]=w,e[17]=o,e[18]=c,e[19]=h,e[20]=l,e[21]=N,e[22]=f,e[23]=g,e[24]=C):C=e[24],C}function rt(){T.logEvent("Search Start")}function fe(t){"use forget";const e=J.c(6),{children:r,onClick:a,isSelected:o,isClickable:i}=t,c=`text-token-text-tertiary px-3 pb-2 text-xs ${o?"border-b-2 font-bold":"font-semibold"} ${i?"cursor-pointer":""}`;let l;e[0]!==a?(l=()=>{a?.()},e[0]=a,e[1]=l):l=e[1];let f;return e[2]!==r||e[3]!==c||e[4]!==l?(f=s.jsx("div",{className:c,onClick:l,children:r}),e[2]=r,e[3]=c,e[4]=l,e[5]=f):f=e[5],f}function ot(t){"use forget";const e=J.c(74),{query:r,searchIdRef:a,isLoadingRecent:o,searchResults:i,searchResultsCursor:c,isLoadingSearch:l,showWorkspaceResults:f,workspaceSearchResults:g,workspaceSearchResultsCursor:j,isLoadingWorkspaceSearch:v,recentSearchResults:x,setPopoverForceOpen:n,activeTab:h,effectiveRole:b,onSelect:w,renderCombobox:u}=t;let R;e[0]!==i?(R=i===void 0?[]:i,e[0]=i,e[1]=R):R=e[1];const S=R;let z;e[2]!==g?(z=g===void 0?[]:g,e[2]=g,e[3]=z):z=e[3];const m=z,N=cs(),[C,F]=p.useState(!1),E=ds(r,C,h==="WORKSPACE",h==="WORKSPACE"?j:c);let A;e[4]!==E.data?.pages?(A=E.data?.pages.flatMap(nt)??[],e[4]=E.data?.pages,e[5]=A):A=e[5];let W;e[6]!==E||e[7]!==A?(W={...E,data:A},e[6]=E,e[7]=A,e[8]=W):W=e[8];const{data:P,hasNextPage:H,fetchNextPage:M,isFetchingNextPage:O,isError:_}=W,[re,He]=p.useState(P.length),qe=p.useRef(null);let oe,ae;e[9]!==re||e[10]!==P.length?(oe=()=>{P.length>re&&(He(P.length),qe.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},ae=[P.length,re],e[9]=re,e[10]=P.length,e[11]=oe,e[12]=ae):(oe=e[11],ae=e[12]),p.useEffect(oe,ae);let ie;e[13]!==b||e[14]!==N||e[15]!==w||e[16]!==r||e[17]!==a?(ie=(d,k)=>{const G=d.gizmo.vanity_metrics?.num_conversations_str,B=d.gizmo.tags?.includes(X.WorkspaceDisabled)&&b!==Q.OWNER;return{id:d.gizmo.id,className:L("group flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50 dark:hover:bg-white/10",B&&"opacity-50 hover:opacity-100"),focusedClassName:"bg-gray-50 dark:bg-white/10",onClick:()=>{w?w(d):T.logEvent("Store Click Gizmo",{search_id:a.current,gizmo_id:d.gizmo.id,position:k,query:r,section:"search"})},children:s.jsx(ct,{resource:d,grayedOut:B??!1,isScreenSm:N,numConvos:G})}},e[13]=b,e[14]=N,e[15]=w,e[16]=r,e[17]=a,e[18]=ie):ie=e[18];const q=ie;if(r===""&&x&&x.length>0){let d;return e[19]!==q||e[20]!==x||e[21]!==u?(d=u({discoverySearchRecentlyUsed:x.map(q)},null),e[19]=q,e[20]=x,e[21]=u,e[22]=d):d=e[22],d}if(r===""&&o){let d;return e[23]!==u?(d=u([],null),e[23]=u,e[24]=d):d=e[24],d}if(r===""){let d;if(e[25]!==u){let k;e[27]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(fe,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(y,{...U.discoverySearchRecentlyUsedEmpty})}),e[27]=k):k=e[27],d=u([],k),e[25]=u,e[26]=d}else d=e[26];return d}if(r!==""&&!l&&h==="ALL"&&(S==null||S.length===0)){let d;if(e[28]!==u){let k;e[30]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(y,{...U.discoveryNoResultsSearch})}),e[30]=k):k=e[30],d=u([],k),e[28]=u,e[29]=d}else d=e[29];return d}if(r!==""&&!v&&h==="WORKSPACE"&&(m==null||m.length===0)){let d;if(e[31]!==u){let k;e[33]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(y,{...U.discoveryNoResultsSearch})}),e[33]=k):k=e[33],d=u([],k),e[31]=u,e[32]=d}else d=e[32];return d}if(f){if(r!==""&&!l&&!v&&(!S||S.length===0)&&(!m||m.length===0)){let d;if(e[34]!==u){let k;e[36]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx("div",{className:"mx-2",children:s.jsx(fe,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(y,{...U.discoveryNoResultsSearch})})}),e[36]=k):k=e[36],d=u([],k),e[34]=u,e[35]=d}else d=e[35];return d}}else{if(l){let d;return e[37]!==u?(d=u([],null),e[37]=u,e[38]=d):d=e[38],d}if(r!==""&&!l&&(!S||S.length===0)){let d;if(e[39]!==u){let k;e[41]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx("div",{className:"mx-2",children:s.jsx(fe,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(y,{...U.discoveryNoResultsSearch})})}),e[41]=k):k=e[41],d=u([],k),e[39]=u,e[40]=d}else d=e[40];return d}}let ne;if(e[42]!==M||e[43]!==H||e[44]!==_||e[45]!==O||e[46]!==C||e[47]!==P||e[48]!==q||e[49]!==u||e[50]!==S||e[51]!==c||e[52]!==n||e[53]!==m||e[54]!==j){let d=[];if(S){const G=S.map(q);d=[...d,...G]}if(S&&P){const G=P.map(q);d=[...d,...G]}if((!C&&P.length===0||H||O||_)&&c!=null){let G;e[56]!==M||e[57]!==n?(G=()=>{F(!0),M(),n?.(!0)},e[56]=M,e[57]=n,e[58]=G):G=e[58];const B=_?"danger-outline":"secondary";let I;e[59]!==_?(I=_?s.jsx(y,{...U.discoveryLoadMoreError}):s.jsx(y,{...U.discoveryLoadMore}),e[59]=_,e[60]=I):I=e[60];let $;e[61]!==O||e[62]!==B||e[63]!==I?($=s.jsx(V,{color:B,onClick:it,loading:O,fullWidth:!0,className:"mt-2 md:mt-3",children:I}),e[61]=O,e[62]=B,e[63]=I,e[64]=$):$=e[64];const ge={id:"all-load-more-button",className:"",onClick:G,children:$};d=[...d,ge]}const k={ALL:d};if(m){const G=m.map(q);k.WORKSPACE=G}if(m&&P){const G=P.map(q);k.WORKSPACE=[...k.WORKSPACE,...G]}if((!C&&P.length===0||H||O||_)&&j!=null){let G;e[65]!==M||e[66]!==n?(G=()=>{F(!0),M(),n?.(!0)},e[65]=M,e[66]=n,e[67]=G):G=e[67];const B=_?"danger-outline":"secondary";let I;e[68]!==_?(I=_?s.jsx(y,{...U.discoveryLoadMoreError}):s.jsx(y,{...U.discoveryLoadMore}),e[68]=_,e[69]=I):I=e[69];let $;e[70]!==O||e[71]!==B||e[72]!==I?($=s.jsx(V,{color:B,onClick:at,fullWidth:!0,className:"mt-2 md:mt-3",loading:O,children:I}),e[70]=O,e[71]=B,e[72]=I,e[73]=$):$=e[73];const ge={id:"workspace-load-more-button",className:"",onClick:G,children:$};k.WORKSPACE=[...k.WORKSPACE,ge]}ne=u(k,null),e[42]=M,e[43]=H,e[44]=_,e[45]=O,e[46]=C,e[47]=P,e[48]=q,e[49]=u,e[50]=S,e[51]=c,e[52]=n,e[53]=m,e[54]=j,e[55]=ne}else ne=e[55];return ne}function at(){}function it(){}function nt(t){return t.items.map(lt)}function lt(t){return t}function ct(t){"use forget";const e=J.c(25),{resource:r,grayedOut:a,isScreenSm:o,numConvos:i}=t,c=!!r.gizmo.tags?.includes(X.FirstParty),l=r.gizmo.display.profile_picture_url??void 0,f=a&&"grayscale group-hover:grayscale-0";let g;e[0]!==f?(g=L("h-8 w-8 shrink-0",f),e[0]=f,e[1]=g):g=e[1];let j;e[2]!==c||e[3]!==l||e[4]!==g?(j=s.jsx(ke,{isFirstParty:c,src:l,className:g}),e[2]=c,e[3]=l,e[4]=g,e[5]=j):j=e[5];let v;e[6]!==r.gizmo.display.name?(v=s.jsx("div",{className:"flex flex-row items-end space-x-2",children:s.jsx("span",{className:"shrink-0 truncate text-sm font-semibold",children:r.gizmo.display.name})}),e[6]=r.gizmo.display.name,e[7]=v):v=e[7];let x;e[8]!==o||e[9]!==r.gizmo.display.description?(x=o&&s.jsx("span",{className:"text-token-text-tertiary max-w-md truncate text-xs",children:r.gizmo.display.description}),e[8]=o,e[9]=r.gizmo.display.description,e[10]=x):x=e[10];let n;e[11]!==r?(n=s.jsx("div",{className:"-mt-1",children:s.jsx(be,{gizmo:r,className:"text-token-text-tertiary truncate text-xs",hideLink:!0})}),e[11]=r,e[12]=n):n=e[12];let h;e[13]!==i?(h=i&&s.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 font-semibold",style:{marginTop:"-2px"},children:[s.jsx(Se,{className:"icon-xs"}),s.jsx("span",{className:"line-clamp-1 text-xs",children:i})]}),e[13]=i,e[14]=h):h=e[14];let b;e[15]!==n||e[16]!==h?(b=s.jsxs("div",{className:"flex items-center gap-2",children:[n,h]}),e[15]=n,e[16]=h,e[17]=b):b=e[17];let w;e[18]!==b||e[19]!==v||e[20]!==x?(w=s.jsxs("div",{className:"flex flex-col space-y-1 truncate",children:[v,x,b]}),e[18]=b,e[19]=v,e[20]=x,e[21]=w):w=e[21];let u;return e[22]!==w||e[23]!==j?(u=s.jsxs(s.Fragment,{children:[j,w]}),e[22]=w,e[23]=j,e[24]=u):u=e[24],u}const U=de({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"}}),Fe=Pe.div`grid grid-cols-1 gap-x-1.5 gap-y-1 md:gap-x-2 md:gap-y-1.5 lg:grid-cols-2 lg:gap-x-3 lg:gap-y-2.5`,xe="gpt_store";function dt(t,e){e.scrollLeft>t.offsetLeft?e.scrollBy({left:t.offsetLeft-e.scrollLeft-20,behavior:"smooth"}):e.scrollLeft+e.clientWidth<t.offsetLeft+t.clientWidth&&e.scrollBy({left:t.offsetLeft+t.clientWidth-e.clientWidth-e.scrollLeft+20,behavior:"smooth"})}function Lt({anon:t}){const[e]=p.useState(()=>ms.getItem(us.GizmoDiscoveryLocale)),r=Le(),[a,o]=p.useState(!1),i=r?.isOwnerOfAccount()&&!a?Q.OWNER:Q.STANDARD;return s.jsx(mt,{anon:t,currAccount:r,requestedLocale:e,effectiveRole:i,setPretendStandardUser:o})}function mt({anon:t,currAccount:e,requestedLocale:r,effectiveRole:a,setPretendStandardUser:o}){const[i,c]=p.useState(void 0),l=!!t||e?.isPersonalAccount()&&!0,{data:f,isLoading:g,isError:j}=gs(r,l);p.useEffect(()=>{f&&c({locale:f.locale,workspace_filtered:f.workspace_filtered,cuts:f.cuts.map(x=>({info:x.info,list:{items:x.list.items.map(n=>n.resource),cursor:x.list.cursor}}))})},[f]);const v=(...x)=>{const n=Te(...x);return{...n,data:n.data?.pages.flatMap(h=>h.list.items.map(b=>b.resource))??[]}};return s.jsx(gt,{anon:t,discoveryLanding:i,isLoading:g,isError:j,effectiveRole:a,setPretendStandardUser:o,useFetchMoreQuery:v})}function ut(t,e){if(t)return s.jsx(le,{type:"info",children:s.jsx(y,{...D.discoveryResidencyRestriction})});switch(e){case"allow_none":return s.jsx(le,{type:"info",children:s.jsx(y,{...D.discoveryThirdPartyDisabled})});case"allow_specific":return s.jsx(le,{type:"info",children:s.jsx(y,{...D.discoveryThirdPartySpecific})});default:return null}}function gt({anon:t,discoveryLanding:e,isLoading:r,isError:a,effectiveRole:o,setPretendStandardUser:i,useFetchMoreQuery:c}){const l=Le(),f=ps(l?.getWorkspaceId()),g=p.useRef({}),[j,v]=p.useState({}),x=p.useMemo(()=>Ls(xs(e?.cuts.map(m=>({id:m.info.id,name:m.info.display_group}))),"name"),[e]),n=p.useRef(null),h=x.find(m=>j[m.id])??x[0];p.useEffect(()=>{const m=g.current,N=new IntersectionObserver(C=>{C.forEach(F=>{for(const E of x){const A=m[E.id];A!=null&&F.target===A&&v(W=>({...W,[E.id]:F.isIntersecting}))}})},{root:null,rootMargin:"-96px",threshold:.1});return Object.values(m).forEach(C=>{C!=null&&N.observe(C)}),()=>{Object.values(m).forEach(C=>{C!=null&&N.unobserve(C)})}},[g,x]);const b=p.useRef(null),w=s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:a?s.jsx(le,{type:"danger",children:s.jsx(y,{...D.discoveryError})}):s.jsx(Me,{})}),u=l?.data.residencyRegion!=null&&l.data.residencyRegion!=="no_constraint"&&l.data.residencyRegion!=="us",R=f.data?.allow_third_party_gpts,S=ut(u,R),z=s.jsxs("div",{className:"screen-arch:w-full mx-auto max-w-3xl overflow-x-clip px-4",children:[s.jsx(ft,{}),s.jsxs("div",{className:"bg-token-bg-primary sticky top-14 z-30 -mt-2 mb-12 flex flex-col gap-6 pt-2 [@media(min-width:1560px)]:top-0",children:[!t&&s.jsx(Vs,{}),s.jsx("div",{ref:n,className:"scroll-mt-28"}),S,x.length>0&&s.jsx(ht,{displayGroups:x,currentDisplayGroup:h,scrollToDisplayGroup:m=>{(g.current[m.id]??n.current).scrollIntoView({behavior:"smooth",block:"start"})}})]}),e?.cuts.map(m=>m.info.display_type==="featured"?s.jsx(vt,{info:m.info,items:m.list.items,ref:N=>{N!=null&&(g.current[m.info.id]=N)},effectiveRole:o},m.info.id):s.jsx(bt,{info:m.info,items:m.list.items,cursor:m.list.cursor??void 0,ref:N=>{N!=null&&(g.current[m.info.id]=N)},anon:t,effectiveRole:o,useFetchMoreQuery:c},m.info.id))??[]]});return r||a?s.jsxs(s.Fragment,{children:[t?s.jsx(pe,{redirectUrl:Ne(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsx(ze,{}),w]}):s.jsxs("div",{ref:b,className:"h-full overflow-y-auto",children:[t?s.jsx(pe,{redirectUrl:Ne(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsxs(s.Fragment,{children:[l?.isWorkspaceAccount()&&s.jsx(xt,{role:o,onPretendStandardUser:m=>{i(m)}}),s.jsx(ze,{})]}),z,e?.workspace_filtered&&!l?.isOwnerOfAccount()&&s.jsx(pt,{})]})}function ft(){return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"my-2 text-center text-3xl font-bold md:my-4 md:text-5xl",children:s.jsx(y,{...D.discoverySplashHeader})}),s.jsx("div",{className:"text-token-text-secondary mx-auto w-full text-center text-sm md:text-lg md:leading-tight",children:s.jsx(y,{...D.discoverySplashDescription})})]})}function ht({displayGroups:t,currentDisplayGroup:e,scrollToDisplayGroup:r}){const a=p.useRef(null),o=te(),i=(...n)=>o.formatMessage(...n),c=p.useRef({}),[l,f]=p.useState(!1);p.useEffect(()=>{if(l||e==null)return;const h=c.current[e.id];if(h==null)return;const b=a.current;b!=null&&dt(h,b)},[e,l]);const[g,j]=p.useState(!1),[v,x]=p.useState(!1);return p.useEffect(()=>{const n=a.current,h=()=>{n!=null&&(j(n.scrollLeft>0),x(n.scrollLeft+n.clientWidth<n.scrollWidth))};return n?.addEventListener("scroll",h),window.addEventListener("resize",h),h(),()=>{n?.removeEventListener("scroll",h),window.removeEventListener("resize",h)}},[a]),s.jsxs("div",{className:"bg-token-main-surface-primary sticky top-14 z-10 -ms-4 w-screen py-2 text-sm md:ms-0 md:w-full md:pb-0",children:[g&&s.jsx("div",{className:"absolute start-0 top-2 hidden h-full items-end bg-linear-to-r from-white from-50% to-transparent pe-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/20",onClick:()=>{a.current!=null&&a.current.scrollBy({left:-400,behavior:"smooth"})},children:s.jsx(js,{className:"icon-sm"})})}),s.jsx("div",{className:"no-scrollbar flex scroll-m-5 gap-1.5 overflow-x-auto md:overflow-hidden",ref:a,children:t.map(n=>s.jsx("div",{className:L("md:text-token-text-primary cursor-pointer scroll-mx-5 rounded-3xl px-3 py-2 whitespace-nowrap select-none first:ms-4 last:me-4 md:bg-transparent md:px-2 md:first:ms-0 md:last:me-0",n.id===e?.id?"border-token-text-primary text-token-main-surface-primary bg-black md:rounded-none md:border-b-2 dark:bg-gray-100 dark:md:bg-transparent":"bg-token-main-surface-secondary hover:text-token-text-primary md:text-token-text-tertiary hover:bg-gray-100 md:rounded-lg md:hover:bg-gray-50 dark:hover:bg-white/20 dark:md:bg-transparent dark:md:hover:bg-gray-700"),onClick:()=>{f(!0),r(n),setTimeout(()=>{f(!1)},1e3),T.logEvent("Store Click Category",{category:n.id})},ref:h=>{h!=null&&(c.current[n.id]=h)},children:i({id:`gizmo.categoryName.${n.name}`,defaultMessage:n.name,description:"store category"})},n.id))}),v&&s.jsx("div",{className:"absolute end-0 top-2 hidden h-full bg-linear-to-l from-white from-50% to-transparent ps-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/10",onClick:()=>{a.current!=null&&a.current.scrollBy({left:400,behavior:"smooth"})},children:s.jsx(bs,{className:"icon-sm"})})})]})}function pt(){const t=te(),e=_e(),r=Ss();return s.jsxs("div",{className:L("bg-token-main-surface-secondary text-token-text-secondary screen-arch:static fixed bottom-0 flex w-full items-center justify-center gap-2 p-3 text-sm",r&&"md:w-[calc(100%-16rem)]"),children:[s.jsx(De,{className:"icon-sm"}),t.formatMessage(D.discoveryThirdPartyGPTsDisabled,{workspaceName:e})]})}function xt({role:t,onPretendStandardUser:e}){const r=te();return ks()?s.jsxs("div",{className:"h-52px flex w-full items-center justify-center gap-2 bg-gray-100 p-3 text-sm dark:bg-gray-700",children:[s.jsx(De,{className:"icon-sm"}),s.jsx(y,{id:"gizmo.discovery.browsingAsOwner",defaultMessage:"You're viewing as a <b>workspace member</b>",values:{b:o=>s.jsxs(K.Root,{defaultValue:t,onValueChange:i=>{e(i===Q.STANDARD)},children:[s.jsxs(K.Trigger,{className:"-mx-2 -my-2 bg-transparent px-1 font-semibold",children:[s.jsx(ue,{disabled:t!==Q.OWNER,label:r.formatMessage({id:"gizmo.discovery.browsingAsOwnerTooltip",defaultMessage:"Owners can access all third-party GPTs, even if they haven’t been approved."}),side:"bottom",triggerAs:null,children:s.jsx(K.Value,{})}),s.jsx(K.Icon,{})]}),s.jsx(K.Portal,{children:s.jsxs(K.Content,{children:[s.jsx(K.Item,{value:Q.OWNER,children:s.jsx(y,{id:"gizmo.discovery.browsingOwnerRole",defaultMessage:"workspace owner"})}),s.jsx(K.Item,{value:Q.STANDARD,children:s.jsx(y,{id:"gizmo.discovery.browsingMemberRole",defaultMessage:"workspace member"})})]})})]})}})]}):null}function ze({isMobile:t=!1}){const e=he(),r=me(),a=te(),{canCreate:o,isLoading:i}=fs(),c=Y(),f=je(c)?.planType??"unknown",g=()=>{o?(T.logEvent("Store Create Gizmo"),r(e)):(T.logUpsellGetPlusButtonClicked({location:xe,type:"create_gpt",plan_type:f}),Ee(r,"Gizmo Discovery page upsell"))};return s.jsx(s.Fragment,{children:s.jsxs(Ms,{className:L("z-30 flex w-full items-center justify-between whitespace-nowrap",t&&"ps-2 pe-0",!t&&"max-md:hidden"),children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"hidden md:flex",children:s.jsx(As,{clientThreadId:hs})}),s.jsx("h1",{className:"px-2 text-lg font-normal select-none [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)]",children:s.jsx(y,{id:"h8AzQb",defaultMessage:"Explore GPTs"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"hidden items-center gap-2 md:flex",children:[o&&s.jsx(V,{color:"ghost",onClick:()=>{r("/gpts/mine"),T.logEvent("Store My Gizmos")},children:s.jsx(y,{...D.discoveryMyGPTs})}),s.jsx(yt,{canCreateGPTs:o,loadingPermissions:i,createUrl:e})]}),s.jsx("div",{className:"md:hidden",children:s.jsxs(Ge,{contentAlign:"end",triggerButton:s.jsx(Ts,{"aria-label":a.formatMessage({id:"pdxBIm",defaultMessage:"Open actions menu"})}),children:[o&&s.jsx(ce.Item,{onClick:()=>{r("/gpts/mine"),T.logEvent("Store My Gizmos")},children:s.jsx(y,{...D.discoveryMyGPTs})}),s.jsx(ce.Item,{onClick:g,children:s.jsx(y,{...D.discoveryCreateGPT})})]})}),s.jsx("div",{className:"hidden md:block",children:s.jsx(_s,{})})]})]})})}const yt=({canCreateGPTs:t,loadingPermissions:e,createUrl:r})=>{const[a,o]=p.useState(!1),i=p.useRef(void 0),c=ys(),l=Y(),f=je(l),g=f?.isFree(),j=f?.isWorkspaceAccount(),v=f?.planType??"unknown",x="create_gpt",n=()=>{t||(T.logPopoverHover({location:xe,type:x,plan_type:v}),clearTimeout(i.current),o(!0))},h=()=>{t||(i.current=c(function(){o(!1)},300))},b=me(),w=()=>{T.logUpsellGetPlusButtonClicked({location:xe,type:x,plan_type:v}),Ee(b,"Gizmo Discovery page upsell")},u=t?()=>T.logEvent("Store Create Gizmo"):R=>R.preventDefault();return s.jsxs("div",{onMouseEnter:n,onMouseLeave:h,className:"screen-arch:flex screen-arch:items-center relative",children:[s.jsx(V,{color:"secondary",disabled:!t,visuallyDisabled:!t,onClick:u,as:"link",to:r,icon:Ae,"data-testid":"create-gpt-discovery-button",loading:e,children:s.jsx(y,{...D.discoveryCreateGPT})}),!t&&a&&s.jsx("div",{className:"border-token-border-default bg-token-main-surface-primary screen-arch:top-12 absolute end-0 z-10 mt-2 w-64 rounded-lg border p-3 text-sm shadow-lg",children:g?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(y,{...D.createGPTUpsell})}),s.jsx(V,{color:"secondary",onClick:w,size:"small",children:s.jsx(y,{...vs(l)})})]}):j?s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(y,{...D.createGPTDisabledByAdmin})}):null})]})},vt=p.forwardRef(function({info:e,items:r,effectiveRole:a},o){return s.jsx(Be,{title:e.title,description:e.description,ref:o,children:s.jsx(Fe,{children:r.map((i,c)=>s.jsx(jt,{resource:i,effectiveRole:a},`${c}-${i.gizmo.id}`))})})});function jt({resource:t,effectiveRole:e}){const r=t.gizmo.vanity_metrics?.num_conversations_str,a=t.gizmo.tags?.includes(X.WorkspaceDisabled)&&e!==Q.OWNER;return s.jsx(se,{children:s.jsxs(Ue,{gizmo:t,className:L("group flex h-24 items-center gap-5 overflow-hidden rounded-xl bg-gray-50 px-7 py-8 hover:bg-gray-100 md:h-32 lg:h-36 dark:bg-gray-700 dark:hover:bg-white/10",a&&"opacity-50 hover:opacity-100"),onClick:()=>{T.logEvent("Store Click Gizmo",{gizmo_id:t.gizmo.id,section:"featured"})},children:[s.jsx(ke,{isFirstParty:!!t.gizmo.tags?.includes(X.FirstParty),src:t.gizmo.display.profile_picture_url??void 0,className:L("h-16 w-16 shrink-0 md:h-24 md:w-24",a&&"grayscale group-hover:grayscale-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"line-clamp-2 font-semibold md:text-lg",children:t.gizmo.display.name}),s.jsx("span",{className:"line-clamp-2 text-xs md:line-clamp-3",children:t.gizmo.display.description}),s.jsxs("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 flex justify-start gap-1 text-xs",children:[s.jsx(be,{gizmo:t,className:"text-xs",hideLink:!0}),r&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px]",children:"•"}),s.jsx(Se,{className:"mt-0.5 h-3 w-3"}),r]})]})]})]})})}const bt=p.forwardRef(function({info:e,items:r,cursor:a,anon:o,effectiveRole:i,useFetchMoreQuery:c},l){const[f,g]=p.useState(r.length===0),{data:j,hasNextPage:v,fetchNextPage:x,isFetchingNextPage:n,isError:h}=c({cutId:e.id,locale:e.locale,limit:6,cursor:a,enabled:f});p.useEffect(()=>{r.length===0&&x()},[x,r.length]);const[b,w]=p.useState(j.length),u=p.useRef(null),R=Ve(.1);return p.useEffect(()=>{j.length>b&&(w(j.length),u.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},[j.length,b]),s.jsxs(Be,{title:e.title,description:e.description,ref:l,children:[s.jsxs(Fe,{children:[r.map((S,z)=>s.jsx(Ce,{resource:S,rank:z+1,cutId:e.id,effectiveRole:i},z)),j.map((S,z)=>s.jsx(Ce,{resource:S,rank:r.length+z+1,cutId:e.id,delay:R(z-b,j.length-b),effectiveRole:i},z))]}),(!f||v||n||h)&&!o&&a!=null&&s.jsx(V,{color:h?"danger-outline":"secondary",onClick:()=>{g(!0),T.logEvent("Store Load More",{section:e.id}),x()},fullWidth:!0,className:"mt-2 md:mt-3",loading:n,children:h?s.jsx(y,{...D.discoveryLoadMoreError}):s.jsx(y,{...D.discoveryLoadMore})}),s.jsx("div",{ref:u})]})});function Ce({resource:t,rank:e,cutId:r,delay:a,effectiveRole:o}){const i=t.gizmo.tags?.includes(X.WorkspaceDisabled)&&o!==Q.OWNER,c=t.gizmo.tags?.includes(X.FirstParty);return s.jsx(se,{delay:a,children:s.jsxs(Ue,{gizmo:t,className:L("group hover:bg-token-main-surface-secondary flex h-[104px] items-center gap-2.5 overflow-hidden rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",i&&"opacity-50 hover:opacity-100"),onClick:()=>{T.logEvent("Store Click Gizmo",{gizmo_id:t.gizmo.id,position:e,section:c?"first_party":r})},children:[s.jsx("div",{className:"text-md flex w-8 shrink-0 items-center justify-center font-semibold",children:e}),s.jsx(Gs,{resource:t,grayedOut:i})]},t.gizmo.id)})}const Be=p.forwardRef(function({title:e,description:r,className:a,children:o},i){return s.jsxs("div",{ref:i,className:"h-fit scroll-mt-28 last:min-h-[calc(100vh-8rem)]",children:[s.jsxs(se,{animateTap:!1,children:[s.jsx("div",{className:"text-xl font-semibold md:text-2xl",children:e}),r&&s.jsx("div",{className:"text-token-text-tertiary text-sm md:text-base",children:r})]}),s.jsx("div",{className:L("mt-4 mb-10",a),children:o})]})}),D=de({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryEmpty:{id:"gizmo.discovery.empty",defaultMessage:"Nothing to discover"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoveryError:{id:"gizmo.discovery.error",defaultMessage:"Error loading GPTs"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchSmall:{id:"gizmo.discovery.searchSmall",defaultMessage:"Search"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoverySearchResults:{id:"gizmo.discovery.search.results",defaultMessage:"Search Results"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"},discoveryMyGPTs:{id:"gizmo.discovery.myGPTs",defaultMessage:"My GPTs"},discoveryCreateGPT:{id:"gizmo.discovery.createGPT",defaultMessage:"Create"},discoveryThirdPartyGPTsDisabled:{id:"gizmo.discovery.thirdPartyGPTsDisabled",defaultMessage:"Your admin has blocked GPTs created outside {workspaceName}."},discoverySplashHeader:{id:"gizmo.discovery.splashHeader",defaultMessage:"GPTs"},discoverySplashDescription:{id:"gizmo.discovery.splashDescription",defaultMessage:"Discover and create custom versions of ChatGPT that combine instructions, extra knowledge, and any combination of skills."},discoveryGlobalViewOn:{id:"gizmo.discovery.globalViewOn",defaultMessage:"Global View On"},discoveryGlobalViewOff:{id:"gizmo.discovery.globalViewOff",defaultMessage:"Global View Off"},createdAgoLabel:{id:"gizmo.discovery.createdAgoLabel",defaultMessage:"Created {createdAgo}"},createGPTUpsell:{id:"gizmo.discovery.createGPTUpsell",defaultMessage:"Get ChatGPT Plus to create and share your own GPTs"},createGPTDisabledByAdmin:{id:"bOPXXW",defaultMessage:"Your admin has disabled the ability to create GPTs."},discoveryResidencyRestriction:{id:"gizmo.discovery.residencyRestriction",defaultMessage:"To comply with data residency requirements, only GPTs created within your workspace are accessible. All third-party GPTs are not available."},discoveryThirdPartyDisabled:{id:"gizmo.discovery.thirdPartyDisabled",defaultMessage:"Your admin has disabled all third-party GPTs. Only workspace GPTs are available."},discoveryThirdPartySpecific:{id:"gizmo.discovery.thirdPartySpecific",defaultMessage:"Your admin has disabled most third-party GPTs, except for specific ones that have been explicitly approved. Workspace GPTs are available."}});export{Tt as C,ze as G,Vs as a,Lt as b,Bs as c,Mt as d,Gt as e,Is as f};
//# sourceMappingURL=k0q8dyb7h41x2xxl.js.map
