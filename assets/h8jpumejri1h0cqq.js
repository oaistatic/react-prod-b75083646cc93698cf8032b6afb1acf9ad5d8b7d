const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/b3v5gdssmpyjnk3e.js","assets/lu2xqwqmjc95q6j6.js","assets/hml6mmd5fyx85si7.js","assets/root-c0w5lvnh.css","assets/rseqzngxzbdt1oxg.js","assets/conversation-small-gcvo4yhm.css","assets/fr9vfqox5r3jcnyn.js","assets/l2fd3uykkvam5v10.js","assets/cbv7m7gzxwxfl3ng.js","assets/d3y72ugnrmac5z1v.js","assets/2hmyxe0qgu7tetdx.js","assets/d7o4nful0h1qw8zk.js","assets/gwgozeiaqx1b8zio.js"])))=>i.map(i=>d[i]);
import{bg as I,R as b,rE as A,d as z,b5 as K,rp as oe,b as ve,G,dp as ne,g0 as be,bd as C,ca as Ne,aM as ye,a as le,c4 as ce,rF as Ce,C as Re,bz as re,qL as _e,aB as p,c6 as de,b$ as q,bY as Ue,B as V,gg as Q,pL as J,ap as ke,aq as Ie,aj as Pe,eW as we,aZ as Se,lI as De}from"./hml6mmd5fyx85si7.js";import{u as H,e as f,l as L,n as P,d as N,j as e,a as me,r as h,M as x,b as qe}from"./lu2xqwqmjc95q6j6.js";import{T as c}from"./l2fd3uykkvam5v10.js";import{b9 as ue,a$ as Te,w as Ae,ps as O,gn as Ee,o5 as Y,pt as Z,gu as Be,iz as ie,iy as X,aE as Fe,gN as Ve,q as We,d8 as He,pu as Le,go as Oe}from"./rseqzngxzbdt1oxg.js";import{m as ge}from"./hha17k7whjt7ek1d.js";import{G as $e}from"./dafnu86qge6fqm1m.js";import{T as Ge,a as ze}from"./lw59bzx669b21lsh.js";import{a as Ke,c as Qe,u as Je}from"./cz3tvo7iwbv2krt2.js";import"./owyq2pc3j9e6vumq.js";import"./on8091w14zfmyea2.js";import"./cqyjjngibokvfw83.js";import"./ogr5nmy9hq7gfgq0.js";import"./iq82wz84d1fxj03i.js";import"./elolu96rnfzqcgif.js";import"./kcqshnk26ykm1u4n.js";import"./fibktxptqydbr54o.js";import"./6a3e5rtr9pyzi31y.js";import"./ik8y7nlve9mzjttb.js";import"./isxemcalu9537a8n.js";import"./ejklrllfl9wcn2za.js";import"./gnhjnh2n0u3gy6qx.js";import"./e0pswmo7irlt62pp.js";import"./fd9rmcpa6ai71fe6.js";import"./ml28jwjklb12w4ms.js";import"./kj7psz5s4tjdmz6e.js";import"./isqkn4xlzoktkvfr.js";const k=25;function Ye(s,a,t){return H({queryKey:["workspace",s,"invites",a,t],queryFn:async()=>await b.safeGet("/accounts/{account_id}/invites",{parameters:{path:{account_id:s},query:{offset:a,limit:k,query:t}}})})}function Ze(s,a,t){return H({queryKey:["workspace",s,"invites","requests",a,t],queryFn:()=>b.safeGet("/accounts/{account_id}/invites",{parameters:{path:{account_id:s},query:{include_pending:!1,include_requests:!0,offset:a,limit:k,query:t}}})})}function xe(s){const a=f(),t=I(),n=L();return P({mutationFn:({inviteId:r,role:l,acceptRequest:o})=>b.safePatch("/accounts/{account_id}/invites/{invite_id}",{parameters:{path:{account_id:s,invite_id:r}},requestBody:{role:l,accept_request:o}}).catch(i=>{t.danger(a.formatMessage(y.updateInviteError,{error:i.message}),{loggingTitle:y.updateInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to update invite from workspace"})}),onSuccess:(r,l)=>{if(l.acceptRequest)n.setQueriesData({queryKey:["workspace",s,"invites","requests"]},o=>{if(!o)return o;const i=o.items.filter(d=>d.id!==l.inviteId),m=Math.max(0,(o.total??0)-1);return{...o,items:i,total:m}});else if(l.role){const o=l.role;n.setQueriesData({queryKey:["workspace",s,"invites","requests"]},i=>{if(!i)return i;const m=i.items.map(d=>d.id===l.inviteId?{...d,role:o}:d);return{...i,items:m}})}}})}function he(s){const a=f(),t=I(),n=L();return P({mutationFn:({email:r})=>b.safeDelete("/accounts/{account_id}/invites",{parameters:{path:{account_id:s}},requestBody:{email_address:r}}).catch(l=>{t.danger(a.formatMessage(y.deleteInviteError,{email:r,error:l.message}),{loggingTitle:y.deleteInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to remove user from workspace"})}),onSuccess:(r,{email:l})=>{n.setQueriesData({queryKey:["workspace",s,"invites","requests"]},o=>{if(!o)return o;const i=o.items.filter(d=>d.email_address!==l),m=Math.max(0,(o.total??0)-1);return{...o,items:i,total:m}})}})}function Xe(s){const a=f(),t=I(),n=L();return P({mutationFn:({role:r,email:l})=>b.safePost("/accounts/{account_id}/invites",{parameters:{path:{account_id:s}},requestBody:{email_addresses:[l],role:r,resend_emails:!0}}).then(({account_invites:o,errored_emails:i})=>{if(i.length>0)throw new Error(i[0].error);o.length>0&&t.success(a.formatMessage(y.resendInviteSuccess,{email:l}))}).catch(o=>{t.danger(a.formatMessage(y.resendInviteError,{email:l,error:o.message}),{loggingTitle:y.resendInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to resend invite to user"})}),onSuccess:()=>{n.invalidateQueries({queryKey:["workspace",s,"invites"]}),n.invalidateQueries({queryKey:["workspace",s,"invites","requests"]})}})}const y=N({updateInviteError:{id:"WorkspaceInvites.updateInviteError",defaultMessage:"Unable to add new user to workspace: {error}"},deleteInviteError:{id:"WorkspaceInvites.deleteInviteError",defaultMessage:"Unable to remove user ({email}) from workspace: {error}"},resendInviteSuccess:{id:"WorkspaceInvites.resendInviteSuccess",defaultMessage:"Sent a new invite to {email}"},resendInviteError:{id:"WorkspaceInvites.resendInviteError",defaultMessage:"Unable to resend invite to ({email}) from workspace: {error}"}}),ee=({userName:s,isScimManaged:a,dotted:t=!1})=>e.jsxs("div",{className:"relative me-3",children:[e.jsx(ue,{user:{name:s,picture:null},size:"default",dotted:t}),a&&e.jsx("div",{className:"bg-token-bg-tertiary absolute -end-1 -bottom-1 rounded-full border-2 border-white p-0.25",children:e.jsx(Te,{width:10,height:10})})]}),es=({children:s,ref:a,...t})=>e.jsx(A.Root,{license:"commercial",sheetRole:"dialog",...t,ref:a,children:s}),ss=({children:s,ref:a,className:t,contentPlacement:n="left",...r})=>e.jsx(A.View,{className:z("z-1",t),contentPlacement:n,swipeOvershoot:!1,nativeEdgeSwipePrevention:!0,...r,ref:a,children:s}),as=({className:s,ref:a,...t})=>e.jsx(A.Backdrop,{className:s,...t,ref:a}),ts=({children:s,ref:a,className:t,...n})=>e.jsx(A.Content,{className:z("bg-token-bg-primary box-border shadow-lg",t),...n,ref:a,children:s}),ns=A.Portal,D={Root:es,Portal:ns,View:ss,Backdrop:as,Content:ts},rs=({workspaceId:s,userId:a})=>H({queryKey:[s,a,"user-roles"],queryFn:async()=>(await b.safeGet("/rbac/workspace/{workspace_id}/principals/{principal_id}/roles",{parameters:{query:{account_id:s},path:{workspace_id:s,principal_id:a}}})).roles}),is=({workspaceId:s,userId:a,enabled:t})=>H({enabled:t,queryKey:[s,a,"user-groups"],queryFn:async()=>(await b.safeGet("/accounts/{account_id}/users/{account_user_id}/groups",{parameters:{path:{account_id:s,account_user_id:a}}})).items}),os=({workspaceId:s,user:a,onClose:t})=>{const n=f(),r=K(),l=me(),o=oe(),i=r?.isEnterprisey(),{data:m}=rs({workspaceId:s,userId:a.id}),d=h.useMemo(()=>m?.filter(u=>!u.predefined_role),[m]),{data:g}=is({workspaceId:s,userId:a.account_user_id,enabled:i});return e.jsx(D.Root,{presented:!0,defaultPresented:!0,onPresentedChange:t,children:e.jsx(D.Portal,{children:e.jsxs(D.View,{contentPlacement:"right",children:[e.jsx(D.Backdrop,{}),e.jsxs(D.Content,{style:{maxWidth:500},children:[e.jsxs("h1",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{}),e.jsx(ve,{onClick:t,iconSize:"lg",autoFocus:!0})]}),e.jsxs("div",{className:"flex flex-col gap-3 px-10 pt-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[e.jsx(ue,{user:{name:a.name??"",picture:null},size:"large"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-heading-3",children:a.name}),e.jsx("div",{children:a.email})]})]}),e.jsx("hr",{className:"my-2.5"}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-caption-regular",children:n.formatMessage(B.groups)}),g==null&&e.jsx(G,{}),g?.length===0&&e.jsx("div",{className:"text-token-text-tertiary text-sm italic",children:n.formatMessage(B.noGroups)}),g?.map(u=>e.jsx(ne,{className:"mx-0",as:"button",onClick:()=>l(`/admin/groups/${u.id}`),children:e.jsx("div",{className:"flex items-center justify-between gap-2 text-start",children:e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{children:e.jsx($e,{group:u})}),e.jsx("div",{children:u.name})]})})},u.id))]}),e.jsx("hr",{className:"my-2.5"})]}),o&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-caption-regular",children:n.formatMessage(B.customRoles)}),d==null&&e.jsx(G,{}),d?.length===0&&e.jsx("div",{className:"text-token-text-tertiary text-sm italic",children:n.formatMessage(B.noCustomRoles)}),d?.map(u=>e.jsx(ne,{className:"mx-0",as:"button",onClick:()=>l(`/admin/permissions/roles/${u.id}`),children:e.jsx("div",{className:"flex items-center justify-between gap-2 text-start",children:e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{children:u.predefined_role?e.jsx(Ae,{className:"icon"}):e.jsx(be,{className:"icon"})}),e.jsxs("div",{children:[e.jsx("div",{children:u.name}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:u.description})]})]})})},u.id))]})]})]})]})})})},B=N({customRoles:{id:"tt2Vcr",defaultMessage:"Custom roles"},noCustomRoles:{id:"esz0bm",defaultMessage:"No custom roles assigned"},groups:{id:"zWtMsq",defaultMessage:"Groups"},noGroups:{id:"VRtXNY",defaultMessage:"No groups assigned"}});function se({currentRole:s,onUpdateUserRole:a,disabled:t=!1}){const n=O();return e.jsx(Ee,{disabled:t,defaultValue:s,onValueChange:r=>{a(r)},triggerClassName:"text-base",options:[{label:n[C.STANDARD],value:C.STANDARD},{label:n[C.ADMIN],value:C.ADMIN},{label:n[C.OWNER],value:C.OWNER}]})}const T=Ne(()=>({confirmModalUserData:null})),W={openModalForUser:s=>{T.setState({confirmModalUserData:s})},closeModal:()=>{T.setState({confirmModalUserData:null})}};function ls({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),r=ye(),[l,o]=h.useState(),i=oe(),m=r?.id,d=Y(s),g=Z(s),u=d||g,M=gs(),E=hs(s),pe=xs(s),{data:$}=Be(s,t*ie,a),fe=h.useCallback(j=>{W.openModalForUser(j)},[]),Me=h.useCallback(()=>{const j=T.getState().confirmModalUserData?.id;j!==void 0&&E.mutate({userId:j}),W.closeModal(),o(void 0)},[E]),je=h.useCallback((j,S)=>{M.mutate({userId:j,value:S,workspaceId:s})},[M,s]);if($===void 0)return e.jsx(ae,{});const te=$.items,w=Math.ceil(($.total??0)/ie);return t>=w&&w!==0&&n(Math.max(w-1,0)),e.jsxs(e.Fragment,{children:[e.jsxs(c.Root,{fixed:!0,size:"normal",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[60%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-[20%]"}),u&&e.jsx("col",{className:"w-16"})]}),e.jsxs(c.Header,{children:[e.jsx(c.HeaderCell,{children:e.jsx(x,{...v.name})}),e.jsx(c.HeaderCell,{children:e.jsx("span",{className:d?"ps-3":"",children:e.jsx(x,{...v.accountType})})}),e.jsx(c.HeaderCell,{children:e.jsx(x,{...v.dateAdded})}),u&&e.jsx(c.HeaderCell,{className:"w-16"})]}),e.jsxs(c.Body,{children:[te.map(j=>e.jsx(ms,{isCurrentUser:m!==void 0&&j.id===m,user:j,currentUserHasAdminRights:u,isCurrentUserOwner:d,onRemoveUserClick:()=>fe({id:j.id,name:j.name??"",email:j.email??"",created_time:j.created_time}),onUpdateUserRole:je,onLogoutUser:async S=>{await pe.mutateAsync({userId:S})},onClick:i?S=>o(S):void 0},j.id)),te.length===0&&e.jsx(c.Row,{className:"[&>td]:py-2",children:e.jsx(c.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...v.noResults})})})})]})]}),e.jsx("div",{className:"relative mt-4 mb-8 min-h-[20px]",children:w>1&&e.jsx("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:e.jsx(X,{currentPage:t,onChangeIndex:n,length:w})})}),l&&e.jsx(os,{workspaceId:s,user:l,onClose:()=>o(void 0)}),e.jsx(ds,{onDeleteConfirm:Me})]})}function cs({onConfirm:s,onClose:a}){const t=f(),[n,r]=h.useState(!1);return e.jsx(Ve,{title:t.formatMessage(v.logoutMemberModalTitle),isOpen:!0,onClose:a,onConfirm:async()=>{try{r(!0),await s()}finally{r(!1)}a()},loading:n,confirmText:t.formatMessage(v.logoutMemberModalConfirm),primaryButtonColor:"danger"})}function ds({onDeleteConfirm:s}){const a=f(),t=T(r=>r.confirmModalUserData!==null),n=T(r=>r.confirmModalUserData===null?{}:{userId:r.confirmModalUserData.id,email:r.confirmModalUserData.email,name:r.confirmModalUserData.name,dateAdded:Ce(r.confirmModalUserData.created_time)});return e.jsx(Re,{testId:"modal-remove-member",isOpen:t,title:a.formatMessage(v.removeMemberModalTitle),onClose:()=>W.closeModal(),type:"success",primaryButton:e.jsx(re.Button,{title:a.formatMessage(v.removeMemberModalConfirm),color:"danger",onClick:s}),secondaryButton:e.jsx(re.Button,{title:a.formatMessage(v.removeMemberModalCancel),color:"secondary",onClick:()=>W.closeModal()}),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.name??n.email,e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...v.dateJoined,values:{dateAdded:a.formatDate(n.dateAdded,{year:"numeric",month:"long",day:"numeric"})}})})]})})}function ms({user:s,currentUserHasAdminRights:a,isCurrentUserOwner:t,isCurrentUser:n,onRemoveUserClick:r,onUpdateUserRole:l,onLogoutUser:o,onClick:i}){const d=O()[s.role],g=f(),u=s.name??g.formatMessage(v.missingName),M=le();return e.jsxs(c.Row,{className:z("[&>td]:py-2"),onClick:i?()=>i?.(s):void 0,children:[e.jsxs(c.Cell,{children:[e.jsx("div",{className:"relative pe-3",children:e.jsx(ee,{userName:u,isScimManaged:s.is_scim_managed})}),e.jsxs("div",{children:[e.jsxs("div",{children:[u,n&&e.jsx("span",{className:"ms-1",children:e.jsx(x,{...v.youSpecifier})})]}),e.jsx("div",{className:"text-body-small-regular text-token-text-secondary",children:s.email})]})]}),e.jsx(c.Cell,{children:t?e.jsx(se,{currentRole:s.role,onUpdateUserRole:E=>{l(s.id,E)},disabled:n}):d}),e.jsx(c.Cell,{children:g.formatDate(s.created_time,{month:"short",day:"numeric",year:"numeric"})}),a&&e.jsx(c.Cell,{children:e.jsx(us,{userId:s.id,onRemoveUserClick:r,onLogoutUserClick:()=>{ce(M,cs,{onConfirm:()=>o(s.id)})},disabled:n,isScimManaged:s.is_scim_managed})})]})}function us({disabled:s,onRemoveUserClick:a,onLogoutUserClick:t,userId:n,isScimManaged:r}){const l=f(),o=_e();return s?null:r?e.jsx(p.Root,{children:e.jsx(p.Trigger,{disabled:!0,children:e.jsx(de,{label:l.formatMessage(ge.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(q,{className:"icon-sm"})})})}):e.jsxs(p.Root,{children:[e.jsx(p.Trigger,{className:"-my-2",children:e.jsx(q,{className:"icon-sm"})}),e.jsx(p.Portal,{children:e.jsxs(p.Content,{size:"small",children:[o&&e.jsx(p.Item,{onClick:i=>{i.stopPropagation(),t(n)},icon:e.jsx(Ue,{}),children:e.jsx(x,{...v.logoutMember})}),e.jsx(p.Item,{onClick:i=>{i.stopPropagation(),a(n)},icon:e.jsx(Fe,{className:"text-token-text-status-error"}),className:"text-token-text-status-error",children:e.jsx(x,{...v.removeMemberModalTitle})})]})})]})}function gs(){const s=I();return P({mutationFn:({userId:a,workspaceId:t,value:n})=>b.safePatch("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:t,user_id:a}},requestBody:{role:n}}).catch(r=>{s.danger(`Unable to update user (${a}) role: ${r.message}`,{toastId:"user_manager_table"})})})}function xs(s){const a=I();return P({mutationFn:({userId:t})=>b.safePost("/accounts/{account_id}/users/{user_id}/logout_all",{parameters:{path:{account_id:s,user_id:t}}}),onError:(t,n)=>{a.danger(`Unable to logout user (${n.userId}) from workspace`,{toastId:"user_manager_table"})},onSuccess:()=>{a.success("User logged out of all sessions",{id:"user_logout_success"})}})}function hs(s){const a=L(),t=I();return P({mutationFn:({userId:n})=>b.safeDelete("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:s,user_id:n}}}).catch(r=>{t.danger(`Unable to remove user (${n}) from workspace: ${r.message}`,{toastId:"user_manager_table"})}),onSuccess:()=>{a.invalidateQueries({queryKey:["workspace",s]})}})}function ae(){return e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx(G,{})})}const v=N({name:{id:"UserManager.name",defaultMessage:"Name"},email:{id:"UserManager.email",defaultMessage:"Email"},accountType:{id:"UserManager.accountType",defaultMessage:"Account type"},dateAdded:{id:"UserManager.dateAdded",defaultMessage:"Date added"},role:{id:"UserManager.role",defaultMessage:"Role"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}"},logoutMember:{id:"UserManager.logoutMember",defaultMessage:"Log out member"},logoutMemberModalTitle:{id:"UserManager.logoutMemberModalTitle",defaultMessage:"Log out member confirmation"},logoutMemberModalConfirm:{id:"SdeSUj",defaultMessage:"Confirm log out"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member"},noResults:{id:"UserManager.noResults",defaultMessage:"No results"},leaveWorkspace:{id:"adminPage.leaveWorkspace",defaultMessage:"Leave workspace"}});function ps({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),{data:r}=Ze(s,t*k,a),l=Y(s),o=Z(s),i=f(),m=l||o;if(r===void 0)return e.jsx(ae,{});const d=r.items,g=Math.ceil((r.total??0)/k);return t>=g&&g!==0&&n(Math.max(g-1,0)),e.jsxs("div",{children:[e.jsxs(c.Root,{fixed:!0,size:"normal",children:[e.jsxs(c.Header,{children:[e.jsx(c.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(x,{..._.email})}),e.jsx(c.HeaderCell,{className:"bg-token-main-surface-primary w-28",children:e.jsx("span",{className:m?"ps-3":"",children:e.jsx(x,{..._.role})})}),m&&e.jsx(c.HeaderCell,{className:"bg-token-main-surface-primary w-40",children:i.formatMessage(_.actions)})]}),e.jsxs(c.Body,{children:[d.map(u=>e.jsx(fs,{workspaceId:s,invite:u,isCurrentUserOwner:l,currentUserHasAdminRights:m},u.id)),d.length===0&&e.jsx(c.Row,{children:e.jsx(c.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{..._.noResults})})})})]})]}),g>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(X,{currentPage:t,onChangeIndex:n,length:g})})]})}function fs({workspaceId:s,invite:a,isCurrentUserOwner:t,currentUserHasAdminRights:n}){const r=O(),l=xe(s),o=he(s),i=f();return e.jsxs(c.Row,{className:"[&>td]:py-2",disabled:l.isPending||o.isPending||o.isPending,children:[e.jsx(c.Cell,{children:e.jsxs("span",{className:"flex grow",children:[e.jsx(ee,{userName:a.email_address??"",isScimManaged:a.is_scim_managed,dotted:!0}),e.jsx("span",{children:a.email_address})]})}),e.jsx(c.Cell,{children:t?e.jsx(se,{currentRole:a.role,onUpdateUserRole:m=>{l.mutate({inviteId:a.id,role:m})}}):r[a.role]}),n&&e.jsx(e.Fragment,{children:e.jsx(c.Cell,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{onClick:()=>l.mutate({inviteId:a.id,acceptRequest:!0}),children:i.formatMessage(_.accept)}),e.jsx(V,{color:"secondary",onClick:()=>o.mutate({email:a.email_address??""}),children:i.formatMessage(_.reject)})]})})})]})}const _=N({email:{id:"RequestInviteManager.email",defaultMessage:"Email"},role:{id:"RequestInviteManager.role",defaultMessage:"Role"},actions:{id:"RequestInviteManager.actions",defaultMessage:"Actions"},accept:{id:"RequestInviteManager.accept",defaultMessage:"Accept"},reject:{id:"RequestInviteManager.reject",defaultMessage:"Reject"},noResults:{id:"RequestInviteManager.noResults",defaultMessage:"No results"}}),Ms=({workspaceId:s})=>{const a=f(),[t,n]=h.useState(""),[r,l]=h.useState(""),o=h.useMemo(()=>Q(i=>l(i),300,{leading:!1,trailing:!0}),[]);return e.jsxs("div",{className:"mt-6",children:[e.jsx(J,{value:t,onChange:i=>{n(i.target.value),o(i.target.value)},placeholder:a.formatMessage(js.searchRequestPlaceholder),className:"mb-4.5",inputClassName:"rounded-full! text-sm"}),e.jsx(ps,{workspaceId:s,filterInputValue:r})]})},js=N({pendingRequests:{id:"admin.workspace.members.pendingRequests",defaultMessage:"Pending Requests"},searchRequestPlaceholder:{id:"admin.workspace.members.searchRequestPlaceholder",defaultMessage:"Search for requests"}});function vs({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),r=Y(s),l=Z(s),o=r||l,{data:i}=Ye(s,t*k,a);if(i===void 0)return e.jsx(ae,{});const m=i.items,d=Math.ceil((i.total??0)/k);return t>=d&&d!==0&&n(Math.max(d-1,0)),e.jsxs("div",{children:[e.jsxs(c.Root,{fixed:!0,size:"normal",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[60%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-[20%]"}),o&&e.jsx("col",{className:"w-16"})]}),e.jsxs(c.Header,{children:[e.jsx(c.HeaderCell,{className:"bg-token-bg-primary",children:e.jsx(x,{...U.email})}),e.jsx(c.HeaderCell,{className:"bg-token-bg-primary",children:e.jsx(x,{...U.invitedDate})}),e.jsx(c.HeaderCell,{className:"bg-token-bg-primary w-28",children:e.jsx("span",{className:o?"ps-3":"",children:e.jsx(x,{...U.role})})}),o&&e.jsx(c.HeaderCell,{className:"bg-token-bg-primary w-16"})]}),e.jsxs(c.Body,{children:[m.map(g=>e.jsx(bs,{workspaceId:s,invite:g,isCurrentUserOwner:r,currentUserHasAdminRights:o},g.id)),m.length===0&&e.jsx(c.Row,{children:e.jsx(c.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...U.noResults})})})})]})]}),d>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(X,{currentPage:t,onChangeIndex:n,length:d})})]})}function bs({workspaceId:s,invite:a,isCurrentUserOwner:t,currentUserHasAdminRights:n}){const r=f(),l=O(),o=xe(s),i=he(s),m=Xe(s);return e.jsxs(c.Row,{className:"[&>td]:py-2",disabled:o.isPending||i.isPending||i.isSuccess||m.isPending,children:[e.jsx(c.Cell,{children:e.jsxs("span",{className:"flex grow",children:[e.jsx(ee,{userName:a.email_address??"",isScimManaged:a.is_scim_managed,dotted:!0}),e.jsx("span",{children:a.email_address})]})}),e.jsx(c.Cell,{children:r.formatDate(a.created_time,{month:"short",day:"numeric",year:"numeric"})}),e.jsx(c.Cell,{children:t?e.jsx(se,{currentRole:a.role,onUpdateUserRole:d=>{o.mutate({inviteId:a.id,role:d})}}):l[a.role]}),n&&e.jsx(e.Fragment,{children:e.jsx(c.Cell,{children:e.jsx(Ns,{onDeleteUser:()=>{i.mutate({email:a.email_address??""})},onResendInvite:()=>{m.mutate({email:a.email_address??"",role:a.role??""})},disabled:a.is_scim_managed})})})]})}function Ns({onDeleteUser:s,onResendInvite:a,disabled:t}){const n=f();return e.jsx(e.Fragment,{children:t?e.jsx(p.Root,{children:e.jsx(p.Trigger,{disabled:!0,children:e.jsx(de,{label:n.formatMessage(ge.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(q,{className:"icon-sm"})})})}):e.jsxs(p.Root,{children:[e.jsx(p.Trigger,{children:e.jsx(q,{className:"icon-sm"})}),e.jsx(p.Portal,{children:e.jsxs(p.Content,{children:[e.jsx(p.Item,{onClick:a,children:e.jsx(x,{...U.resendInvite})}),e.jsx(p.Item,{onClick:s,children:e.jsx(x,{...U.revokeInvite})})]})})]})})}const U=N({email:{id:"InviteManager.email",defaultMessage:"Email"},role:{id:"InviteManager.role",defaultMessage:"Role"},invitedDate:{id:"InviteManager.invitedDate",defaultMessage:"Date invited"},resendInvite:{id:"InviteManager.resendInvite",defaultMessage:"Resend invite"},revokeInvite:{id:"InviteManager.revokeInvite",defaultMessage:"Revoke invite"},noResults:{id:"InviteManager.noResults",defaultMessage:"No results"}}),ys=({workspaceId:s})=>{const a=f(),[t,n]=h.useState(""),[r,l]=h.useState(""),o=h.useMemo(()=>Q(i=>l(i),300,{leading:!1,trailing:!0}),[]);return e.jsxs("div",{className:"mt-6",children:[e.jsx(J,{value:t,onChange:i=>{n(i.target.value),o(i.target.value)},placeholder:a.formatMessage(Cs.searchInvitesPlaceholder),className:"mb-4.5",inputClassName:"rounded-full! text-sm"}),e.jsx(vs,{workspaceId:s,filterInputValue:r})]})},Cs=N({searchInvitesPlaceholder:{id:"admin.workspace.members.searchInvitesPlaceholder",defaultMessage:"Search for invites"}}),Rs=ke(()=>Ie(()=>import("./b3v5gdssmpyjnk3e.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])));function _s({workspaceId:s}){const a=f(),t=K(),[n,r]=h.useState(""),[l,o]=h.useState(""),i=h.useMemo(()=>Q(M=>o(M),300,{leading:!1,trailing:!0}),[]),m=le();if(!t)return null;const d=t?.isTeam(),g=t.isAdminOfAccount(),u=t.isOwnerOfAccount();return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4.5 flex items-center justify-between",children:[e.jsx(J,{value:n,onChange:M=>{r(M.target.value),i(M.target.value)},placeholder:a.formatMessage(F.searchMembersPlaceholder),inputClassName:"rounded-full! text-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[(g||u||d)&&e.jsx(V,{onClick:()=>{Pe.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"workspace-admin-click",text:"InviteMember",step:"OpenModal"}),ce(m,({onClose:M})=>e.jsx(Rs,{workspace:t,onClose:M}))},icon:We,children:e.jsx(x,{...F.inviteMemberButton})}),d?e.jsx(we,{triggerButton:e.jsx(V,{color:"secondary",icon:q}),children:e.jsx(p.Item,{onClick:()=>{t&&Se.setLeaveWorkspaceData(t)},children:e.jsx(x,{...F.leaveWorkspace})})}):null]})]}),e.jsx(ls,{workspaceId:s,filterInputValue:l}),e.jsx("p",{className:"text-token-text-secondary mt-4 text-sm",children:e.jsx(x,{...F.memberListUpdateDelayNote})})]})}const F=N({inviteMemberButton:{id:"InviteManager.inviteMemberButton",defaultMessage:"Invite member"},leaveWorkspace:{id:"WorkspaceMembers.leaveWorkspace",defaultMessage:"Leave workspace"},searchMembersPlaceholder:{id:"WorkspaceMembers.searchMembersPlaceholder",defaultMessage:"Filter by name"},memberListUpdateDelayNote:{id:"adminPage.memberListUpdateDelayNote",defaultMessage:"Note: Although new workspace members can access ChatGPT immediately, it may take up to 24 hours to show them in this list."}}),Us=s=>s==="members"||s==="invites"||s==="requests";function ks({currentWorkspaceId:s}){const a=f(),t=K(),n=He(s)??"?",r=Le(t),l=h.useMemo(()=>[{key:"members",label:a.formatMessage(R.allMembers),children:e.jsx(_s,{workspaceId:s})},{key:"invites",label:a.formatMessage(R.pendingInvites),children:e.jsx(ys,{workspaceId:s})},{key:"requests",label:a.formatMessage(R.pendingRequests),children:e.jsx(Ms,{workspaceId:s})}],[s,a]),o=me(),[i]=qe(),m=i.get("tab"),[d,g]=h.useState(m&&Us(m)?m:l[0].key),u=M=>{g(M),o({pathname:window.location.pathname,search:new URLSearchParams({tab:M}).toString()})};return t?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{children:e.jsx("title",{children:a.formatMessage(R.adminBrowserPageTitle)})}),e.jsx(Ke,{title:a.formatMessage(R.adminPageTitle),subtitle:e.jsx(x,{values:{totalMembers:n,planName:r},...R.totalMembers}),tabsHeader:e.jsx(Ge,{items:l,activeTab:d,onTabChange:u})}),e.jsx(Qe,{children:e.jsx(ze,{items:l,activeTab:d})})]}):null}const R=N({adminBrowserPageTitle:{id:"adminPage.adminBrowserPageTitle",defaultMessage:"ChatGPT - Admin | Members"},adminPageTitle:{id:"adminPage.adminPageTitle.0",defaultMessage:"Members"},workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},totalMembers:{id:"adminPage.totalMembers",defaultMessage:"{planName} · {totalMembers} {totalMembers, plural, one {member} other {members}}"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},allMembers:{id:"adminPage.allMembers",defaultMessage:"Users"},pendingInvites:{id:"adminPage.pendingInvites",defaultMessage:"Pending invites"},pendingRequests:{id:"adminPage.pendingRequests",defaultMessage:"Pending requests"}}),sa=De(function(){const a=Je();return e.jsx(ks,{...a})});export{sa as default};
//# sourceMappingURL=h8jpumejri1h0cqq.js.map
