import{d as B,e as N,j as e,M as k,r as w}from"./lu2xqwqmjc95q6j6.js";import{P as U,kl as z,a as v,aB as j,c6 as Y,of as J,ay as K,b6 as R,bg as S,fJ as q,aH as Q,hA as O,iV as V,an as W,og as H,oh as $,oi as ee,fE as y,D as te,ah as se,eZ as oe,fC as ae,ld as le,k4 as ie,k7 as ne,fD as L,oj as re,ok as ce,ol as de}from"./hml6mmd5fyx85si7.js";import{u as ue}from"./ogr5nmy9hq7gfgq0.js";import{cF as D,cG as ge,cH as pe,cI as fe,cJ as E,cK as me,cL as Fe}from"./rseqzngxzbdt1oxg.js";function Ue({clientThreadId:t,openFileDialog:s,icon:n,isDisabled:a=!1,isSmall:l=!1,showLabel:r=!1,showUpsell:o=!1,hideBorder:F=!1,highlightTooltip:c=!1,disabledReason:g,currentModelName:h,visualTreatment:p,showMenuForNoAuth:i,modelSupportsImages:f}){const d=N(),u=z(),m=v();a=(a||!!u)&&!o;const M=e.jsxs(ge,{disabled:a,$showLabel:r,$hideBorder:F,$isSmall:l,$visualTreatment:p,onClick:x=>{if(x.preventDefault(),i||o){U.logNoAuthAttachButtonClicked({location:i?"No auth file upload":"No auth upsell"});return}s()},"aria-label":pe(m,d,a,g,h),children:[n,r&&e.jsx(fe,{})]}),A=e.jsx("div",{className:"flex",children:M});if(i||o){const x=i?e.jsx(me,{openFileDialog:s,showMenuForNoAuth:!0,modelSupportsImages:f}):e.jsx(J,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),P=e.jsx(j.BasicTrigger,{asChild:!0,children:A});return e.jsxs(j.Root,{children:[i?e.jsx(E,{clientThreadId:t,rateLimitPopup:u,highlightTooltip:c,disabled:a,children:P}):e.jsx(Y,{label:e.jsx(k,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:c||void 0,children:P}),e.jsx(j.Portal,{children:e.jsx(j.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:x})})]})}return e.jsx(E,{disabled:a,clientThreadId:t,rateLimitPopup:u,highlightTooltip:c,children:A})}function he({code:t,message:s}){switch(t){case D.FileTooLarge:return I.errorFileTooLarge;case D.TooManyFiles:return U.logEvent("Uploaded Max Files Error"),I.errorTooManyFiles;default:return s}}const I=B({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),C=B({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function xe(t){if(!t.accept||Object.keys(t.accept).length===0)return[];const s=[];return Object.values(t.accept).forEach(n=>s.push(...n)),s.sort()}function ve(t){const{className:s,children:n,clientThreadId:a,currentModelConfig:l,noKeyboard:r}=t,o=N(),F=S(),c=v(),g=te(c),p=R(c).flags?.includes(O.NoAuthEnableFileUploads),i=se(a),f=oe(),d=ae(l,i,f),u=d!==y.None,m=le(_=>_.files),M=(d===y.Multimodal?H:$)-m.length,A=M<=0,{getGizmoId:x}=ie(),{handleFileAccepted:P}=Ae(o,d,L(l,i),"drag",x,ne(l,i)?.attachments),G=z(),T=re(!g&&p?L(l,i):ce(l,i)),{getRootProps:X,isDragActive:Z}=ue({maxFiles:M,disabled:!u||A||G!=null,noClick:!0,noKeyboard:r,onDropAccepted:P,onDropRejected:_=>Me(_,o,F,d),multiple:!0,maxSize:de,...T}),b=xe(T);return e.jsxs("div",{...X({className:s}),children:[n,Z&&e.jsxs(Pe,{children:[e.jsx(Fe,{}),e.jsx("h3",{children:e.jsx(k,{...C.dragInstructions})}),e.jsx("h4",{className:"w-2/3 text-center",children:b.length>0?b.join(", "):e.jsx(k,{...C.dragAllAccepted})})]})]})}function Me(t,s,n,a){const{errors:l}=t[0];l.forEach(r=>{const o=he(r);typeof o=="string"?n.danger(o,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:o,toastId:"file_upload_error"}):n.danger(s.formatMessage(o,{size:ee,maxNum:a===y.Multimodal?H:$}),{hasCloseButton:!0,loggingTitle:o.defaultMessage||"File upload error",loggingDescription:o.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function Ae(t,s,n,a,l,r){const o=v(),F=R(o).flags,c=S(),g=q(),{isUnauthenticated:h}=Q(),p=F?.includes(O.NoAuthEnableFileUploads);return{handleFileAccepted:w.useCallback(async(f,d)=>{U.logEvent("Upload File",{client:"web",eventSource:a,intent:s.toString()});const u=l!=null?await l():void 0;f.length>0&&f.forEach(m=>{V.uploadFile(g,W(m),m,s,n,t,c,{gizmoId:u,...p&&{isUnauthenticated:h}},r)})},[a,s,l,g,n,t,c,r,p,h])}}const Pe=K.div`absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0`;export{Pe as D,ve as F,Ue as P,xe as g,Me as h,Ae as u};
//# sourceMappingURL=cqyjjngibokvfw83.js.map
