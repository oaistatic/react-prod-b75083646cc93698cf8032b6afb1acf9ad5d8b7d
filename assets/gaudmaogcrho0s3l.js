import{c as z,e as F,u as P,r as v,d as R,j as t,M as w}from"./lu2xqwqmjc95q6j6.js";import{o1 as W,b5 as Q,a as Y,nS as H,lL as K,o2 as y,V as $,I as G,bz as D,C as J,bY as V,ao as X,P as Z,dl as ee}from"./hml6mmd5fyx85si7.js";import{bM as te}from"./rseqzngxzbdt1oxg.js";function se(e){switch(e){case y.SSOMismatch:return{title:a.cannotAccessWorkspace,description:a.ssoMismatchDescription};case y.RequireSSOLogin:return{title:a.cannotAccessWorkspace,description:a.requireSSODescription};case y.UnexpectedSSOLogin:return{title:a.cannotAccessWorkspace,description:a.unexpectedSSODescription}}}const oe=2e3;function le(){"use forget";const e=z.c(32),s=W(),o=Q(),A=F(),N=Y(),L=H();let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={...K(),select:ne},e[0]=h):h=e[0];const I=P(h),n=s?.errorCode,d=s!=null&&I.isFetched&&L==null&&!!o,[U,B]=v.useState(!1);let p,f;e[1]!==d?(p=()=>{d&&setTimeout(()=>{B(!0)},oe)},f=[d],e[1]=d,e[2]=p,e[3]=f):(p=e[2],f=e[3]),v.useEffect(p,f);const q=n===y.UnexpectedSSOLogin,m=d&&(q?U:!0),c=te();let g,S;if(e[4]!==c||e[5]!==n||e[6]!==m?(g=()=>{if(!n||!m)return;const b=c?.split("@")?.[1];$.addError(`SSO Catch All Modal: ${n} for ${c??"unknown user"}`,{sso_error:n,email:c,email_hostname:b})},S=[n,m,c],e[4]=c,e[5]=n,e[6]=m,e[7]=g,e[8]=S):(g=e[7],S=e[8]),v.useEffect(g,S),!m)return null;let x;e[9]!==A||e[10]!==s.accountName||e[11]!==o?.name?(x=s?.accountName??o?.name??A.formatMessage(a.workspacePlaceholder),e[9]=A,e[10]=s.accountName,e[11]=o?.name,e[12]=x):x=e[12];const E=x;let M;e[13]!==N||e[14]!==o?(M=()=>{const b=o?.ssoConnectionName?{connection:o.ssoConnectionName}:void 0;G(N,{authType:"login",additionalAuthParams:b})},e[13]=N,e[14]=o,e[15]=M):M=e[15];const j=M;let O;e[16]!==s.errorCode?(O=se(s.errorCode),e[16]=s.errorCode,e[17]=O):O=e[17];const{title:T,description:_}=O;let i;e[18]!==T?(i=t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"text-lg",children:t.jsx(w,{...T})})}),e[18]=T,e[19]=i):i=e[19];let r;e[20]!==E?(r=t.jsx(w,{...a.authenticateNotice,values:{workspaceName:E}}),e[20]=E,e[21]=r):r=e[21];let l;e[22]!==j||e[23]!==r?(l=t.jsx(D.Button,{onClick:j,color:"primary",children:r}),e[22]=j,e[23]=r,e[24]=l):l=e[24];let C;e[25]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(D.Button,{onClick:ae,children:t.jsx(w,{id:"KlMYRb",defaultMessage:"Log out"})}),e[25]=C):C=e[25];let u;e[26]!==_?(u=t.jsx("div",{className:"flex flex-col space-y-4",children:t.jsx("div",{children:t.jsx(w,{..._})})}),e[26]=_,e[27]=u):u=e[27];let k;return e[28]!==l||e[29]!==u||e[30]!==i?(k=t.jsx(J,{testId:"modal-sso-catch-all",isOpen:!0,onClose:X,type:"warning",size:"custom",className:"max-w-3xl",title:i,icon:V,primaryButton:l,secondaryButton:C,children:u}),e[28]=l,e[29]=u,e[30]=i,e[31]=k):k=e[31],k}function ae(){Z.logLogOutButtonClicked({location:"sso_catch_all_modal"}),ee()}function ne(){return null}const a=R({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{le as default};
//# sourceMappingURL=gaudmaogcrho0s3l.js.map
