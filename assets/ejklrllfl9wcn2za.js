import{ns as Q,aQ as l,dc as R,i as V,ej as I,aN as $,cE as j,aO as B,k4 as W,a as z,q as K,b7 as X,aM as Y,d2 as Z,d3 as J,D as ee,df as te,r as se,de as re,jm as oe,eb as ae,mv as ne,aR as ie}from"./hml6mmd5fyx85si7.js";import{X as ue,Y as ce,Z as le,$ as c,a0 as pe}from"./rseqzngxzbdt1oxg.js";import{c as me}from"./ik8y7nlve9mzjttb.js";import{e as de,u as Se}from"./lu2xqwqmjc95q6j6.js";function _(t){return(Q(t)?t.promptStarters:t.gizmo.display.prompt_starters)?.map(r=>({type:l.Starter,title:"",body:r,prompt:r}))}const ge=()=>{const t=z(),r=X(t),u=Y(),p=Z(J),n=ee(t),i=n?r.getLayer("4031588851"):r.getLayer("3533083032"),a=n?r.getLayer("4031588851",{disableExposureLog:!0}):r.getLayer("3533083032",{disableExposureLog:!0});return n?u==null?!1:Date.now()/1e3-u.created<a.get("new-user-age-seconds",14*24*60*60)&&i.get("web-enable-for-new-users",!1):p<a.get("new-user-message-count",20)&&i.get("web-enable-for-new-users",!1)},Pe=({clientThreadId:t,limit:r,shouldBeEnabledForDefaultAssistant:u,isModelLoaded:p,modelSlug:n})=>{const i=R(),{autocompletions$:a}=ue(i),y=V(),C=de(),{clearAllSystemHintModeTriggers:w,setThreadSystemHintMode:k}=I(),m=$(t,e=>e?.mode),P=j(m?.kind===B.GizmoInteraction?m.gizmo_id:void 0).data,{gizmoEditorData:A,mode:N}=W(),T=ge(),U=ce(m),v=z(),G=K(v),b=T&&u&&!U&&!G?.isEnterprisey(),{data:O,isSuccess:q}=Se({...le(r,n),enabled:b});if(y==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(N==="test"&&A)return{promptStarters:_(A)??[],isLoading:!1,isSuccess:!0};if(P!=null)return{promptStarters:_(P),isLoading:!1,isSuccess:!0};if(!b)return{promptStarters:[],isLoading:!1,isSuccess:!0};const L=O?.items.map(e=>({type:l.Starter,id:e.id,title:e.title,body:e.description,prompt:e.prompt,category:e.category,oneliner:e.oneliner,theme:e.theme,requires_file_upload:e.requires_file_upload}))??[],D=(e,s,fe,H)=>{const g=te(i);if(s.type===l.Starter&&s.category==="dalle"){requestAnimationFrame(()=>{w(),k(se.PictureV2,!0,{}),re(g)}),a.set(pe(C));return}const x=s.title;a.set([]),g.focus(),oe(g,x),requestAnimationFrame(()=>{const f=L.filter(o=>o.theme===s.theme).map(o=>{const h=ae(o.oneliner),M=h.startsWith(o.title);return{...o,title:M?`${o.title} `:"",body:M?o.body:h,autocompletionChunks:me(x,h),type:l.Autocomplete}});a.set(f),f.length>0&&ne(f,t),ie(s,H,t)})},d=L?.reduce((e,s)=>(s.theme&&!e[s.theme]&&(e[s.theme]=s),e),{}),S=[];if(d)for(const e in d)e!=="For you"&&S.push(d[e]);const F=S.length>0,E=!!(q&&F&&p);return c.markStart("StarterPromptChips",c.NS_COMPOSER),E&&c.markRendered("StarterPromptChips",c.NS_COMPOSER),{onSelectStarterPrompt:D,shouldShowStarterPrompts:E,promptStarters:S}};export{_ as g,Pe as u};
//# sourceMappingURL=ejklrllfl9wcn2za.js.map
