import{C as I,B as v,pL as R,c6 as y,G as A,aB as r,b$ as w,b5 as T,lI as B}from"./hml6mmd5fyx85si7.js";import{e as G,j as e,M as d,r as u,l as L,a as E,d as F,N as O}from"./lu2xqwqmjc95q6j6.js";import{a as _,b as H,c as q,u as z}from"./cz3tvo7iwbv2krt2.js";import{aE as P,iy as U,q as W,b1 as $,gx as Q,go as K}from"./rseqzngxzbdt1oxg.js";import{d as D}from"./l1ka89a9nbqv3utj.js";import{u as V,a as X,b as Z,c as J,d as Y}from"./k5hmvvdro0m57yj9.js";import{A as ee,m as se,U as ae}from"./kx1wkvirco8cmt9t.js";import{m as k}from"./hha17k7whjt7ek1d.js";import{T as t}from"./l2fd3uykkvam5v10.js";import"./owyq2pc3j9e6vumq.js";import"./on8091w14zfmyea2.js";import"./cqyjjngibokvfw83.js";import"./ogr5nmy9hq7gfgq0.js";import"./iq82wz84d1fxj03i.js";import"./elolu96rnfzqcgif.js";import"./kcqshnk26ykm1u4n.js";import"./fibktxptqydbr54o.js";import"./6a3e5rtr9pyzi31y.js";import"./ik8y7nlve9mzjttb.js";import"./isxemcalu9537a8n.js";import"./ejklrllfl9wcn2za.js";import"./gnhjnh2n0u3gy6qx.js";import"./e0pswmo7irlt62pp.js";import"./fd9rmcpa6ai71fe6.js";import"./ml28jwjklb12w4ms.js";import"./kj7psz5s4tjdmz6e.js";import"./isqkn4xlzoktkvfr.js";import"./d3y72ugnrmac5z1v.js";import"./dafnu86qge6fqm1m.js";function te({group:a,onDelete:n,onClose:s}){const m=G().formatMessage({id:"workspaceSettings.groups.deleteGroupTitle",defaultMessage:"Delete group {groupName}?"},{groupName:a.name});return e.jsx(I,{type:"warning",isOpen:!0,onClose:s,title:m,testId:"modal-delete-group",showCloseButton:!0,primaryButton:e.jsx(v,{color:"danger",onClick:async()=>{n(a.id),s()},children:e.jsx(d,{id:"workspaceSettings.groups.confirmDelete",defaultMessage:"Delete"})}),secondaryButton:e.jsx(v,{onClick:s,color:"secondary",children:e.jsx(d,{id:"workspaceSettings.groups.cancelDelete",defaultMessage:"Cancel"})}),children:e.jsx("p",{children:e.jsx(d,{id:"workspaceSettings.groups.deleteGroupWarning",defaultMessage:'Are you sure you want to delete the "{groupName}" group? This action cannot be undone.',values:{groupName:a.name}})})})}const oe=10;function re({workspaceId:a,group:n,readOnly:s}){const c=G(),[m,o]=u.useState(""),[p,M]=u.useState(0),{data:l,isLoading:b,isPlaceholderData:x}=V({workspaceId:a,groupId:n.id,search:m,currPage:p}),[f,h]=u.useState(!1),N=L(),{mutateAsync:C}=X({workspaceId:a,groupId:n.id,members:l,currPage:p,search:m}),j=e.jsx(v,{onClick:()=>h(!0),icon:W,disabled:s,children:e.jsx(d,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})});return e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[e.jsx(R,{inputClassName:"w-[250px] rounded-full! text-sm",value:m,onChange:i=>{o(i.target.value)},placeholder:c.formatMessage({id:"FThxKQ",defaultMessage:"Search member name"})}),s?e.jsx(y,{label:c.formatMessage(k.managedViaSCIMTooltip),side:"right",children:j}):j]}),e.jsxs(t.Root,{className:"min-w-full",children:[e.jsxs(t.Header,{children:[e.jsx(t.HeaderCell,{children:e.jsx(d,{id:"workspaceSettings.groups.memberName",defaultMessage:"Name"})}),e.jsx(t.HeaderCell,{children:e.jsx(d,{id:"workspaceSettings.groups.email",defaultMessage:"Email"})}),e.jsx(t.HeaderCell,{})]}),e.jsx(t.Body,{className:b||x?"opacity-50":void 0,children:l==null?e.jsx(t.Row,{children:e.jsx(t.Cell,{colSpan:3,children:e.jsx(A,{})})}):l.items.length===0?e.jsx(t.Row,{children:e.jsx(t.Cell,{colSpan:3,children:m===""?e.jsx(d,{id:"workspaceSettings.groups.noMembers",defaultMessage:"No members"}):e.jsx(d,{id:"workspaceSettings.groups.noMembersForSearch",defaultMessage:"No members matched the filter"})})}):l.items.map(i=>e.jsxs(t.Row,{className:"[&>td]:py-2",children:[e.jsx(t.Cell,{children:e.jsx("span",{children:i.name})}),e.jsx(t.Cell,{children:i.email}),e.jsx(t.Cell,{textAlign:"right",children:!s&&(n.is_scim_managed?e.jsx(r.Root,{children:e.jsx(r.Trigger,{disabled:!0,children:e.jsx(y,{label:c.formatMessage(k.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(w,{className:"icon-sm"})})})}):e.jsxs(r.Root,{children:[e.jsx(r.Trigger,{className:"-my-2",children:e.jsx(w,{className:"icon-sm"})}),e.jsx(r.Portal,{children:e.jsx(r.Content,{size:"default",children:e.jsx(r.Item,{onClick:()=>C(i.id),icon:e.jsx(P,{className:"text-token-text-status-error"}),className:"text-token-text-status-error",children:e.jsx(d,{id:"workspaceSettings.groups.removeMember",defaultMessage:"Remove member"})})})})]}))})]},i.id))})]}),e.jsx("div",{className:"mt-2 flex justify-center",children:l&&l.items.length>0&&e.jsx(U,{currentPage:p,onChangeIndex:i=>{M(i)},length:Math.ceil(l.total/oe)})}),f&&e.jsx(ee,{isOpen:!0,onClose:()=>{N.invalidateQueries({queryKey:[a,"groups"]}),h(!1)},group:n})]})}function ne({currentWorkspaceId:a,groupId:n}){const s=G(),c=T(),m=E(),{data:o,isLoading:p}=Z({workspaceId:a,groupId:n??""}),[M,l]=u.useState(!1),[b,x]=u.useState(!1),f=!!(!(c?.isAdminOfAccount()||c?.isOwnerOfAccount())||o?.is_scim_managed),h=u.useMemo(()=>[{label:s.formatMessage(se.title),href:"/admin/groups"},{label:o?.name??""}],[s,o?.name]),{deleteGroup:N}=J({workspaceId:a}),C=async S=>{await N(S),m("/admin/groups")},{updateGroupName:j}=Y({workspaceId:a});if(p)return e.jsx(A,{});if(!o)return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:s.formatMessage(g.groupNotFoundLabel)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.formatMessage(g.groupNotFoundDescription)})]});const i=e.jsxs(r.Root,{children:[e.jsx(r.Trigger,{asChild:!0,className:"border-token-border-default! border!",children:e.jsxs("div",{children:[s.formatMessage(g.manageLabel),e.jsx($,{className:"icon-sm ms-0.5"})]})}),e.jsx(r.Portal,{children:e.jsxs(r.Content,{children:[e.jsx(r.Item,{onClick:()=>D(l)(!0),icon:Q,label:s.formatMessage(g.editGroupLabel)}),e.jsx(r.Item,{onClick:()=>D(x)(!0),icon:P,label:s.formatMessage(g.deleteGroupLabel),color:"danger"})]})})]});return e.jsxs(e.Fragment,{children:[e.jsx(K,{children:e.jsx("title",{children:o.name})}),e.jsx(_,{navigation:e.jsx(H,{items:h}),title:o.name,actions:o&&!f?i:void 0}),e.jsxs(q,{showSpinner:!1,children:[e.jsx(re,{group:o,readOnly:f,workspaceId:a}),b&&e.jsx(te,{group:o,onDelete:C,onClose:()=>x(!1)}),M&&e.jsx(ae,{defaultName:o.name,onSave:async S=>{await j({workspaceId:a,groupID:o.id,name:S})},onClose:()=>l(!1),placeholder:"E.g. marketing team"})]})]})}const g=F({manageLabel:{id:"lII8Sf",defaultMessage:"Manage"},editGroupLabel:{id:"aBFPzn",defaultMessage:"Edit group"},deleteGroupLabel:{id:"FtvUh/",defaultMessage:"Delete group"},groupNotFoundLabel:{id:"Lfq9Z4",defaultMessage:"Group not found"},groupNotFoundDescription:{id:"++TB5R",defaultMessage:"It may take a few minutes for the new group to appear."}}),Le=B(function(){const n=z(),{groupId:s}=O();return e.jsx(ne,{...n,groupId:s})});export{Le as default};
//# sourceMappingURL=fbtc4533epd6c6l0.js.map
