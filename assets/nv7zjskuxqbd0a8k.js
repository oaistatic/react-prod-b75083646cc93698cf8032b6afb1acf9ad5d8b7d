import{j as i,m as u,d as j,r as I,M as E}from"./lu2xqwqmjc95q6j6.js";import{d as f,gf as D,fT as P,rh as w,c6 as M,P as G,cR as b}from"./hml6mmd5fyx85si7.js";import{gi as C,cC as U,cD as l,ay as R,ot as k,dI as H,ox as V}from"./rseqzngxzbdt1oxg.js";import{N as x}from"./jy1u8exw8iz2slve.js";import{u as q}from"./em6xteal3laxzbp5.js";const nt=({gap:t,padding:s=4,size:e=3})=>i.jsx(u.div,{className:f("grid h-full max-w-full flex-1 grid-cols-3 items-center"),style:{gap:t,padding:s},children:C(3,r=>i.jsx(u.div,{className:"dark:bg-white-400 aspect-square rounded-full bg-gray-400",animate:{translateY:["0%","-50%","0%","0%","0%"]},style:{translateX:.5,width:e,height:e},transition:{repeat:1/0,type:"keyframes",delay:r/10,duration:.7}},r))});var B=(t=>(t.LOG="log",t.RUN_START="run_start",t.ENVIRONMENT_STATUS="environment_status",t.OUTPUT="output",t.ERROR="error",t.RUN_COMPLETE="run_complete",t))(B||{});const X=["python","javascript","typescript","html","react"];function K(t){return X.includes(t)}var $=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.INSTALLING_PACKAGES=1]="INSTALLING_PACKAGES",t[t.RUNNING_CODE=2]="RUNNING_CODE",t))($||{}),d=(t=>(t.javascript="javascript",t.typescript="typescript",t.bash="bash",t.zsh="zsh",t.html="html",t.css="css",t.python="python",t.json="json",t.sql="sql",t.go="go",t.yaml="yaml",t.java="java",t.rust="rust",t.cpp="cpp",t.swift="swift",t.php="php",t.xml="xml",t.ruby="ruby",t.haskell="haskell",t.kotlin="kotlin",t.csharp="csharp",t.c="c",t.objectivec="objectivec",t.r="r",t.lua="lua",t.dart="dart",t.scala="scala",t.perl="perl",t.commonlisp="commonlisp",t.clojure="clojure",t.ocaml="ocaml",t.powershell="powershell",t.verilog="verilog",t.dockerfile="dockerfile",t.vue="vue",t.other="other",t))(d||{});function g(t){if(U(t))switch(t){case l.CODE_REACT:return"typescript";default:return D(t.replace(/^code\//,""),Object.values(d),"other")}}function T(t){return t.includes("'react'")||t.includes('"react"')}function lt(t,s){switch(t){case l.CODE_HTML:case l.CODE_REACT:return!0;case l.CODE_JAVASCRIPT:case l.CODE_TYPESCRIPT:return T(s);default:return!1}}function ct(t){return P([l.CODE_PYTHON],t)}function ot(t,s){let e=g(t)??null;return(T(s)||t===l.CODE_REACT)&&(e="react"),e&&K(e)?e:null}const z=36,pt=-24,Y=280,ut=Y+z,mt=40;var F=(t=>(t.COLLAPSED="collapsed",t.EXPANDED="expanded",t))(F||{});function J(t){return"children"in t}const Q=t=>t.type==="text"&&"value"in t&&typeof t.value=="string",m="hiveTranscript",y=/(::hiveTranscript\{([^}]+)\})/g,Z=/\btimestamp\s*=\s*["']?(\d+)["']?(?=\s|,|$)/,W=()=>t=>{R(t,s=>{if(s.type!=="paragraph"&&s.type!=="tableCell"||!J(s)||!Array.isArray(s.children))return;const e=[];for(const r of s.children)if(Q(r)&&r.value.includes(`::${m}`)){let a=0,c;for(;(c=y.exec(r.value))!=null;){c.index>a&&e.push({type:"text",value:r.value.slice(a,c.index)});const o=c[2],n=Z.exec(o)?.[1];n&&Number.isInteger(Number(n))&&e.push({type:"textDirective",name:m,attributes:{timestamp:n},data:{hName:m,hProperties:{timestamp:n}},children:[],position:r.position}),a=y.lastIndex}a<r.value.length&&e.push({type:"text",value:r.value.slice(a)})}else e.push(r);s.children=e})},ht=Object.freeze(Object.defineProperty({__proto__:null,HIVE_LOG_DIRECTIVE_NAME:m,hiveLogDirectivePlugin:W},Symbol.toStringTag,{value:"Module"})),L=[w,m],Et=()=>t=>{R(t,"textDirective",s=>{L.includes(s.name)||(s.type="text",s.value=`:${s.name}`)})};function ft({isDisabled:t=!1,isCodePreviewable:s=!1,isCodeRunning:e,disabledTooltip:r,clientThreadId:a,onClick:c}){const[o,h]=I.useState(e),[{width:n},A]=q();I.useEffect(()=>{let _=null;return!e||s?h(e):(_=setTimeout(()=>{h(e)},200),()=>clearTimeout(_))},[e,s]);const O=()=>({conversation_id:a?b(a):void 0}),S=()=>{G.logEventWithStatsig("Canvas Run Code Button Clicked","chatgpt_canvas_run_code_button_clicked",O()),setTimeout(()=>c?.())},v=i.jsx(u.button,{disabled:t||e&&!o,onClick:S,className:f("btn btn-primary ms-1 rounded-full sm:min-w-28",o?f(x,"border-transparent"):"hover:bg-opacity-90"),animate:{width:n??0},initial:{width:n??0},transition:{type:"spring",bounce:.24,duration:.4},children:i.jsx("div",{ref:A,children:o?i.jsxs(u.div,{className:"flex items-center gap-1.5 ps-1 pe-2 sm:ps-2 sm:pe-3",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[i.jsx(k,{className:"icon"}),i.jsx("span",{className:"hidden sm:inline",children:i.jsx(E,{...p.stopCode})})]}):i.jsxs(u.div,{className:"flex items-center gap-1.5 ps-1 pe-2 sm:ps-2 sm:pe-3",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[i.jsx(H,{className:"icon"}),i.jsx("span",{className:"hidden whitespace-nowrap sm:inline",children:i.jsx(E,{...s?p.previewCode:p.runCode})})]})})}),N=t&&r?r:e?null:i.jsx(E,{...s?p.previewCodeTooltip:p.runCodeTooltip});return N?i.jsx(M,{label:N,children:v}):v}const p=j({previewCode:{id:"M1TBxe",defaultMessage:"Preview"},runCode:{id:"LiKr5n",defaultMessage:"Run code"},stopCode:{id:"nCwG4+",defaultMessage:"Stop"},runCodeTooltip:{id:"UeNB/S",defaultMessage:"See output and debug"},previewCodeTooltip:{id:"/qJKMH",defaultMessage:"Preview in canvas"}});class tt{constructor(s){this.params=s}get isReadonly(){return Object.values(this.params).some(s=>!!s)}get isHistoricalVersion(){return!!this.params.isHistoricalVersion}get isStreaming(){return!!this.params.isTextdocStreaming||!!this.params.isRequestActive}get isTextdocStreaming(){return!!this.params.isTextdocStreaming}get isStreamingFromNative(){return this.isStreaming&&this.params.streamingSource===V.NATIVE}get isRestoring(){return!!this.params.isRestoring}get isShowingChanges(){return!!this.params.isShowingChanges}get isReadonlyFromQueryParam(){return!!this.params.isReadonlyFromQueryParam}}const vt=t=>new tt(t);export{mt as C,Y as E,F as G,m as H,B as M,nt as T,vt as a,g as b,ut as c,ct as d,ft as e,d as f,ot as g,L as h,lt as i,z as j,J as k,Et as l,p as m,W as n,$ as o,pt as p,ht as q};
//# sourceMappingURL=nv7zjskuxqbd0a8k.js.map
