import{jg as R,lI as L,bg as I,H as C,L as P,b5 as O,a as v,aJ as T,jH as F,aj as k,P as A,lL as x}from"./hml6mmd5fyx85si7.js";import{oB as H,pC as j}from"./rseqzngxzbdt1oxg.js";import{a as z,b as D,K,e as N,l as Q,r as i,d as U}from"./lu2xqwqmjc95q6j6.js";var V={};const E={oiw216z:`${V.VITE_OIW216Z_SERVICE_URL??"https://sora.com"}/subscription`,vza493q:R,students:H(!0)},Y=L(function(){const n=z(),[l]=D(),p=K(),c=I(),r=N(),g=Q(),s=C.getItem(P.CheckoutFrom),t=O(),e=l.get("plan_type")??"plus",u=v(),m=T(u,"2494348560"),{anyConnectorEnabled:d,isLoading:f}=F(),b=i.useRef(e),o=p?.postCheckoutResult==="success",y=p?.postCheckoutResult==="payment_failed";return i.useEffect(()=>{o&&e==="plus"&&t!=null&&k.logEvent("chatgpt_plus_payment_success_page")},[e,t,o]),i.useEffect(()=>{if(f||t==null)return;if(y){const a=r.formatMessage(S.paymentFailedToastMessage);c.warning(a,{duration:5}),n("/#pricing");return}const _=!d&&m.get("enable_ca_pro_onboarding_flow",!1)&&b.current==="pro",w="free",M=j(e);o&&A.logPaymentSuccess({plan_type:e});let h=!0;if(t.planType===w)g.invalidateQueries(x());else{if(s&&E[s])C.removeItem(P.CheckoutFrom),window.location.href=E[s],h=s!=="students";else if(_)window.location.href="/payments/success-ind";else{const a=T(u,"2239990662").get("redirect_to_home",!1);n(a?"/":"/#pricing")}if(h&&!_){const a=r.formatMessage(S.paymentConfirmationToastMessage,{planName:M});c.success(a,{duration:5})}}},[n,l,c,r,g,s,t,e,f,d,m,u,o,y]),null}),S=U({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{E as C,Y as p};
//# sourceMappingURL=bhajl6jak2hedqsu.js.map
