import{G as B,rn as Pe,pL as ue,B as H,d as ge,g0 as Ie,c9 as De,dS as pe,dU as me,a as V,nK as Le,c as I,qD as c,c6 as fe,R as U,b5 as W,bg as Q,g8 as he,e0 as xe,mf as Oe,ro as Ge,ij as $,i as We,j as le,qF as Fe,g9 as ce,qT as Ke,C as He,qC as Ve,qP as qe,oJ as K,nn as Be,cY as Ue,rp as ze,rq as Ye,lI as Xe}from"./hml6mmd5fyx85si7.js";import{r as k,j as e,e as E,a as Z,M as d,d as F,o as x,L as Qe,u as $e,l as J,n as ee,t as Ze,b as Je}from"./lu2xqwqmjc95q6j6.js";import{jt as es,w as ss,a4 as N,go as ts}from"./rseqzngxzbdt1oxg.js";import{R as as,i as be,U as ns,u as is,a as os,P as rs}from"./hqwd0ma0qy0nz1ln.js";import{j as se,c as Ce,e as ke,k as ls,g as cs,h as ds,i as us}from"./kzf8idfnvo156ew7.js";import{T as y}from"./l2fd3uykkvam5v10.js";import{C}from"./2a0vnvvg7ej5mmm1.js";import{S as gs}from"./i9gd4w8kd4obrei5.js";import{E as ps}from"./mbo24hq56wugb9b1.js";import{W as ms,B as _}from"./mi7vph3ys1oeyn7u.js";import{e as A,A as fs,a as hs,b as xs,d as Se,c as f}from"./idnt7o3g1nnw0r5k.js";import{W as T}from"./js0o5pkoyxnt23ro.js";import{T as bs,a as Cs}from"./lw59bzx669b21lsh.js";import{a as ks,c as Ss,u as js,d as Ms}from"./cz3tvo7iwbv2krt2.js";import"./owyq2pc3j9e6vumq.js";import"./on8091w14zfmyea2.js";import"./cqyjjngibokvfw83.js";import"./ogr5nmy9hq7gfgq0.js";import"./iq82wz84d1fxj03i.js";import"./elolu96rnfzqcgif.js";import"./kcqshnk26ykm1u4n.js";import"./fibktxptqydbr54o.js";import"./6a3e5rtr9pyzi31y.js";import"./ik8y7nlve9mzjttb.js";import"./isxemcalu9537a8n.js";import"./ejklrllfl9wcn2za.js";import"./gnhjnh2n0u3gy6qx.js";import"./e0pswmo7irlt62pp.js";import"./fd9rmcpa6ai71fe6.js";import"./ml28jwjklb12w4ms.js";import"./kj7psz5s4tjdmz6e.js";import"./isqkn4xlzoktkvfr.js";const ws=({workspaceId:a})=>{const{data:s}=se({workspaceId:a}),[t,i]=k.useState("");k.useEffect(()=>{const u=()=>{const h=s?.data.find(b=>be(b));h&&i(h.id)};s?.data&&u()},[s]);const{data:r,refetch:n}=Ce({workspaceId:a,roleId:t??""}),{updateRole:l}=ke({workspaceId:a}),g=k.useCallback(async u=>{const h=await l(u);h.id!==t&&i(h.id),n()},[t,n,l]);return e.jsx("div",{className:"mt-6",children:r?e.jsx(as,{role:r,onSave:g}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(B,{})})})};function _s({workspaceId:a}){const s=E(),t=Z(),[i,r]=k.useState(""),{data:n,isLoading:l,isPlaceholderData:g}=se({workspaceId:a}),[u,h]=k.useState(!1),b=k.useMemo(()=>n?.data.filter(M=>!M.predefined_role&&(M.name.toLowerCase().includes(i.toLowerCase())||M.description?.toLowerCase().includes(i.toLowerCase()))),[n?.data,i]),m=M=>{M&&r(""),h(M)},R=Pe(),{createRole:D}=ls({workspaceId:a,currentRoles:b,bootstrapResources:R?["connectors"]:void 0});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[e.jsx(ue,{inputClassName:"w-[250px] rounded-full! text-sm",value:i,onChange:M=>{r(M.target.value)},placeholder:s.formatMessage({id:"workspaceSettings.roles.search",defaultMessage:"Search role name"})}),e.jsx(H,{onClick:()=>m(!0),icon:es,children:e.jsx(d,{id:"workspaceSettings.roles.create",defaultMessage:"Create role"})})]}),e.jsx("div",{children:e.jsxs(y.Root,{className:"min-w-full",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[70%]"}),e.jsx("col",{className:"w-[30%]"})]}),e.jsxs(y.Header,{children:[e.jsx(y.HeaderCell,{children:e.jsx(d,{id:"workspaceSettings.roles.roleName",defaultMessage:"Role name"})}),e.jsx(y.HeaderCell,{children:e.jsx(d,{id:"workspaceSettings.roles.created",defaultMessage:"Last updated by"})}),e.jsx(y.HeaderCell,{})]}),e.jsx(y.Body,{className:ge((l||g)&&"opacity-50"),children:b==null?e.jsx(y.Row,{children:e.jsx(y.Cell,{colSpan:5,textAlign:"center",children:e.jsx(B,{})})}):b.length===0?e.jsx(y.Row,{children:e.jsx(y.Cell,{colSpan:5,textAlign:"center",children:i===""?e.jsx(d,{id:"workspaceSettings.roles.noRoles",defaultMessage:"No roles found."}):e.jsx(d,{id:"workspaceSettings.roles.noRolesWithFilter",defaultMessage:"No roles found. Try changing the search query."})})}):b.map(M=>e.jsx(ys,{role:M},M.id))})]})}),u&&e.jsx(ns,{onClose:()=>m(!1),onSave:async M=>{const z=await D(M);t(`/admin/permissions/roles/${z.role.id}`)},isCreate:!0})]})}function ys({role:a}){const s=Z();return e.jsx(e.Fragment,{children:e.jsxs(y.Row,{className:"[&>td]:py-2",onClick:()=>{s(`/admin/permissions/roles/${a.id}`)},children:[e.jsx(y.Cell,{children:e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{children:a.predefined_role?e.jsx(ss,{className:"icon"}):e.jsx(Ie,{className:"icon"})}),e.jsxs("div",{children:[e.jsx("div",{children:a.name}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:a.description})]})]})}),e.jsx(y.Cell,{className:"truncate lowercase",children:a.created_by_user_obj?.email??""})]})})}function Ts({workspaceId:a,tooltip:s,tooltipValues:t,description:i,disabled:r}){return e.jsx(ms,{connectorId:pe[me.GITHUB_CONNECTOR],disabled:r,label:As.platformConnectorsGithub,labelValues:{badge:n=>e.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary mx-2 rounded-md px-1.5 py-0.5 text-xs",children:n})},tooltip:s,tooltipValues:t,description:i,Icon:De,workspaceId:a})}const As=F({platformConnectorsGithub:{id:"workspaceSettings.platformConnectorsGithub",defaultMessage:"GitHub <badge>Beta</badge>"}});function Es(a){return!!a&&typeof a=="object"&&"id"in a}function Rs({title:a,description:s,children:t,upsellEnterprise:i=!1,isQuorum:r=!1,descriptionValues:n={}}){return e.jsx(fe,{label:e.jsx(d,{...P.enterpriseRequiredMessage}),side:"top",disabled:!i,triggerAs:null,children:e.jsxs(fs,{className:ge(i&&"text-token-text-tertiary"),children:[e.jsxs(hs,{className:"flex items-center gap-3",children:[e.jsx(d,{...a}),i&&e.jsx("span",{className:"bg-token-bg-tertiary rounded-xl px-2 pb-0.5 text-sm",children:e.jsx(d,{...P.enterpriseUpsellPill})}),r&&e.jsx("span",{className:"bg-token-bg-tertiary rounded-xl px-2 pb-0.5 text-sm font-normal",children:e.jsx(d,{...P.thisFeatureDisabledForOrg})})]}),s&&e.jsx(xs,{className:"text-token-text-secondary py-2",children:Es(s)?e.jsx(d,{...s,values:n}):s}),t]})})}const vs=({upsellEnterprise:a,isQuorum:s,whamAccess:t,whamLocalAccess:i,codexAgentNetworkAccess:r,workspaceId:n})=>{const l=V(),{enabled:g,isLoading:u}=Le(pe[me.GITHUB_CONNECTOR]),h=I(l,"3507761600"),b=I(l,"2995560103");return e.jsx(Rs,{title:x({id:"d4cT9L",defaultMessage:"Codex"}),description:x({id:"ffT+eO",defaultMessage:"Manage whether members can use Codex."}),upsellEnterprise:a,isQuorum:s,children:e.jsxs(A,{children:[e.jsx(Ts,{disabled:!0,workspaceId:n,description:P.codexGitHubToggleLinkToConnectorSettings}),e.jsx(_,{disabled:a||s||u||!t&&!g,label:x({id:"qfXuT1",defaultMessage:"Allow members to use Codex"}),tooltip:t&&!g&&!u?P.codexMustEnableGitHub:void 0,feature:c.ALLOW_CODEX_ACCESS,value:t,workspaceId:n}),b&&e.jsx(_,{disabled:a||s||u,label:x({id:"wdPl2u",defaultMessage:"Allow members to use Codex CLI and IDE Extension"}),feature:c.ALLOW_CODEX_LOCAL_ACCESS,value:i,workspaceId:n}),t&&h&&e.jsx(_,{disabled:a||s||u||!t&&!g,label:P.agentInternetAccess,description:P.agentInternetAccessDescription,feature:c.CODEX_AGENT_NETWORK_ACCESS,value:r,workspaceId:n})]})})},P=F({enterpriseUpsellPill:{id:"workspaceSettings.enterpriseUpsellPill",defaultMessage:"Enterprise"},enterpriseRequiredMessage:{id:"workspaceSettings.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},thisFeatureDisabledForOrg:{id:"workspaceSettings.thisFeatureDisabledForOrg",defaultMessage:"This feature is disabled in HIPAA compliant workspaces"},codexGitHubToggleLinkToConnectorSettings:{id:"workspaceSettings.codex.githubConnectorSettings",defaultMessage:"Codex requires the GitHub connector.{br}You can enable or disable it in <settingsLink>Connector Settings</settingsLink>",values:{br:e.jsx("br",{}),settingsLink:a=>e.jsx(Qe,{to:"/admin/ca",className:"underline",children:a})}},codexMustEnableGitHub:{id:"workspaceSettings.codex.mustEnableGitHub",defaultMessage:"You must enable the GitHub connector in connector settings for Codex to work."},agentInternetAccess:{id:"workspaceSettings.agentInternetAccess",defaultMessage:"Allow Codex agent to access the internet"},agentInternetAccessDescription:{id:"workspaceSettings.agentInternetAccessDescription",defaultMessage:"Allows environments to be created with agent internet access enabled"}});function Ns(a){return $e({queryKey:["workspace-system-instruction",a],queryFn:a?()=>U.safeGet("/accounts/{account_id}/system_instruction",{parameters:{path:{account_id:a}}}):Ze})}function Ps(a){const s=J();return ee({mutationFn:t=>U.safePost("/accounts/{account_id}/system_instruction",{parameters:{path:{account_id:a}},requestBody:{system_instruction:t}}),onSuccess:()=>{s.invalidateQueries({queryKey:["workspace-system-instruction",a]})}})}function Is(){return W()?.data.ekmConfig!=null}function Ds(){const a=W();return a?.data.computeResidency!==""&&a?.data.computeResidency!=="no_constraint"}const te=({workspaceId:a})=>{const s=Q(),t=J(),i=E();return ee({mutationFn:({feature:r,enabled:n})=>U.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:a}},requestBody:{feature:r,value:n}}),onSettled:()=>{t.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{s.danger(i.formatMessage(je.featureSettingsUpdateFailed,{toastId:"workspace_settings"}))}})},Ls=({workspaceId:a})=>{const s=Q(),t=J(),i=E();return ee({mutationFn:({setting:r,value:n})=>U.safePost("/accounts/{account_id}/settings/share_settings",{parameters:{path:{account_id:a}},requestBody:{setting:r,value:n}}),onSettled:()=>{t.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{s.danger(i.formatMessage(je.featureSettingsUpdateFailed,{toastId:"share_settings_row"}))}})},je=F({featureSettingsUpdateFailed:{id:"workspaceSettings.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});function Os({workspaceId:a}){const{data:s,isLoading:t}=he(a),i=V(),r=W(),n=!r?.isEnterprisey(),l=xe(),g=r?.residencyRegion==="no_constraint"&&!l,u=I(i,"417039829"),h=r?.isEnterprisey(),b=I(i,"2509278897");if(t)return e.jsx(B,{});if(!s)return null;const m={workspaceId:a,data:s,upsellEnterprise:n,shouldDisableForQuorum:l};return e.jsxs(Se,{children:[e.jsx(Me,{...m}),e.jsx(Ws,{...m}),e.jsx(Fs,{...m}),s.beta_settings.canvas&&e.jsx(Ks,{...m}),e.jsx(Hs,{...m,shouldDisableForQuorum:!1}),e.jsx(Vs,{...m}),h&&e.jsx(vs,{upsellEnterprise:n,isQuorum:l,whamAccess:s.beta_settings.wham_access,whamLocalAccess:s.beta_settings.wham_local_access,codexAgentNetworkAccess:s.beta_settings.codex_agent_network_access,workspaceId:a}),u&&e.jsx(qs,{...m}),e.jsx(Bs,{...m}),e.jsx(Ys,{...m}),b&&g&&e.jsx(Xs,{...m}),e.jsx(Gs,{...m})]})}const Gs=({shouldDisableForQuorum:a,data:s,workspaceId:t})=>e.jsx(T,{title:x({id:"RG4GVO",defaultMessage:"Models"}),description:x({id:"DrP1L6",defaultMessage:"Choose which models this role can access"}),shouldDisableForQuorum:a,children:e.jsx(A,{children:e.jsx(_,{label:x({id:"NiCZh1",defaultMessage:"Enable additional models"}),description:x({id:"oeg/Kq",defaultMessage:"Allow members to use additional models. This is a global setting for the workspace."}),feature:c.LEGACY_MODELS,value:s.beta_settings.legacy_models??!1,workspaceId:t,disabled:a})})}),Me=({workspaceId:a})=>{const s=E(),t=Q(),i=Oe(),r=Ds(),n=W(),l=n&&n.features.includes(Ge),{data:g}=Ns(a),[u,h]=k.useState("");k.useEffect(()=>{g&&l&&h(g.system_instruction)},[g,l]);const b=Ps(a),m=Is();return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:o.workspaceDetails,children:e.jsxs(A,{children:[e.jsxs(f,{children:[e.jsx(d,{id:"SgdcRQ",defaultMessage:"Organization ID"}),e.jsx(C,{value:n?.data.organizationId??"",onCopied:()=>t.success(s.formatMessage({id:"Ctw3o0",defaultMessage:"Copied organization ID"}))})]}),e.jsxs(f,{children:[e.jsx(d,{id:"yFldxx",defaultMessage:"Workspace ID"}),e.jsx(C,{value:a,onCopied:()=>t.success(s.formatMessage({id:"CqDpiM",defaultMessage:"Copied workspace ID"}))})]}),i&&e.jsxs(f,{children:[e.jsx(d,{id:"ql2W8E",defaultMessage:"Data Residency Region"}),e.jsx(C,{value:n?.data.residencyRegion??"",onCopied:()=>t.success(s.formatMessage({id:"gL43UM",defaultMessage:"Copied data residency"}))})]}),r&&e.jsxs(f,{children:[e.jsx(d,{id:"0l7rYd",defaultMessage:"Inference Residency Region"}),e.jsx(C,{value:n?.data.computeResidency??"",onCopied:()=>t.success(s.formatMessage({id:"DbwXiz",defaultMessage:"Copied inference residency"}))})]}),m&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:[e.jsx(d,{...o.ekmSettingsLabel}),e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(d,{...o.ekmSettingsEnabled})})]}),n?.data.ekmConfig&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:[e.jsx(d,{...o.ekmTypeLabel}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[n?.data.ekmConfig.type==="aws"&&e.jsx(d,{...o.ekmTypeAws}),n?.data.ekmConfig.type==="gcp"&&e.jsx(d,{...o.ekmTypeGcp}),n?.data.ekmConfig.type==="azure"&&e.jsx(d,{...o.ekmTypeAzure}),n?.data.ekmConfig.type==="development"&&e.jsx(d,{...o.ekmTypeDevelopment})]})]}),n?.data.ekmConfig.type==="aws"&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:[e.jsx(d,{...o.ekmNameLabel}),e.jsx(C,{value:n?.data.ekmConfig.name??"",onCopied:()=>t.success(s.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmAwsRoleArn}),e.jsx(C,{value:n?.data.ekmConfig.role_arn??"",onCopied:()=>t.success(s.formatMessage({id:"4bdi09",defaultMessage:"Copied AWS role ARN"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmAwsExternalId}),e.jsx(C,{value:n?.data.ekmConfig.external_id??"",onCopied:()=>t.success(s.formatMessage({id:"vA49q7",defaultMessage:"Copied AWS external ID"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmAwsKmsArn}),e.jsx(C,{value:n?.data.ekmConfig.kms_arn??"",onCopied:()=>t.success(s.formatMessage({id:"OrGb/E",defaultMessage:"Copied AWS KMS ARN"}))})]})]}),n?.data.ekmConfig.type==="gcp"&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:[e.jsx(d,{...o.ekmNameLabel}),e.jsx(C,{value:n?.data.ekmConfig.name??"",onCopied:()=>t.success(s.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmGcpWorkloadIdentityProjectNumber}),e.jsx(C,{value:n?.data.ekmConfig.workload_identity_project_number??"",onCopied:()=>t.success(s.formatMessage({id:"YqzX4K",defaultMessage:"Copied GCP workload identity project number"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmGcpWorkloadIdentityPoolId}),e.jsx(C,{value:n?.data.ekmConfig.workload_identity_pool_id??"",onCopied:()=>t.success(s.formatMessage({id:"chEtMi",defaultMessage:"Copied GCP workload identity pool ID"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmGcpWorkloadIdentityProviderId}),e.jsx(C,{value:n?.data.ekmConfig.workload_identity_provider_id??"",onCopied:()=>t.success(s.formatMessage({id:"/T7kiu",defaultMessage:"Copied GCP workload identity provider ID"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmGcpAudience}),e.jsx(C,{value:n?.data.ekmConfig.audience??"",onCopied:()=>t.success(s.formatMessage({id:"/uFjyv",defaultMessage:"Copied GCP audience"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmGcpKmsProjectId}),e.jsx(C,{value:n?.data.ekmConfig.kms_project_id??"",onCopied:()=>t.success(s.formatMessage({id:"gjI8eK",defaultMessage:"Copied GCP KMS project ID"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmGcpKmsKeyRingName}),e.jsx(C,{value:n?.data.ekmConfig.kms_key_ring_name??"",onCopied:()=>t.success(s.formatMessage({id:"3dwsVC",defaultMessage:"Copied GCP KMS key ring"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmGcpKmsKeyName}),e.jsx(C,{value:n?.data.ekmConfig.kms_key_name??"",onCopied:()=>t.success(s.formatMessage({id:"gHjKrz",defaultMessage:"Copied GCP KMS key name"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmGcpKmsKeyLocation}),e.jsx(C,{value:n?.data.ekmConfig.kms_key_location??"",onCopied:()=>t.success(s.formatMessage({id:"0GOofF",defaultMessage:"Copied GCP KMS key location"}))})]})]}),n?.data.ekmConfig.type==="azure"&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:[e.jsx(d,{...o.ekmNameLabel}),e.jsx(C,{value:n?.data.ekmConfig.name??"",onCopied:()=>t.success(s.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmAzureTenantId}),e.jsx(C,{value:n?.data.ekmConfig.tenant_id??"",onCopied:()=>t.success(s.formatMessage({id:"vH6cbU",defaultMessage:"Copied Azure tenant ID"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmAzureVaultUri}),e.jsx(C,{value:n?.data.ekmConfig.vault_uri??"",onCopied:()=>t.success(s.formatMessage({id:"riTMZV",defaultMessage:"Copied Azure Key Vault URI"}))})]}),e.jsxs(f,{children:[e.jsx(d,{...o.ekmAzureKeyName}),e.jsx(C,{value:n?.data.ekmConfig.key_name??"",onCopied:()=>t.success(s.formatMessage({id:"+LPUTz",defaultMessage:"Copied Azure key name"}))})]})]}),n?.data.ekmConfig.type==="development"&&e.jsxs(f,{children:[e.jsx(d,{...o.ekmNameLabel}),e.jsx(C,{value:n?.data.ekmConfig.name??"",onCopied:()=>t.success(s.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]})]})]})]})}),l&&e.jsx(T,{title:o.workspaceInstructionSection,upsellEnterprise:!1,description:o.systemInstructionDescription,children:e.jsxs(f,{className:"flex-col gap-2",children:[e.jsx(ps,{className:"border-token-border-default focus-within:border-token-border-heavy focus-within:ring-token-text-secondary bg-token-bg-primary w-full resize-y rounded-md border px-3 py-2 font-mono text-xs shadow-none focus-within:ring-1",value:u,placeholder:"How should ChatGPT behave? What traits should it have? What should it know about your company?",onChange:R=>h(R.target.value),rows:5}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{size:"small",onClick:()=>b.mutate(u),disabled:b.isPending||u===g?.system_instruction,children:e.jsx(d,{...o.workspaceInstructionSave})})})]})})]})},Ws=({workspaceId:a,data:s,upsellEnterprise:t,shouldDisableForQuorum:i})=>{const r=V(),n=I(r,"773249106"),l=t||i;return e.jsx(T,{title:o.sharingSettingsTitle,upsellEnterprise:t,shouldDisableForQuorum:i,children:e.jsx(A,{children:e.jsxs(f,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(d,{...n?o.chatCanvasProjectSharingTitle:o.chatCanvasSharingTitle})}),e.jsx(_e,{workspaceId:a,disabled:l,defaultValue:s.share_settings.chat_share_setting})]})})})},Fs=({workspaceId:a,shouldDisableForQuorum:s,upsellEnterprise:t,data:i})=>{const[r,n]=k.useState(!1),{variables:l,mutate:g}=te({workspaceId:a}),u=t||s;return e.jsxs(e.Fragment,{children:[r&&e.jsx(ye,{onConfirm:()=>{g({feature:c.MEMORY,enabled:!1}),n(!1)},onClose:()=>{n(!1)}}),e.jsx(T,{title:o.memoryFeatureSettingsTitle,description:o.workspaceMemoryDescription,descriptionValues:{link:h=>e.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-in-chatgpt-faq",target:"_blank",className:"underline",rel:"noreferrer",children:h})},upsellEnterprise:t,shouldDisableForQuorum:s,children:e.jsx(A,{children:e.jsxs(f,{className:"justify-start py-6",children:[e.jsx($,{label:"",disabled:u,enabled:l?.enabled??i.beta_settings.sunshine,onChange:h=>{h?g({feature:c.MEMORY,enabled:h}):n(!0)}}),e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(d,{...o.memoryOptionTitle})})]})})})]})},Ks=({upsellEnterprise:a,data:s,workspaceId:t})=>e.jsx(T,{title:x({id:"SyabKs",defaultMessage:"Canvas"}),description:x({id:"pPFCur",defaultMessage:"Control how users in this workspace can use the ChatGPT canvas feature."}),upsellEnterprise:a,shouldDisableForQuorum:!1,children:e.jsxs(A,{children:[e.jsx(_,{disabled:a,label:x({id:"wlG5ZH",defaultMessage:"Canvas code execution"}),feature:c.CANVAS_CODE_EXECUTION,tooltip:x({id:"qMiLv3",defaultMessage:"Support for running canvas code within the browser."}),value:s.beta_settings.canvas_code_execution,workspaceId:t}),e.jsx(_,{disabled:a,label:x({id:"XwHFHi",defaultMessage:"Allow canvas code to access the network"}),feature:c.CANVAS_CODE_NETWORK_ACCESS,tooltip:x({id:"ujHQEU",defaultMessage:"Learn more about network requests in canvas"}),onClickInfo:()=>window.open("https://help.openai.com/en/articles/9930697-what-is-the-canvas-feature-in-chatgpt-and-how-do-i-use-it#h_cd52fdbc16"),value:s.beta_settings.canvas_code_network_access,workspaceId:t})]})}),Hs=({upsellEnterprise:a,shouldDisableForQuorum:s,data:t,workspaceId:i})=>{const r=a,n=We(),l=n?.includes(le.SearchTool)&&!n.includes(le.SearchToolHoldout),g=V(),u=I(g,"3940160259");let h=o.deepResearchTooltipDisabled;return s?h=o.deepResearchTooltipDisabledQuorum:t.beta_settings.browsing&&(h=o.deepResearchTooltip),e.jsx(T,{title:o.searchTitle,description:o.searchDescription,descriptionValues:{link:b=>e.jsx("a",{href:"https://help.openai.com/en/articles/10093903-chatgpt-search-for-enterprise-and-edu",target:"_blank",className:"underline",rel:"noreferrer",children:b})},upsellEnterprise:a,shouldDisableForQuorum:!1,children:e.jsxs(A,{children:[e.jsx(_,{label:l?o.searchOptionTitle:o.browseOptionTitle,feature:c.BROWSING,value:t.beta_settings.browsing,workspaceId:i,tooltip:l?o.searchTooltip:o.browseTooltip,disabled:r}),u===!0&&e.jsx(_,{label:o.deepResearchTitle,feature:c.DEEP_RESEARCH,messageAfterTooltip:h,value:t.beta_settings.deep_research,workspaceId:i,tooltip:h,disabled:a||!t.beta_settings.browsing||s,onClickInfo:()=>window.open("https://help.openai.com/en/articles/10500283-deep-research-faq")})]})})},Vs=({upsellEnterprise:a,data:s,workspaceId:t})=>{const i=a;return e.jsx(T,{title:x({id:"/1YXN0",defaultMessage:"Voice"}),description:x({id:"3jvok6",defaultMessage:"Manage whether members can share their screen or video while having a voice conversation. <link>Learn more</link>"}),descriptionValues:{link:r=>e.jsx("a",{href:"https://help.openai.com/en/articles/8400625-voice-mode-faq",target:"_blank",className:"underline",rel:"noreferrer",children:r})},upsellEnterprise:a,shouldDisableForQuorum:!1,children:e.jsx(A,{children:e.jsx(_,{disabled:i,label:x({id:"9usJzG",defaultMessage:"Allow members to share their screen or video while using voice mode"}),feature:c.VIDEO_SCREEN_SHARING,value:s.beta_settings.video_screen_sharing,workspaceId:t})})})},qs=({shouldDisableForQuorum:a,data:s,workspaceId:t})=>{const i=Fe();return e.jsx(T,{title:x({id:"aVKeFK",defaultMessage:"Record"}),description:x({id:"l0y0CK",defaultMessage:"Manage whether users can use ChatGPT to record, transcribe, and summarize longform audio. Recordings will be used solely for transcription purposes and will not be stored by OpenAI. <link>Learn more</link>"}),descriptionValues:{link:r=>e.jsx("a",{href:"https://help.openai.com/en/articles/11487532",target:"_blank",className:"underline",rel:"noreferrer",children:r})},shouldDisableForQuorum:a,children:e.jsxs(A,{children:[e.jsx(_,{label:x({id:"03rxwg",defaultMessage:"Allow members to use ChatGPT Record"}),feature:c.HIVE,value:s.beta_settings.hive,workspaceId:t,disabled:a}),e.jsx(_,{label:x({id:"ooMyTF",defaultMessage:"Allow ChatGPT to reference past notes and transcripts"}),tooltip:i?x({id:"CuaZot",defaultMessage:"ChatGPT can reference a user's own past notes and transcripts from record, to help provide more context across chats."}):o.unsupportedDrTooltip,feature:c.HIVE_KNOWLEDGE_RETRIEVAL,value:s.beta_settings.hive_knowledge_retrieval,workspaceId:t,disabled:a||!i})]})})},Bs=({upsellEnterprise:a,shouldDisableForQuorum:s,data:t,workspaceId:i})=>{const r=a||s;return e.jsx(T,{title:x({id:"wgrfi/",defaultMessage:"Work with Apps"}),description:o.workspaceAppPairingDescription,descriptionValues:{link:n=>e.jsx("a",{href:"https://help.openai.com/en/articles/10119604",target:"_blank",className:"underline",rel:"noreferrer",children:n})},upsellEnterprise:a,shouldDisableForQuorum:s,children:e.jsx(A,{children:e.jsx(_,{disabled:r,label:x({id:"j8pJeQ",defaultMessage:"Work with Apps"}),feature:c.APP_PAIRING,value:t.beta_settings.app_pairing,workspaceId:i})})})},ae=60*60*24,Us=ae*90,zs=ae*365,Ys=({upsellEnterprise:a,data:s})=>e.jsx(T,{title:o.retentionPolicyTitle,description:o.retentionChange,upsellEnterprise:a,children:e.jsxs(f,{children:[e.jsx("p",{className:"inline-flex items-center text-base",children:e.jsx(d,{...o.conversationRetention})}),e.jsx(we,{data:s})]})}),we=({data:a})=>{const s=E(),t=a.conversation_ttl??null;let i;return t==null?i=s.formatMessage(o.retentionInfinite):t===Us?i=s.formatMessage(o.retentionNinetyDays):t===zs?i=s.formatMessage(o.retentionOneYear):i=s.formatMessage(o.retentionCustomDays,{num:Math.floor(t/ae)}),e.jsx(fe,{label:s.formatMessage(o.retentionSettingTooltip),children:i})},Xs=({upsellEnterprise:a,shouldDisableForQuorum:s,data:t,workspaceId:i})=>{const r=E(),n=W(),l=V(),g=I(l,"614413305")&&n?.residencyRegion==="no_constraint";return e.jsx(T,{title:o.appleIntelligenceTitle,upsellEnterprise:a,shouldDisableForQuorum:s,description:r.formatMessage(o.appleIntelligenceDescription),children:e.jsxs(f,{className:"flex-col",children:[e.jsx(_,{hasPadding:!1,disabled:!1,label:x({id:"mcLjLe",defaultMessage:"Beta: Apple Intelligence"}),Icon:gs,feature:c.CLIENT_APPLICATION_APPLE,value:t.beta_settings.client_application_apple,workspaceId:i,tooltip:x({id:"mp2Kmk",defaultMessage:"Beta: Enable linking with Apple Intelligence"})}),g&&e.jsx(_,{className:"ms-6",hasPadding:!1,disabled:!t.beta_settings.client_application_apple,label:x({id:"64jjqZ",defaultMessage:"Enable on managed devices only"}),feature:c.CLIENT_APPLICATION_APPLE_MDM_REQUIRED,value:t.beta_settings.client_application_apple_mdm_required,workspaceId:i,tooltip:x({id:"7Afc2K",defaultMessage:"Only allow linking this workspace with Apple Intelligence on MDM managed devices"})})]})})};function _e({workspaceId:a,defaultValue:s,disabled:t=!1}){const{variables:i,mutate:r}=Ls({workspaceId:a}),n=[{display:o.workspaceMembersOnlySelect,value:ce.WORKSPACE_ONLY},{display:o.noOneSelect,value:ce.NO_ONE}],l=Ke.CHAT_SHARE_SETTINGS;return e.jsxs(N.Root,{defaultValue:i?.value??s,onValueChange:g=>{r({setting:l,value:g})},disabled:t,children:[e.jsxs(N.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(N.Value,{}),e.jsx(N.Icon,{})]}),e.jsx(N.Portal,{children:e.jsx(N.Content,{children:n.map((g,u)=>e.jsx(N.Item,{className:"text-md",value:g.value,children:e.jsx(d,{...g.display})},u))})})]})}function ye({onConfirm:a,onClose:s}){const t=E();return e.jsx(He,{testId:"modal-disable-workspace-memory",type:"warning",isOpen:!0,onClose:s,title:t.formatMessage(o.deleteWorkspaceMemoryModalTitle),showCloseButton:!0,primaryButton:e.jsx(H,{color:"danger",onClick:a,children:e.jsx(d,{...o.deleteWorkspaceMemoryModalConfirm})}),secondaryButton:e.jsx(H,{onClick:s,color:"secondary",children:e.jsx(d,{...o.deleteWorkspaceMemoryModalCancel})}),children:e.jsx("div",{className:"text-token-text-primary mb-2 text-sm",children:e.jsx(d,{...o.deleteWorkspaceMemoryModalInfo,values:{b:i=>e.jsx("b",{children:i})}})})})}const o=F({appleIntelligenceTitle:{id:"workspaceSettings.appleIntelligenceTitle",defaultMessage:"Apple Intelligence"},appleIntelligenceDescription:{id:"workspaceSettings.appleIntelligenceDescription",defaultMessage:"Manage whether members can link with Apple Intelligence."},retentionPolicyTitle:{id:"workspaceSettings.retentionPolicyTitle",defaultMessage:"Retention policy"},sharingSettingsTitle:{id:"workspaceSettings.sharingSettingsTitle",defaultMessage:"Sharing"},memoryFeatureSettingsTitle:{id:"workspaceSettings.memoryFeatureSettingsTitle",defaultMessage:"Memory"},memoryOptionTitle:{id:"workspaceSettings.memoryOptionTitle",defaultMessage:"Allow members to use memory"},deepResearchTitle:{id:"workspaceSettings.deepResearchTitle",defaultMessage:"Deep Research"},workspaceMemoryDescription:{id:"workspaceSettings.workspaceMemoryDescription",defaultMessage:"Manage whether members can enable memory. This allows ChatGPT to become more helpful by remembering details and preferences across chats. <link>Learn more</link>"},workspaceAppPairingDescription:{id:"workspaceSettings.workspaceAppPairingDescription",defaultMessage:"Control whether users in this workspace can enable ChatGPT to work with apps. This allows ChatGPT to read and edit the content of specific apps on their desktop to provide better responses. <link>Learn more</link>"},deleteWorkspaceMemoryModalTitle:{id:"workspaceSettings.deleteWorkspaceMemoryModalTitle",defaultMessage:"Are you sure?"},deleteWorkspaceMemoryModalConfirm:{id:"workspaceSettings.deleteWorkspaceMemoryModalConfirm",defaultMessage:"Disable and delete memories"},deleteWorkspaceMemoryModalCancel:{id:"workspaceSettings.deleteWorkspaceMemoryModalCancel",defaultMessage:"Cancel"},deleteWorkspaceMemoryModalInfo:{id:"workspaceSettings.groups.deleteWorkspaceMemoryModalInfo",defaultMessage:"If you disable memory for your workspace, <b>members' existing memories will be forgotten</b>. This can't be undone."},chatCanvasSharingTitle:{id:"workspaceSettings.chatCanvasSharingTitle",defaultMessage:"Allow members to share a chat or canvas with..."},chatCanvasProjectSharingTitle:{id:"workspaceSettings.chatCanvasProjectSharingTitle",defaultMessage:"Allow members to share a chat, canvas, or project with..."},workspaceDetails:{id:"workspaceSettings.workspaceDetails",defaultMessage:"Workspace details"},ekmSettingsLabel:{id:"workspaceSettings.ekmSettingsLabel",defaultMessage:"Enterprise key management"},ekmSettingsEnabled:{id:"workspaceSettings.ekmSettingsEnabled",defaultMessage:"Enabled"},ekmTypeLabel:{id:"workspaceSettings.ekmTypeLabel",defaultMessage:"EKM type"},ekmTypeAws:{id:"workspaceSettings.ekmTypeAws",defaultMessage:"AWS"},ekmTypeGcp:{id:"workspaceSettings.ekmTypeGcp",defaultMessage:"GCP"},ekmTypeAzure:{id:"workspaceSettings.ekmTypeAzure",defaultMessage:"Azure"},ekmTypeDevelopment:{id:"workspaceSettings.ekmTypeDevelopment",defaultMessage:"Development"},ekmNameLabel:{id:"workspaceSettings.ekmNameLabel",defaultMessage:"Name"},ekmAwsRoleArn:{id:"workspaceSettings.ekmAwsRoleArn",defaultMessage:"AWS role ARN"},ekmAwsExternalId:{id:"workspaceSettings.ekmAwsExternalId",defaultMessage:"AWS external ID"},ekmAwsKmsArn:{id:"workspaceSettings.ekmAwsKmsArn",defaultMessage:"AWS KMS ARN"},ekmGcpWorkloadIdentityProjectNumber:{id:"workspaceSettings.ekmGcpWorkloadIdentityProjectNumber",defaultMessage:"GCP workload identity project number"},ekmGcpWorkloadIdentityPoolId:{id:"workspaceSettings.ekmGcpWorkloadIdentityPoolId",defaultMessage:"GCP workload identity pool ID"},ekmGcpWorkloadIdentityProviderId:{id:"workspaceSettings.ekmGcpWorkloadIdentityProviderId",defaultMessage:"GCP workload identity provider ID"},ekmGcpAudience:{id:"workspaceSettings.ekmGcpAudience",defaultMessage:"GCP audience"},ekmGcpKmsProjectId:{id:"workspaceSettings.ekmGcpKmsProjectId",defaultMessage:"GCP KMS project ID"},ekmGcpKmsKeyRingName:{id:"workspaceSettings.ekmGcpKmsKeyRingName",defaultMessage:"GCP KMS key ring"},ekmGcpKmsKeyName:{id:"workspaceSettings.ekmGcpKmsKeyName",defaultMessage:"GCP KMS key name"},ekmGcpKmsKeyLocation:{id:"workspaceSettings.ekmGcpKmsKeyLocation",defaultMessage:"GCP KMS key location"},ekmAzureTenantId:{id:"workspaceSettings.ekmAzureTenantId",defaultMessage:"Azure tenant ID"},ekmAzureVaultUri:{id:"workspaceSettings.ekmAzureVaultUri",defaultMessage:"Azure Key Vault URI"},ekmAzureKeyName:{id:"workspaceSettings.ekmAzureKeyName",defaultMessage:"Azure key name"},workspaceMembersOnlySelect:{id:"workspaceSettings.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},noOneSelect:{id:"workspaceSettings.noOneSelect",defaultMessage:"No one"},conversationRetention:{id:"workspaceSettings.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettings.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettings.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettings.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettings.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettings.retentionChange",defaultMessage:"Contact your account manager to change this setting."},retentionSettingTooltip:{id:"workspaceSettings.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},connectionsTitle:{id:"workspaceSettings.connectionsTitle",defaultMessage:"Connectors"},contextConnectorsSubtitle:{id:"workspaceSettings.contextConnectorsSubtitle",defaultMessage:"Manage which apps users in this workspace can connect to directly from ChatGPT. For more information, refer to the {helpCenterLink}."},contextConnectorsHelpCenterLink:{id:"workspaceSettings.contextConnectorsHelpCenterLink",defaultMessage:"Help Center"},contextConnectorsGoogleDrive:{id:"workspaceSettings.contextConnectorsGoogleDrive",defaultMessage:"Google Drive"},contextConnectorsO365PersonalTooltip:{id:"workspaceSettings.contextConnectorsO365PersonalTooltip",defaultMessage:"This includes personal OneDrive accounts but not OneDrive for Business or SharePoint accounts."},contextConnectorsO365BusinessTooltip:{id:"workspaceSettings.contextConnectorsO365BusinessTooltip",defaultMessage:"This includes OneDrive for Business and SharePoint accounts but not personal accounts."},platformConnectorsGithubTooltip:{id:"workspaceSettings.platformConnectorsGithubTooltip",defaultMessage:"Controls access to GitHub across ChatGPT"},searchTitle:{id:"workspaceSettings.searchTitle",defaultMessage:"Web Search"},searchDescription:{id:"workspaceSettings.workspaceGPTsDescription",defaultMessage:"Manage whether ChatGPT and GPTs created in this workspace can browse the internet. When enabled, it may send search queries and general location information to Bing, but this data is not linked to or associated with user accounts. This does not apply to third-party GPTs. <link>Learn more</link>"},webSearchDescriptionOfflineOnly:{id:"d1wF1k",defaultMessage:"ChatGPT web search may send queries to third-party search providers based on your inputs to ChatGPT. You should ensure your use of ChatGPT search complies with your compliance obligations."},deepResearchDescription:{id:"workspaceSettings.workspaceDeepResearchDescription",defaultMessage:"Deep Research utilizes web search & reasoning to respond to research queries. <link>Learn more</link>"},searchTooltip:{id:"workspaceSettings.searchTooltip",defaultMessage:"Web search allows ChatGPT and GPTs to answer questions on recent topics."},searchOptionTitle:{id:"workspaceSettings.searchOptionTitle",defaultMessage:"Web Search"},browseOptionTitle:{id:"workspaceSettings.browseOptionTitle",defaultMessage:"Browsing with Bing"},browseTooltip:{id:"workspaceSettings.browseTooltip",defaultMessage:"Allow ChatGPT and GPTs to browse the internet to answer questions about recent topics and events."},deepResearchTooltip:{id:"workspaceSettings.deepResearchTooltip",defaultMessage:"Deep research uses web search and reasoning to handle complex research requests."},deepResearchTooltipDisabled:{id:"workspaceSettings.deepResearchTooltipDisabled",defaultMessage:"Deep research uses web search and reasoning to handle complex research requests. Turn web search on to allow deep research."},deepResearchTooltipDisabledQuorum:{id:"workspaceSettings.deepResearchTooltipDisabledQuorum",defaultMessage:"This feature is disabled in HIPAA compliant workspaces"},deepResearchTooltipDisabledWarning:{id:"workspaceSettings.deepResearchTooltipDisabledWarning",defaultMessage:"Requires web search"},unsupportedDrTooltip:{id:"workspaceSettings.unsupportedDrTooltip",defaultMessage:"This feature is currently not available in your data residency region."},workspaceInstructionSection:{id:"workspaceSettings.workspaceInstructionSection",defaultMessage:"Workspace Instructions"},workspaceInstructionSave:{id:"workspaceSettings.workspaceInstructionSave",defaultMessage:"Save"},systemInstructionDescription:{id:"workspaceSettings.workspaceInstruction",defaultMessage:"Add anything you'd like ChatGPT to consider in its response. These instructions will be added to every new conversation for users in your workspace going forward"},lockedSettingTooltip:{id:"workspaceSettings.lockedSettingTooltip",defaultMessage:"This setting is locked for your workspace"}}),Qs=({workspaceId:a})=>{const{data:s,isLoading:t}=se({workspaceId:a}),[i,r]=k.useState("");k.useEffect(()=>{const b=()=>{const m=s?.data.find(R=>be(R));m&&r(m.id)};s?.data&&b()},[s]);const{data:n,refetch:l,isLoading:g}=Ce({workspaceId:a,roleId:i??""}),{updateRole:u}=ke({workspaceId:a}),h=k.useCallback(async b=>{const m=await u(b);m.id!==i&&r(m.id),l()},[i,l,u]);return{defaultRole:n,handleSaveRole:h,isLoading:t||g}};function $s({workspaceId:a}){const s=E(),{data:t,isLoading:i}=he(a),r=W(),n=!r?.isEnterprisey(),l=xe(),g=is(),{defaultRole:u,handleSaveRole:h,isLoading:b}=Qs({workspaceId:a}),[m,R]=k.useState(""),D=Ve(),{filteredSections:M,totalPermissionsCount:z}=k.useMemo(()=>{const S=qe({isCanvasEnabled:t?.beta_settings.canvas??!1,isSearchEnabled:u?.permissions.includes(K.SearchAccess)??!1,isEnterprisey:r?.isEnterprisey()??!1,isQuorum:l,legacyModelsEnabled:t?.beta_settings.legacy_models??!1,...g,includeConnectorPermissions:D,isCodexEnabledInRBACRole:u?.permissions.includes(K.AllowCodexAccess)??!1}),v=S.flatMap(p=>p.entries).length,L=S.map(p=>({...p,entries:p.entries.filter(j=>{const O=typeof j.title=="string"?j.title:s.formatMessage(j.title),q=j.description?typeof j.description=="string"?j.description:s.formatMessage(j.description,j.descriptionValues):"";return[O,q].join(" ").toLowerCase().includes(m.toLowerCase())||j.rbac&&j.permissionName.toLowerCase().includes(m.toLowerCase())||!j.rbac&&j.settingName.toLowerCase().includes(m.toLowerCase())})})).filter(p=>p.entries.length>0);return{permissionsBySection:S,totalPermissionsCount:v,filteredSections:L}},[r,t?.beta_settings.canvas,u?.permissions,g,s,m,l,t?.beta_settings.legacy_models,D]),{toggleAllConnectorsPermissionForRole:Te,isPending:ne}=cs({workspaceId:r?.getWorkspaceId()??"",showToast:!1}),{connectorsWithPermission:ie,isLoading:Ae}=ds({accountId:r?.id??"",workspaceId:r?.getWorkspaceId()??"",roleId:u?.id??"",enabled:D&&!!u?.id}),Y=Array.from(ie.values()??[]).filter(S=>S.connector.status!=="DISABLED_BY_ADMIN"),oe=k.useMemo(()=>[c.CONTEXT_CONNECTOR_GDRIVE,c.CONTEXT_CONNECTOR_O365_PERSONAL,c.CONTEXT_CONNECTOR_O365_BUSINESS].filter(S=>!!t?.beta_settings[S]),[t?.beta_settings]),X=us({workspaceId:r?.getWorkspaceId()??"",roleId:u?.id??"",connectorIds:oe,enabled:D&&!!u?.id}),Ee=k.useMemo(()=>{const v=Array.from(Y.values()??[]).filter(p=>p.permissions.includes(K.UseConnector)),L=Object.entries(X.results??{}).filter(([p,j])=>j.includes(K.UseConnector));return[...v,...L]},[Y,X.results]),[Re,re]=k.useState(!1);return i||b?e.jsx(Be,{}):!t||!u?null:e.jsxs(Se,{children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:s.formatMessage(de.defaultSettingDescription)}),e.jsx("div",{className:"flex flex-row items-center justify-between",children:e.jsx(ue,{inputClassName:"w-[250px] rounded-full! text-sm",value:m,onChange:S=>{R(S.target.value)},placeholder:s.formatMessage({id:"hRuTvi",defaultMessage:"Search {count} permissions"},{count:z})})}),e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsx(Me,{workspaceId:a}),M.map(S=>{const v=n&&!S.availableForEnterprise,L=l&&!S.availableForQuorum;return e.jsx(T,{title:S.title,description:S.description,descriptionValues:S.descriptionValues,upsellEnterprise:v,shouldDisableForQuorum:L,children:e.jsx(A,{children:S.entries.map(p=>{const j=p.rbac?p.permissionName:p.settingName,O=typeof p.title=="string"?p.title:s.formatMessage(p.title),q=l&&p.rbac&&p.disabledForQuorum;if(p.rbac&&p.permissionName===K.UseConnector){const ve=Ee.length>0;return e.jsxs(e.Fragment,{children:[Re&&e.jsx(os,{platformConnectorsWithPermission:ie,contextConnectorsWithPermission:X.results,workspaceId:r?.getWorkspaceId()??"",roleId:u?.id??"",onClose:()=>re(!1)}),e.jsx(f,{children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-md",children:O}),p.description&&e.jsx("span",{className:"text-token-text-tertiary text-sm",children:typeof p.description=="string"?p.description:s.formatMessage(p.description,p.descriptionValues)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(Ae||ne)&&e.jsx(B,{}),p.nestedKey&&(oe.length>0||Y.length>0)&&e.jsx("div",{className:"text-token-text-tertiary text-sm",children:e.jsx(H,{color:"primary-inverse",onClick:()=>re(!0),children:e.jsx(d,{id:"workspaceSettings.roles.selectNestedPermission",defaultMessage:"Select..."})})}),e.jsx(Ue,{size:"normal","aria-label":O,checked:ve,onCheckedChange:Ne=>Te({id:u?.id??"",state:Ne}),disabled:ne})]})]})},j)]})}return e.jsx(f,{children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-md flex gap-2",children:[O,q&&e.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary rounded-xl px-3 ps-3 pt-1 pb-1 text-sm font-normal",children:e.jsx(d,{...de.thisFeatureDisabledForOrg})})]}),p.description&&e.jsx("span",{className:"text-token-text-tertiary text-xs",children:typeof p.description=="string"?p.description:s.formatMessage(p.description,p.descriptionValues)})]}),p.rbac?e.jsx(rs,{ariaLabel:O,role:u,permissionName:p.permissionName,handleSaveRole:h,disabled:p.disabled||v||L||q,disabledReason:p.disabledReason}):e.jsx(Zs,{entry:p,workspaceId:a,data:t,upsellEnterprise:v,isQuorum:l})]})},j)})})},String(S.title.defaultMessage))})]})]})}const Zs=({entry:a,workspaceId:s,data:t,upsellEnterprise:i,isQuorum:r})=>k.useMemo(()=>{const l=i;switch(a.settingName){case"share_chat":return e.jsx(_e,{workspaceId:s,disabled:l||r,defaultValue:t.share_settings.chat_share_setting});case"rentention_policy":return e.jsx(we,{data:t});case"memory_access":return e.jsx(Js,{data:t,workspaceId:s,disabled:l});case"apps_access":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.APP_PAIRING],feature:c.APP_PAIRING,disabled:l});case"apple_intelligence_access":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.CLIENT_APPLICATION_APPLE],feature:c.CLIENT_APPLICATION_APPLE,disabled:l});case"apple_intelligence_mdm_access":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.CLIENT_APPLICATION_APPLE_MDM_REQUIRED],feature:c.CLIENT_APPLICATION_APPLE_MDM_REQUIRED,disabled:l});case"canvas_code_execution":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.CANVAS_CODE_EXECUTION],feature:c.CANVAS_CODE_EXECUTION,disabled:l});case"canvas_code_network_access":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.CANVAS_CODE_NETWORK_ACCESS],feature:c.CANVAS_CODE_NETWORK_ACCESS,disabled:l});case"web_search":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.BROWSING],feature:c.BROWSING,disabled:l});case"deep_research":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.DEEP_RESEARCH],feature:c.DEEP_RESEARCH,disabled:l});case"video_screen_sharing":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.VIDEO_SCREEN_SHARING],feature:c.VIDEO_SCREEN_SHARING,disabled:l});case"codex_access":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.ALLOW_CODEX_ACCESS],feature:c.ALLOW_CODEX_ACCESS,disabled:l});case"codex_local_access":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.ALLOW_CODEX_LOCAL_ACCESS],feature:c.ALLOW_CODEX_LOCAL_ACCESS,disabled:l});case"codex_agent_network":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.CODEX_AGENT_NETWORK_ACCESS],feature:c.CODEX_AGENT_NETWORK_ACCESS,disabled:l});case"record_access":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.HIVE],feature:c.HIVE,disabled:!1});case"record_reference_past_transcripts":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.HIVE_KNOWLEDGE_RETRIEVAL],feature:c.HIVE_KNOWLEDGE_RETRIEVAL,disabled:!1});case"legacy_models":return e.jsx(w,{workspaceId:s,enabled:t.beta_settings[c.LEGACY_MODELS],feature:c.LEGACY_MODELS,disabled:l})}},[t,a.settingName,r,i,s]),Js=({workspaceId:a,data:s,disabled:t})=>{const{variables:i,mutate:r}=te({workspaceId:a}),[n,l]=k.useState(!1);return e.jsxs(e.Fragment,{children:[n&&e.jsx(ye,{onConfirm:()=>{r({feature:c.MEMORY,enabled:!1}),l(!1)},onClose:()=>{l(!1)}}),e.jsx($,{label:"",disabled:t,enabled:i?.enabled??s.beta_settings[c.MEMORY],onChange:g=>{g?r({feature:c.MEMORY,enabled:g}):l(!0)}})]})},w=({workspaceId:a,disabled:s,enabled:t,feature:i})=>{const{variables:r,mutate:n}=te({workspaceId:a});return e.jsx($,{label:"",disabled:s,enabled:r?.enabled??t,onChange:l=>{n({feature:i,enabled:l})}})},de=F({defaultSettingDescription:{id:"1IUdGa",defaultMessage:"This page controls the default experience for members who don't have a custom role."},thisFeatureDisabledForOrg:{id:"npt/Lq",defaultMessage:"This feature is disabled in HIPAA compliant workspaces"}}),et=a=>a==="general"||a==="permissions"||a==="roles";function st({currentWorkspaceId:a}){const s=E(),t=ze(),i=Ye(),r=k.useMemo(()=>{const m=[{key:"general",label:s.formatMessage(G.generalTab),children:i?e.jsx($s,{workspaceId:a}):e.jsx(Os,{workspaceId:a})}];return t&&(i||m.push({key:"permissions",label:s.formatMessage(G.workspacePermissionsTab),children:e.jsx(ws,{workspaceId:a})}),m.push({key:"roles",label:s.formatMessage(G.customRolesTab),children:e.jsx(_s,{workspaceId:a})})),m},[a,s,i,t]),n=Z(),[l]=Je(),g=l.get("tab"),[u,h]=k.useState(g&&et(g)?g:r[0].key),b=m=>{h(m),n({pathname:window.location.pathname,search:new URLSearchParams({tab:m}).toString()})};return e.jsxs(e.Fragment,{children:[e.jsx(ts,{children:e.jsx("title",{children:s.formatMessage(G.title)})}),e.jsx(ks,{title:s.formatMessage(G.title),subtitle:s.formatMessage(G.subtitle),tabsHeader:e.jsx(bs,{items:r,activeTab:u,onTabChange:b})}),e.jsx(Ss,{children:e.jsx(Cs,{items:r,activeTab:u})})]})}const G=F({title:{id:"842i2c",defaultMessage:"Settings & permissions"},subtitle:{id:"s0ozLO",defaultMessage:"Configure baseline permissions for your workspace and tailor access with custom roles."},generalTab:{id:"bNJn8S",defaultMessage:"Workspace"},workspacePermissionsTab:{id:"9EpK0x",defaultMessage:"Workspace permissions"},customRolesTab:{id:"0SIrmV",defaultMessage:"Custom roles"}}),It=Xe(function(){const s=js();return Ms(),e.jsx(st,{...s})});export{It as default};
//# sourceMappingURL=grmctdsxqs5oq4e0.js.map
