import{e as C,r as o,j as e,d as T,M as U}from"./lu2xqwqmjc95q6j6.js";import{ag as W,ah as S,ai as A,aj as V,ak as z,al as B,am as G,an as b,ao as P,ap as R,aq as q,ar as Q,as as Y,at as H,au as J,av as K,aw as D,ax as X}from"./rseqzngxzbdt1oxg.js";import{c6 as I,P as Z,d as x,e0 as $,G as ee}from"./hml6mmd5fyx85si7.js";import{u as ae}from"./isxemcalu9537a8n.js";function E({rightAlign:s=!1,bottomAlign:t=!1,fullWidth:i=!1,justifyBetween:l=!1,alwaysVisible:r=!1,children:d}){const u=o.useRef(null),g=o.useRef(!1),a=S(),h=D(),c=o.useCallback(()=>{h&&(g.current||(Z.logEventWithStatsig("Share Post: Share Button Shown","chatgpt_post_share_button_shown",{source:"image_gen_action_overlay",...a}),g.current=!0))},[a,h]),n=o.useCallback(j=>{j.propertyName==="opacity"&&c()},[c]);return o.useEffect(()=>{r&&c()},[r,c]),e.jsxs("div",{ref:u,onTransitionEnd:n,className:x("absolute z-2 transition-opacity duration-75 ease-out",r?"opacity-100":"opacity-0 group-hover/imagegen-image:opacity-100 group-focus/imagegen-image:opacity-100 focus-within:opacity-100",s?"end-0":"start-0",t?"bottom-0":"top-0",i&&"w-full"),children:[e.jsx("div",{className:x(t?"bg-linear-to-b":"bg-linear-to-t","from-transparent to-black/30","h-20 w-full")}),e.jsx("div",{className:x("absolute inset-0 flex p-1",t?"items-end":"items-start",s?"justify-end":"justify-start",l&&"justify-between"),children:d})]})}function m({icon:s,children:t,disabled:i,onClick:l,ariaLabel:r,selected:d=!1}){return e.jsxs("button",{"aria-pressed":d,className:x("hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md","z-11 flex h-10 items-center justify-center gap-1 rounded-xl text-sm font-medium text-white",t==null?"w-10":"px-2"),onClick:l,disabled:i,"aria-label":r,children:[e.jsx(s,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.15))"},className:"icon fill-current"}),t]})}function w(s){return t=>{t.stopPropagation(),s()}}const re=({imageAssetPointer:s,imageUrl:t,messageId:i,clientThreadId:l,serverThreadId:r,shouldShowOverflow:d=!1,showRatingButtons:u=!0})=>{const g=W(),a=C(),[h,c]=o.useState(!1),[n,j]=o.useState(null),p=S(),k=v=>{n==null&&(b.imageRated({liked:v,analyticsContext:p}),j(v),v||c(!0))},y=o.useCallback(()=>A(a),[a]),O=V(),M=z(),F=M?.type===B.Image&&M.image.asset_pointer===s,[N,L]=o.useState(!1),_=o.useCallback(()=>{s&&(G({url:s,fileName:y()}),b.download({analyticsContext:p}))},[s,y,p]);return e.jsxs(e.Fragment,{children:[O?!F&&e.jsx(E,{rightAlign:!0,fullWidth:!0,children:e.jsx(m,{icon:P,ariaLabel:a.formatMessage(f.expand)})}):e.jsx(e.Fragment,{children:e.jsx(E,{bottomAlign:!0,rightAlign:!0,fullWidth:!0,alwaysVisible:N,children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex",children:[u&&n!==!1&&e.jsx(I,{label:a.formatMessage({id:"U99PVw",defaultMessage:"Like"}),delayDuration:300,children:e.jsx(m,{icon:n===!0?R:q,selected:n===!0,onClick:w(()=>k(!0)),ariaLabel:a.formatMessage(f.thumbsUp),disabled:n===!0})}),u&&n!==!0&&e.jsx(I,{label:a.formatMessage({id:"ncGqTt",defaultMessage:"Dislike"}),delayDuration:300,children:e.jsx(m,{icon:n===!1?Q:Y,selected:n===!1,onClick:w(()=>k(!1)),ariaLabel:a.formatMessage(f.thumbsDown),disabled:n===!1})}),t&&e.jsx(I,{label:a.formatMessage({id:"0EYire",defaultMessage:"Download"}),children:e.jsx(m,{icon:H,ariaLabel:a.formatMessage(f.download),onClick:w(()=>{G({url:t,fileName:y()}),b.download({analyticsContext:p})})})}),g&&d&&e.jsx(J,{onOpenChange:L,onDownload:_,triggerClassName:"z-11 flex h-10 w-10 items-center justify-center rounded-xl bg-transparent hover:bg-token-icon-surface/10 focus:bg-token-icon-surface/10 focus-visible:bg-token-icon-surface/10",iconClassName:"icon-lg fill-transparent text-white",dropdownClassName:"z-11 min-w-fit origin-top-right text-token-text-primary"})]}),e.jsx("div",{className:"flex",children:e.jsx(se,{clientThreadId:l,messageId:i})})]})})}),h&&e.jsx(K,{messageId:i,serverThreadId:r??"",rating:n,onClose:()=>c(!1)})]})};function se({clientThreadId:s,messageId:t}){const[i,l]=o.useState(!1),r=C(),d=D(),u=$(),g=ae({clientThreadId:s,imageGenMessageId:t}),a=S();return!d||u?null:e.jsx(m,{icon:i?ee:X,disabled:i,onClick:w(async()=>{l(!0);try{await g()}finally{l(!1)}b.imageShared({analyticsContext:a,source:"image_gen_action_overlay"})}),ariaLabel:r.formatMessage(f.share),children:e.jsx(U,{id:"imageGenActionOverlay.shareButton",defaultMessage:"Share"})})}const f=T({thumbsUp:{id:"imageGenActionOverlay.thumbsUp",defaultMessage:"Like this image"},thumbsDown:{id:"imageGenActionOverlay.thumbsDown",defaultMessage:"Dislike this image"},inpaint:{id:"imageGenActionOverlay.inpaint",defaultMessage:"Enter inpainting mode"},download:{id:"imageGenActionOverlay.download",defaultMessage:"Download this image"},expand:{id:"imageGenActionOverlay.expand",defaultMessage:"Expand this image"},share:{id:"imageGenActionOverlay.share",defaultMessage:"Share this image"}});export{re as I};
//# sourceMappingURL=ga4ehq2rdu1q6u65.js.map
