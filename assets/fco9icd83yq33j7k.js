import{r as l,j as t}from"./lu2xqwqmjc95q6j6.js";import{a$ as p,T as f,g as S,iu as _,s as g,N as j,g3 as A}from"./hml6mmd5fyx85si7.js";import{S as M}from"./grgafnin9dqj3keo.js";import{cV as v,ej as w,e1 as O,ek as E,el as N,em as T,en as C,eo as R}from"./rseqzngxzbdt1oxg.js";import{u as b}from"./o9a5ly6ceyr8cas8.js";function P(o,s){const{automationId:n,automationTitle:e,automationMessage:c}=l.useMemo(()=>{const u=s.find(d=>d.author.role===p.Assistant),r=u?f.getParentPromptNode(S(o),u.id):null;let a=r?.message.metadata;a?.real_author_type||(a=s.find(x=>x.metadata?.real_author_type==="automation")?.metadata);const m=a?.real_author_type==="automation"?a?.real_author_id:null,i=a?.real_author_title;return{automationId:m,automationTitle:i,automationMessage:r?.message}},[o,s]),{automation:y}=b(n??"");return{automationId:n,automation:y,automationTitle:e,automationMessage:c}}function I({clientThreadId:o,messages:s}){const{automationId:n,automation:e,automationTitle:c}=P(o,s),u=v(o).isOdysseyMode||s.some(i=>i.metadata?.n7jupd_message),r=_(o)?.value,{isScheduledRun:a}=l.useContext(w),[h,m]=l.useState(!1);return l.useEffect(()=>{n&&g.count(j.JAWBONE,"jawbone_automation_source_header.open")},[n]),n?a?t.jsx("div",{className:"relative my-2 w-full",children:t.jsx(O,{automation:e,fullWidth:!0})}):u?r===A.REALTIME?null:t.jsx(E,{clientThreadId:o,children:t.jsx(N,{children:({isScheduled:i,isScheduledRun:d})=>i&&d&&t.jsx(T,{})})}):t.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[t.jsx(M,{className:"icon-sm"}),t.jsx("button",{onClick:()=>{m(!0)},children:e?.title??c}),h&&e&&t.jsx(C,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:t.jsx(R,{item:e,source:"chat",onClose:()=>{m(!1)}})})]}):null}export{I as AutomationSourceHeader};
//# sourceMappingURL=fco9icd83yq33j7k.js.map
