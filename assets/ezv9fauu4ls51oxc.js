import{r as E,j as x}from"./lu2xqwqmjc95q6j6.js";import{m9 as u,a$ as l,g as R,T as L,oV as y}from"./hml6mmd5fyx85si7.js";import{d$ as F,e0 as c,bi as g,bh as k}from"./rseqzngxzbdt1oxg.js";function v(d,i){return I[i]}const I={inProgress:"Running tool",finished:"Finished running tool",error:"Error running tool"};function G({messages:d,isRequestActive:i,isLastMessageInTurn:S,clientThreadId:f}){const h=d.filter(s=>s.author.role===l.Assistant&&s.recipient&&u(s.recipient)),p=R(f),a=p?L.getConversationTurns(p).flatMap(s=>s.messages):[],e=a.findLastIndex(s=>s.author.role===l.Assistant&&s.recipient&&u(s.recipient)),r=e>=0?a[e]:void 0,o=r&&r.recipient,T=e>=0?a.slice(e+1).find(s=>s.author.role===l.Assistant&&(!s.recipient||!u(s.recipient))):void 0,m=T!=null&&y(T),C=e>=0&&a.slice(e+1).some(s=>s.author.role===l.Tool&&s.author.name===o),A=r?.id,n=F(s=>A?s.getToolState(f,A):void 0);let t=null;C||n?.status===c.Finished?t={key:"finished",status:g.Finished}:n?.status===c.Error?t={key:"error",status:g.Error}:(n?.status===c.Running||i&&S&&!n)&&(t={key:"inProgress",status:g.Running});const M=E.useMemo(()=>!o||!t?null:v(o,t.key),[o,t]);return h.length===0||!o||!h.some(s=>s.id===r?.id)||m||!t?null:x.jsx(k,{highlightedCommand:M,showWorkUserSetting:!1,status:t.status,children:null})}export{G as BrowserToolMessage};
//# sourceMappingURL=ezv9fauu4ls51oxc.js.map
