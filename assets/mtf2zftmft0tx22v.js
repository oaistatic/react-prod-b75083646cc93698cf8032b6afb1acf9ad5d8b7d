import{j as t,c as D,r as $,e as z,M as O}from"./lu2xqwqmjc95q6j6.js";import{hM as te,mK as de,mL as ue,mM as me,mN as fe,mA as se,gT as _,mO as je,gO as oe,gM as xe,mP as Q,mQ as ne,mR as ge,mS as V}from"./rseqzngxzbdt1oxg.js";import{bw as I,aB as b,d as F,by as N,kp as he,B as U,bz as H,a as J,P as X,cg as E,g0 as pe,qU as be,bg as re,fQ as Z,C as ae,eG as ie,c$ as ye,c as ve,b7 as Pe,nR as Se}from"./hml6mmd5fyx85si7.js";function Me({icon:s}){return t.jsx(s,{className:"icon h-6 w-6"})}function Ce(s){"use forget";const e=D.c(15),{icon:o,onClick:n}=s,i=z(),d=o.id,r=o.id;let a;e[0]!==o||e[1]!==n?(a=m=>{m.preventDefault(),n(o)},e[0]=o,e[1]=n,e[2]=a):a=e[2];let u;e[3]!==o.label||e[4]!==i?(u=i.formatMessage(o.label),e[3]=o.label,e[4]=i,e[5]=u):u=e[5];let l;e[6]!==u?(l=t.jsx("span",{className:"sr-only",children:u}),e[6]=u,e[7]=l):l=e[7];let j;e[8]!==o.icon?(j=t.jsx(Me,{icon:o.icon}),e[8]=o.icon,e[9]=j):j=e[9];let c;return e[10]!==o.id||e[11]!==a||e[12]!==l||e[13]!==j?(c=t.jsxs(b.RadioItem,{value:r,className:"group tap-padding-auto hover:bg-token-bg-tertiary m-0 flex h-9 min-h-[unset] w-9 origin-center items-center rounded-full p-0 active:scale-95 [&>div]:min-w-[unset] [&>div]:justify-center",trailing:null,onClick:a,children:[l,j]},d),e[10]=o.id,e[11]=a,e[12]=l,e[13]=j,e[14]=c):c=e[14],c}function Y(s){"use forget";const e=D.c(19),{color:o,active:n,id:i,onClick:d}=s,r=o??"default";let a;e[0]!==i||e[1]!==d?(a=M=>{M.preventDefault(),d(i)},e[0]=i,e[1]=d,e[2]=a):a=e[2];const u=o??void 0;let l;e[3]!==u?(l={backgroundColor:u},e[3]=u,e[4]=l):l=e[4];const j=n?"inline-block":"hidden";let c;e[5]!==j?(c=F(j,"aspect-square h-4 w-auto origin-center rounded-full outline-2 outline-white dark:outline-black"),e[5]=j,e[6]=c):c=e[6];let m;e[7]!==c?(m=t.jsx("span",{className:c}),e[7]=c,e[8]=m):m=e[8];let f;e[9]!==l||e[10]!==m?(f=t.jsx("span",{className:"grid h-6 w-6 place-items-center rounded-full",style:l,children:m}),e[9]=l,e[10]=m,e[11]=f):f=e[11];let g;e[12]!==o?(g=t.jsx("span",{className:"sr-only",children:o}),e[12]=o,e[13]=g):g=e[13];let v;return e[14]!==r||e[15]!==a||e[16]!==f||e[17]!==g?(v=t.jsxs(b.RadioItem,{value:r,className:"group tap-padding-auto m-0 flex h-9 min-h-[unset] w-9 origin-center items-center justify-center rounded-full p-0 active:scale-95 [&>div]:justify-center",trailing:null,onClick:a,children:[f,g]}),e[14]=r,e[15]=a,e[16]=f,e[17]=g,e[18]=v):v=e[18],v}function Ne(s){"use forget";const e=D.c(35),{onSelect:o}=s;let n;e[0]!==s.currentIcon$||e[1]!==s.currentTheme$?(n=()=>({currentTheme$:s.currentTheme$??N(null),currentIcon$:s.currentIcon$??N(null)}),e[0]=s.currentIcon$,e[1]=s.currentTheme$,e[2]=n):n=e[2];const[i]=$.useState(n),{currentTheme$:d,currentIcon$:r}=i,a=I(d),u=I(r);let l;e[3]!==r||e[4]!==d||e[5]!==o?(l=function(S){he(()=>{d.set(S),o?.(S),r()||r.set(me.folder.id)})},e[3]=r,e[4]=d,e[5]=o,e[6]=l):l=e[6];const j=l;let c;e[7]!==r?(c=function(S){r.set(S?.id??null)},e[7]=r,e[8]=c):c=e[8];const m=c,f=a??"default";let g;e[9]!==d||e[10]!==o?(g=p=>{const S=p==="default"?null:p;d.set(S),o?.(S)},e[9]=d,e[10]=o,e[11]=g):g=e[11];const v=a==null;let M;e[12]!==j||e[13]!==v?(M=t.jsx(Y,{color:"var(--bg-primary-inverted)",active:v,onClick:j,id:null}),e[12]=j,e[13]=v,e[14]=M):M=e[14];let P;e[15]!==a||e[16]!==j?(P=de().map(p=>t.jsx(Y,{color:p,id:p,active:a===p,onClick:j},p)),e[15]=a,e[16]=j,e[17]=P):P=e[17];let h;e[18]!==f||e[19]!==g||e[20]!==M||e[21]!==P?(h=t.jsxs(b.RadioGroup,{className:"grid grid-cols-[repeat(6,36px)] gap-1 p-3 pb-2",value:f,onValueChange:g,children:[M,P]}),e[18]=f,e[19]=g,e[20]=M,e[21]=P,e[22]=h):h=e[22];let x;e[23]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(b.Separator,{}),e[23]=x):x=e[23];const y=u??"default";let C;e[24]!==r?(C=p=>{const S=p==="default"?null:p;r.set(S)},e[24]=r,e[25]=C):C=e[25];let w;e[26]!==m?(w=ue().map(p=>t.jsx(Ce,{icon:p,onClick:m},p.id)),e[26]=m,e[27]=w):w=e[27];let k;e[28]!==y||e[29]!==C||e[30]!==w?(k=t.jsx(b.RadioGroup,{className:"grid grid-cols-[repeat(6,36px)] gap-1 p-3 pt-2",value:y,onValueChange:C,children:w}),e[28]=y,e[29]=C,e[30]=w,e[31]=k):k=e[31];let T;return e[32]!==k||e[33]!==h?(T=t.jsxs(b.Content,{"data-unbound-width":!0,"data-custom-padding":!0,children:[h,x,k]}),e[32]=k,e[33]=h,e[34]=T):T=e[34],T}function $e(s){const{children:e,emoji$:o,theme$:n}=s,i=I(()=>s.open$());return t.jsxs(b.Root,{modal:!0,open:i,open$:s.open$,onOpenChange:d=>{s.open$.set(d)},children:[e,t.jsx(b.Portal,{children:t.jsx(Ne,{currentTheme$:n,currentIcon$:o})})]})}function we({emoji$:s,theme$:e}){const o=I(s),n=I(e);return t.jsx(b.BasicTrigger,{className:"dropdown-btn group relative col-1 row-1 ms-2 aspect-square h-fit","data-tight":!0,"data-no-open-state":!0,"data-subtle-focus":!0,"data-testid":"project-modal-trigger",children:t.jsx(te,{color:n??"var(--icon-tertiary)",emoji:o})})}function ke(s){"use forget";const e=D.c(15),o=z(),{preset:n,onSelectPreset:i}=s;let d;e[0]!==i||e[1]!==n?(d=()=>i(n),e[0]=i,e[1]=n,e[2]=d):d=e[2];let r;e[3]!==n.color||e[4]!==n.emoji?(r=t.jsx(te,{color:n.color,emoji:n.emoji}),e[3]=n.color,e[4]=n.emoji,e[5]=r):r=e[5];let a;e[6]!==o||e[7]!==n.label?(a=o.formatMessage(n.label),e[6]=o,e[7]=n.label,e[8]=a):a=e[8];let u;e[9]!==r||e[10]!==a?(u=t.jsxs("div",{className:"flex gap-1.5",children:[r,a]}),e[9]=r,e[10]=a,e[11]=u):u=e[11];let l;return e[12]!==d||e[13]!==u?(l=t.jsx(U,{color:"secondary",className:"border-token-border-default flex items-center justify-center py-2 ps-2.5 pe-3 font-normal select-none",onFocus:Ee,onClick:d,type:"button",children:u}),e[12]=d,e[13]=u,e[14]=l):l=e[14],l}function Ee(s){s.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}function Te(s){"use forget";const e=D.c(50),{isNewProject:o,isPending:n,onSubmit:i,submitTitle:d}=s,r=z();let a;e[0]!==s.emoji$||e[1]!==s.theme$||e[2]!==s.title$||e[3]!==s.validationErrors$?(a=()=>({title$:s.title$??N(""),validationErrors$:s.validationErrors$??N([]),theme$:s.theme$??N(null),emoji$:s.emoji$??N(null)}),e[0]=s.emoji$,e[1]=s.theme$,e[2]=s.title$,e[3]=s.validationErrors$,e[4]=a):a=e[4];const[u]=$.useState(a),{title$:l,validationErrors$:j,theme$:c,emoji$:m}=u,f=I(l),g=I(j);let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=N(!1),e[5]=v):v=e[5];const M=v;let P;e[6]===Symbol.for("react.memo_cache_sentinel")?(P=[],e[6]=P):P=e[6],$.useEffect(Ie,P);let h;e[7]!==m||e[8]!==c||e[9]!==l?(h=G=>{const{color:K,emoji:le,title:ce}=G;c.set(K),m.set(le),l.set(ce)},e[7]=m,e[8]=c,e[9]=l,e[10]=h):h=e[10];const x=h;let y;e[11]!==r?(y=r.formatMessage({id:"A4Fd7M",defaultMessage:"Copenhagen Trip"}),e[11]=r,e[12]=y):y=e[12];let C;e[13]!==l?(C=G=>l.set(G.target.value),e[13]=l,e[14]=C):C=e[14];let w;e[15]!==y||e[16]!==C||e[17]!==f?(w=t.jsx("input",{autoFocus:!0,className:"border-token-interactive-border-tertiary-default focus:border-token-interactive-border-focus bg-token-bg-primary col-span-full row-1 w-full resize-none overflow-y-auto rounded-xl border px-2 py-3 ps-11 text-base focus:ring-0",type:"text",name:"projectName",autoComplete:"off",placeholder:y,value:f,onChange:C}),e[15]=y,e[16]=C,e[17]=f,e[18]=w):w=e[18];let k;e[19]!==m||e[20]!==c?(k=t.jsx(we,{emoji$:m,theme$:c}),e[19]=m,e[20]=c,e[21]=k):k=e[21];let T;e[22]!==m||e[23]!==k||e[24]!==c?(T=t.jsx($e,{open$:M,theme$:c,emoji$:m,children:k}),e[22]=m,e[23]=k,e[24]=c,e[25]=T):T=e[25];let p;e[26]!==w||e[27]!==T?(p=t.jsxs("div",{className:"content-sheet-root:contents mb-4 grid grid-cols-[auto_minmax(0,1fr)]",children:[w,T]}),e[26]=w,e[27]=T,e[28]=p):p=e[28];let S;e[29]!==r||e[30]!==o||e[31]!==x?(S=o&&t.jsx("ul",{className:"focus-outline-margin-default -ms-5 flex w-[calc(100%+40px)] gap-2 overflow-x-auto ps-5 pe-5 [scrollbar-width:none]","aria-label":r.formatMessage({id:"mStfWq",defaultMessage:"Project presets"}),children:fe().map(G=>t.jsx("li",{children:t.jsx(ke,{preset:G,onSelectPreset:K=>{x({...K,title:r.formatMessage(K.label)})}})},G.emoji))}),e[29]=r,e[30]=o,e[31]=x,e[32]=S):S=e[32];let B;e[33]!==o?(B=o&&t.jsxs("aside",{className:"bg-token-bg-tertiary mt-6 flex items-center rounded-xl p-3",children:[t.jsx("div",{className:"me-2 h-6 w-6",children:t.jsx("div",{className:"text-token-text-secondary relative flex h-full items-center justify-center",children:t.jsx(se,{className:"icon"})})}),t.jsx("p",{className:"text-token-text-secondary text-xs text-pretty",children:t.jsx(O,{..._.projectHelperBoxDescription})})]}),e[33]=o,e[34]=B):B=e[34];let R;e[35]!==g?(R=g.map(Oe),e[35]=g,e[36]=R):R=e[36];let A;e[37]!==p||e[38]!==S||e[39]!==B||e[40]!==R?(A=t.jsxs("div",{className:"flex-1 px-5",children:[p,S,B,R]}),e[37]=p,e[38]=S,e[39]=B,e[40]=R,e[41]=A):A=e[41];const q=!f.trim()||g.length>0;let L;e[42]!==n||e[43]!==d||e[44]!==q?(L=t.jsx("div",{className:"flex items-center justify-end px-4 pb-4 sm:px-6 sm:pb-6",children:t.jsx(H.Actions,{primaryButton:t.jsx(H.Button,{title:d,type:"submit",form:"project-modal-form",color:"primary",loading:n,disabled:q})})}),e[42]=n,e[43]=d,e[44]=q,e[45]=L):L=e[45];let W;return e[46]!==i||e[47]!==A||e[48]!==L?(W=t.jsxs("form",{id:"project-modal-form",onSubmit:i,children:[A,L]}),e[46]=i,e[47]=A,e[48]=L,e[49]=W):W=e[49],W}function Oe(s,e){return t.jsx("div",{className:"mb-4 text-sm text-red-500",children:s},e)}function Ie(){je()}function _e({children:s,onCloseAutoFocus:e,...o}){const n=$.useRef(!1),i=$.useRef(!1),d=$.useRef(!1);return t.jsx(b.Content,{...o,onCloseAutoFocus:r=>{const a=n.current,u=i.current,l=d.current;if(n.current=!1,i.current=!1,d.current=!1,l)r.preventDefault();else{if(a||u)return;e&&e(r)}},onEscapeKeyDown:()=>{n.current=!0},onPointerDownOutside:()=>{i.current=!0},onFocusOutside:()=>{d.current=!0},children:s})}const Be=({onCloseAutoFocus:s,children:e,isOpen$:o,isNewProject:n,mode:i="dropdown",displayedMemoryScope$:d=N(E.GLOBAL),memoryScope$:r=N(E.GLOBAL)})=>{const a=J(),u=I(()=>be(a)()),[l]=$.useState(()=>o??N(!1)),j=I(()=>l()),c=I(()=>d());return t.jsxs(b.Root,{mode:i==="auto"?u?"sheet":"dropdown":i,open:j,open$:o,modal:u,onOpenChange:m=>{l.set(m),m&&X.logEventWithStatsig("Project Customization: Open","chatgpt_web_project_customization_menu_open",{mode:i})},children:[e,t.jsx(b.Portal,{children:t.jsx(Re,{displayedMemoryScope:c,memoryScope$:r,isNewProject:n,onCloseAutoFocus:s})})]})},Re=({displayedMemoryScope:s=E.GLOBAL,memoryScope$:e=N(E.GLOBAL),isNewProject:o,...n})=>t.jsxs(_e,{size:"auto",align:"end",alignOffset:-7,loop:!0,...n,children:[t.jsxs(b.Group,{children:[t.jsx(b.Label,{children:t.jsx(O,{id:"w7+gZm",defaultMessage:"Memory"})}),t.jsxs(b.RadioGroup,{value:s,className:"flex flex-col",onValueChange:i=>{e.set(i)},children:[t.jsx(ee,{value:E.GLOBAL,disabled:!o,label:t.jsx(O,{id:"AA7d3d",defaultMessage:"Default"}),secondary:t.jsx(O,{id:"XHfasG",defaultMessage:"Project can access memories from outside chats, and vice versa."})}),t.jsx(ee,{value:E.PROJECT_V2,disabled:!o,label:t.jsx(O,{id:"XToOAe",defaultMessage:"Project-only"}),secondary:t.jsx(O,{id:"W99WlO",defaultMessage:"Project can only access its own memories. Its memories are hidden from outside chats."})})]})]}),t.jsx(b.Group,{children:t.jsx(b.Label,{children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("div",{className:"text-token-text-secondary flex items-center text-xs text-pretty",children:t.jsx(O,{id:"FrohSq",defaultMessage:"Note that this setting can't be changed later."})})})})})]}),Ae=s=>t.jsx(b.BasicTrigger,{className:F("dropdown-btn"),"data-testid":"composer-plus-btn",...s,children:t.jsx(pe,{className:"icon"})});function ee(s){return t.jsx(b.RadioItem,{trailing:t.jsx(b.RadioItemCheck,{}),...s})}function Le({submitButtonTitle:s,onClose:e,onSuccess:o,gizmo:n}){"use forget";const i=z(),d=re(),r=oe(),a=r.isPending,u=!n,l=xe(),[j]=$.useState(()=>N(n?.gizmo.display.emoji??null)),[c]=$.useState(()=>N(n?.gizmo.display.theme??null)),[m]=$.useState(()=>N(n?.gizmo.display.name??"")),[f]=$.useState(()=>{const x=n?.gizmo.memory_scope;let y=x;switch(x){case E.PROJECT_V2:y=E.PROJECT_V2;break;case E.GLOBAL:case E.PROJECT:y=E.GLOBAL;break;default:y=E.UNSET;break}return N(y)}),[g]=$.useState(()=>Z(()=>ge(f()))),v=J(),[M]=$.useState(()=>Z(()=>{const x=[];return m().length>V&&x.push(i.formatMessage({id:"feWA6K",defaultMessage:"Project names cannot be longer than {length} characters."},{length:V})),x})),P=async()=>{try{n&&(Q(v,n.gizmo.id,"emoji",j()),Q(v,n.gizmo.id,"theme",c()));const{id:x,resource:y}=await r.mutateAsync({update:C=>({...C,emoji:j()??void 0,theme:c()??void 0,name:m(),memoryScope:f()}),id:n?.gizmo.id??ne});o&&o(x??y?.gizmo.id),e()}catch(x){const y=ie(x);d.warning(y??i.formatMessage({id:"project-modal.error.create-or-update",defaultMessage:"Error creating or updating project"}),{duration:5,hasCloseButton:!0})}},h=u?i.formatMessage({id:"PoqmRT",defaultMessage:"Create project"}):i.formatMessage({id:"RT8KNi",defaultMessage:"Save"});return t.jsx(ae,{testId:"modal-new-project-enhanced",isOpen:!0,hideSeparator:!0,noPadding:!0,headerAccessory:l&&t.jsx(Be,{isNewProject:u,displayedMemoryScope$:g,memoryScope$:f,children:t.jsx(Ae,{})}),showCloseButton:!a,type:"success",size:"large",title:u?i.formatMessage({defaultMessage:"Project name",id:"project-modal.title.new-project"}):i.formatMessage({defaultMessage:"Edit project",id:"project-modal.title.edit-project"}),onClose:()=>{a||e()},children:t.jsx(Te,{emoji$:j,isNewProject:u,isPending:a,onClose:e,onSubmit:x=>{x.preventDefault(),X.logEventWithStatsig("Projects: Create Submit Enhanced","chatgpt_web_projects_create_submit"),P()},submitTitle:s??h,title$:m,theme$:c,validationErrors$:M})})}function ze({submitButtonTitle:s,onClose:e,onSuccess:o,gizmo:n}){const i=z(),d=re(),r=oe(),a=J(),u=!ye(),l=!n,j=ve(a,"4283270305"),[c,m]=$.useState(n?.gizmo.display.name??"");if(j)return t.jsx(Le,{submitButtonTitle:s,onClose:e,onSuccess:o,gizmo:n});const f=u&&Pe(a).getLayer("3081064739").get("project-modal",!1),g=[];c.length>V&&g.push(i.formatMessage(_.nameTooLong,{length:V}));const v=async()=>{try{const{id:h,resource:x}=await r.mutateAsync({update:{name:c},id:n?.gizmo.id??ne});o?.(h??x?.gizmo.id),e()}catch(h){const x=ie(h);d.warning(x??"Error",{duration:5,hasCloseButton:!0})}},M=t.jsx(U,{className:F(f&&"w-fit"),type:"submit",form:"project-modal-form",loading:r.isPending,disabled:!c.trim()||g.length>0,children:s??t.jsx(O,{..._.createProjectSubmit})}),P=t.jsx(U,{className:F(f&&"w-fit"),color:"secondary",onClick:e,disabled:r.isPending,children:t.jsx(O,{..._.createProjectCancel})});return t.jsx(ae,{testId:"modal-create-or-edit-project",isOpen:!0,isBottomSheet:f,hideSeparator:!0,noPadding:!0,onCloseComplete:()=>{e()},showCloseButton:!r.isPending,size:"custom",className:"max-w-lg",type:"success",primaryButton:f?M:void 0,secondaryButton:f?P:void 0,title:t.jsx("div",{className:"h-8",children:i.formatMessage(_.projectNameLabel)}),onClose:()=>{r.isPending||e()},children:t.jsxs("form",{id:"project-modal-form",onSubmit:h=>{h.preventDefault(),X.logEventWithStatsig("Projects: Create Submit","chatgpt_web_projects_create_submit"),v()},children:[t.jsxs("div",{className:F(!f&&"mt-2 px-4"),children:[t.jsx(Se.AutoFocusTarget,{timing:"present",children:t.jsx("input",{autoFocus:!f,className:"focus:ring-token-text-primary border-token-border-medium focus:border-token-border-medium bg-token-main-surface-primary h-9 w-full resize-none overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2",type:"text",name:"projectName",autoComplete:"off",placeholder:i.formatMessage(_.projectNamePlaceholder),value:c,onChange:h=>m(h.target.value)})}),g.map((h,x)=>t.jsx("div",{className:"mt-1 text-sm text-red-500",children:h},x)),l&&t.jsxs("div",{className:"dark:bg-token-main-surface-secondary mt-6 flex items-start rounded-xl bg-[#F9F9F9] p-3",children:[t.jsx("div",{className:"me-2 h-6 w-6",children:t.jsx("div",{className:"text-token-text-secondary relative flex h-full items-center justify-center",children:t.jsx(se,{className:"icon"})})}),t.jsxs("div",{children:[t.jsx("strong",{className:"text-token-text-secondary block text-xs font-medium",children:t.jsx(O,{..._.projectHelperBoxTitle})}),t.jsx("p",{className:"text-token-text-secondary text-xs",children:t.jsx(O,{..._.projectHelperBoxDescription})})]})]})]}),!f&&t.jsx("div",{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:t.jsx(H.Actions,{primaryButton:M,secondaryButton:P})})]})})}export{ze as CreateOrEditProjectModal};
//# sourceMappingURL=mtf2zftmft0tx22v.js.map
