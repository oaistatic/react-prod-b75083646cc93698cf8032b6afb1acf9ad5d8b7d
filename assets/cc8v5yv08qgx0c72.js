const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eydn60i40e5acs3v.js","assets/lu2xqwqmjc95q6j6.js"])))=>i.map(i=>d[i]);
import{ap as oe,d as re,bl as Ne,aq as le,a as ce,bg as de,q as Le,aM as Re,ga as Ie,et as h,pj as R,pk as I,C as ue,bY as me,ex as Ee,ev as ge,eG as Pe,B as U,b5 as Ae,aB as j,c4 as Ue,eT as Oe,P as D,ew as Te,bz as J,R as Be}from"./hml6mmd5fyx85si7.js";import{r as k,j as t,e as L,l as We,M as f,c as Q,u as qe,o as V}from"./lu2xqwqmjc95q6j6.js";import{gO as De,gP as N,gQ as pe,gR as ee,gS as te,gT as Ve,gU as ze,gu as $e,cf as F,gV as se,gW as Qe,cq as Fe,cr as Ke,cp as Ze,gs as Ge,gx as He,gy as ae,b7 as Xe,a5 as Ye}from"./rseqzngxzbdt1oxg.js";import{a as Je}from"./cpmsxp57eyfj7y93.js";import{c as et,E as tt}from"./cbv7m7gzxwxfl3ng.js";import{S as st,c as ne}from"./2hmyxe0qgu7tetdx.js";import"./d3y72ugnrmac5z1v.js";import"./d7o4nful0h1qw8zk.js";const at=s=>k.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...s},k.createElement("path",{d:"M8.90137 11.417C9.26455 11.3625 9.60269 11.6124 9.65723 11.9756C9.71173 12.3388 9.46183 12.6769 9.09863 12.7314C6.40834 13.1352 4.41518 15.2967 4.41504 17.833C4.41504 18.2003 4.11727 18.498 3.75 18.498C3.38273 18.498 3.08496 18.2003 3.08496 17.833C3.0851 14.5616 5.63904 11.9066 8.90137 11.417Z"}),k.createElement("path",{d:"M16.1367 12.8027C16.4296 12.5102 16.9045 12.5101 17.1973 12.8027C17.4899 13.0955 17.4898 13.5704 17.1973 13.8633L15.6436 15.416L17.1973 16.9697L17.248 17.0264C17.4884 17.3209 17.4717 17.7556 17.1973 18.0303C16.9226 18.3049 16.4879 18.3215 16.1934 18.0811L16.1367 18.0303L14.583 16.4766L13.0303 18.0303C12.7374 18.323 12.2626 18.323 11.9697 18.0303C11.6771 17.7374 11.6771 17.2626 11.9697 16.9697L13.5225 15.416L11.9697 13.8633L11.918 13.8066C11.6778 13.5121 11.6952 13.0773 11.9697 12.8027C12.2443 12.5283 12.6791 12.5109 12.9736 12.751L13.0303 12.8027L14.583 14.3555L16.1367 12.8027Z"}),k.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.75C12.2549 1.75013 14.0838 3.57808 14.084 5.83301C14.084 8.08809 12.2551 9.91686 10 9.91699C7.74499 9.91682 5.91699 8.08806 5.91699 5.83301C5.91717 3.57811 7.7451 1.75018 10 1.75ZM10 3.25C8.57352 3.25018 7.41717 4.40653 7.41699 5.83301C7.41699 7.25963 8.57341 8.41682 10 8.41699C11.4266 8.41686 12.584 7.25966 12.584 5.83301C12.5838 4.40651 11.4265 3.25013 10 3.25Z"})),nt=oe(()=>le(()=>import("./eydn60i40e5acs3v.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication));function it({value:s,onChange:e,options:n,onSearch:c,placeholder:r,trailingComponent:o,isLoading:l,classNames:a}){const g=i=>t.jsx(ne.IndicatorsContainer,{...i,children:o}),x=(i,p)=>p.context==="value"?i.label:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-semibold",children:i.label}),i.sublabel&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:i.sublabel})]}),i.kind==="group"&&i.isScimManaged&&t.jsx(nt,{})]}),u=i=>{const{isFocused:p,isSelected:v,innerProps:C,innerRef:w,data:M}=i;return t.jsx("div",{...C,ref:w,className:re("cursor-pointer rounded-xs p-2",v?"bg-token-interactive-bg-secondary-press":p?"bg-token-interactive-bg-secondary-hover":"bg-transparent"),children:x(M,{context:"menu"})})},m=i=>t.jsx(ne.MultiValue,{...i,children:t.jsx("button",{className:"text-token-text-primary bg-token-bg-secondary hover:border-token-border-medium hover:bg-token-interactive-bg-secondary-hover m-1 rounded-md border border-transparent px-1.5 py-1 text-sm",onClick:p=>{i.removeProps.onClick?.(p),p.preventDefault()},children:t.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[t.jsx("span",{className:"min-w-0",children:i.children}),t.jsx(Ne,{className:"icon-sm"})]})})});return t.jsx(st,{className:"react-select-container min-w-0",classNamePrefix:"react-select",isMulti:!0,isClearable:!1,isLoading:l,options:n,value:s,classNames:a,getOptionValue:i=>`${i.kind}:${i.id}`,getOptionLabel:i=>i.label,onChange:i=>e(i),onInputChange:(i,p)=>{p.action!=="menu-close"&&p.action!=="input-blur"&&c(i)},placeholder:r,openMenuOnFocus:!0,openMenuOnClick:!0,hideSelectedOptions:!1,closeMenuOnSelect:!1,backspaceRemovesValue:!0,controlShouldRenderValue:!0,components:{DropdownIndicator:()=>null,ClearIndicator:()=>null,IndicatorsContainer:g,MultiValue:m,Option:u,MultiValueRemove:()=>null},formatOptionLabel:x,filterOption:(i,p)=>i.data.label.toLowerCase().includes(p.toLowerCase())||(i.data.sublabel??"").toLowerCase().includes(p.toLowerCase())})}const ot=oe(()=>le(()=>import("./eydn60i40e5acs3v.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication));function xe(s,e){return s===void 0||e===void 0?!1:s.split("__")[0]===e.split("__")[0]}function ie(s){return s.toLowerCase().trim()}function rt(s,e){return s===void 0||e===void 0?!1:ie(s)===ie(e)}function z(s,e){return xe(s?.user_id,e?.id)||rt(s?.user_email,e?.email)}function lt(s,e){const n=new Set,c=new Set,r=new Set,o=new Set,l=[...s];for(const a of s)a.type===h.USER?n.add(a.user_id):a.type===h.EMAIL?r.add(a.user_email):a.type===h.GROUP?c.add(a.group_id):o.add(a.type);for(const a of e)if(a.type===h.EMAIL){if(r.has(a.user_email))continue;r.add(a.user_email),l.push(a)}else if(a.type===h.USER){if(n.has(a.user_id))continue;n.add(a.user_id),l.push(a)}else if(a.type===h.GROUP){if(c.has(a.group_id))continue;c.add(a.group_id),l.push(a)}else{if(o.has(a.type))continue;o.add(a.type),l.push(a)}return l}function ct(s,e){const n=s.filter(c=>[h.ALL].indexOf(c.type)===-1);return e!=null&&n.push(e),n}function dt(s){return s.find(e=>e.type===h.ALL)?se.Link:se.Private}function fe(s){return s.can_write?"edit":"view"}function ut(s){switch(s){case h.ALL:return"all";default:return"invite"}}const mt=s=>e=>e.kind==="user"?{type:h.USER,user_id:e.id,user_name:e.label,user_email:e.sublabel??"",capabilities:s}:{type:h.GROUP,group_id:e.id,group_name:e.label,is_scim_managed:!!e.isScimManaged,capabilities:s},gt=s=>e=>({type:h.EMAIL,user_email:e,capabilities:s}),pt=({label:s,projectName:e,onConfirm:n,onClose:c})=>{const r=L(),o=r.formatMessage({id:"tnQ4zL",defaultMessage:"{label, select, undefined {Remove from {projectName}?} other {Remove {label} from {projectName}}}?"},{label:s??"undefined",projectName:e}),[l,a]=k.useState(!1);return t.jsx(ue,{testId:"modal-snorlax-remove-user-confirmation-modal",isOpen:!0,onClose:()=>c(),type:"success",title:o,primaryButton:t.jsx(J.Button,{title:r.formatMessage({id:"qvV5dW",defaultMessage:"Remove"}),color:"danger",onClick:async()=>{a(!0);try{await n(),c()}finally{a(!1)}},loading:l,disabled:l,"data-testid":"button-confirm-remove-user"}),secondaryButton:t.jsx(J.Button,{title:r.formatMessage({id:"8Z8QAH",defaultMessage:"Cancel"}),disabled:l,color:"secondary",onClick:()=>c()}),children:t.jsx("div",{className:"text-token-text-secondary",children:t.jsx(f,{id:"2ffvgi",defaultMessage:"{label, select, undefined {They} other {<b>{label}</b>}} will lose access to all contents in this project, but will retain a copy of their own chats.",values:{label:s??"undefined",b:g=>t.jsx("span",{className:"text-token-text-primary font-medium",children:g})}})})})};function Ut({gizmo:s,publishedGizmo:e,onClose:n}){"use forget";const c=ce(),r=L(),o=de(),l=Le(c),a=l?.isWorkspaceAccount()??!1,g=Re(),x=De(),[u,m]=k.useState(s.sharing?.subjects??[]),[i,p]=k.useState(!1),v=We(),{canEdit:C}=Ie(e);function w(d,b,S){return d.type===h.USER&&d.user_id.indexOf("__")===-1?{...d,user_id:d.user_id+"__"+l?.getWorkspaceId()}:d}async function M(d,b,S){if(i)return;p(!0);const _=b?S.map(w):S,Y=dt(_);try{const A=await x.mutateAsync({id:d,update:{sharing:{recipient:Y,subjects:_},sharingRecipient:Y}});A?.resource&&m(ze(A.resource).sharing.subjects)}catch(A){const _e=Pe(A);o.warning(_e??"Error",{duration:2}),m(s.sharing?.subjects??[])}p(!1),v.invalidateQueries({queryKey:["gizmos"]}),v.refetchQueries({queryKey:["gizmos","discovery"]}),v.refetchQueries({queryKey:["gizmo",{gizmoId:d}]}),v.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:d}]}),v.invalidateQueries({queryKey:["workspace"]})}const E=xe(e.gizmo.author.user_id.split("__")[0],g?.id),y=N(u),Z=a||y?.type!==h.ALL,ye=Z?me:pe,je=N(u)?.type!==h.ALL?t.jsx(f,{id:"fAE/rP",defaultMessage:"Only those invited"}):t.jsx(f,{id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),ve=t.jsx(K,{capabilities:y?.capabilities??R,onChange:d=>{const b=u.map(S=>S===y?{...S,capabilities:d}:S);m(b),M(e.gizmo.id,a,b)},triggerClassNames:"text-token-text-primary"}),Ce=d=>t.jsx("span",{className:"text-token-text-primary pe-4 text-sm",children:t.jsx(f,{...O(d.capabilities)})}),be=d=>t.jsxs(j.Root,{children:[t.jsxs(j.Trigger,{color:"secondary",className:"text-token-text-primary text-normal hover:bg-token-interactive-bg-secondary-hover radix-state-open:bg-token-interactive-bg-secondary-press whitespace-nowrap",disabled:i,children:[t.jsx(f,{...O(d.capabilities)}),t.jsx(F,{className:"icon-sm"})]}),t.jsx(j.Portal,{children:t.jsxs(j.Content,{className:"max-w-[320px]",children:[t.jsx(j.RadioGroup,{value:fe(d.capabilities),onValueChange:b=>{const S=u.map(_=>_===d?{..._,capabilities:b==="edit"?I:R}:_);m(S),M(e.gizmo.id,a,S)},children:[R,I].map((b,S)=>t.jsx(he,{capabilities:b,selected:ge(b,d.capabilities)},S))}),t.jsx(j.Item,{onClick:()=>{const b=te(d);Ue(c,pt,{label:b?.value,projectName:e.gizmo.display.name,onConfirm:async()=>{const S=u.filter(_=>_!==d);await M(e.gizmo.id,a,S),m(S)}})},color:"danger",icon:at,children:t.jsx(f,{id:"HEaMqG",defaultMessage:"Remove from project"})})]})})]}),[P,G]=k.useState(I),[T,B]=k.useState([]),[W,q]=k.useState([]),Se=T.length>0||W.length>0,H=async()=>{const d=a?T.map(mt(P)):W.map(gt(P)),b=lt(u,d);await M(e.gizmo.id,a,b),m(b),q([]),B([])},ke=()=>{B([]),q([])},X=t.jsx(U,{color:"secondary",disabled:i,onClick:ke,children:t.jsx(f,{id:"Pxo4Mv",defaultMessage:"Cancel"})}),Me=a?t.jsx("div",{className:"text-token-text-secondary flex text-sm",children:t.jsx(f,{id:"uAsZIj",defaultMessage:"Project files, chats and instructions are shared."})}):null,we=Se&&C?a?t.jsxs("div",{className:"flex items-center gap-2",children:[X,t.jsx(U,{color:"blue",disabled:i,loading:i,onClick:H,children:t.jsx(f,{id:"IzWABi",defaultMessage:"Invite"})})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[X,t.jsx(U,{color:"blue",disabled:i,loading:i,onClick:H,children:t.jsx(f,{id:"eC8UhE",defaultMessage:"Add"})})]}):t.jsx(ft,{gizmo:e,isBusinessWorkspace:a});return t.jsx(ue,{testId:"modal-share-project",type:"success",className:"max-w-[600px]",size:"custom",isOpen:!0,onClose:n,footerContent:Me,footerClassName:"mt-5 sm:mt-4",modalActionsClassName:"mt-0!",footerIsSpacedBetween:!0,primaryButton:we,title:r.formatMessage(Ve.projectShareTitle),showCloseButton:!0,children:t.jsxs("div",{className:"flex flex-col space-y-4",children:[C&&(a?t.jsx(jt,{publishedGizmo:e,capabilities:P,setCapabilities:G,subjects:T,setSubjects:B}):t.jsx(vt,{capabilities:P,setCapabilities:G,emails:W,setEmails:q})),t.jsx("div",{className:"text-token-text-secondary text-sm font-normal",children:t.jsx(f,{id:"eMoeS0",defaultMessage:"Who has access"})}),t.jsxs("div",{className:"max-h-[200px] space-y-2 overflow-y-auto",children:[t.jsx($,{icon:t.jsx(ye,{className:"h-6 w-6"}),trailing:!Z&&y?.type!==h.ALL?ve:null,children:C?t.jsx(Mt,{newSharingSubjects:u,setNewSharingSubjects:m,saveGizmo:M,publishedGizmo:e,isBusinessWorkspace:a,isSaving:i}):je}),t.jsx($,{icon:t.jsx(ee,{monogram:{id:e.gizmo.author.user_id??"Owner",value:e.gizmo.author.display_name??"User"}}),trailing:t.jsx("span",{className:"text-token-text-primary pe-4 text-sm",children:t.jsx(f,{id:"qb439J",defaultMessage:"Owner"})}),children:E?t.jsx(f,{id:"I6hNog",defaultMessage:"{userName} {you}",values:{userName:g?.name??g?.email,you:t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(f,{id:"VZNoWp",defaultMessage:"(you)"})})}}):e.gizmo.author.display_name??e.gizmo.author.user_email}),u.map((d,b)=>Ee(d)&&t.jsx($,{icon:t.jsx(ee,{monogram:te(d)}),trailing:E?be(d):Ce(d),children:t.jsxs("div",{className:"flex flex-col justify-center",children:[a&&t.jsxs("span",{className:"flex flex-row items-center",children:[t.jsx("span",{className:"text-token-text-primary truncate text-sm leading-tight",children:d.type===h.GROUP?d.group_name:t.jsx(f,{id:"B3bf3E",defaultMessage:"{userName} {you}",values:{userName:d.user_name,you:z(d,g)?t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(f,{id:"VZNoWp",defaultMessage:"(you)"})}):null}})}),d.type===h.GROUP&&d.is_scim_managed&&t.jsx(ot,{})]}),!a&&(d.type===h.USER||d.type===h.EMAIL)&&t.jsx("span",{className:"text-token-text-primary truncate text-sm leading-tight",children:t.jsx(f,{id:"oj/38v",defaultMessage:"{email} {you}",values:{email:z(d,g)?g?.name:d.user_email??"",you:z(d,g)?t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(f,{id:"VZNoWp",defaultMessage:"(you)"})}):null}})})]})},b))]}),t.jsx(xt,{}),t.jsx("hr",{className:"border-token-border-light"})]})})}function xt(){return t.jsxs("div",{className:"bg-token-bg-elevated-secondary flex flex-row items-center gap-2 rounded-xl p-3",children:[t.jsx(Oe,{className:"icon"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-token-text-primary text-xs font-medium",children:t.jsx(f,{id:"pD1bmW",defaultMessage:"This project may include personal information"})}),t.jsx("span",{className:"text-token-text-secondary text-xs",children:t.jsx(f,{id:"EonGo6",defaultMessage:"All project contents are visible to collaborators. Personal memories are disabled for shared projects."})})]})]})}function ft({gizmo:s,isBusinessWorkspace:e}){const n=ce(),c=de(),r=Qe(n,s),o=s.gizmo.display.name;return t.jsxs("div",{className:"flex flex-row items-center gap-2",children:[!e&&t.jsxs(t.Fragment,{children:[t.jsx("a",{href:`https://www.linkedin.com/shareArticle?url=${encodeURIComponent(r)}&text=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{D.logEventWithStatsig("Share Project: LinkedIn Social Clicked","chatgpt_share_project_linkedin_social_clicked",{projectTitle:o})},children:t.jsx(Fe,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})}),t.jsx("a",{href:`https://www.reddit.com/submit?url=${encodeURIComponent(r)}&title=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{D.logEventWithStatsig("Share Project: Reddit Social Clicked","chatgpt_share_project_reddit_social_clicked",{projectTitle:o})},children:t.jsx(Ke,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})}),t.jsx("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(r)}&text=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{D.logEventWithStatsig("Share Project: X Social Clicked","chatgpt_share_project_x_social_clicked",{projectTitle:o})},children:t.jsx(Ze,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})})]}),t.jsx(ht,{onClickCopy:l=>Ge(n,s,c,l)})]})}const ht=({onClickCopy:s,timeout:e=2e3})=>{const[n,c]=k.useState("idle"),r=async o=>{c("copying"),await s(o),c("copied"),setTimeout(()=>c("idle"),e)};return t.jsx(U,{color:"primary",disabled:n!=="idle",icon:n==="copied"?Xe:Ye,onClick:o=>{r(o)},children:n==="copied"?t.jsx(f,{id:"qtqW3t",defaultMessage:"Copied"}):t.jsx(f,{id:"Pg3WAh",defaultMessage:"Copy link"})})};function K(s){"use forget";const e=Q.c(23),{capabilities:n,onChange:c,triggerClassNames:r}=s;let o;e[0]!==r?(o=re("text-token-text-secondary hover:bg-token-interactive-bg-secondary-hover radix-state-open:bg-token-interactive-bg-secondary-press whitespace-nowrap",r),e[0]=r,e[1]=o):o=e[1];let l;e[2]!==n?(l=O(n),e[2]=n,e[3]=l):l=e[3];let a;e[4]!==l?(a=t.jsx(f,{...l}),e[4]=l,e[5]=a):a=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx(F,{className:"icon-sm"}),e[6]=g):g=e[6];let x;e[7]!==o||e[8]!==a?(x=t.jsxs(j.Trigger,{color:"secondary",className:o,children:[a,g]}),e[7]=o,e[8]=a,e[9]=x):x=e[9];let u;e[10]!==n?(u=fe(n),e[10]=n,e[11]=u):u=e[11];let m;e[12]!==c?(m=C=>{c(C==="edit"?I:R)},e[12]=c,e[13]=m):m=e[13];let i;e[14]!==n?(i=[R,I].map((C,w)=>t.jsx(he,{capabilities:C,selected:ge(C,n)},w)),e[14]=n,e[15]=i):i=e[15];let p;e[16]!==u||e[17]!==m||e[18]!==i?(p=t.jsx(j.Portal,{children:t.jsx(j.Content,{className:"max-w-[320px]",children:t.jsx(j.RadioGroup,{value:u,onValueChange:m,children:i})})}),e[16]=u,e[17]=m,e[18]=i,e[19]=p):p=e[19];let v;return e[20]!==x||e[21]!==p?(v=t.jsxs(j.Root,{children:[x,p]}),e[20]=x,e[21]=p,e[22]=v):v=e[22],v}function O(s){return s.can_write?V({id:"vsUknl",defaultMessage:"Can edit"}):s.can_view_config?V({id:"4ceJzB",defaultMessage:"Can chat"}):V({id:"x2E8ET",defaultMessage:"Unknown"})}function yt(s){return s.can_write?He:s.can_view_config?ae:ae}function he(s){"use forget";const e=Q.c(14),{capabilities:n,selected:c}=s,r=L();let o;e[0]!==n.can_write?(o=n.can_write?t.jsx(f,{id:"IShl7Y",defaultMessage:"Chat and edit project content"}):t.jsx(f,{id:"Ux4GYU",defaultMessage:"Chat and view project content"}),e[0]=n.can_write,e[1]=o):o=e[1];const l=o,a=n.can_write?"edit":"view",g=c?"selected":"default";let x;e[2]!==n?(x=yt(n),e[2]=n,e[3]=x):x=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(j.RadioItemCheck,{}),e[4]=u):u=e[4];let m;e[5]!==n||e[6]!==r?(m=r.formatMessage(O(n)),e[5]=n,e[6]=r,e[7]=m):m=e[7];let i;return e[8]!==l||e[9]!==a||e[10]!==g||e[11]!==x||e[12]!==m?(i=t.jsx(j.RadioItem,{value:a,color:g,icon:x,trailing:u,label:m,secondary:l}),e[8]=l,e[9]=a,e[10]=g,e[11]=x,e[12]=m,e[13]=i):i=e[13],i}function jt({publishedGizmo:s,capabilities:e,setCapabilities:n,subjects:c,setSubjects:r}){"use forget";const o=L(),l=Ae(),[a,g]=k.useState(""),[x]=Je(a,100),u=$e(l?.id,0,x,10),m=k.useMemo(()=>u.data?.items?.filter(y=>y.account_user_id!==s?.gizmo.author.user_id).map(y=>({kind:"user",id:y.account_user_id,label:y.name??"Unknown User",sublabel:y.email??""}))??[],[u.data?.items,s]),{data:i,isLoading:p}=qe({queryKey:[l?.id,"groups","filtered",x],queryFn:l?()=>Be.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:l.id},query:{query:x,offset:0,orderby:"@score",limit:20}}}):void 0,enabled:x.trim()!==""&&l!=null&&!!l.getWorkspaceId()}),v=k.useMemo(()=>i?.items.slice(0,10).map(y=>({kind:"group",id:y.id,label:y.name,sublabel:o.formatMessage({id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}"},{numMembers:y.num_members??0}),isScimManaged:!!y.is_scim_managed}))??[],[i,o]),C=y=>`${y.kind}:${y.id}`,w=new Set(c.map(C)),M=[...m,...v].filter(y=>!w.has(C(y))),E=o.formatMessage({id:"hbjC0K",defaultMessage:"Search people or groups"});return t.jsx("div",{className:"w-full min-w-0",children:t.jsx(it,{value:c,classNames:{menuList:()=>"bg-token-bg-primary",control:()=>"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto"},onChange:y=>r([...y]),onSearch:g,options:M,placeholder:E,trailingComponent:c.length>0&&t.jsx(K,{capabilities:e,onChange:n,triggerClassNames:"text-token-text-secondary"}),isLoading:u.isLoading||p})})}function vt(s){"use forget";const e=Q.c(16),{capabilities:n,setCapabilities:c,emails:r,setEmails:o}=s,l=L();let a;e[0]!==r?(a=r.map(kt),e[0]=r,e[1]=a):a=e[1];const g=a;let x;e[2]!==o?(x=w=>{const M=w.map(St);o(wt(M))},e[2]=o,e[3]=x):x=e[3];const u=x;let m;e[4]!==l?(m=l.formatMessage({id:"Mabh3o",defaultMessage:"Email, separated by commas"}),e[4]=l,e[5]=m):m=e[5];const i=m;let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p={menuList:bt,control:Ct},e[6]=p):p=e[6];let v;e[7]!==n||e[8]!==r.length||e[9]!==c?(v=r.length>0&&t.jsx(K,{capabilities:n,onChange:c,triggerClassNames:"text-token-text-secondary"}),e[7]=n,e[8]=r.length,e[9]=c,e[10]=v):v=e[10];let C;return e[11]!==g||e[12]!==u||e[13]!==i||e[14]!==v?(C=t.jsx("div",{className:"w-full min-w-0",children:t.jsx(tt,{value:g,onChange:u,placeholder:i,classNames:p,trailingComponent:v})}),e[11]=g,e[12]=u,e[13]=i,e[14]=v,e[15]=C):C=e[15],C}function Ct(){return"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto"}function bt(){return"bg-token-bg-primary"}function St(s){return s.value}function kt(s){return et(s??"")}function Mt({newSharingSubjects:s,setNewSharingSubjects:e,saveGizmo:n,publishedGizmo:c,isBusinessWorkspace:r,isSaving:o}){const l=L();return r?t.jsx("div",{className:"flex min-h-9 items-center",children:t.jsx(f,{id:"fAE/rP",defaultMessage:"Only those invited"})}):t.jsxs(j.Root,{children:[t.jsxs(j.Trigger,{className:"px-0","data-no-hover-bg":!0,disabled:o,children:[N(s)?.type!==h.ALL?t.jsx(f,{id:"fAE/rP",defaultMessage:"Only those invited"}):t.jsx(f,{id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),t.jsx(F,{className:"icon-sm"})]}),t.jsx(j.Portal,{children:t.jsx(j.Content,{children:t.jsxs(j.RadioGroup,{value:ut(N(s)?.type??h.USER),onValueChange:a=>{const g=ct(s,a==="all"?{type:h.ALL,capabilities:Te}:null);e(g),n(c.gizmo.id,r,g)},children:[t.jsx(j.RadioItem,{icon:me,value:"invite",label:l.formatMessage({id:"fAE/rP",defaultMessage:"Only those invited"}),trailing:t.jsx(j.RadioItemCheck,{}),color:N(s)?.type===h.USER?"selected":"default"}),t.jsx(j.RadioItem,{icon:pe,value:"all",label:l.formatMessage({id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),trailing:t.jsx(j.RadioItemCheck,{}),color:N(s)?.type===h.ALL?"selected":"default"})]})})})]})}function $({icon:s,children:e,trailing:n,className:c=""}){return t.jsxs("div",{className:`mb-4 flex flex-row items-center justify-between space-x-3 ${c}`,children:[t.jsx("div",{className:"shrink-0 grow-0",children:s}),t.jsx("div",{className:"text-token-text-primary grow truncate text-sm",children:e}),n&&t.jsx("div",{children:n})]})}function wt(s){const e=new Set,n=[];for(const c of s){const r=c.toLowerCase();e.has(r)||(e.add(r),n.push(r))}return n}export{Ut as ShareProjectModal};
//# sourceMappingURL=cc8v5yv08qgx0c72.js.map
