import{j as e,r as c,e as K,d as re,A as Q,m as W,M as te}from"./lu2xqwqmjc95q6j6.js";import{P as z,d as Z,B as I,mv as de,bl as ue,u as me,A as fe,h1 as xe,c$ as pe}from"./hml6mmd5fyx85si7.js";import{s as U,R as ge}from"./lk6f2fcw58i5vhbp.js";import{cP as he,ei as ae,bR as we,iN as be,dV as ye}from"./rseqzngxzbdt1oxg.js";import{u as ve}from"./h6ixtb8gt8p0e0n1.js";import{S as je}from"./b4dvi1xom4p5x1vj.js";import"./l2l4d2d2bzani7km.js";function Se({item:t,onClick:s}){return e.jsx("li",{className:"first:border-t-0",children:e.jsxs("button",{className:"hover:bg-token-interactive-bg-secondary-hover flex w-full cursor-pointer items-start gap-3 rounded-2xl px-4 py-4 text-start sm:px-6",onClick:m=>s(m,t),children:[e.jsx("div",{className:"mt-0.5 text-xl",children:t.iconImageUrl?e.jsx("img",{src:t.iconImageUrl,alt:t.title,className:"h-6 w-6 rounded-full"}):t.icon?e.jsx("span",{"aria-hidden":!0,children:t.icon}):e.jsx(he,{category:t.category??"onboarding",useV2Colors:!0})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-token-text-primary text-base font-medium",children:t.title}),e.jsx("div",{className:"text-token-text-secondary mt-1 text-sm leading-5",children:t.body})]}),e.jsx(ae,{className:"icon mt-0.5 shrink-0 opacity-60"})]})})}function ie({onAutoAdvance:t,enabled:s,delayMs:m=5e3,idleRestartMs:b=400,elementRef:i,dependencies:n=[]}){const o=c.useRef(null),d=c.useRef(null),l=()=>{o.current!=null&&(window.clearTimeout(o.current),o.current=null),d.current!=null&&(window.clearTimeout(d.current),d.current=null)};c.useEffect(()=>{if(l(),!!s)return o.current=window.setTimeout(()=>{t()},m),l},[s,m,t,...n]),c.useEffect(()=>{if(!s)return;const u=i?.current??window,k=()=>{o.current!=null&&(window.clearTimeout(o.current),o.current=null),d.current!=null&&window.clearTimeout(d.current),d.current=window.setTimeout(()=>{s&&(o.current!=null&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{t()},m))},b)};return u.addEventListener("scroll",k,{passive:!0}),u.addEventListener("wheel",k,{passive:!0}),()=>{u.removeEventListener("scroll",k),u.removeEventListener("wheel",k),l()}},[s,m,b,t,i?.current,...n])}const X=re({cardsAriaLabel:{id:"prompt-new-user-onboarding.cards-aria-label",defaultMessage:"Starter examples"},dotsAriaLabel:{id:"prompt-new-user-onboarding.dots-aria-label",defaultMessage:"Card {current} of {total}"},prevCardAriaLabel:{id:"prompt-new-user-onboarding.prev-card-aria-label",defaultMessage:"Previous idea"},nextCardAriaLabel:{id:"prompt-new-user-onboarding.next-card-aria-label",defaultMessage:"Next idea"}}),Ne=60,oe=5e3,le=400;function Ce({items:t,onSelect:s,onSubmit:m,className:b}){const i=K(),n=c.useRef(null),o=c.useRef(null),d=c.useRef(null),[l,g]=c.useState(0),[u,k]=c.useState(0),_=c.useRef({vw:0,paddingLeft:0,gapPx:0,cardWidth:0,slotWidth:1,centerTarget:0,s:0}),A=t[l];c.useEffect(()=>{s(A,l)},[s,A,l]),c.useEffect(()=>{const r=t[l];r&&z.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:l,prompt_id:r.id??String(l)})},[t,l]),c.useEffect(()=>{const r=n.current;if(!r)return;let f=null,y=r.scrollLeft,x=performance.now();const R=160,C=v=>{const S=d.current;S&&(S.style.transform=`translate3d(${v}px, 0, 0)`)},E=()=>{const{vw:v,paddingLeft:S,slotWidth:L,centerTarget:D,s:V,cardWidth:F}=_.current,a=(r.scrollLeft+v/2-S-F/2)/(L||1),h=Math.max(0,Math.min(t.length-1,a)),N=Math.round(h);g(T=>T!==N?N:T);const P=h*(p+V)+p/2;C(D-P)},M=()=>{f=null,E();const v=performance.now(),S=r.scrollLeft;Math.abs(S-y)>.1&&(x=v,y=S),v-x<R&&(f=window.requestAnimationFrame(M))},j=()=>{f==null&&(y=r.scrollLeft,x=performance.now(),f=window.requestAnimationFrame(M))};return E(),r.addEventListener("scroll",j,{passive:!0}),r.addEventListener("wheel",j,{passive:!0}),()=>{r.removeEventListener("scroll",j),r.removeEventListener("wheel",j),f!=null&&window.cancelAnimationFrame(f)}},[t.length]),c.useEffect(()=>{const r=n.current,f=o.current;if(!r||!f)return;const y=()=>{const x=r.getBoundingClientRect(),R=f.getBoundingClientRect(),C=x.width,E=window.getComputedStyle(r),M=parseFloat(E.paddingLeft||"0"),j=parseFloat((E.columnGap||E.gap||"0").toString())||0,v=Math.max(0,C-2*M),S=v+j,L=Math.max(0,C/2-p/2-Ne),D=x.left-R.left+C/2;_.current={vw:C,paddingLeft:M,gapPx:j,cardWidth:v,slotWidth:S,centerTarget:D,s:L},k(L);const V=(r.scrollLeft+C/2-M-v/2)/(S||1),F=Math.max(0,Math.min(t.length-1,V)),a=Math.round(F);g(P=>P!==a?a:P);const h=F*(p+L)+p/2,N=d.current;N&&(N.style.transform=`translate3d(${D-h}px, 0, 0)`)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[t.length]);const w=r=>{const f=n.current;if(!f)return;const x=f.querySelectorAll('li[data-card="true"]')[r];x&&x.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})};ie({onAutoAdvance:()=>{const r=(l+1)%t.length;w(r)},enabled:t.length>1,delayMs:oe,idleRestartMs:le,elementRef:n,dependencies:[l,t.length,w]});const p=180,O=c.useMemo(()=>{const r=Math.max(0,l-1),f=Math.min(t.length-1,l+1);return t.map((y,x)=>{if(x<r||x>f)return null;const R=y.id??x,C=x===l,E=C?1:.9,M=C?1:.5;return e.jsx("div",{className:"pointer-events-none flex items-center justify-center",style:{position:"absolute",top:0,left:x*(p+u),height:p,width:p,transform:`scale(${E})`,opacity:M,transition:"transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 300ms cubic-bezier(0.2, 0.8, 0.2, 1)",willChange:"transform, opacity"},children:y.iconImageUrl?e.jsx("img",{src:y.iconImageUrl,alt:"",style:{height:p,width:p}}):e.jsx("div",{className:"flex items-center justify-center text-3xl",style:{height:p,width:p},children:y.icon})},R)})},[t,l,u]);return e.jsx("div",{ref:o,className:Z(b,"relative"),children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 overflow-hidden",style:{height:p},"aria-hidden":!0,children:e.jsx("div",{ref:d,className:"pointer-events-none absolute start-0 top-0",style:{height:p,willChange:"transform"},"aria-hidden":!0,children:O})}),e.jsx("ul",{ref:n,className:"no-scrollbar flex max-h-full snap-x snap-mandatory scroll-ps-5 scroll-pe-5 gap-4 overflow-x-auto scroll-smooth px-5 pb-10","aria-label":i.formatMessage(X.cardsAriaLabel),children:t.map((r,f)=>e.jsx("li",{"data-card":"true",className:"max-h-full shrink-0 snap-center [scroll-snap-stop:always]",children:e.jsx("div",{className:Z("relative h-full w-[calc(100vw-2.5rem)] rounded-3xl text-start sm:w-[260px]","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"),style:{"--accent":r.accentColor},children:e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"relative",style:{height:p,width:p},"aria-hidden":!0}),e.jsx("div",{className:"text-token-text-primary text-center text-2xl leading-tight font-medium sm:text-xl",children:r.title}),e.jsx(ce,{prompt:r.body,onSubmit:y=>m(y,r,f)})]})})},r.id??f))}),e.jsx("div",{className:"mt-2 flex items-center justify-center gap-2 pb-4 sm:hidden",children:t.map((r,f)=>e.jsx("button",{"aria-label":i.formatMessage(X.dotsAriaLabel,{current:f+1,total:t.length}),"aria-current":l===f,className:Z("h-2 w-2 rounded-full bg-current transition-colors",l===f?"text-token-text-primary":"bg-token-bg-secondary"),onClick:()=>w(f)},f))})]})})}function ke({items:t,onSelect:s,onSubmit:m,className:b}){const[i,n]=c.useState(0),[o,d]=c.useState(0),l=t[i],g=t[o];return c.useEffect(()=>{s(l,i)},[s,l,i]),c.useEffect(()=>{const u=t[i];u&&z.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:i,prompt_id:u.id??String(i)})},[t,i]),e.jsx("div",{className:b,children:e.jsxs("div",{className:"tall:gap-8 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Q,{mode:"sync",children:g&&e.jsx(W.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 start-1/2 top-1/2 -z-10 h-[160%] w-[100%] -translate-x-1/2 -translate-y-1/2",initial:{opacity:0},animate:{opacity:.2},exit:{opacity:0},transition:{duration:.6,ease:[.2,.8,.2,1]},style:{backgroundImage:`radial-gradient(closest-side, ${g.accentColor} 0%, transparent 80%)`}},g.id??o)}),e.jsx(Ee,{items:t,activeIndex:i,onWillChange:u=>{d(u)},onChange:u=>{n(u)}})]}),g&&e.jsx(Q,{mode:"wait",children:e.jsxs(W.div,{className:"flex max-w-[320px] flex-col items-center gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.3,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:8,transition:{duration:.3,ease:[.2,.8,.2,1]}},children:[e.jsx("div",{className:"text-token-text-primary text-2xl leading-tight font-medium sm:text-xl",children:g.title}),e.jsx("div",{className:"sm:min-h-24",children:e.jsx(ce,{prompt:g.body,onSubmit:u=>m(u,g,o)})})]},o)})]})})}const J=228,se=190,_e=160,ne=180,ee=350;function Ee({items:t,activeIndex:s,onChange:m,onWillChange:b}){const i=K(),n=t.length,[o,d]=c.useState(null),[l,g]=c.useState("idle"),[u,k]=c.useState(!1),_=c.useRef(null),A=c.useRef(null);c.useEffect(()=>()=>{_.current!=null&&window.clearTimeout(_.current),A.current!=null&&window.cancelAnimationFrame(A.current)},[]);const[w,p]=c.useState(J);c.useEffect(()=>{const a=()=>{const h=window.innerHeight||800,P=(Math.max(600,Math.min(800,h))-600)/200,T=Math.round(se+(J-se)*P);p(T)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const O=w/J,r=Math.round(_e*O),f=w/r,y=(w+r)/2+ne,x=(a,h)=>(a%h+h)%h,R=x(s-1,n),C=x(s+1,n),E=x(s-2,n),M=x(s+2,n),j=c.useCallback(a=>{if(u||n<=1)return;k(!0),d(a),g("prepare");const h=x(a==="right"?s+1:s-1,n);b?.(h),A.current=window.requestAnimationFrame(()=>{A.current=window.requestAnimationFrame(()=>{g("slide"),_.current=window.setTimeout(()=>{d(null),g("idle"),k(!1),m(x(a==="right"?s+1:s-1,n))},ee)})})},[u,n,s,b,m]);if(ie({onAutoAdvance:()=>j("right"),enabled:n>1&&!u,delayMs:oe,idleRestartMs:le,dependencies:[s,j,u]}),n===0)return null;const v=[-2,-1,0,1,2].map(a=>a*y),S=[{key:`left-${R}`,index:R,slot:1},{key:`center-${s}`,index:s,slot:2},{key:`right-${C}`,index:C,slot:3}];let L=S;if(o==="right"){const a=[{key:`farRight-${M}`,index:M,slot:4,fadeIn:!0}];L=[...S,...a]}else o==="left"&&(L=[...[{key:`farLeft-${E}`,index:E,slot:0,fadeIn:!0}],...S]);const D=a=>{if(o==null||l==="idle"||l==="prepare")return v[a];if(o==="right"){const h=Math.max(a-1,0);return v[h]}else{const h=Math.min(a+1,4);return v[h]}},V=(a,h)=>{const N=D(a),P=a===2?30:a===1||a===3?20:10,T=!u&&n>1&&(a===1||a===3),B=N===v[2],G=N===v[1]||N===v[3],H=r,Y=B?f:1,q=B?1:G?.5:0;return{x:N,z:P,cardSize:H,scale:Y,opacity:h&&l==="prepare"?0:q,isDisabled:!T}},F=a=>{a.key==="ArrowLeft"?(a.preventDefault(),j("left")):a.key==="ArrowRight"&&(a.preventDefault(),j("right"))};return e.jsxs("div",{className:"relative flex w-full items-center justify-center py-2 outline-none",tabIndex:0,"aria-label":i.formatMessage(X.cardsAriaLabel),onKeyDown:F,children:[e.jsx("div",{className:"relative overflow-hidden",style:{height:w,width:3*w+2*ne},children:L.map(({key:a,index:h,slot:N,fadeIn:P})=>{const{x:T,z:B,cardSize:G,scale:H,opacity:Y,isDisabled:q}=V(N,P);return e.jsx(Me,{item:t[h],translateX:T,zIndex:B,onClick:()=>j(N===1?"left":"right"),cardSize:G,scale:H,opacity:Y,isDisabled:q},a)})}),e.jsx(I,{color:"ghost","aria-label":i.formatMessage(X.prevCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:`calc(50% - ${w/2+20+36}px)`},onClick:()=>j("left"),disabled:u||n<=1,icon:we}),e.jsx(I,{color:"ghost","aria-label":i.formatMessage(X.nextCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:`calc(50% + ${w/2+20}px)`},onClick:()=>j("right"),disabled:u||n<=1,icon:ae})]})}function Me({item:t,translateX:s,zIndex:m,onClick:b,cardSize:i,scale:n,opacity:o,isDisabled:d}){return e.jsx("button",{className:"absolute start-1/2 top-1/2 flex items-center justify-center rounded-3xl",style:{transform:`translate3d(-50%, -50%, 0) translate3d(${s}px, 0, 0) scale(${n})`,height:`${i}px`,width:`${i}px`,transition:`transform ${ee}ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity ${ee}ms cubic-bezier(0.2, 0.8, 0.2, 1)`,willChange:"transform, opacity",opacity:o,zIndex:m},onClick:b,disabled:d,children:t.iconImageUrl?e.jsx("img",{src:t.iconImageUrl,alt:"",style:{maxHeight:`${i}px`,maxWidth:`${i}px`}}):e.jsx("div",{className:"text-6xl","aria-hidden":!0,children:t.icon})})}function ce({prompt:t,onSubmit:s}){const m=K();return e.jsxs("div",{className:"group bg-token-bg-elevated-primary border-token-border-light inline-flex items-end justify-center gap-3 self-stretch rounded-3xl border p-3 ps-4 shadow-xl backdrop-blur-[20px]",children:[e.jsx("div",{className:"text-token-text-primary flex-1 justify-end text-sm leading-tight font-normal duration-300 sm:opacity-65 sm:group-hover:opacity-100",children:t}),e.jsx(I,{icon:je,size:"small",label:m.formatMessage(U.tryNow),onClick:s,className:"h-7 w-7 transition-all duration-300 sm:opacity-65 sm:group-hover:opacity-100"})]})}const $=re({subtitleCards:{id:"prompt-new-user-onboarding.subtitle-cards-2",defaultMessage:"Try one of these ideas to see how ChatGPT works."},close:{id:"prompt-new-user-onboarding.close",defaultMessage:"Close"},skip:{id:"prompt-new-user-onboarding.skip",defaultMessage:"Skip"}});function Ae({cardItems:t,isUserTriggered:s,handleSelect:m,onClose:b}){const i=K(),[n,o]=c.useState(0),d=!pe(),l=(g,u)=>{o(u)};return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-token-text-secondary sm:tall:text-3xl sm:tall:font-medium sm:tall:font-medium sm:tall:mb-4 sm:short:mt-4 mx-auto min-h-0 max-w-[280px] shrink text-center text-base max-sm:mt-10 sm:max-w-[420px]",children:i.formatMessage($.subtitleCards)}),e.jsx("div",{className:"flex min-h-0 flex-1 flex-col justify-center gap-4",children:d?e.jsx(Ce,{items:t,onSelect:l,onSubmit:m,className:"flex min-h-0 flex-1 flex-col justify-center"}):e.jsx(ke,{items:t,onSelect:l,onSubmit:m,className:"sm:pb-6"})}),e.jsxs("div",{className:"mx-auto flex w-full shrink-0 flex-col gap-2 px-6 pb-6 sm:max-w-[380px]",children:[e.jsx(I,{size:"large",color:"primary",fullWidth:!0,onClick:g=>m(g,t[n],n),children:i.formatMessage(U.tryNow)}),e.jsx(I,{size:"large",color:"ghost",fullWidth:!0,onClick:()=>b?.(),children:s?i.formatMessage($.close):i.formatMessage($.skip)})]})]})}function Pe({starters:t,handleSelect:s,isUserTriggered:m,onClose:b}){const i=K();return c.useEffect(()=>{!t||t.length===0||t.forEach((n,o)=>{z.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:o,prompt_id:n.id??""})})},[t]),e.jsxs("div",{className:"tall:gap-16 flex h-full flex-col gap-6 sm:mx-auto sm:max-w-[480px] sm:px-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 px-5 pt-6 sm:px-8 sm:pt-7",children:[e.jsx("h2",{className:"text-token-text-primary text-center text-3xl font-medium",children:i.formatMessage(U.promptOnboardingTitle)}),e.jsx("p",{className:"text-token-text-secondary text-center text-base",children:i.formatMessage(U.promptOnboardingSubtitle)})]}),e.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto px-2 pb-8",children:e.jsx("ul",{className:"divide-token-border-light divide-y",children:t.map((n,o)=>e.jsx(Se,{item:n,onClick:(d,l)=>s(d,l,o)},n.id??o))})}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx(I,{size:"large",color:"secondary",fullWidth:!0,onClick:()=>b?.(),children:m?i.formatMessage($.close):i.formatMessage($.skip)})})]})}function We({clientThreadId:t,onClose:s}){const[m,b]=c.useState(!1),i=K(),n=be({clientThreadId:t}),{markAsViewed:o,isUserTriggered:d,onboardingStyle:l}=ye();c.useEffect(()=>{o(),z.logEventWithStatsig("Onboarding Shown","chatgpt_onboarding_flow_shown",{isUserTriggered:d?"true":"false"})},[o,d]);const g=ve(),u=c.useMemo(()=>{const w=d?g:g.filter(p=>p.isFeatured);return l==="list"&&!d?w.slice(0,4):w},[g,l,d]);c.useEffect(()=>{u.length>0&&de(u,t)},[u,t]);const k=(w,p,O)=>{try{s?.(),n({suggestedPrompt:p,index:O,isOnboarding:!d}),z.logEventWithStatsig("Onboarding Try Prompt","chatgpt_onboarding_flow_try_prompt",{index:O,prompt_id:p.id??String(O),isUserTriggered:d?"true":"false"})}catch(r){z.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{error:r instanceof Error?r.message:String(r)})}},_=()=>{z.logEventWithStatsig("Onboarding Dismissed","chatgpt_onboarding_flow_dismissed",{isUserTriggered:d?"true":"false"}),s?.()},A=()=>{d?_():b(!0)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"absolute inset-0 bg-black/60","aria-hidden":"true",onClick:w=>{w.stopPropagation(),d&&_()}}),e.jsx(Q,{children:e.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.35},className:"bg-token-bg-primary relative z-10 flex h-full w-full flex-col items-center justify-center rounded-none",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},onClick:w=>w.stopPropagation(),children:e.jsxs("div",{className:"flex max-h-full w-full flex-col gap-6 max-sm:h-full",children:[e.jsx("div",{className:"absolute end-3 top-3 z-20 hidden sm:block",children:e.jsx(I,{icon:ue,onClick:_,color:"ghost",className:"h-9 w-9",label:i.formatMessage($.close)})}),m?e.jsx(Le,{onClose:_}):l==="cards"?e.jsx(Ae,{cardItems:u,isUserTriggered:d,handleSelect:k,onClose:A}):e.jsx(Pe,{starters:u,handleSelect:k,isUserTriggered:d,onClose:A})]})})})]})}function Le({onClose:t}){const{markAsViewed:s}=me(fe.Onboarding);return c.useEffect(()=>{s()},[s]),e.jsxs("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center gap-16 p-6 sm:max-w-[380px]",children:[e.jsxs("div",{className:"flex min-h-0 flex-col items-center justify-center gap-4 max-sm:flex-1",children:[e.jsx(W.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:360,damping:24,mass:.8,duration:.6},children:e.jsx(xe,{className:"text-token-text-primary h-10 w-10 text-5xl"})}),e.jsx(W.p,{className:"text-token-text-primary text-center text-3xl",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.5},children:e.jsx(te,{...U.allSet})})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[e.jsx("div",{className:"text-token-text-secondary relative mt-auto w-full text-center text-base",children:e.jsx(ge,{})}),e.jsx(I,{size:"large",color:"primary",fullWidth:!0,onClick:t,children:e.jsx(te,{...U.done})})]})]})}export{We as default};
//# sourceMappingURL=clqnwlvuui0jqkcs.js.map
