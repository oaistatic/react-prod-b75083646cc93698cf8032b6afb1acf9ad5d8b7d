import{j as e,l as S,n as T,d as E,M as p}from"./lu2xqwqmjc95q6j6.js";import{eT as F,bg as h,R as v,d as q,ij as M,c6 as R,a as I,q as O,nK as P,gP as b,nL as U,dS as B,dU as A}from"./hml6mmd5fyx85si7.js";import{c as K}from"./idnt7o3g1nnw0r5k.js";function C(){return e.jsx(F,{className:"icon-sm text-token-text-tertiary ms-1"})}function k({onChange:t,enabled:s,Icon:a,label:n,labelValues:d,description:o,onClickInfo:r,tooltip:i,tooltipValues:u,hasPadding:g=!0,className:m,disabled:c=!1,messageAfterTooltip:l=void 0}){return e.jsx(K,{className:q("justify-start",g?"py-6":"py-0",m),children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(M,{label:"",disabled:c,enabled:s,onChange:t}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[a&&e.jsx(a,{className:"icon me-1.5"}),n&&e.jsx(p,{...n,values:d}),i&&e.jsx(R,{interactive:!0,label:e.jsx(p,{...i,values:u}),side:"top",children:r?e.jsx("button",{className:"block h-full",onClick:r,children:e.jsx(C,{})}):e.jsx(C,{})}),l&&e.jsx("span",{className:"text-token-text-secondary ps-1 text-sm",children:e.jsx(p,{...l})})]})]}),o&&e.jsx("span",{className:"text-token-text-secondary ms-14 text-sm",children:e.jsx(p,{...o})})]})})}function G({workspaceId:t,Icon:s,label:a,description:n,onClickInfo:d,feature:o,value:r,tooltip:i,hasPadding:u=!0,className:g,disabled:m=!1,overrideDisplayValue:c=void 0,messageAfterTooltip:l=void 0}){const _=h(),j=S(),{variables:y,mutate:f}=T({mutationFn:({feature:x,enabled:N})=>v.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:x,value:N}}),onSettled:()=>{j.invalidateQueries({queryKey:["workspace-settings",t]})},onError:()=>{_.danger(w.featureSettingsUpdateFailed,{toastId:"workspace_beta_feature_toggle_row"})}});return e.jsx(k,{onChange:x=>{f({feature:o,enabled:x})},enabled:c??y?.enabled??r,Icon:s,label:a,description:n,tooltip:i,hasPadding:u,className:g,disabled:m,messageAfterTooltip:l,onClickInfo:d})}function W({connectorId:t,workspaceId:s,Icon:a,label:n,tooltip:d,tooltipValues:o,messageAfterTooltip:r,description:i,labelValues:u,disabled:g}){const m=h(),c=S(),l=I(),_=O(l),{enabled:j,isLoading:y}=P(t,b.ADMIN_SETTING,"workspace_settings"),{variables:f,mutate:x}=T({mutationFn:N=>v.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:s,connector_id:t}},requestBody:{enabled:N}}),onSettled:()=>{c.invalidateQueries({queryKey:U(_?.normalizedAccountUserId,"workspace_settings",b.ADMIN_SETTING)}),t===B[A.GITHUB_CONNECTOR]&&!f&&c.invalidateQueries({queryKey:["workspace-settings",s]})},onError:()=>{m.danger(w.featureSettingsUpdateFailed,{toastId:"workspace_platform_connector_toggle_row"})}});return e.jsx(k,{onChange:x,enabled:f??!!j,Icon:a,label:n,labelValues:u,disabled:y||g,tooltip:d,tooltipValues:o,messageAfterTooltip:r,description:i})}const w=E({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});export{G as B,C as S,W};
//# sourceMappingURL=mi7vph3ys1oeyn7u.js.map
