import{lI as I,e5 as h,gm as m,eP as E,iX as R,aO as M,aE as T,ar as F,cW as O,eE as B,ef as N,gg as A}from"./hml6mmd5fyx85si7.js";import{N as D,b as H,a as Q,r as s,l as _,j as e}from"./lu2xqwqmjc95q6j6.js";import{C as k}from"./iv9cwo4pw9mxn1rf.js";import{r as L,u as $,s as W,C as y,a as q,g as G,b as j,T as K,c as V}from"./rseqzngxzbdt1oxg.js";import{T as X,C as z}from"./bx9ckeaumbwzn2eu.js";import{g as J}from"./nv7zjskuxqbd0a8k.js";import{C as b,T as U}from"./b5mk7g3hp5gwjh3g.js";import"./em6xteal3laxzbp5.js";import"./bfcxfvncw1c0blhg.js";import"./jy1u8exw8iz2slve.js";import"./ndox4jgq2pedhhgi.js";import"./gy64pge8qevmvg7e.js";import"./glo5fx5nh6p199c2.js";import"./fi4t5vltimyk5jia.js";import"./bim6j1enukewtwft.js";import"./n7si32a8uoeznh1u.js";import"./clcq5kxjm77x0raa.js";import"./d0g29t0qm74gluj7.js";import"./d7o4nful0h1qw8zk.js";import"./cdnu0xlioh6eeshn.js";import"./bk8slwxjkdlmxjxm.js";import"./fc2c76vpc3m2kj8q.js";import"./isqkn4xlzoktkvfr.js";import"./ipg3e8rb8w1bw4eb.js";import"./gnhjnh2n0u3gy6qx.js";import"./ejklrllfl9wcn2za.js";import"./ik8y7nlve9mzjttb.js";import"./isxemcalu9537a8n.js";import"./e0pswmo7irlt62pp.js";import"./nsxv1nyryaz0gxvd.js";import"./edbh3e4r4nwc2qmv.js";const Me=()=>(L(),null),Fe=I(function(){const a=D(),[o]=H(),u=Q(),p=h(a.conversationId),i=m(o.get("readonly"),!1),c=m(o.get("isFullScreen"),!1),d=m(o.get("header"),!0),l=m(o.get("appPreview"),!1),r=E(),x=R(),P=m(o.get("hideBottomComposer"),!!i),n=h(a.canmoreId),t=p,f=$();s.useEffect(()=>{W({type:y.Textdoc,textdocId:n})},[n]),q(t,{kind:M.PrimaryAssistant});const g=_();if(s.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{g.invalidateQueries(G({clientThreadId:t}))},0),T.releaseThread(t)}),[t,g]),s.useEffect(()=>{n||u("/")},[n,u]),s.useEffect(()=>{j().sendMessage({type:b.Loaded})},[n]),!n||f?.type!==y.Textdoc)return null;const w=()=>{j().sendMessage({type:b.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(F,{clientThreadId:t,children:e.jsx(O,{clientThreadId:t,children:e.jsx(K,{clientThreadId:t,children:l?e.jsx(B,{children:e.jsx(Y,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(X,{clientThreadId:t,disableScroll:!r,textdocId:f.textdocId}),e.jsx(z,{})]}):e.jsx(U,{isEmbedded:!0,hideRunCode:!r,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:x,clientThreadId:t,focusedTextdoc:f,onClose:w},"textdocContent")})})})]})}),Y=({textdocId:C})=>{const a=s.useRef(null),o=V(C),[u,p]=s.useState(!1),i=o?.versions??[],c=N(i),d=s.useCallback(A(async l=>{const r=J(l.type,l.content);if(a.current&&(r==="react"||r==="html")){p(!0);const v=a.current.evalAsync({language:r,code:l.content});for await(const x of v)console.debug(x)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(k,{id:C,visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Me as clientLoader,Fe as default};
//# sourceMappingURL=etvyddihk5xm702l.js.map
